{"version":3,"file":"plugins/plugin.tts.js","mappings":";y6BAMO,IAAMA,EAAgB,WAW3B,SAPA,SAAAA,EAAYC,gGAAIC,CAAA,KAAAF,GAEdG,KAAKF,GAAKA,EAEVE,KAAKC,OACP,KAEA,EAAAC,IAAA,QAAAC,MAIA,SAAMF,GACJD,KAAKC,QAAUG,OAAOC,OAAO,CAAC,EAAGL,KAAKC,QAASA,EACjD,GAEA,CAAAC,IAAA,OAAAC,MACA,WAAQ,GAER,CAAAD,IAAA,0BAAAC,MAKA,SAAwBG,GACxB,GAEA,CAAAJ,IAAA,0BAAAC,MACA,WAA2B,GAE3B,CAAAD,IAAA,eAAAC,MAGA,SAAaI,GAAU,mFAAC,CApCG,4mDCL7BC,EAAA,kBAAAC,CAAA,MAAAC,EAAAD,EAAA,GAAAE,EAAAP,OAAAQ,UAAAC,EAAAF,EAAAG,eAAAC,EAAAX,OAAAY,gBAAA,SAAAN,EAAAD,EAAAE,GAAAD,EAAAD,GAAAE,EAAAR,KAAA,EAAAc,EAAA,mBAAAC,OAAAA,OAAA,GAAAC,EAAAF,EAAAG,UAAA,aAAAC,EAAAJ,EAAAK,eAAA,kBAAAC,EAAAN,EAAAO,aAAA,yBAAAC,EAAAf,EAAAD,EAAAE,GAAA,OAAAP,OAAAY,eAAAN,EAAAD,EAAA,CAAAN,MAAAQ,EAAAe,YAAA,EAAAC,cAAA,EAAAC,UAAA,IAAAlB,EAAAD,EAAA,KAAAgB,EAAA,aAAAf,GAAAe,EAAA,SAAAf,EAAAD,EAAAE,GAAA,OAAAD,EAAAD,GAAAE,CAAA,WAAAkB,EAAAnB,EAAAD,EAAAE,EAAAE,GAAA,IAAAI,EAAAR,GAAAA,EAAAG,qBAAAkB,EAAArB,EAAAqB,EAAAX,EAAAf,OAAA2B,OAAAd,EAAAL,WAAAS,EAAA,IAAAW,EAAAnB,GAAA,WAAAE,EAAAI,EAAA,WAAAhB,MAAA8B,EAAAvB,EAAAC,EAAAU,KAAAF,CAAA,UAAAe,EAAAxB,EAAAD,EAAAE,GAAA,WAAAwB,KAAA,SAAAC,IAAA1B,EAAA2B,KAAA5B,EAAAE,GAAA,OAAAD,GAAA,OAAAyB,KAAA,QAAAC,IAAA1B,EAAA,EAAAD,EAAAoB,KAAAA,EAAA,IAAAS,EAAA,iBAAAC,EAAA,iBAAAC,EAAA,YAAAC,EAAA,YAAAC,EAAA,YAAAZ,IAAA,UAAAa,IAAA,UAAAC,IAAA,KAAAC,EAAA,GAAApB,EAAAoB,EAAA1B,GAAA,8BAAA2B,EAAA1C,OAAA2C,eAAAC,EAAAF,GAAAA,EAAAA,EAAAG,EAAA,MAAAD,GAAAA,IAAArC,GAAAE,EAAAwB,KAAAW,EAAA7B,KAAA0B,EAAAG,GAAA,IAAAE,EAAAN,EAAAhC,UAAAkB,EAAAlB,UAAAR,OAAA2B,OAAAc,GAAA,SAAAM,EAAAzC,GAAA,0BAAA0C,SAAA,SAAA3C,GAAAgB,EAAAf,EAAAD,GAAA,SAAAC,GAAA,YAAA2C,QAAA5C,EAAAC,EAAA,gBAAA4C,EAAA5C,EAAAD,GAAA,SAAA8C,EAAA5C,EAAAI,EAAAE,EAAAE,GAAA,IAAAE,EAAAa,EAAAxB,EAAAC,GAAAD,EAAAK,GAAA,aAAAM,EAAAc,KAAA,KAAAZ,EAAAF,EAAAe,IAAAE,EAAAf,EAAApB,MAAA,OAAAmC,GAAA,UAAAkB,EAAAlB,IAAAzB,EAAAwB,KAAAC,EAAA,WAAA7B,EAAAgD,QAAAnB,EAAAoB,SAAAC,MAAA,SAAAjD,GAAA6C,EAAA,OAAA7C,EAAAO,EAAAE,EAAA,aAAAT,GAAA6C,EAAA,QAAA7C,EAAAO,EAAAE,EAAA,IAAAV,EAAAgD,QAAAnB,GAAAqB,MAAA,SAAAjD,GAAAa,EAAApB,MAAAO,EAAAO,EAAAM,EAAA,aAAAb,GAAA,OAAA6C,EAAA,QAAA7C,EAAAO,EAAAE,EAAA,IAAAA,EAAAE,EAAAe,IAAA,KAAAzB,EAAAI,EAAA,gBAAAZ,MAAA,SAAAO,EAAAG,GAAA,SAAA+C,IAAA,WAAAnD,GAAA,SAAAA,EAAAE,GAAA4C,EAAA7C,EAAAG,EAAAJ,EAAAE,EAAA,WAAAA,EAAAA,EAAAA,EAAAgD,KAAAC,EAAAA,GAAAA,GAAA,aAAA3B,EAAAxB,EAAAE,EAAAE,GAAA,IAAAE,EAAAuB,EAAA,gBAAArB,EAAAE,GAAA,GAAAJ,IAAAyB,EAAA,MAAAqB,MAAA,mCAAA9C,IAAA0B,EAAA,cAAAxB,EAAA,MAAAE,EAAA,OAAAhB,MAAAO,EAAAoD,MAAA,OAAAjD,EAAAkD,OAAA9C,EAAAJ,EAAAuB,IAAAjB,IAAA,KAAAE,EAAAR,EAAAmD,SAAA,GAAA3C,EAAA,KAAAE,EAAA0C,EAAA5C,EAAAR,GAAA,GAAAU,EAAA,IAAAA,IAAAmB,EAAA,gBAAAnB,CAAA,cAAAV,EAAAkD,OAAAlD,EAAAqD,KAAArD,EAAAsD,MAAAtD,EAAAuB,SAAA,aAAAvB,EAAAkD,OAAA,IAAAhD,IAAAuB,EAAA,MAAAvB,EAAA0B,EAAA5B,EAAAuB,IAAAvB,EAAAuD,kBAAAvD,EAAAuB,IAAA,gBAAAvB,EAAAkD,QAAAlD,EAAAwD,OAAA,SAAAxD,EAAAuB,KAAArB,EAAAyB,EAAA,IAAAK,EAAAX,EAAAzB,EAAAE,EAAAE,GAAA,cAAAgC,EAAAV,KAAA,IAAApB,EAAAF,EAAAiD,KAAArB,EAAAF,EAAAM,EAAAT,MAAAM,EAAA,gBAAAvC,MAAA0C,EAAAT,IAAA0B,KAAAjD,EAAAiD,KAAA,WAAAjB,EAAAV,OAAApB,EAAA0B,EAAA5B,EAAAkD,OAAA,QAAAlD,EAAAuB,IAAAS,EAAAT,IAAA,YAAA6B,EAAAxD,EAAAE,GAAA,IAAAE,EAAAF,EAAAoD,OAAAhD,EAAAN,EAAAW,SAAAP,GAAA,GAAAE,IAAAL,EAAA,OAAAC,EAAAqD,SAAA,eAAAnD,GAAAJ,EAAAW,SAAAkD,SAAA3D,EAAAoD,OAAA,SAAApD,EAAAyB,IAAA1B,EAAAuD,EAAAxD,EAAAE,GAAA,UAAAA,EAAAoD,SAAA,WAAAlD,IAAAF,EAAAoD,OAAA,QAAApD,EAAAyB,IAAA,IAAAmC,UAAA,oCAAA1D,EAAA,aAAA6B,EAAA,IAAAzB,EAAAiB,EAAAnB,EAAAN,EAAAW,SAAAT,EAAAyB,KAAA,aAAAnB,EAAAkB,KAAA,OAAAxB,EAAAoD,OAAA,QAAApD,EAAAyB,IAAAnB,EAAAmB,IAAAzB,EAAAqD,SAAA,KAAAtB,EAAA,IAAAvB,EAAAF,EAAAmB,IAAA,OAAAjB,EAAAA,EAAA2C,MAAAnD,EAAAF,EAAA+D,YAAArD,EAAAhB,MAAAQ,EAAA8D,KAAAhE,EAAAiE,QAAA,WAAA/D,EAAAoD,SAAApD,EAAAoD,OAAA,OAAApD,EAAAyB,IAAA1B,GAAAC,EAAAqD,SAAA,KAAAtB,GAAAvB,GAAAR,EAAAoD,OAAA,QAAApD,EAAAyB,IAAA,IAAAmC,UAAA,oCAAA5D,EAAAqD,SAAA,KAAAtB,EAAA,UAAAiC,EAAAjE,GAAA,IAAAD,EAAA,CAAAmE,OAAAlE,EAAA,SAAAA,IAAAD,EAAAoE,SAAAnE,EAAA,SAAAA,IAAAD,EAAAqE,WAAApE,EAAA,GAAAD,EAAAsE,SAAArE,EAAA,SAAAsE,WAAAC,KAAAxE,EAAA,UAAAyE,EAAAxE,GAAA,IAAAD,EAAAC,EAAAyE,YAAA,GAAA1E,EAAA0B,KAAA,gBAAA1B,EAAA2B,IAAA1B,EAAAyE,WAAA1E,CAAA,UAAAuB,EAAAtB,GAAA,KAAAsE,WAAA,EAAAJ,OAAA,SAAAlE,EAAA0C,QAAAuB,EAAA,WAAAS,OAAA,YAAAnC,EAAAxC,GAAA,GAAAA,GAAA,KAAAA,EAAA,KAAAE,EAAAF,EAAAU,GAAA,GAAAR,EAAA,OAAAA,EAAA0B,KAAA5B,GAAA,sBAAAA,EAAAgE,KAAA,OAAAhE,EAAA,IAAA4E,MAAA5E,EAAA6E,QAAA,KAAAvE,GAAA,EAAAE,EAAA,SAAAwD,IAAA,OAAA1D,EAAAN,EAAA6E,QAAA,GAAAzE,EAAAwB,KAAA5B,EAAAM,GAAA,OAAA0D,EAAAtE,MAAAM,EAAAM,GAAA0D,EAAAX,MAAA,EAAAW,EAAA,OAAAA,EAAAtE,MAAAO,EAAA+D,EAAAX,MAAA,EAAAW,CAAA,SAAAxD,EAAAwD,KAAAxD,CAAA,YAAAsD,UAAAf,EAAA/C,GAAA,2BAAAkC,EAAA/B,UAAAgC,EAAA7B,EAAAmC,EAAA,eAAA/C,MAAAyC,EAAAjB,cAAA,IAAAZ,EAAA6B,EAAA,eAAAzC,MAAAwC,EAAAhB,cAAA,IAAAgB,EAAA4C,YAAA9D,EAAAmB,EAAArB,EAAA,qBAAAd,EAAA+E,oBAAA,SAAA9E,GAAA,IAAAD,EAAA,mBAAAC,GAAAA,EAAA+E,YAAA,QAAAhF,IAAAA,IAAAkC,GAAA,uBAAAlC,EAAA8E,aAAA9E,EAAAiF,MAAA,EAAAjF,EAAAkF,KAAA,SAAAjF,GAAA,OAAAN,OAAAwF,eAAAxF,OAAAwF,eAAAlF,EAAAkC,IAAAlC,EAAAmF,UAAAjD,EAAAnB,EAAAf,EAAAa,EAAA,sBAAAb,EAAAE,UAAAR,OAAA2B,OAAAmB,GAAAxC,CAAA,EAAAD,EAAAqF,MAAA,SAAApF,GAAA,OAAAgD,QAAAhD,EAAA,EAAAyC,EAAAG,EAAA1C,WAAAa,EAAA6B,EAAA1C,UAAAS,GAAA,0BAAAZ,EAAA6C,cAAAA,EAAA7C,EAAAsF,MAAA,SAAArF,EAAAC,EAAAE,EAAAE,EAAAE,QAAA,IAAAA,IAAAA,EAAA+E,SAAA,IAAA7E,EAAA,IAAAmC,EAAAzB,EAAAnB,EAAAC,EAAAE,EAAAE,GAAAE,GAAA,OAAAR,EAAA+E,oBAAA7E,GAAAQ,EAAAA,EAAAsD,OAAAd,MAAA,SAAAjD,GAAA,OAAAA,EAAAoD,KAAApD,EAAAP,MAAAgB,EAAAsD,MAAA,KAAAtB,EAAAD,GAAAzB,EAAAyB,EAAA3B,EAAA,aAAAE,EAAAyB,EAAA/B,GAAA,0BAAAM,EAAAyB,EAAA,qDAAAzC,EAAAwF,KAAA,SAAAvF,GAAA,IAAAD,EAAAL,OAAAM,GAAAC,EAAA,WAAAE,KAAAJ,EAAAE,EAAAsE,KAAApE,GAAA,OAAAF,EAAAuF,UAAA,SAAAzB,IAAA,KAAA9D,EAAA2E,QAAA,KAAA5E,EAAAC,EAAAwF,MAAA,GAAAzF,KAAAD,EAAA,OAAAgE,EAAAtE,MAAAO,EAAA+D,EAAAX,MAAA,EAAAW,CAAA,QAAAA,EAAAX,MAAA,EAAAW,CAAA,GAAAhE,EAAAwC,OAAAA,EAAAjB,EAAApB,UAAA,CAAA6E,YAAAzD,EAAAoD,MAAA,SAAA3E,GAAA,QAAA2F,KAAA,OAAA3B,KAAA,OAAAP,KAAA,KAAAC,MAAAzD,EAAA,KAAAoD,MAAA,OAAAE,SAAA,UAAAD,OAAA,YAAA3B,IAAA1B,EAAA,KAAAsE,WAAA5B,QAAA8B,IAAAzE,EAAA,QAAAE,KAAA,WAAAA,EAAA0F,OAAA,IAAAxF,EAAAwB,KAAA,KAAA1B,KAAA0E,OAAA1E,EAAA2F,MAAA,WAAA3F,GAAAD,EAAA,EAAA6F,KAAA,gBAAAzC,MAAA,MAAApD,EAAA,KAAAsE,WAAA,GAAAG,WAAA,aAAAzE,EAAAyB,KAAA,MAAAzB,EAAA0B,IAAA,YAAAoE,IAAA,EAAApC,kBAAA,SAAA3D,GAAA,QAAAqD,KAAA,MAAArD,EAAA,IAAAE,EAAA,cAAA8F,EAAA5F,EAAAE,GAAA,OAAAI,EAAAgB,KAAA,QAAAhB,EAAAiB,IAAA3B,EAAAE,EAAA8D,KAAA5D,EAAAE,IAAAJ,EAAAoD,OAAA,OAAApD,EAAAyB,IAAA1B,KAAAK,CAAA,SAAAA,EAAA,KAAAiE,WAAAM,OAAA,EAAAvE,GAAA,IAAAA,EAAA,KAAAE,EAAA,KAAA+D,WAAAjE,GAAAI,EAAAF,EAAAkE,WAAA,YAAAlE,EAAA2D,OAAA,OAAA6B,EAAA,UAAAxF,EAAA2D,QAAA,KAAAwB,KAAA,KAAA/E,EAAAR,EAAAwB,KAAApB,EAAA,YAAAM,EAAAV,EAAAwB,KAAApB,EAAA,iBAAAI,GAAAE,EAAA,SAAA6E,KAAAnF,EAAA4D,SAAA,OAAA4B,EAAAxF,EAAA4D,UAAA,WAAAuB,KAAAnF,EAAA6D,WAAA,OAAA2B,EAAAxF,EAAA6D,WAAA,SAAAzD,GAAA,QAAA+E,KAAAnF,EAAA4D,SAAA,OAAA4B,EAAAxF,EAAA4D,UAAA,YAAAtD,EAAA,MAAAsC,MAAA,kDAAAuC,KAAAnF,EAAA6D,WAAA,OAAA2B,EAAAxF,EAAA6D,WAAA,KAAAT,OAAA,SAAA3D,EAAAD,GAAA,QAAAE,EAAA,KAAAqE,WAAAM,OAAA,EAAA3E,GAAA,IAAAA,EAAA,KAAAI,EAAA,KAAAiE,WAAArE,GAAA,GAAAI,EAAA6D,QAAA,KAAAwB,MAAAvF,EAAAwB,KAAAtB,EAAA,oBAAAqF,KAAArF,EAAA+D,WAAA,KAAA7D,EAAAF,EAAA,OAAAE,IAAA,UAAAP,GAAA,aAAAA,IAAAO,EAAA2D,QAAAnE,GAAAA,GAAAQ,EAAA6D,aAAA7D,EAAA,UAAAE,EAAAF,EAAAA,EAAAkE,WAAA,UAAAhE,EAAAgB,KAAAzB,EAAAS,EAAAiB,IAAA3B,EAAAQ,GAAA,KAAA8C,OAAA,YAAAU,KAAAxD,EAAA6D,WAAApC,GAAA,KAAAgE,SAAAvF,EAAA,EAAAuF,SAAA,SAAAhG,EAAAD,GAAA,aAAAC,EAAAyB,KAAA,MAAAzB,EAAA0B,IAAA,gBAAA1B,EAAAyB,MAAA,aAAAzB,EAAAyB,KAAA,KAAAsC,KAAA/D,EAAA0B,IAAA,WAAA1B,EAAAyB,MAAA,KAAAqE,KAAA,KAAApE,IAAA1B,EAAA0B,IAAA,KAAA2B,OAAA,cAAAU,KAAA,kBAAA/D,EAAAyB,MAAA1B,IAAA,KAAAgE,KAAAhE,GAAAiC,CAAA,EAAAiE,OAAA,SAAAjG,GAAA,QAAAD,EAAA,KAAAuE,WAAAM,OAAA,EAAA7E,GAAA,IAAAA,EAAA,KAAAE,EAAA,KAAAqE,WAAAvE,GAAA,GAAAE,EAAAmE,aAAApE,EAAA,YAAAgG,SAAA/F,EAAAwE,WAAAxE,EAAAoE,UAAAG,EAAAvE,GAAA+B,CAAA,GAAAkE,MAAA,SAAAlG,GAAA,QAAAD,EAAA,KAAAuE,WAAAM,OAAA,EAAA7E,GAAA,IAAAA,EAAA,KAAAE,EAAA,KAAAqE,WAAAvE,GAAA,GAAAE,EAAAiE,SAAAlE,EAAA,KAAAG,EAAAF,EAAAwE,WAAA,aAAAtE,EAAAsB,KAAA,KAAApB,EAAAF,EAAAuB,IAAA8C,EAAAvE,EAAA,QAAAI,CAAA,QAAA8C,MAAA,0BAAAgD,cAAA,SAAApG,EAAAE,EAAAE,GAAA,YAAAmD,SAAA,CAAA5C,SAAA6B,EAAAxC,GAAA+D,WAAA7D,EAAA+D,QAAA7D,GAAA,cAAAkD,SAAA,KAAA3B,IAAA1B,GAAAgC,CAAA,GAAAjC,CAAA,UAAAqG,EAAAjG,EAAAH,EAAAD,EAAAE,EAAAI,EAAAI,EAAAE,GAAA,QAAAJ,EAAAJ,EAAAM,GAAAE,GAAAE,EAAAN,EAAAd,KAAA,OAAAU,GAAA,YAAAJ,EAAAI,EAAA,CAAAI,EAAA6C,KAAApD,EAAAa,GAAAyE,QAAAvC,QAAAlC,GAAAoC,KAAAhD,EAAAI,EAAA,UAAAgG,EAAAtG,EAAAE,GAAA,QAAAD,EAAA,EAAAA,EAAAC,EAAA2E,OAAA5E,IAAA,KAAAK,EAAAJ,EAAAD,GAAAK,EAAAW,WAAAX,EAAAW,aAAA,EAAAX,EAAAY,cAAA,YAAAZ,IAAAA,EAAAa,UAAA,GAAAxB,OAAAY,eAAAP,EAAAuG,EAAAjG,EAAAb,KAAAa,EAAA,WAAAiG,EAAAtG,GAAA,IAAAO,EAAA,SAAAP,EAAAC,GAAA,aAAA6C,EAAA9C,KAAAA,EAAA,OAAAA,EAAA,IAAAD,EAAAC,EAAAQ,OAAA+F,aAAA,YAAAxG,EAAA,KAAAQ,EAAAR,EAAA4B,KAAA3B,EAAAC,UAAA,aAAA6C,EAAAvC,GAAA,OAAAA,EAAA,UAAAsD,UAAA,uDAAA2C,OAAAxG,EAAA,CAAAyG,CAAAzG,GAAA,gBAAA8C,EAAAvC,GAAAA,EAAAA,EAAA,GACA,IAGqBmG,EAAS,WAO5B,SAAAA,EAAYC,EAAWC,EAAYC,EAAMC,IAX3C,SAAArG,EAAAN,GAAA,KAAAM,aAAAN,GAAA,UAAA0D,UAAA,qCAWsDxE,CAAA,KAAAqH,GAClDpH,KAAKqH,UAAYA,EACjBrH,KAAKsH,WAAaA,EAClBtH,KAAKuH,KAAOA,EACZvH,KAAKwH,UAAYA,CACnB,CAEA,OAlBF/G,EAkBE2G,EAlBF1G,EAkBE,EAAAR,IAAA,QAAAC,OAlBFU,EAkBEL,IAAAmF,MAKA,SAAA8B,EAAmBC,EAAcL,GAAS,IAAAM,EAAA,OAAAnH,IAAAqB,MAAA,SAAA+F,GAAA,cAAAA,EAAAxB,KAAAwB,EAAAnD,MAAA,cAAAmD,EAAAnD,KAAA,EACnBoD,EAAEC,KAAK,CAC1B3F,KAAM,MACN4F,KAAKC,EAAAA,EAAAA,GAAeN,EAAc,CAAEO,UAAWZ,IAC/Ca,OAAO,EACPC,UAAW,CACTC,gBAAiBC,OAAOvI,GAAGwI,aAE7B,OAPU,OAANX,EAAMC,EAAA1D,KAAA0D,EAAAvD,OAAA,SAQL+C,EAAUmB,yBAAyBlB,EAAWM,IAAO,wBAAAC,EAAArB,OAAA,GAAAkB,EAAA,IAd9De,EAlBF,eAAA9H,EAAA,KAAAD,EAAAgI,UAAA,WAAAzC,SAAA,SAAArF,EAAAI,GAAA,IAAAI,EAAAN,EAAA6H,MAAAhI,EAAAD,GAAA,SAAAkI,EAAA9H,GAAAiG,EAAA3F,EAAAR,EAAAI,EAAA4H,EAAAC,EAAA,OAAA/H,EAAA,UAAA+H,EAAA/H,GAAAiG,EAAA3F,EAAAR,EAAAI,EAAA4H,EAAAC,EAAA,QAAA/H,EAAA,CAAA8H,OAAA,OAiCG,SAViBE,EAAAC,GAAA,OAAAN,EAAAE,MAAC,KAADD,UAAA,IAYlB,CAAAvI,IAAA,2BAAAC,MAMA,SAAgCkH,EAAW0B,GACzC,OAAOA,EAAeC,KAAI,SAAC3H,EAAGJ,GAC5B,IAAMgI,EAAqB7B,EAAU8B,eAAe7H,EAAEiF,MAAM,IACtD6C,EAAgB/B,EAAUgC,uBAAuB/H,EAAE,IACzD,OAAO,IAAI+F,EAAUC,EAAWpG,EAAGkI,EAAeF,EACpD,GACF,GAEA,CAAA/I,IAAA,iBAAAC,MAaA,SAAsBkJ,GACpB,GAAIA,EAAM/D,OAAS,EAAG,OAAO+D,EAE7B,IAAAC,EAAAC,EAAgCF,EAAK,GAA9BG,EAASF,EAAA,GAAEG,EAAUH,EAAA,GAC5BI,EAAAH,EAA8BC,EAAS,GAAhCG,EAAID,EAAA,GAAEE,EAAMF,EAAA,GACbG,EADoBH,EAAA,GACJC,EAChBG,EAAeL,EAAW,GAAKA,EAAW,GAC1CM,EAAcN,EAAW,GAAKA,EAAW,GACzCO,EAAcP,EAAW,GAS/B,OAPII,EAAsB,GAAdE,IAEVP,EAAU,GAAKQ,EAEfR,EAAU,GAAKI,EAASE,GAGnBT,CACT,GAEA,CAAAnJ,IAAA,yBAAAC,MAKA,SAA8BoH,GAI5B,OAAOA,EAAK0C,QAAQ,WAAY,GAClC,IA5FFvJ,GAAAqG,EAAAtG,EAAAC,GAAAN,OAAAY,eAAAP,EAAA,aAAAmB,UAAA,IAAAnB,EAAA,IAAAA,EAAAC,EAAAG,EAkBE2H,CA0EC,CAxF2B,sPCJ9BhI,EAAA,kBAAAC,CAAA,MAAAC,EAAAD,EAAA,GAAAE,EAAAP,OAAAQ,UAAAC,EAAAF,EAAAG,eAAAC,EAAAX,OAAAY,gBAAA,SAAAN,EAAAD,EAAAE,GAAAD,EAAAD,GAAAE,EAAAR,KAAA,EAAAc,EAAA,mBAAAC,OAAAA,OAAA,GAAAC,EAAAF,EAAAG,UAAA,aAAAC,EAAAJ,EAAAK,eAAA,kBAAAC,EAAAN,EAAAO,aAAA,yBAAAC,EAAAf,EAAAD,EAAAE,GAAA,OAAAP,OAAAY,eAAAN,EAAAD,EAAA,CAAAN,MAAAQ,EAAAe,YAAA,EAAAC,cAAA,EAAAC,UAAA,IAAAlB,EAAAD,EAAA,KAAAgB,EAAA,aAAAf,GAAAe,EAAA,SAAAf,EAAAD,EAAAE,GAAA,OAAAD,EAAAD,GAAAE,CAAA,WAAAkB,EAAAnB,EAAAD,EAAAE,EAAAE,GAAA,IAAAI,EAAAR,GAAAA,EAAAG,qBAAAkB,EAAArB,EAAAqB,EAAAX,EAAAf,OAAA2B,OAAAd,EAAAL,WAAAS,EAAA,IAAAW,EAAAnB,GAAA,WAAAE,EAAAI,EAAA,WAAAhB,MAAA8B,EAAAvB,EAAAC,EAAAU,KAAAF,CAAA,UAAAe,EAAAxB,EAAAD,EAAAE,GAAA,WAAAwB,KAAA,SAAAC,IAAA1B,EAAA2B,KAAA5B,EAAAE,GAAA,OAAAD,GAAA,OAAAyB,KAAA,QAAAC,IAAA1B,EAAA,EAAAD,EAAAoB,KAAAA,EAAA,IAAAS,EAAA,iBAAAC,EAAA,iBAAAC,EAAA,YAAAC,EAAA,YAAAC,EAAA,YAAAZ,IAAA,UAAAa,IAAA,UAAAC,IAAA,KAAAC,EAAA,GAAApB,EAAAoB,EAAA1B,GAAA,8BAAA2B,EAAA1C,OAAA2C,eAAAC,EAAAF,GAAAA,EAAAA,EAAAG,EAAA,MAAAD,GAAAA,IAAArC,GAAAE,EAAAwB,KAAAW,EAAA7B,KAAA0B,EAAAG,GAAA,IAAAE,EAAAN,EAAAhC,UAAAkB,EAAAlB,UAAAR,OAAA2B,OAAAc,GAAA,SAAAM,EAAAzC,GAAA,0BAAA0C,SAAA,SAAA3C,GAAAgB,EAAAf,EAAAD,GAAA,SAAAC,GAAA,YAAA2C,QAAA5C,EAAAC,EAAA,gBAAA4C,EAAA5C,EAAAD,GAAA,SAAA8C,EAAA5C,EAAAI,EAAAE,EAAAE,GAAA,IAAAE,EAAAa,EAAAxB,EAAAC,GAAAD,EAAAK,GAAA,aAAAM,EAAAc,KAAA,KAAAZ,EAAAF,EAAAe,IAAAE,EAAAf,EAAApB,MAAA,OAAAmC,GAAA,UAAAkB,EAAAlB,IAAAzB,EAAAwB,KAAAC,EAAA,WAAA7B,EAAAgD,QAAAnB,EAAAoB,SAAAC,MAAA,SAAAjD,GAAA6C,EAAA,OAAA7C,EAAAO,EAAAE,EAAA,aAAAT,GAAA6C,EAAA,QAAA7C,EAAAO,EAAAE,EAAA,IAAAV,EAAAgD,QAAAnB,GAAAqB,MAAA,SAAAjD,GAAAa,EAAApB,MAAAO,EAAAO,EAAAM,EAAA,aAAAb,GAAA,OAAA6C,EAAA,QAAA7C,EAAAO,EAAAE,EAAA,IAAAA,EAAAE,EAAAe,IAAA,KAAAzB,EAAAI,EAAA,gBAAAZ,MAAA,SAAAO,EAAAG,GAAA,SAAA+C,IAAA,WAAAnD,GAAA,SAAAA,EAAAE,GAAA4C,EAAA7C,EAAAG,EAAAJ,EAAAE,EAAA,WAAAA,EAAAA,EAAAA,EAAAgD,KAAAC,EAAAA,GAAAA,GAAA,aAAA3B,EAAAxB,EAAAE,EAAAE,GAAA,IAAAE,EAAAuB,EAAA,gBAAArB,EAAAE,GAAA,GAAAJ,IAAAyB,EAAA,MAAAqB,MAAA,mCAAA9C,IAAA0B,EAAA,cAAAxB,EAAA,MAAAE,EAAA,OAAAhB,MAAAO,EAAAoD,MAAA,OAAAjD,EAAAkD,OAAA9C,EAAAJ,EAAAuB,IAAAjB,IAAA,KAAAE,EAAAR,EAAAmD,SAAA,GAAA3C,EAAA,KAAAE,EAAA0C,EAAA5C,EAAAR,GAAA,GAAAU,EAAA,IAAAA,IAAAmB,EAAA,gBAAAnB,CAAA,cAAAV,EAAAkD,OAAAlD,EAAAqD,KAAArD,EAAAsD,MAAAtD,EAAAuB,SAAA,aAAAvB,EAAAkD,OAAA,IAAAhD,IAAAuB,EAAA,MAAAvB,EAAA0B,EAAA5B,EAAAuB,IAAAvB,EAAAuD,kBAAAvD,EAAAuB,IAAA,gBAAAvB,EAAAkD,QAAAlD,EAAAwD,OAAA,SAAAxD,EAAAuB,KAAArB,EAAAyB,EAAA,IAAAK,EAAAX,EAAAzB,EAAAE,EAAAE,GAAA,cAAAgC,EAAAV,KAAA,IAAApB,EAAAF,EAAAiD,KAAArB,EAAAF,EAAAM,EAAAT,MAAAM,EAAA,gBAAAvC,MAAA0C,EAAAT,IAAA0B,KAAAjD,EAAAiD,KAAA,WAAAjB,EAAAV,OAAApB,EAAA0B,EAAA5B,EAAAkD,OAAA,QAAAlD,EAAAuB,IAAAS,EAAAT,IAAA,YAAA6B,EAAAxD,EAAAE,GAAA,IAAAE,EAAAF,EAAAoD,OAAAhD,EAAAN,EAAAW,SAAAP,GAAA,GAAAE,IAAAL,EAAA,OAAAC,EAAAqD,SAAA,eAAAnD,GAAAJ,EAAAW,SAAAkD,SAAA3D,EAAAoD,OAAA,SAAApD,EAAAyB,IAAA1B,EAAAuD,EAAAxD,EAAAE,GAAA,UAAAA,EAAAoD,SAAA,WAAAlD,IAAAF,EAAAoD,OAAA,QAAApD,EAAAyB,IAAA,IAAAmC,UAAA,oCAAA1D,EAAA,aAAA6B,EAAA,IAAAzB,EAAAiB,EAAAnB,EAAAN,EAAAW,SAAAT,EAAAyB,KAAA,aAAAnB,EAAAkB,KAAA,OAAAxB,EAAAoD,OAAA,QAAApD,EAAAyB,IAAAnB,EAAAmB,IAAAzB,EAAAqD,SAAA,KAAAtB,EAAA,IAAAvB,EAAAF,EAAAmB,IAAA,OAAAjB,EAAAA,EAAA2C,MAAAnD,EAAAF,EAAA+D,YAAArD,EAAAhB,MAAAQ,EAAA8D,KAAAhE,EAAAiE,QAAA,WAAA/D,EAAAoD,SAAApD,EAAAoD,OAAA,OAAApD,EAAAyB,IAAA1B,GAAAC,EAAAqD,SAAA,KAAAtB,GAAAvB,GAAAR,EAAAoD,OAAA,QAAApD,EAAAyB,IAAA,IAAAmC,UAAA,oCAAA5D,EAAAqD,SAAA,KAAAtB,EAAA,UAAAiC,EAAAjE,GAAA,IAAAD,EAAA,CAAAmE,OAAAlE,EAAA,SAAAA,IAAAD,EAAAoE,SAAAnE,EAAA,SAAAA,IAAAD,EAAAqE,WAAApE,EAAA,GAAAD,EAAAsE,SAAArE,EAAA,SAAAsE,WAAAC,KAAAxE,EAAA,UAAAyE,EAAAxE,GAAA,IAAAD,EAAAC,EAAAyE,YAAA,GAAA1E,EAAA0B,KAAA,gBAAA1B,EAAA2B,IAAA1B,EAAAyE,WAAA1E,CAAA,UAAAuB,EAAAtB,GAAA,KAAAsE,WAAA,EAAAJ,OAAA,SAAAlE,EAAA0C,QAAAuB,EAAA,WAAAS,OAAA,YAAAnC,EAAAxC,GAAA,GAAAA,GAAA,KAAAA,EAAA,KAAAE,EAAAF,EAAAU,GAAA,GAAAR,EAAA,OAAAA,EAAA0B,KAAA5B,GAAA,sBAAAA,EAAAgE,KAAA,OAAAhE,EAAA,IAAA4E,MAAA5E,EAAA6E,QAAA,KAAAvE,GAAA,EAAAE,EAAA,SAAAwD,IAAA,OAAA1D,EAAAN,EAAA6E,QAAA,GAAAzE,EAAAwB,KAAA5B,EAAAM,GAAA,OAAA0D,EAAAtE,MAAAM,EAAAM,GAAA0D,EAAAX,MAAA,EAAAW,EAAA,OAAAA,EAAAtE,MAAAO,EAAA+D,EAAAX,MAAA,EAAAW,CAAA,SAAAxD,EAAAwD,KAAAxD,CAAA,YAAAsD,UAAAf,EAAA/C,GAAA,2BAAAkC,EAAA/B,UAAAgC,EAAA7B,EAAAmC,EAAA,eAAA/C,MAAAyC,EAAAjB,cAAA,IAAAZ,EAAA6B,EAAA,eAAAzC,MAAAwC,EAAAhB,cAAA,IAAAgB,EAAA4C,YAAA9D,EAAAmB,EAAArB,EAAA,qBAAAd,EAAA+E,oBAAA,SAAA9E,GAAA,IAAAD,EAAA,mBAAAC,GAAAA,EAAA+E,YAAA,QAAAhF,IAAAA,IAAAkC,GAAA,uBAAAlC,EAAA8E,aAAA9E,EAAAiF,MAAA,EAAAjF,EAAAkF,KAAA,SAAAjF,GAAA,OAAAN,OAAAwF,eAAAxF,OAAAwF,eAAAlF,EAAAkC,IAAAlC,EAAAmF,UAAAjD,EAAAnB,EAAAf,EAAAa,EAAA,sBAAAb,EAAAE,UAAAR,OAAA2B,OAAAmB,GAAAxC,CAAA,EAAAD,EAAAqF,MAAA,SAAApF,GAAA,OAAAgD,QAAAhD,EAAA,EAAAyC,EAAAG,EAAA1C,WAAAa,EAAA6B,EAAA1C,UAAAS,GAAA,0BAAAZ,EAAA6C,cAAAA,EAAA7C,EAAAsF,MAAA,SAAArF,EAAAC,EAAAE,EAAAE,EAAAE,QAAA,IAAAA,IAAAA,EAAA+E,SAAA,IAAA7E,EAAA,IAAAmC,EAAAzB,EAAAnB,EAAAC,EAAAE,EAAAE,GAAAE,GAAA,OAAAR,EAAA+E,oBAAA7E,GAAAQ,EAAAA,EAAAsD,OAAAd,MAAA,SAAAjD,GAAA,OAAAA,EAAAoD,KAAApD,EAAAP,MAAAgB,EAAAsD,MAAA,KAAAtB,EAAAD,GAAAzB,EAAAyB,EAAA3B,EAAA,aAAAE,EAAAyB,EAAA/B,GAAA,0BAAAM,EAAAyB,EAAA,qDAAAzC,EAAAwF,KAAA,SAAAvF,GAAA,IAAAD,EAAAL,OAAAM,GAAAC,EAAA,WAAAE,KAAAJ,EAAAE,EAAAsE,KAAApE,GAAA,OAAAF,EAAAuF,UAAA,SAAAzB,IAAA,KAAA9D,EAAA2E,QAAA,KAAA5E,EAAAC,EAAAwF,MAAA,GAAAzF,KAAAD,EAAA,OAAAgE,EAAAtE,MAAAO,EAAA+D,EAAAX,MAAA,EAAAW,CAAA,QAAAA,EAAAX,MAAA,EAAAW,CAAA,GAAAhE,EAAAwC,OAAAA,EAAAjB,EAAApB,UAAA,CAAA6E,YAAAzD,EAAAoD,MAAA,SAAA3E,GAAA,QAAA2F,KAAA,OAAA3B,KAAA,OAAAP,KAAA,KAAAC,MAAAzD,EAAA,KAAAoD,MAAA,OAAAE,SAAA,UAAAD,OAAA,YAAA3B,IAAA1B,EAAA,KAAAsE,WAAA5B,QAAA8B,IAAAzE,EAAA,QAAAE,KAAA,WAAAA,EAAA0F,OAAA,IAAAxF,EAAAwB,KAAA,KAAA1B,KAAA0E,OAAA1E,EAAA2F,MAAA,WAAA3F,GAAAD,EAAA,EAAA6F,KAAA,gBAAAzC,MAAA,MAAApD,EAAA,KAAAsE,WAAA,GAAAG,WAAA,aAAAzE,EAAAyB,KAAA,MAAAzB,EAAA0B,IAAA,YAAAoE,IAAA,EAAApC,kBAAA,SAAA3D,GAAA,QAAAqD,KAAA,MAAArD,EAAA,IAAAE,EAAA,cAAA8F,EAAA5F,EAAAE,GAAA,OAAAI,EAAAgB,KAAA,QAAAhB,EAAAiB,IAAA3B,EAAAE,EAAA8D,KAAA5D,EAAAE,IAAAJ,EAAAoD,OAAA,OAAApD,EAAAyB,IAAA1B,KAAAK,CAAA,SAAAA,EAAA,KAAAiE,WAAAM,OAAA,EAAAvE,GAAA,IAAAA,EAAA,KAAAE,EAAA,KAAA+D,WAAAjE,GAAAI,EAAAF,EAAAkE,WAAA,YAAAlE,EAAA2D,OAAA,OAAA6B,EAAA,UAAAxF,EAAA2D,QAAA,KAAAwB,KAAA,KAAA/E,EAAAR,EAAAwB,KAAApB,EAAA,YAAAM,EAAAV,EAAAwB,KAAApB,EAAA,iBAAAI,GAAAE,EAAA,SAAA6E,KAAAnF,EAAA4D,SAAA,OAAA4B,EAAAxF,EAAA4D,UAAA,WAAAuB,KAAAnF,EAAA6D,WAAA,OAAA2B,EAAAxF,EAAA6D,WAAA,SAAAzD,GAAA,QAAA+E,KAAAnF,EAAA4D,SAAA,OAAA4B,EAAAxF,EAAA4D,UAAA,YAAAtD,EAAA,MAAAsC,MAAA,kDAAAuC,KAAAnF,EAAA6D,WAAA,OAAA2B,EAAAxF,EAAA6D,WAAA,KAAAT,OAAA,SAAA3D,EAAAD,GAAA,QAAAE,EAAA,KAAAqE,WAAAM,OAAA,EAAA3E,GAAA,IAAAA,EAAA,KAAAI,EAAA,KAAAiE,WAAArE,GAAA,GAAAI,EAAA6D,QAAA,KAAAwB,MAAAvF,EAAAwB,KAAAtB,EAAA,oBAAAqF,KAAArF,EAAA+D,WAAA,KAAA7D,EAAAF,EAAA,OAAAE,IAAA,UAAAP,GAAA,aAAAA,IAAAO,EAAA2D,QAAAnE,GAAAA,GAAAQ,EAAA6D,aAAA7D,EAAA,UAAAE,EAAAF,EAAAA,EAAAkE,WAAA,UAAAhE,EAAAgB,KAAAzB,EAAAS,EAAAiB,IAAA3B,EAAAQ,GAAA,KAAA8C,OAAA,YAAAU,KAAAxD,EAAA6D,WAAApC,GAAA,KAAAgE,SAAAvF,EAAA,EAAAuF,SAAA,SAAAhG,EAAAD,GAAA,aAAAC,EAAAyB,KAAA,MAAAzB,EAAA0B,IAAA,gBAAA1B,EAAAyB,MAAA,aAAAzB,EAAAyB,KAAA,KAAAsC,KAAA/D,EAAA0B,IAAA,WAAA1B,EAAAyB,MAAA,KAAAqE,KAAA,KAAApE,IAAA1B,EAAA0B,IAAA,KAAA2B,OAAA,cAAAU,KAAA,kBAAA/D,EAAAyB,MAAA1B,IAAA,KAAAgE,KAAAhE,GAAAiC,CAAA,EAAAiE,OAAA,SAAAjG,GAAA,QAAAD,EAAA,KAAAuE,WAAAM,OAAA,EAAA7E,GAAA,IAAAA,EAAA,KAAAE,EAAA,KAAAqE,WAAAvE,GAAA,GAAAE,EAAAmE,aAAApE,EAAA,YAAAgG,SAAA/F,EAAAwE,WAAAxE,EAAAoE,UAAAG,EAAAvE,GAAA+B,CAAA,GAAAkE,MAAA,SAAAlG,GAAA,QAAAD,EAAA,KAAAuE,WAAAM,OAAA,EAAA7E,GAAA,IAAAA,EAAA,KAAAE,EAAA,KAAAqE,WAAAvE,GAAA,GAAAE,EAAAiE,SAAAlE,EAAA,KAAAG,EAAAF,EAAAwE,WAAA,aAAAtE,EAAAsB,KAAA,KAAApB,EAAAF,EAAAuB,IAAA8C,EAAAvE,EAAA,QAAAI,CAAA,QAAA8C,MAAA,0BAAAgD,cAAA,SAAApG,EAAAE,EAAAE,GAAA,YAAAmD,SAAA,CAAA5C,SAAA6B,EAAAxC,GAAA+D,WAAA7D,EAAA+D,QAAA7D,GAAA,cAAAkD,SAAA,KAAA3B,IAAA1B,GAAAgC,CAAA,GAAAjC,CAAA,UAAAqG,EAAAjG,EAAAH,EAAAD,EAAAE,EAAAI,EAAAI,EAAAE,GAAA,QAAAJ,EAAAJ,EAAAM,GAAAE,GAAAE,EAAAN,EAAAd,KAAA,OAAAU,GAAA,YAAAJ,EAAAI,EAAA,CAAAI,EAAA6C,KAAApD,EAAAa,GAAAyE,QAAAvC,QAAAlC,GAAAoC,KAAAhD,EAAAI,EAAA,UAAAgG,EAAAtG,EAAAE,GAAA,QAAAD,EAAA,EAAAA,EAAAC,EAAA2E,OAAA5E,IAAA,KAAAK,EAAAJ,EAAAD,GAAAK,EAAAW,WAAAX,EAAAW,aAAA,EAAAX,EAAAY,cAAA,YAAAZ,IAAAA,EAAAa,UAAA,GAAAxB,OAAAY,eAAAP,EAAAuG,EAAAjG,EAAAb,KAAAa,EAAA,WAAAiG,EAAAtG,GAAA,IAAAO,EAAA,SAAAP,EAAAC,GAAA,aAAA6C,EAAA9C,KAAAA,EAAA,OAAAA,EAAA,IAAAD,EAAAC,EAAAQ,OAAA+F,aAAA,YAAAxG,EAAA,KAAAQ,EAAAR,EAAA4B,KAAA3B,EAAAC,UAAA,aAAA6C,EAAAvC,GAAA,OAAAA,EAAA,UAAAsD,UAAA,uDAAA2C,OAAAxG,EAAA,CAAAyG,CAAAzG,GAAA,gBAAA8C,EAAAvC,GAAAA,EAAAA,EAAA,GACA,IAIqBiJ,EAAiB,WAMpC,SAAAA,EAAYC,EAAWC,EAAOC,IAXhC,SAAAlJ,EAAAN,GAAA,KAAAM,aAAAN,GAAA,UAAA0D,UAAA,qCAWsCxE,CAAA,KAAAmK,GAClClK,KAAKmK,UAAYA,EACjBnK,KAAKqK,KAAOjK,OAAOC,OAAO,CAAC,EAAGiK,EAAcD,GAE5CrK,KAAKuK,QAAU,CAAEC,KAAMJ,EAAOK,MAAO,GAErCzK,KAAK0K,eAAiB,CAAC,EAEvB1K,KAAK2K,gBAAkB,CAAC,EAKxB3K,KAAK4K,YAAc5E,QAAQvC,SAC7B,CAEA,OA3BFhD,EA2BEyJ,EA3BFvJ,EA2BE,EAAAT,IAAA,OAAAC,MAIA,WAAO,IAAA0K,EAAA,KACL,OAAO7K,KAAK4K,YAAc5K,KAAK4K,YAC5BjH,MAAK,kBAAMkH,EAAKC,mBAAmB,GACxC,GAEA,CAAA5K,IAAA,YAAAC,MAIA,WAAY,IAAA4K,EAAA,KACV,OAAO/K,KAAK4K,YAAc5K,KAAK4K,YAC5BjH,MAAK,kBAAMoH,EAAKC,wBAAwB,GAC7C,GAEA,CAAA9K,IAAA,oBAAAC,OA7CFU,EA6CEL,IAAAmF,MASA,SAAA8B,IAAA,IAAAE,EAAA,OAAAnH,IAAAqB,MAAA,SAAA+F,GAAA,cAAAA,EAAAxB,KAAAwB,EAAAnD,MAAA,UACMzE,KAAKuK,QAAQC,MAAQxK,KAAKmK,UAAS,CAAAvC,EAAAnD,KAAA,eAAAmD,EAAAvD,OAAA,SAC9B2B,QAAQvC,QAAQyG,EAAkBe,SAAO,OAEV,OAAxCjL,KAAKkL,gBAAgBlL,KAAKuK,QAAQC,MAAM5C,EAAAnD,KAAA,EACnBzE,KAAKmL,iBAAiBnL,KAAKuK,QAAQC,MAAK,OAAjD,GAAN7C,EAAMC,EAAA1D,KACRlE,KAAKuK,QAAQE,OAAS9C,EAAOrC,OAAM,CAAAsC,EAAAnD,KAAA,SAEd,OADvBzE,KAAKuK,QAAQC,OACbxK,KAAKuK,QAAQE,MAAQ,EAAE7C,EAAAvD,OAAA,SAChBrE,KAAK8K,qBAAmB,eAAAlD,EAAAvD,OAAA,SAE1BsD,EAAO3H,KAAKuK,QAAQE,UAAQ,yBAAA7C,EAAArB,OAAA,GAAAkB,EAAA,SApBrC2D,EA7CF,eAAA1K,EAAA,KAAAD,EAAAgI,UAAA,WAAAzC,SAAA,SAAArF,EAAAI,GAAA,IAAAI,EAAAN,EAAA6H,MAAAhI,EAAAD,GAAA,SAAAkI,EAAA9H,GAAAiG,EAAA3F,EAAAR,EAAAI,EAAA4H,EAAAC,EAAA,OAAA/H,EAAA,UAAA+H,EAAA/H,GAAAiG,EAAA3F,EAAAR,EAAAI,EAAA4H,EAAAC,EAAA,QAAA/H,EAAA,CAAA8H,OAAA,OAkEG,WAZuB,OAAAyC,EAAA1C,MAAC,KAADD,UAAA,IAcxB,CAAAvI,IAAA,yBAAAC,MAIA,WAAyB,IAAAkL,EAAA,KACnBC,EAAsBtF,QAAQvC,UAclC,OAZIzD,KAAKuK,QAAQE,MAAQ,EACvBzK,KAAKuK,QAAQE,QACJzK,KAAKuK,QAAQC,KAAO,IAC7BxK,KAAKuK,QAAQC,OAEbc,EAAsBtL,KAAKmL,iBAAiBnL,KAAKuK,QAAQC,MACtD7G,MAAK,SAAA4H,GACJ,GAA6B,GAAzBA,EAAejG,OAAa,OAAO+F,EAAKL,yBACvCK,EAAKd,QAAQE,MAAQc,EAAejG,OAAS,CACpD,KAGGgG,EACJ3H,MAAK,kBAAM0H,EAAKF,iBAAiBE,EAAKd,QAAQC,KAAK,GACxD,GAEA,CAAAtK,IAAA,kBAAAC,MAIA,SAAgBqL,GAGd,IAFA,IAAMpB,EAAQqB,KAAKC,IAAI,EAAGF,EAAQxL,KAAKqK,KAAKsB,gBACtCC,EAAMH,KAAKI,IAAI7L,KAAKmK,UAAWqB,EAAQxL,KAAKqK,KAAKsB,eAAiB,GAC/D1K,EAAImJ,EAAOnJ,EAAI2K,EAAK3K,IAC3BjB,KAAKmL,iBAAiBlK,GAGxBjB,KAAK8L,sBAAsB1B,EAAQ,GACnCpK,KAAK8L,sBAAsBF,EAAM,EACnC,GAEA,CAAA1L,IAAA,wBAAAC,MAGA,SAAsBqL,UACbxL,KAAK2K,gBAAgBa,UACrBxL,KAAK0K,eAAec,EAC7B,GAEA,CAAAtL,IAAA,mBAAAC,MAMA,SAAiBqL,GAAO,IAAAO,EAAA,KACtB,OAAIP,KAASxL,KAAK2K,gBAAwB3K,KAAK2K,gBAAgBa,GAC3DA,KAASxL,KAAK0K,eAAuB1E,QAAQvC,QAAQzD,KAAK0K,eAAec,KAE7ExL,KAAK2K,gBAAgBa,GAASxL,KAAKgM,uBAAuBR,GACvD7H,MAAK,SAAAgE,GAGJ,cAFOoE,EAAKpB,gBAAgBa,GAC5BO,EAAKrB,eAAec,GAAS7D,EACtBA,CACT,IAEK3H,KAAK2K,gBAAgBa,GAC9B,GAEA,CAAAtL,IAAA,yBAAAC,MAIA,SAAuBqL,GACrB,OAAOpE,EAAU6E,MAAMjM,KAAKqK,KAAK3C,aAAc8D,EACjD,IA5IF7K,GAAAoG,EAAAtG,EAAAG,UAAAD,GAAAP,OAAAY,eAAAP,EAAA,aAAAmB,UAAA,IAAAnB,EAAA,IAAAA,EAAAE,EAAAE,EA6CEuK,CA+FC,CAvImC,GA0ItClB,EAAkBe,OAAS,+BAG3B,IAAMX,EAAe,CACnB5C,aAAc,KACdiE,eAAgB,aCpIX,SAASO,IAA2C,IAAjCC,EAAS1D,UAAAnD,OAAA,QAAA8G,IAAA3D,UAAA,GAAAA,UAAA,GAAG4D,UAAUF,UAC9C,MAAO,WAAWG,KAAKH,EACzB,CAQA,IAAMI,EAAuB,CAC3B,KAAQ,EACR,QAAW,EACX,YAAa,EACb,cAAe,EACf,cAAe,GAsBjB,SAASC,EAAiBC,EAAUC,GAClC,IAAK,IAAIzL,EAAI,EAAGA,EAAI0L,EAAAA,EAAMrH,OAAQrE,IAChC,IAAK,IAAI2L,EAAO,EAAGA,EAAOF,EAAgBpH,OAAQsH,IAAQ,CACxD,IAAMC,EAASH,EAAgBE,GAE/B,IAA4E,GADxDD,EAAAA,EAAM1L,GAAGsL,EAAqBM,IAClCC,MAAM,MAAM9D,KAAI,SAAA+D,GAAC,OAAIA,EAAEC,aAAa,IAAEC,QAAQR,GAC5D,OAAOE,EAAAA,EAAM1L,GAAGsL,EAAqB,aAEzC,CAEF,OAAO,IACT,CAOO,SAASW,IACd,IACE,QAAS7E,OAAO8E,YAClB,CAAE,MAAO1M,GAGP,OAAO,CACT,CACF,wWC/EAD,EAAA,kBAAAC,CAAA,MAAAC,EAAAD,EAAA,GAAAE,EAAAP,OAAAQ,UAAAC,EAAAF,EAAAG,eAAAC,EAAAX,OAAAY,gBAAA,SAAAN,EAAAD,EAAAE,GAAAD,EAAAD,GAAAE,EAAAR,KAAA,EAAAc,EAAA,mBAAAC,OAAAA,OAAA,GAAAC,EAAAF,EAAAG,UAAA,aAAAC,EAAAJ,EAAAK,eAAA,kBAAAC,EAAAN,EAAAO,aAAA,yBAAAC,EAAAf,EAAAD,EAAAE,GAAA,OAAAP,OAAAY,eAAAN,EAAAD,EAAA,CAAAN,MAAAQ,EAAAe,YAAA,EAAAC,cAAA,EAAAC,UAAA,IAAAlB,EAAAD,EAAA,KAAAgB,EAAA,aAAAf,GAAAe,EAAA,SAAAf,EAAAD,EAAAE,GAAA,OAAAD,EAAAD,GAAAE,CAAA,WAAAkB,EAAAnB,EAAAD,EAAAE,EAAAE,GAAA,IAAAI,EAAAR,GAAAA,EAAAG,qBAAAkB,EAAArB,EAAAqB,EAAAX,EAAAf,OAAA2B,OAAAd,EAAAL,WAAAS,EAAA,IAAAW,EAAAnB,GAAA,WAAAE,EAAAI,EAAA,WAAAhB,MAAA8B,EAAAvB,EAAAC,EAAAU,KAAAF,CAAA,UAAAe,EAAAxB,EAAAD,EAAAE,GAAA,WAAAwB,KAAA,SAAAC,IAAA1B,EAAA2B,KAAA5B,EAAAE,GAAA,OAAAD,GAAA,OAAAyB,KAAA,QAAAC,IAAA1B,EAAA,EAAAD,EAAAoB,KAAAA,EAAA,IAAAS,EAAA,iBAAAC,EAAA,iBAAAC,EAAA,YAAAC,EAAA,YAAAC,EAAA,YAAAZ,IAAA,UAAAa,IAAA,UAAAC,IAAA,KAAAC,EAAA,GAAApB,EAAAoB,EAAA1B,GAAA,8BAAA2B,EAAA1C,OAAA2C,eAAAC,EAAAF,GAAAA,EAAAA,EAAAG,EAAA,MAAAD,GAAAA,IAAArC,GAAAE,EAAAwB,KAAAW,EAAA7B,KAAA0B,EAAAG,GAAA,IAAAE,EAAAN,EAAAhC,UAAAkB,EAAAlB,UAAAR,OAAA2B,OAAAc,GAAA,SAAAM,EAAAzC,GAAA,0BAAA0C,SAAA,SAAA3C,GAAAgB,EAAAf,EAAAD,GAAA,SAAAC,GAAA,YAAA2C,QAAA5C,EAAAC,EAAA,gBAAA4C,EAAA5C,EAAAD,GAAA,SAAA8C,EAAA5C,EAAAI,EAAAE,EAAAE,GAAA,IAAAE,EAAAa,EAAAxB,EAAAC,GAAAD,EAAAK,GAAA,aAAAM,EAAAc,KAAA,KAAAZ,EAAAF,EAAAe,IAAAE,EAAAf,EAAApB,MAAA,OAAAmC,GAAA,UAAAkB,EAAAlB,IAAAzB,EAAAwB,KAAAC,EAAA,WAAA7B,EAAAgD,QAAAnB,EAAAoB,SAAAC,MAAA,SAAAjD,GAAA6C,EAAA,OAAA7C,EAAAO,EAAAE,EAAA,aAAAT,GAAA6C,EAAA,QAAA7C,EAAAO,EAAAE,EAAA,IAAAV,EAAAgD,QAAAnB,GAAAqB,MAAA,SAAAjD,GAAAa,EAAApB,MAAAO,EAAAO,EAAAM,EAAA,aAAAb,GAAA,OAAA6C,EAAA,QAAA7C,EAAAO,EAAAE,EAAA,IAAAA,EAAAE,EAAAe,IAAA,KAAAzB,EAAAI,EAAA,gBAAAZ,MAAA,SAAAO,EAAAG,GAAA,SAAA+C,IAAA,WAAAnD,GAAA,SAAAA,EAAAE,GAAA4C,EAAA7C,EAAAG,EAAAJ,EAAAE,EAAA,WAAAA,EAAAA,EAAAA,EAAAgD,KAAAC,EAAAA,GAAAA,GAAA,aAAA3B,EAAAxB,EAAAE,EAAAE,GAAA,IAAAE,EAAAuB,EAAA,gBAAArB,EAAAE,GAAA,GAAAJ,IAAAyB,EAAA,MAAAqB,MAAA,mCAAA9C,IAAA0B,EAAA,cAAAxB,EAAA,MAAAE,EAAA,OAAAhB,MAAAO,EAAAoD,MAAA,OAAAjD,EAAAkD,OAAA9C,EAAAJ,EAAAuB,IAAAjB,IAAA,KAAAE,EAAAR,EAAAmD,SAAA,GAAA3C,EAAA,KAAAE,EAAA0C,EAAA5C,EAAAR,GAAA,GAAAU,EAAA,IAAAA,IAAAmB,EAAA,gBAAAnB,CAAA,cAAAV,EAAAkD,OAAAlD,EAAAqD,KAAArD,EAAAsD,MAAAtD,EAAAuB,SAAA,aAAAvB,EAAAkD,OAAA,IAAAhD,IAAAuB,EAAA,MAAAvB,EAAA0B,EAAA5B,EAAAuB,IAAAvB,EAAAuD,kBAAAvD,EAAAuB,IAAA,gBAAAvB,EAAAkD,QAAAlD,EAAAwD,OAAA,SAAAxD,EAAAuB,KAAArB,EAAAyB,EAAA,IAAAK,EAAAX,EAAAzB,EAAAE,EAAAE,GAAA,cAAAgC,EAAAV,KAAA,IAAApB,EAAAF,EAAAiD,KAAArB,EAAAF,EAAAM,EAAAT,MAAAM,EAAA,gBAAAvC,MAAA0C,EAAAT,IAAA0B,KAAAjD,EAAAiD,KAAA,WAAAjB,EAAAV,OAAApB,EAAA0B,EAAA5B,EAAAkD,OAAA,QAAAlD,EAAAuB,IAAAS,EAAAT,IAAA,YAAA6B,EAAAxD,EAAAE,GAAA,IAAAE,EAAAF,EAAAoD,OAAAhD,EAAAN,EAAAW,SAAAP,GAAA,GAAAE,IAAAL,EAAA,OAAAC,EAAAqD,SAAA,eAAAnD,GAAAJ,EAAAW,SAAAkD,SAAA3D,EAAAoD,OAAA,SAAApD,EAAAyB,IAAA1B,EAAAuD,EAAAxD,EAAAE,GAAA,UAAAA,EAAAoD,SAAA,WAAAlD,IAAAF,EAAAoD,OAAA,QAAApD,EAAAyB,IAAA,IAAAmC,UAAA,oCAAA1D,EAAA,aAAA6B,EAAA,IAAAzB,EAAAiB,EAAAnB,EAAAN,EAAAW,SAAAT,EAAAyB,KAAA,aAAAnB,EAAAkB,KAAA,OAAAxB,EAAAoD,OAAA,QAAApD,EAAAyB,IAAAnB,EAAAmB,IAAAzB,EAAAqD,SAAA,KAAAtB,EAAA,IAAAvB,EAAAF,EAAAmB,IAAA,OAAAjB,EAAAA,EAAA2C,MAAAnD,EAAAF,EAAA+D,YAAArD,EAAAhB,MAAAQ,EAAA8D,KAAAhE,EAAAiE,QAAA,WAAA/D,EAAAoD,SAAApD,EAAAoD,OAAA,OAAApD,EAAAyB,IAAA1B,GAAAC,EAAAqD,SAAA,KAAAtB,GAAAvB,GAAAR,EAAAoD,OAAA,QAAApD,EAAAyB,IAAA,IAAAmC,UAAA,oCAAA5D,EAAAqD,SAAA,KAAAtB,EAAA,UAAAiC,EAAAjE,GAAA,IAAAD,EAAA,CAAAmE,OAAAlE,EAAA,SAAAA,IAAAD,EAAAoE,SAAAnE,EAAA,SAAAA,IAAAD,EAAAqE,WAAApE,EAAA,GAAAD,EAAAsE,SAAArE,EAAA,SAAAsE,WAAAC,KAAAxE,EAAA,UAAAyE,EAAAxE,GAAA,IAAAD,EAAAC,EAAAyE,YAAA,GAAA1E,EAAA0B,KAAA,gBAAA1B,EAAA2B,IAAA1B,EAAAyE,WAAA1E,CAAA,UAAAuB,EAAAtB,GAAA,KAAAsE,WAAA,EAAAJ,OAAA,SAAAlE,EAAA0C,QAAAuB,EAAA,WAAAS,OAAA,YAAAnC,EAAAxC,GAAA,GAAAA,GAAA,KAAAA,EAAA,KAAAE,EAAAF,EAAAU,GAAA,GAAAR,EAAA,OAAAA,EAAA0B,KAAA5B,GAAA,sBAAAA,EAAAgE,KAAA,OAAAhE,EAAA,IAAA4E,MAAA5E,EAAA6E,QAAA,KAAAvE,GAAA,EAAAE,EAAA,SAAAwD,IAAA,OAAA1D,EAAAN,EAAA6E,QAAA,GAAAzE,EAAAwB,KAAA5B,EAAAM,GAAA,OAAA0D,EAAAtE,MAAAM,EAAAM,GAAA0D,EAAAX,MAAA,EAAAW,EAAA,OAAAA,EAAAtE,MAAAO,EAAA+D,EAAAX,MAAA,EAAAW,CAAA,SAAAxD,EAAAwD,KAAAxD,CAAA,YAAAsD,UAAAf,EAAA/C,GAAA,2BAAAkC,EAAA/B,UAAAgC,EAAA7B,EAAAmC,EAAA,eAAA/C,MAAAyC,EAAAjB,cAAA,IAAAZ,EAAA6B,EAAA,eAAAzC,MAAAwC,EAAAhB,cAAA,IAAAgB,EAAA4C,YAAA9D,EAAAmB,EAAArB,EAAA,qBAAAd,EAAA+E,oBAAA,SAAA9E,GAAA,IAAAD,EAAA,mBAAAC,GAAAA,EAAA+E,YAAA,QAAAhF,IAAAA,IAAAkC,GAAA,uBAAAlC,EAAA8E,aAAA9E,EAAAiF,MAAA,EAAAjF,EAAAkF,KAAA,SAAAjF,GAAA,OAAAN,OAAAwF,eAAAxF,OAAAwF,eAAAlF,EAAAkC,IAAAlC,EAAAmF,UAAAjD,EAAAnB,EAAAf,EAAAa,EAAA,sBAAAb,EAAAE,UAAAR,OAAA2B,OAAAmB,GAAAxC,CAAA,EAAAD,EAAAqF,MAAA,SAAApF,GAAA,OAAAgD,QAAAhD,EAAA,EAAAyC,EAAAG,EAAA1C,WAAAa,EAAA6B,EAAA1C,UAAAS,GAAA,0BAAAZ,EAAA6C,cAAAA,EAAA7C,EAAAsF,MAAA,SAAArF,EAAAC,EAAAE,EAAAE,EAAAE,QAAA,IAAAA,IAAAA,EAAA+E,SAAA,IAAA7E,EAAA,IAAAmC,EAAAzB,EAAAnB,EAAAC,EAAAE,EAAAE,GAAAE,GAAA,OAAAR,EAAA+E,oBAAA7E,GAAAQ,EAAAA,EAAAsD,OAAAd,MAAA,SAAAjD,GAAA,OAAAA,EAAAoD,KAAApD,EAAAP,MAAAgB,EAAAsD,MAAA,KAAAtB,EAAAD,GAAAzB,EAAAyB,EAAA3B,EAAA,aAAAE,EAAAyB,EAAA/B,GAAA,0BAAAM,EAAAyB,EAAA,qDAAAzC,EAAAwF,KAAA,SAAAvF,GAAA,IAAAD,EAAAL,OAAAM,GAAAC,EAAA,WAAAE,KAAAJ,EAAAE,EAAAsE,KAAApE,GAAA,OAAAF,EAAAuF,UAAA,SAAAzB,IAAA,KAAA9D,EAAA2E,QAAA,KAAA5E,EAAAC,EAAAwF,MAAA,GAAAzF,KAAAD,EAAA,OAAAgE,EAAAtE,MAAAO,EAAA+D,EAAAX,MAAA,EAAAW,CAAA,QAAAA,EAAAX,MAAA,EAAAW,CAAA,GAAAhE,EAAAwC,OAAAA,EAAAjB,EAAApB,UAAA,CAAA6E,YAAAzD,EAAAoD,MAAA,SAAA3E,GAAA,QAAA2F,KAAA,OAAA3B,KAAA,OAAAP,KAAA,KAAAC,MAAAzD,EAAA,KAAAoD,MAAA,OAAAE,SAAA,UAAAD,OAAA,YAAA3B,IAAA1B,EAAA,KAAAsE,WAAA5B,QAAA8B,IAAAzE,EAAA,QAAAE,KAAA,WAAAA,EAAA0F,OAAA,IAAAxF,EAAAwB,KAAA,KAAA1B,KAAA0E,OAAA1E,EAAA2F,MAAA,WAAA3F,GAAAD,EAAA,EAAA6F,KAAA,gBAAAzC,MAAA,MAAApD,EAAA,KAAAsE,WAAA,GAAAG,WAAA,aAAAzE,EAAAyB,KAAA,MAAAzB,EAAA0B,IAAA,YAAAoE,IAAA,EAAApC,kBAAA,SAAA3D,GAAA,QAAAqD,KAAA,MAAArD,EAAA,IAAAE,EAAA,cAAA8F,EAAA5F,EAAAE,GAAA,OAAAI,EAAAgB,KAAA,QAAAhB,EAAAiB,IAAA3B,EAAAE,EAAA8D,KAAA5D,EAAAE,IAAAJ,EAAAoD,OAAA,OAAApD,EAAAyB,IAAA1B,KAAAK,CAAA,SAAAA,EAAA,KAAAiE,WAAAM,OAAA,EAAAvE,GAAA,IAAAA,EAAA,KAAAE,EAAA,KAAA+D,WAAAjE,GAAAI,EAAAF,EAAAkE,WAAA,YAAAlE,EAAA2D,OAAA,OAAA6B,EAAA,UAAAxF,EAAA2D,QAAA,KAAAwB,KAAA,KAAA/E,EAAAR,EAAAwB,KAAApB,EAAA,YAAAM,EAAAV,EAAAwB,KAAApB,EAAA,iBAAAI,GAAAE,EAAA,SAAA6E,KAAAnF,EAAA4D,SAAA,OAAA4B,EAAAxF,EAAA4D,UAAA,WAAAuB,KAAAnF,EAAA6D,WAAA,OAAA2B,EAAAxF,EAAA6D,WAAA,SAAAzD,GAAA,QAAA+E,KAAAnF,EAAA4D,SAAA,OAAA4B,EAAAxF,EAAA4D,UAAA,YAAAtD,EAAA,MAAAsC,MAAA,kDAAAuC,KAAAnF,EAAA6D,WAAA,OAAA2B,EAAAxF,EAAA6D,WAAA,KAAAT,OAAA,SAAA3D,EAAAD,GAAA,QAAAE,EAAA,KAAAqE,WAAAM,OAAA,EAAA3E,GAAA,IAAAA,EAAA,KAAAI,EAAA,KAAAiE,WAAArE,GAAA,GAAAI,EAAA6D,QAAA,KAAAwB,MAAAvF,EAAAwB,KAAAtB,EAAA,oBAAAqF,KAAArF,EAAA+D,WAAA,KAAA7D,EAAAF,EAAA,OAAAE,IAAA,UAAAP,GAAA,aAAAA,IAAAO,EAAA2D,QAAAnE,GAAAA,GAAAQ,EAAA6D,aAAA7D,EAAA,UAAAE,EAAAF,EAAAA,EAAAkE,WAAA,UAAAhE,EAAAgB,KAAAzB,EAAAS,EAAAiB,IAAA3B,EAAAQ,GAAA,KAAA8C,OAAA,YAAAU,KAAAxD,EAAA6D,WAAApC,GAAA,KAAAgE,SAAAvF,EAAA,EAAAuF,SAAA,SAAAhG,EAAAD,GAAA,aAAAC,EAAAyB,KAAA,MAAAzB,EAAA0B,IAAA,gBAAA1B,EAAAyB,MAAA,aAAAzB,EAAAyB,KAAA,KAAAsC,KAAA/D,EAAA0B,IAAA,WAAA1B,EAAAyB,MAAA,KAAAqE,KAAA,KAAApE,IAAA1B,EAAA0B,IAAA,KAAA2B,OAAA,cAAAU,KAAA,kBAAA/D,EAAAyB,MAAA1B,IAAA,KAAAgE,KAAAhE,GAAAiC,CAAA,EAAAiE,OAAA,SAAAjG,GAAA,QAAAD,EAAA,KAAAuE,WAAAM,OAAA,EAAA7E,GAAA,IAAAA,EAAA,KAAAE,EAAA,KAAAqE,WAAAvE,GAAA,GAAAE,EAAAmE,aAAApE,EAAA,YAAAgG,SAAA/F,EAAAwE,WAAAxE,EAAAoE,UAAAG,EAAAvE,GAAA+B,CAAA,GAAAkE,MAAA,SAAAlG,GAAA,QAAAD,EAAA,KAAAuE,WAAAM,OAAA,EAAA7E,GAAA,IAAAA,EAAA,KAAAE,EAAA,KAAAqE,WAAAvE,GAAA,GAAAE,EAAAiE,SAAAlE,EAAA,KAAAG,EAAAF,EAAAwE,WAAA,aAAAtE,EAAAsB,KAAA,KAAApB,EAAAF,EAAAuB,IAAA8C,EAAAvE,EAAA,QAAAI,CAAA,QAAA8C,MAAA,0BAAAgD,cAAA,SAAApG,EAAAE,EAAAE,GAAA,YAAAmD,SAAA,CAAA5C,SAAA6B,EAAAxC,GAAA+D,WAAA7D,EAAA+D,QAAA7D,GAAA,cAAAkD,SAAA,KAAA3B,IAAA1B,GAAAgC,CAAA,GAAAjC,CAAA,UAAAqG,EAAAjG,EAAAH,EAAAD,EAAAE,EAAAI,EAAAI,EAAAE,GAAA,QAAAJ,EAAAJ,EAAAM,GAAAE,GAAAE,EAAAN,EAAAd,KAAA,OAAAU,GAAA,YAAAJ,EAAAI,EAAA,CAAAI,EAAA6C,KAAApD,EAAAa,GAAAyE,QAAAvC,QAAAlC,GAAAoC,KAAAhD,EAAAI,EAAA,UAAAqM,EAAAvM,GAAA,sBAAAH,EAAA,KAAAD,EAAAgI,UAAA,WAAAzC,SAAA,SAAArF,EAAAI,GAAA,IAAAI,EAAAN,EAAA6H,MAAAhI,EAAAD,GAAA,SAAAkI,EAAA9H,GAAAiG,EAAA3F,EAAAR,EAAAI,EAAA4H,EAAAC,EAAA,OAAA/H,EAAA,UAAA+H,EAAA/H,GAAAiG,EAAA3F,EAAAR,EAAAI,EAAA4H,EAAAC,EAAA,QAAA/H,EAAA,CAAA8H,OAAA,gBAAA5B,EAAAtG,EAAAE,GAAA,QAAAD,EAAA,EAAAA,EAAAC,EAAA2E,OAAA5E,IAAA,KAAAK,EAAAJ,EAAAD,GAAAK,EAAAW,WAAAX,EAAAW,aAAA,EAAAX,EAAAY,cAAA,YAAAZ,IAAAA,EAAAa,UAAA,GAAAxB,OAAAY,eAAAP,EAAAuG,EAAAjG,EAAAb,KAAAa,EAAA,WAAAiG,EAAAtG,GAAA,IAAAO,EAAA,SAAAP,EAAAC,GAAA,aAAA6C,EAAA9C,KAAAA,EAAA,OAAAA,EAAA,IAAAD,EAAAC,EAAAQ,OAAA+F,aAAA,YAAAxG,EAAA,KAAAQ,EAAAR,EAAA4B,KAAA3B,EAAAC,UAAA,aAAA6C,EAAAvC,GAAA,OAAAA,EAAA,UAAAsD,UAAA,uDAAA2C,OAAAxG,EAAA,CAAAyG,CAAAzG,GAAA,gBAAA8C,EAAAvC,GAAAA,EAAAA,EAAA,GAgCA,IACqBoM,EAAiB,WAKpC,SAAAA,EAAYpN,GAAS,IAtCvBQ,EAAAE,EAAAD,EAsCuBmK,EAAA,MAtCvB,SAAA1J,EAAAN,GAAA,KAAAM,aAAAN,GAAA,UAAA0D,UAAA,qCAsCuBxE,CAAA,KAAAsN,GAtCvB5M,EAsCuB,KAtCvBC,EAwEoB,WAChBmK,EAAKyC,MAAQD,EAAkBE,iBAAiB1C,EAAK2C,YAAa3C,EAAKR,KAAKoD,aAC9E,GA1EF9M,EAAAqG,EAAArG,EAsCuB,sBAtCvBF,EAAAL,OAAAY,eAAAP,EAAAE,EAAA,CAAAR,MAAAO,EAAAgB,YAAA,EAAAC,cAAA,EAAAC,UAAA,IAAAnB,EAAAE,GAAAD,EAuCIV,KAAK0N,SAAU,EACf1N,KAAK2N,QAAS,EAEd3N,KAAKqK,KAAOpK,EAEZD,KAAK4N,eAAiB,KAEtB5N,KAAK6N,YAAc,KACnB7N,KAAK8N,aAAe,EAEpB9N,KAAK+N,OAASlG,EAAE,CAAC,GAEjB7H,KAAKsN,MAAQ,KAEbtN,KAAK+N,OAAOC,GAAG,gBAAiBhO,KAAKiO,iBACrCjO,KAAK+N,OAAOG,QAAQ,gBACtB,CAEA,OAzDFzN,EAyDE4M,EAzDF1M,EAyDE,EAAAT,IAAA,YAAAC,MAUA,WAAc,MAAM,IAAI0D,MAAM,+BAAiC,GAE/D,CAAA3D,IAAA,OAAAC,MACA,WAAS,OAAO,IAAM,GAAC,CAAAD,IAAA,QAAAC,MAUvB,SAAMkH,EAAW8G,GACfnO,KAAK0N,SAAU,EACf1N,KAAK2N,QAAS,EACd3N,KAAKqK,KAAK+D,iBAEVpO,KAAK4N,eAAiB,IAAI1D,EAAkBiE,EAAU9G,EAAW,CAC/DK,aAAc1H,KAAKqK,KAAK3C,aACxBiE,eAAgB,IAGlB3L,KAAKqO,OACLrO,KAAK+N,OAAOG,QAAQ,QACtB,GAAC,CAAAhO,IAAA,OAAAC,MAED,WACMH,KAAK6N,aAAa7N,KAAK6N,YAAYtH,OACvCvG,KAAK0N,SAAU,EACf1N,KAAK2N,QAAS,EACd3N,KAAK4N,eAAiB,KACtB5N,KAAK6N,YAAc,KACnB7N,KAAK+N,OAAOG,QAAQ,OACtB,GAEA,CAAAhO,IAAA,QAAAC,MACA,WACE,IAAMmO,GAAatO,KAAK2N,QAAU3N,KAAK6N,YACvC7N,KAAK2N,QAAS,EACV3N,KAAK6N,aAAa7N,KAAK6N,YAAYU,QACnCD,GAAWtO,KAAK+N,OAAOG,QAAQ,QACrC,GAEA,CAAAhO,IAAA,SAAAC,MACA,WACE,IAAMmO,EAAYtO,KAAK2N,QAAU3N,KAAK6N,YACtC7N,KAAK2N,QAAS,EACV3N,KAAK6N,aAAa7N,KAAK6N,YAAYW,SACnCF,GAAWtO,KAAK+N,OAAOG,QAAQ,SACrC,GAAC,CAAAhO,IAAA,kBAAAC,MAED,WACMH,KAAK2N,OAAQ3N,KAAKwO,SACjBxO,KAAKuO,OACZ,GAEA,CAAArO,IAAA,cAAAC,MACA,WACMH,KAAK6N,aAAa7N,KAAK6N,YAAYlH,QACzC,GAEA,CAAAzG,IAAA,eAAAC,OAAAsO,EAAArB,EAAA5M,IAAAmF,MACA,SAAA8B,IAAA,IAAAsD,EAAA,YAAAvK,IAAAqB,MAAA,SAAA+F,GAAA,cAAAA,EAAAxB,KAAAwB,EAAAnD,MAAA,cAAAmD,EAAAnD,KAAA,EACQuB,QAAQ0I,IAAI,CAChB1O,KAAK6N,YAAYtH,OACjBvG,KAAK4N,eAAee,YACjBhL,MAAK,kBAAMoH,EAAK6C,eAAee,WAAW,MAC7C,OACF3O,KAAKqO,OAAO,wBAAAzG,EAAArB,OAAA,GAAAkB,EAAA,UACb,WAPiB,OAAAgH,EAAA/F,MAAC,KAADD,UAAA,IASlB,CAAAvI,IAAA,WAAAC,MACA,SAASyO,GAGP5O,KAAK+N,OAAOc,IAAI,gBAAiB7O,KAAKiO,iBACtCjO,KAAKsN,MAAQtN,KAAKwN,YAAYsB,MAAK,SAAAxB,GAAK,OAAIA,EAAMsB,WAAaA,CAAQ,IAEnE5O,KAAKqK,KAAKoD,cAAgBP,KAC5BC,aAAa4B,QAAQ,eAADC,OAAgBhP,KAAKqK,KAAKoD,cAAgBzN,KAAKsN,MAAMsB,UAEvE5O,KAAK6N,aAAa7N,KAAK6N,YAAYoB,SAASjP,KAAKsN,MACvD,GAEA,CAAApN,IAAA,kBAAAC,MACA,SAAgB+O,GACdlP,KAAK8N,aAAeoB,EAChBlP,KAAK6N,aAAa7N,KAAK6N,YAAYsB,gBAAgBD,EACzD,GAEA,CAAAhP,IAAA,OAAAC,OAAAiP,EAAAhC,EAAA5M,IAAAmF,MACA,SAAA0J,IAAA,IAAA5E,EAAA6E,EAAAC,EAAAlE,EAAA,YAAA7K,IAAAqB,MAAA,SAAA2N,GAAA,cAAAA,EAAApJ,KAAAoJ,EAAA/K,MAAA,cAAA+K,EAAA/K,KAAA,EACuBzE,KAAK4N,eAAenJ,OAAM,OAApC,IAALgG,EAAK+E,EAAAtL,OACEgG,EAAkBe,OAAM,CAAAuE,EAAA/K,KAAA,QAEhB,OADnBzE,KAAKuG,OACLvG,KAAKqK,KAAKoF,SAASD,EAAAnL,OAAA,iBAUS,OAP9BrE,KAAKqK,KAAK+D,kBACJkB,EAAQtP,KAAK0P,YAAYjF,IACzBA,MAAQA,EACd6E,EAAMK,KAAO3P,KAAK8N,aAClBwB,EAAMhC,MAAQtN,KAAKsN,MACnBgC,EAAMM,MAAK,kBAAMvE,EAAKhB,KAAKwF,mBAAmB,IAE9C7P,KAAKqK,KAAKwF,oBAAoBL,EAAA/K,KAAA,GAExBzE,KAAKqK,KAAKyF,gBAAgBrF,GAAM,WAEjCzK,KAAK0N,QAAS,CAAF8B,EAAA/K,KAAA,gBAAA+K,EAAAnL,OAAA,yBAAAmL,EAAA/K,KAAA,GAESzE,KAAK+P,UAAUT,GACtC3L,MAAK,kBAAK0H,EAAKhB,KAAK2F,eAAeV,EAAM7E,MAAM,IAAC,QAErB,OAHxB8E,EAAWC,EAAAtL,KAGblE,KAAK2N,QAAQ3N,KAAKuO,QAAQiB,EAAA/K,KAAA,GACxB8K,EAAW,YAEbvP,KAAK0N,QAAS,CAAF8B,EAAA/K,KAAA,gBAAA+K,EAAAnL,OAAA,SAASrE,KAAKqO,QAAM,yBAAAmB,EAAAjJ,OAAA,GAAA8I,EAAA,UACrC,WA3BS,OAAAD,EAAA1G,MAAC,KAADD,UAAA,IA6BV,CAAAvI,IAAA,cAAAC,MAKA,SAAYsK,GAAS,MAAM,IAAI5G,MAAM,+BAAiC,GAEtE,CAAA3D,IAAA,YAAAC,MAIA,SAAUmP,GAGR,OAFAtP,KAAK6N,YAAcyB,EACdtP,KAAK6N,YAAYoC,QAAQjQ,KAAKqK,KAAK+D,iBACjCpO,KAAK6N,YAAYqC,MAC1B,GAEA,CAAAhQ,IAAA,eAAAC,MACA,WACE,OAAOkN,EAAkBE,iBAAiBvN,KAAKwN,YAAaxN,KAAKqK,KAAKoD,aACxE,IAhNF/M,EAkNE,EAAAR,IAAA,cAAAC,MArJA,WAAuB,MAAM,IAAI0D,MAAM,+BAAiC,GAAC,CAAA3D,IAAA,mBAAAC,MA8JzE,SAAwBgQ,EAAQ1C,GAAmD,IAArC2C,EAAa3H,UAAAnD,OAAA,QAAA8G,IAAA3D,UAAA,GAAAA,UAAA,GAAG4D,UAAUgE,UAChEC,EAAiBH,EAAOI,QAAO,SAAAvN,GAAC,OAAIA,EAAEwN,KAAKC,WAAWhD,EAAa,IAMnEiD,GAHNN,EAAgBA,IAAkB/D,UAAUI,SAAW,CAACJ,UAAUI,UAAY,KAGtC8D,QAAO,SAAAC,GAAI,OAAIA,EAAKC,WAAWhD,EAAa,IAGpF,OAAOJ,EAAkBsD,uBAAuBL,EAAgB7C,IAEzDJ,EAAkBuD,iBAAiBF,EAAmBJ,IAErDA,EAAexB,MAAK,SAAA9L,GAAC,OAAIA,EAAE6N,OAAO,KAAKP,EAAe,IAGvDjD,EAAkBuD,iBAAiBR,EAAeD,IAEjDA,EAAOrB,MAAK,SAAA9L,GAAC,OAAIA,EAAE6N,OAAO,KAAKV,EAAO,EAChD,GAEA,CAAAjQ,IAAA,yBAAAC,MAQA,SAA8BgQ,EAAQ1C,GACpC,IAAMqD,EAAc5D,KAAqBC,aAAa4D,QAAQ,eAAD/B,OAAgBvB,IAC7E,OAAQqD,EAAcX,EAAOrB,MAAK,SAAA9L,GAAC,OAAIA,EAAE4L,WAAakC,CAAW,SAAI1E,CACvE,GAEA,CAAAlM,IAAA,mBAAAC,MAOA,SAAwBkQ,EAAWF,GAAQ,IACba,EADaC,+4BAAAC,CACtBb,GAAS,QAM3Bc,EAN2BC,EAAA,WAAE,IAAnBZ,EAAIQ,EAAA7Q,MAEPkR,EAAiBlB,EAAOI,QAAO,SAAAvN,GAAC,OAAIA,EAAEwN,KAAKvG,QAAQ,IAAK,KAAKwG,WAAWD,EAAK,IACnF,GAAIa,EAAe/L,OAAQ,OAAAtC,EAClBqO,EAAevC,MAAK,SAAA9L,GAAC,OAAIA,EAAE6N,OAAO,KAAKQ,EAAe,GAEjE,EANA,IAAAJ,EAAAxO,MAAAuO,EAAAC,EAAApQ,KAAAiD,MAAA,GAAAqN,EAAAC,IAAA,OAAAD,EAAAnO,CAMC,OAAAsO,GAAAL,EAAAxQ,EAAA6Q,EAAA,SAAAL,EAAAzO,GAAA,CACH,IA7QF7B,GAAAoG,EAAAtG,EAAAG,UAAAD,GAAAD,GAAAqG,EAAAtG,EAAAC,GAAAN,OAAAY,eAAAP,EAAA,aAAAmB,UAAA,IAAAnB,EAAA,IAAAA,EAAAE,EAAAD,EA8JE0O,EA7BAX,CA4IC,CA5OmC,4RCjCtCjO,EAAA,kBAAAC,CAAA,MAAAC,EAAAD,EAAA,GAAAE,EAAAP,OAAAQ,UAAAC,EAAAF,EAAAG,eAAAC,EAAAX,OAAAY,gBAAA,SAAAN,EAAAD,EAAAE,GAAAD,EAAAD,GAAAE,EAAAR,KAAA,EAAAc,EAAA,mBAAAC,OAAAA,OAAA,GAAAC,EAAAF,EAAAG,UAAA,aAAAC,EAAAJ,EAAAK,eAAA,kBAAAC,EAAAN,EAAAO,aAAA,yBAAAC,EAAAf,EAAAD,EAAAE,GAAA,OAAAP,OAAAY,eAAAN,EAAAD,EAAA,CAAAN,MAAAQ,EAAAe,YAAA,EAAAC,cAAA,EAAAC,UAAA,IAAAlB,EAAAD,EAAA,KAAAgB,EAAA,aAAAf,GAAAe,EAAA,SAAAf,EAAAD,EAAAE,GAAA,OAAAD,EAAAD,GAAAE,CAAA,WAAAkB,EAAAnB,EAAAD,EAAAE,EAAAE,GAAA,IAAAI,EAAAR,GAAAA,EAAAG,qBAAAkB,EAAArB,EAAAqB,EAAAX,EAAAf,OAAA2B,OAAAd,EAAAL,WAAAS,EAAA,IAAAW,EAAAnB,GAAA,WAAAE,EAAAI,EAAA,WAAAhB,MAAA8B,EAAAvB,EAAAC,EAAAU,KAAAF,CAAA,UAAAe,EAAAxB,EAAAD,EAAAE,GAAA,WAAAwB,KAAA,SAAAC,IAAA1B,EAAA2B,KAAA5B,EAAAE,GAAA,OAAAD,GAAA,OAAAyB,KAAA,QAAAC,IAAA1B,EAAA,EAAAD,EAAAoB,KAAAA,EAAA,IAAAS,EAAA,iBAAAC,EAAA,iBAAAC,EAAA,YAAAC,EAAA,YAAAC,EAAA,YAAAZ,IAAA,UAAAa,IAAA,UAAAC,IAAA,KAAAC,EAAA,GAAApB,EAAAoB,EAAA1B,GAAA,8BAAA2B,EAAA1C,OAAA2C,eAAAC,EAAAF,GAAAA,EAAAA,EAAAG,EAAA,MAAAD,GAAAA,IAAArC,GAAAE,EAAAwB,KAAAW,EAAA7B,KAAA0B,EAAAG,GAAA,IAAAE,EAAAN,EAAAhC,UAAAkB,EAAAlB,UAAAR,OAAA2B,OAAAc,GAAA,SAAAM,EAAAzC,GAAA,0BAAA0C,SAAA,SAAA3C,GAAAgB,EAAAf,EAAAD,GAAA,SAAAC,GAAA,YAAA2C,QAAA5C,EAAAC,EAAA,gBAAA4C,EAAA5C,EAAAD,GAAA,SAAA8C,EAAA5C,EAAAI,EAAAE,EAAAE,GAAA,IAAAE,EAAAa,EAAAxB,EAAAC,GAAAD,EAAAK,GAAA,aAAAM,EAAAc,KAAA,KAAAZ,EAAAF,EAAAe,IAAAE,EAAAf,EAAApB,MAAA,OAAAmC,GAAA,UAAAkB,EAAAlB,IAAAzB,EAAAwB,KAAAC,EAAA,WAAA7B,EAAAgD,QAAAnB,EAAAoB,SAAAC,MAAA,SAAAjD,GAAA6C,EAAA,OAAA7C,EAAAO,EAAAE,EAAA,aAAAT,GAAA6C,EAAA,QAAA7C,EAAAO,EAAAE,EAAA,IAAAV,EAAAgD,QAAAnB,GAAAqB,MAAA,SAAAjD,GAAAa,EAAApB,MAAAO,EAAAO,EAAAM,EAAA,aAAAb,GAAA,OAAA6C,EAAA,QAAA7C,EAAAO,EAAAE,EAAA,IAAAA,EAAAE,EAAAe,IAAA,KAAAzB,EAAAI,EAAA,gBAAAZ,MAAA,SAAAO,EAAAG,GAAA,SAAA+C,IAAA,WAAAnD,GAAA,SAAAA,EAAAE,GAAA4C,EAAA7C,EAAAG,EAAAJ,EAAAE,EAAA,WAAAA,EAAAA,EAAAA,EAAAgD,KAAAC,EAAAA,GAAAA,GAAA,aAAA3B,EAAAxB,EAAAE,EAAAE,GAAA,IAAAE,EAAAuB,EAAA,gBAAArB,EAAAE,GAAA,GAAAJ,IAAAyB,EAAA,MAAAqB,MAAA,mCAAA9C,IAAA0B,EAAA,cAAAxB,EAAA,MAAAE,EAAA,OAAAhB,MAAAO,EAAAoD,MAAA,OAAAjD,EAAAkD,OAAA9C,EAAAJ,EAAAuB,IAAAjB,IAAA,KAAAE,EAAAR,EAAAmD,SAAA,GAAA3C,EAAA,KAAAE,EAAA0C,EAAA5C,EAAAR,GAAA,GAAAU,EAAA,IAAAA,IAAAmB,EAAA,gBAAAnB,CAAA,cAAAV,EAAAkD,OAAAlD,EAAAqD,KAAArD,EAAAsD,MAAAtD,EAAAuB,SAAA,aAAAvB,EAAAkD,OAAA,IAAAhD,IAAAuB,EAAA,MAAAvB,EAAA0B,EAAA5B,EAAAuB,IAAAvB,EAAAuD,kBAAAvD,EAAAuB,IAAA,gBAAAvB,EAAAkD,QAAAlD,EAAAwD,OAAA,SAAAxD,EAAAuB,KAAArB,EAAAyB,EAAA,IAAAK,EAAAX,EAAAzB,EAAAE,EAAAE,GAAA,cAAAgC,EAAAV,KAAA,IAAApB,EAAAF,EAAAiD,KAAArB,EAAAF,EAAAM,EAAAT,MAAAM,EAAA,gBAAAvC,MAAA0C,EAAAT,IAAA0B,KAAAjD,EAAAiD,KAAA,WAAAjB,EAAAV,OAAApB,EAAA0B,EAAA5B,EAAAkD,OAAA,QAAAlD,EAAAuB,IAAAS,EAAAT,IAAA,YAAA6B,EAAAxD,EAAAE,GAAA,IAAAE,EAAAF,EAAAoD,OAAAhD,EAAAN,EAAAW,SAAAP,GAAA,GAAAE,IAAAL,EAAA,OAAAC,EAAAqD,SAAA,eAAAnD,GAAAJ,EAAAW,SAAAkD,SAAA3D,EAAAoD,OAAA,SAAApD,EAAAyB,IAAA1B,EAAAuD,EAAAxD,EAAAE,GAAA,UAAAA,EAAAoD,SAAA,WAAAlD,IAAAF,EAAAoD,OAAA,QAAApD,EAAAyB,IAAA,IAAAmC,UAAA,oCAAA1D,EAAA,aAAA6B,EAAA,IAAAzB,EAAAiB,EAAAnB,EAAAN,EAAAW,SAAAT,EAAAyB,KAAA,aAAAnB,EAAAkB,KAAA,OAAAxB,EAAAoD,OAAA,QAAApD,EAAAyB,IAAAnB,EAAAmB,IAAAzB,EAAAqD,SAAA,KAAAtB,EAAA,IAAAvB,EAAAF,EAAAmB,IAAA,OAAAjB,EAAAA,EAAA2C,MAAAnD,EAAAF,EAAA+D,YAAArD,EAAAhB,MAAAQ,EAAA8D,KAAAhE,EAAAiE,QAAA,WAAA/D,EAAAoD,SAAApD,EAAAoD,OAAA,OAAApD,EAAAyB,IAAA1B,GAAAC,EAAAqD,SAAA,KAAAtB,GAAAvB,GAAAR,EAAAoD,OAAA,QAAApD,EAAAyB,IAAA,IAAAmC,UAAA,oCAAA5D,EAAAqD,SAAA,KAAAtB,EAAA,UAAAiC,EAAAjE,GAAA,IAAAD,EAAA,CAAAmE,OAAAlE,EAAA,SAAAA,IAAAD,EAAAoE,SAAAnE,EAAA,SAAAA,IAAAD,EAAAqE,WAAApE,EAAA,GAAAD,EAAAsE,SAAArE,EAAA,SAAAsE,WAAAC,KAAAxE,EAAA,UAAAyE,EAAAxE,GAAA,IAAAD,EAAAC,EAAAyE,YAAA,GAAA1E,EAAA0B,KAAA,gBAAA1B,EAAA2B,IAAA1B,EAAAyE,WAAA1E,CAAA,UAAAuB,EAAAtB,GAAA,KAAAsE,WAAA,EAAAJ,OAAA,SAAAlE,EAAA0C,QAAAuB,EAAA,WAAAS,OAAA,YAAAnC,EAAAxC,GAAA,GAAAA,GAAA,KAAAA,EAAA,KAAAE,EAAAF,EAAAU,GAAA,GAAAR,EAAA,OAAAA,EAAA0B,KAAA5B,GAAA,sBAAAA,EAAAgE,KAAA,OAAAhE,EAAA,IAAA4E,MAAA5E,EAAA6E,QAAA,KAAAvE,GAAA,EAAAE,EAAA,SAAAwD,IAAA,OAAA1D,EAAAN,EAAA6E,QAAA,GAAAzE,EAAAwB,KAAA5B,EAAAM,GAAA,OAAA0D,EAAAtE,MAAAM,EAAAM,GAAA0D,EAAAX,MAAA,EAAAW,EAAA,OAAAA,EAAAtE,MAAAO,EAAA+D,EAAAX,MAAA,EAAAW,CAAA,SAAAxD,EAAAwD,KAAAxD,CAAA,YAAAsD,UAAAf,EAAA/C,GAAA,2BAAAkC,EAAA/B,UAAAgC,EAAA7B,EAAAmC,EAAA,eAAA/C,MAAAyC,EAAAjB,cAAA,IAAAZ,EAAA6B,EAAA,eAAAzC,MAAAwC,EAAAhB,cAAA,IAAAgB,EAAA4C,YAAA9D,EAAAmB,EAAArB,EAAA,qBAAAd,EAAA+E,oBAAA,SAAA9E,GAAA,IAAAD,EAAA,mBAAAC,GAAAA,EAAA+E,YAAA,QAAAhF,IAAAA,IAAAkC,GAAA,uBAAAlC,EAAA8E,aAAA9E,EAAAiF,MAAA,EAAAjF,EAAAkF,KAAA,SAAAjF,GAAA,OAAAN,OAAAwF,eAAAxF,OAAAwF,eAAAlF,EAAAkC,IAAAlC,EAAAmF,UAAAjD,EAAAnB,EAAAf,EAAAa,EAAA,sBAAAb,EAAAE,UAAAR,OAAA2B,OAAAmB,GAAAxC,CAAA,EAAAD,EAAAqF,MAAA,SAAApF,GAAA,OAAAgD,QAAAhD,EAAA,EAAAyC,EAAAG,EAAA1C,WAAAa,EAAA6B,EAAA1C,UAAAS,GAAA,0BAAAZ,EAAA6C,cAAAA,EAAA7C,EAAAsF,MAAA,SAAArF,EAAAC,EAAAE,EAAAE,EAAAE,QAAA,IAAAA,IAAAA,EAAA+E,SAAA,IAAA7E,EAAA,IAAAmC,EAAAzB,EAAAnB,EAAAC,EAAAE,EAAAE,GAAAE,GAAA,OAAAR,EAAA+E,oBAAA7E,GAAAQ,EAAAA,EAAAsD,OAAAd,MAAA,SAAAjD,GAAA,OAAAA,EAAAoD,KAAApD,EAAAP,MAAAgB,EAAAsD,MAAA,KAAAtB,EAAAD,GAAAzB,EAAAyB,EAAA3B,EAAA,aAAAE,EAAAyB,EAAA/B,GAAA,0BAAAM,EAAAyB,EAAA,qDAAAzC,EAAAwF,KAAA,SAAAvF,GAAA,IAAAD,EAAAL,OAAAM,GAAAC,EAAA,WAAAE,KAAAJ,EAAAE,EAAAsE,KAAApE,GAAA,OAAAF,EAAAuF,UAAA,SAAAzB,IAAA,KAAA9D,EAAA2E,QAAA,KAAA5E,EAAAC,EAAAwF,MAAA,GAAAzF,KAAAD,EAAA,OAAAgE,EAAAtE,MAAAO,EAAA+D,EAAAX,MAAA,EAAAW,CAAA,QAAAA,EAAAX,MAAA,EAAAW,CAAA,GAAAhE,EAAAwC,OAAAA,EAAAjB,EAAApB,UAAA,CAAA6E,YAAAzD,EAAAoD,MAAA,SAAA3E,GAAA,QAAA2F,KAAA,OAAA3B,KAAA,OAAAP,KAAA,KAAAC,MAAAzD,EAAA,KAAAoD,MAAA,OAAAE,SAAA,UAAAD,OAAA,YAAA3B,IAAA1B,EAAA,KAAAsE,WAAA5B,QAAA8B,IAAAzE,EAAA,QAAAE,KAAA,WAAAA,EAAA0F,OAAA,IAAAxF,EAAAwB,KAAA,KAAA1B,KAAA0E,OAAA1E,EAAA2F,MAAA,WAAA3F,GAAAD,EAAA,EAAA6F,KAAA,gBAAAzC,MAAA,MAAApD,EAAA,KAAAsE,WAAA,GAAAG,WAAA,aAAAzE,EAAAyB,KAAA,MAAAzB,EAAA0B,IAAA,YAAAoE,IAAA,EAAApC,kBAAA,SAAA3D,GAAA,QAAAqD,KAAA,MAAArD,EAAA,IAAAE,EAAA,cAAA8F,EAAA5F,EAAAE,GAAA,OAAAI,EAAAgB,KAAA,QAAAhB,EAAAiB,IAAA3B,EAAAE,EAAA8D,KAAA5D,EAAAE,IAAAJ,EAAAoD,OAAA,OAAApD,EAAAyB,IAAA1B,KAAAK,CAAA,SAAAA,EAAA,KAAAiE,WAAAM,OAAA,EAAAvE,GAAA,IAAAA,EAAA,KAAAE,EAAA,KAAA+D,WAAAjE,GAAAI,EAAAF,EAAAkE,WAAA,YAAAlE,EAAA2D,OAAA,OAAA6B,EAAA,UAAAxF,EAAA2D,QAAA,KAAAwB,KAAA,KAAA/E,EAAAR,EAAAwB,KAAApB,EAAA,YAAAM,EAAAV,EAAAwB,KAAApB,EAAA,iBAAAI,GAAAE,EAAA,SAAA6E,KAAAnF,EAAA4D,SAAA,OAAA4B,EAAAxF,EAAA4D,UAAA,WAAAuB,KAAAnF,EAAA6D,WAAA,OAAA2B,EAAAxF,EAAA6D,WAAA,SAAAzD,GAAA,QAAA+E,KAAAnF,EAAA4D,SAAA,OAAA4B,EAAAxF,EAAA4D,UAAA,YAAAtD,EAAA,MAAAsC,MAAA,kDAAAuC,KAAAnF,EAAA6D,WAAA,OAAA2B,EAAAxF,EAAA6D,WAAA,KAAAT,OAAA,SAAA3D,EAAAD,GAAA,QAAAE,EAAA,KAAAqE,WAAAM,OAAA,EAAA3E,GAAA,IAAAA,EAAA,KAAAI,EAAA,KAAAiE,WAAArE,GAAA,GAAAI,EAAA6D,QAAA,KAAAwB,MAAAvF,EAAAwB,KAAAtB,EAAA,oBAAAqF,KAAArF,EAAA+D,WAAA,KAAA7D,EAAAF,EAAA,OAAAE,IAAA,UAAAP,GAAA,aAAAA,IAAAO,EAAA2D,QAAAnE,GAAAA,GAAAQ,EAAA6D,aAAA7D,EAAA,UAAAE,EAAAF,EAAAA,EAAAkE,WAAA,UAAAhE,EAAAgB,KAAAzB,EAAAS,EAAAiB,IAAA3B,EAAAQ,GAAA,KAAA8C,OAAA,YAAAU,KAAAxD,EAAA6D,WAAApC,GAAA,KAAAgE,SAAAvF,EAAA,EAAAuF,SAAA,SAAAhG,EAAAD,GAAA,aAAAC,EAAAyB,KAAA,MAAAzB,EAAA0B,IAAA,gBAAA1B,EAAAyB,MAAA,aAAAzB,EAAAyB,KAAA,KAAAsC,KAAA/D,EAAA0B,IAAA,WAAA1B,EAAAyB,MAAA,KAAAqE,KAAA,KAAApE,IAAA1B,EAAA0B,IAAA,KAAA2B,OAAA,cAAAU,KAAA,kBAAA/D,EAAAyB,MAAA1B,IAAA,KAAAgE,KAAAhE,GAAAiC,CAAA,EAAAiE,OAAA,SAAAjG,GAAA,QAAAD,EAAA,KAAAuE,WAAAM,OAAA,EAAA7E,GAAA,IAAAA,EAAA,KAAAE,EAAA,KAAAqE,WAAAvE,GAAA,GAAAE,EAAAmE,aAAApE,EAAA,YAAAgG,SAAA/F,EAAAwE,WAAAxE,EAAAoE,UAAAG,EAAAvE,GAAA+B,CAAA,GAAAkE,MAAA,SAAAlG,GAAA,QAAAD,EAAA,KAAAuE,WAAAM,OAAA,EAAA7E,GAAA,IAAAA,EAAA,KAAAE,EAAA,KAAAqE,WAAAvE,GAAA,GAAAE,EAAAiE,SAAAlE,EAAA,KAAAG,EAAAF,EAAAwE,WAAA,aAAAtE,EAAAsB,KAAA,KAAApB,EAAAF,EAAAuB,IAAA8C,EAAAvE,EAAA,QAAAI,CAAA,QAAA8C,MAAA,0BAAAgD,cAAA,SAAApG,EAAAE,EAAAE,GAAA,YAAAmD,SAAA,CAAA5C,SAAA6B,EAAAxC,GAAA+D,WAAA7D,EAAA+D,QAAA7D,GAAA,cAAAkD,SAAA,KAAA3B,IAAA1B,GAAAgC,CAAA,GAAAjC,CAAA,UAAAqG,EAAAjG,EAAAH,EAAAD,EAAAE,EAAAI,EAAAI,EAAAE,GAAA,QAAAJ,EAAAJ,EAAAM,GAAAE,GAAAE,EAAAN,EAAAd,KAAA,OAAAU,GAAA,YAAAJ,EAAAI,EAAA,CAAAI,EAAA6C,KAAApD,EAAAa,GAAAyE,QAAAvC,QAAAlC,GAAAoC,KAAAhD,EAAAI,EAAA,UAAAqM,EAAAvM,GAAA,sBAAAH,EAAA,KAAAD,EAAAgI,UAAA,WAAAzC,SAAA,SAAArF,EAAAI,GAAA,IAAAI,EAAAN,EAAA6H,MAAAhI,EAAAD,GAAA,SAAAkI,EAAA9H,GAAAiG,EAAA3F,EAAAR,EAAAI,EAAA4H,EAAAC,EAAA,OAAA/H,EAAA,UAAA+H,EAAA/H,GAAAiG,EAAA3F,EAAAR,EAAAI,EAAA4H,EAAAC,EAAA,QAAA/H,EAAA,CAAA8H,OAAA,gBAAA5I,EAAAoB,EAAAN,GAAA,KAAAM,aAAAN,GAAA,UAAA0D,UAAA,8CAAAwC,EAAAtG,EAAAE,GAAA,QAAAD,EAAA,EAAAA,EAAAC,EAAA2E,OAAA5E,IAAA,KAAAK,EAAAJ,EAAAD,GAAAK,EAAAW,WAAAX,EAAAW,aAAA,EAAAX,EAAAY,cAAA,YAAAZ,IAAAA,EAAAa,UAAA,GAAAxB,OAAAY,eAAAP,EAAAuG,EAAAjG,EAAAb,KAAAa,EAAA,WAAAwQ,EAAA9Q,EAAAE,EAAAD,GAAA,OAAAC,GAAAoG,EAAAtG,EAAAG,UAAAD,GAAAD,GAAAqG,EAAAtG,EAAAC,GAAAN,OAAAY,eAAAP,EAAA,aAAAmB,UAAA,IAAAnB,CAAA,UAAAuG,EAAAtG,GAAA,IAAAO,EAAA,SAAAP,EAAAC,GAAA,aAAA6C,EAAA9C,KAAAA,EAAA,OAAAA,EAAA,IAAAD,EAAAC,EAAAQ,OAAA+F,aAAA,YAAAxG,EAAA,KAAAQ,EAAAR,EAAA4B,KAAA3B,EAAAC,UAAA,aAAA6C,EAAAvC,GAAA,OAAAA,EAAA,UAAAsD,UAAA,uDAAA2C,OAAAxG,EAAA,CAAAyG,CAAAzG,GAAA,gBAAA8C,EAAAvC,GAAAA,EAAAA,EAAA,YAAAuQ,EAAA9Q,EAAAK,EAAAN,GAAA,OAAAM,EAAA0Q,EAAA1Q,GAAA,SAAAL,EAAAD,GAAA,GAAAA,IAAA,UAAA+C,EAAA/C,IAAA,mBAAAA,GAAA,OAAAA,EAAA,YAAAA,EAAA,UAAA8D,UAAA,4EAAA9D,GAAA,YAAAA,EAAA,UAAAiR,eAAA,oEAAAjR,CAAA,CAAAkR,CAAAjR,EAAA,CAAAkR,CAAAlR,EAAAmR,IAAAC,QAAAC,UAAAhR,EAAAN,GAAA,GAAAgR,EAAA/Q,GAAA+E,aAAA1E,EAAA2H,MAAAhI,EAAAD,GAAA,UAAAoR,IAAA,QAAAnR,GAAAsR,QAAApR,UAAAqR,QAAA5P,KAAAyP,QAAAC,UAAAC,QAAA,0BAAAtR,GAAA,QAAAmR,EAAA,mBAAAnR,CAAA,cAAAwR,IAAA,OAAAA,EAAA,oBAAAJ,SAAAA,QAAAK,IAAAL,QAAAK,IAAAC,OAAA,SAAA3R,EAAAC,EAAAC,GAAA,IAAAkC,EAAA,SAAAnC,EAAAK,GAAA,SAAAD,eAAAuB,KAAA3B,EAAAK,IAAA,QAAAL,EAAA+Q,EAAA/Q,MAAA,OAAAA,CAAA,CAAA2R,CAAA5R,EAAAC,GAAA,GAAAmC,EAAA,KAAAhC,EAAAT,OAAAkS,yBAAAzP,EAAAnC,GAAA,OAAAG,EAAAsR,IAAAtR,EAAAsR,IAAA9P,KAAAoG,UAAAnD,OAAA,EAAA7E,EAAAE,GAAAE,EAAAV,KAAA,GAAA+R,EAAAxJ,MAAA,KAAAD,UAAA,UAAAgJ,EAAA/Q,GAAA,OAAA+Q,EAAArR,OAAAwF,eAAAxF,OAAA2C,eAAAqP,OAAA,SAAA1R,GAAA,OAAAA,EAAAmF,WAAAzF,OAAA2C,eAAArC,EAAA,EAAA+Q,EAAA/Q,EAAA,UAAA6R,EAAA7R,EAAAD,GAAA,OAAA8R,EAAAnS,OAAAwF,eAAAxF,OAAAwF,eAAAwM,OAAA,SAAA1R,EAAAD,GAAA,OAAAC,EAAAmF,UAAApF,EAAAC,CAAA,EAAA6R,EAAA7R,EAAAD,EAAA,CASA,IAIqB+R,EAAiB,SAAAC,GAOpC,SAAAD,EAAYvS,GAAS,IAAAyS,EAAA7H,EAOoB,OAPpB9K,EAAA,KAAAyS,IACnB3H,EAAA2G,EAAA,KAAAgB,EAAA,CAAMvS,KAID0S,YAAuB,QAATD,EAAA7K,EAAE+K,eAAO,IAAAF,GAATA,EAAWG,QAAU,MAAQ,MAEhDhI,EAAKiI,YAAc7S,EAAQ6S,YAAYjI,CACzC,CAEA,OA9BF,SAAAnK,EAAAD,GAAA,sBAAAA,GAAA,OAAAA,EAAA,UAAA8D,UAAA,sDAAA7D,EAAAE,UAAAR,OAAA2B,OAAAtB,GAAAA,EAAAG,UAAA,CAAA6E,YAAA,CAAAtF,MAAAO,EAAAkB,UAAA,EAAAD,cAAA,KAAAvB,OAAAY,eAAAN,EAAA,aAAAkB,UAAA,IAAAnB,GAAA8R,EAAA7R,EAAAD,EAAA,CA8BEsS,CAAAP,EAAAC,GAAAlB,EAAAiB,EAAA,EAAAtS,IAAA,YAAAC,MACA,WACE,MAAO,CACL,CAAE0Q,SAAS,EAAML,KAAM,QAASwC,cAAc,EAAOtN,KAAM,0BAA2BkJ,SAAU,MAEpG,GAEA,CAAA1O,IAAA,OAAAC,MACA,WAEE8S,aAAaC,MAAM,CACjBC,WAAW,EAIXC,aAAa,EACbrL,IAAK,0CACLsL,eAAe,EAEfC,aAAc,GAElB,GAEA,CAAApT,IAAA,QAAAC,MAKA,SAAMkH,EAAW8G,GAAU,IAAApD,EAAA,KACrBwI,EAAU,KAGVlH,UAAUF,UAAUqH,MAAM,aAC5BD,EAAUvT,KAAKyT,6BAGjBF,EAAUA,GAAWvN,QAAQvC,WACrBE,MAAK,kBAnEjBjD,EAmEiB8R,EAnEjBzR,EAmEiBgK,EAnEjB,mBAAAlI,EAAAqP,EAAAT,EAAA,EAmEiB,EAnEjB/Q,EAAAE,UAAAF,GAmEiB,QAnEjBK,IAAA,SAAAL,GAAA,OAAAmC,EAAA6F,MAAA3H,EAAAL,EAAA,EAAAmC,GAmEiB,CAAkBwE,EAAW8G,IAnE9C,IAAAzN,EAAAK,EAAA8B,CAmEsD,GACpD,GAEA,CAAA3C,IAAA,cAAAC,MACA,SAAYsK,GACV,OAAO,IAAIiJ,GAAiB1L,EAAAA,EAAAA,GAAehI,KAAK8S,YAAa,CAAEvL,KAAMkD,EAAMlD,KAAMoM,OAAQ3T,KAAK2S,cAChG,GAEA,CAAAzS,IAAA,2BAAAC,OAAAyT,EAAAxG,EAAA5M,IAAAmF,MAQA,SAAA8B,IAAA,IAAA6H,EAAA,OAAA9O,IAAAqB,MAAA,SAAA+F,GAAA,cAAAA,EAAAxB,KAAAwB,EAAAnD,MAAA,OACgF,OAAxE6K,EAAQ2D,aAAavD,YAAY,CAAE3H,IAAK8L,EAAY7T,KAAK2S,eAAe/K,EAAAnD,KAAA,EACxE,IAAIuB,SAAQ,SAAA8N,GAAG,OAAIxE,EAAMY,KAAK,CAAC6D,SAAUD,GAAK,IAAC,OACrDxE,EAAM0E,WAAW,wBAAApM,EAAArB,OAAA,GAAAkB,EAAA,UAClB,WAJ6B,OAAAmM,EAAAlL,MAAC,KAADD,UAAA,OAAAvI,IAAA,cAAAC,MApE9B,WACE,MAAgC,oBAAlB8S,cAAiCA,aAAagB,WAC9D,KA0DA,IAAAL,CA1DC,CAJmC,CAASvG,GA8EzCqG,EAAgB,WASnB,OAAAnC,GAPD,SAAAmC,EAAYQ,GAAUnU,EAAA,KAAA2T,GACpB1T,KAAKkU,SAAWA,EAEhBlU,KAAKsP,MAAQ,KACbtP,KAAK2P,KAAO,EAEZ3P,KAAKmU,gBAAkB,IACzB,GAAC,EAAAjU,IAAA,SAAAiS,IAED,WACE,OAAOnS,KAAKsP,OAAStP,KAAKsP,MAAMW,MAClC,GAAC,CAAA/P,IAAA,OAAAC,MAED,SAAKiU,GAAQ,IAQDC,EARChJ,EAAA,KAaX,OAZArL,KAAKsP,MAAQ2D,aAAavD,YAAY,CACpC3H,IAAK/H,KAAKkU,SAEVE,OAAQ,WACW,GAAb/I,EAAKsE,MAAWtE,EAAKiE,MAAMH,gBAAgB9D,EAAKsE,MACpDyE,GACF,EACAE,UAAQD,EAAAjH,EAAA5M,IAAAmF,MAAE,SAAA0J,IAAA,OAAA7O,IAAAqB,MAAA,SAAA2N,GAAA,cAAAA,EAAApJ,KAAAoJ,EAAA/K,MAAA,cAAA+K,EAAA/K,KAAA,GACF8P,EAAAA,EAAAA,OAAM,IAAG,OACE,GAAblJ,EAAKsE,MAAWtE,EAAKiE,MAAMH,gBAAgB9D,EAAKsE,MAAM,wBAAAH,EAAAjJ,OAAA,GAAA8I,EAAA,KAC3D,WAHO,OAAAgF,EAAA3L,MAAA,KAAAD,UAAA,KAKHzI,KAAKsP,MAAMM,MACpB,GAAC,CAAA1P,IAAA,OAAAC,OAAAqU,EAAApH,EAAA5M,IAAAmF,MAED,SAAA8O,IAAA,IAAA1I,EAAA,YAAAvL,IAAAqB,MAAA,SAAA6S,GAAA,cAAAA,EAAAtO,KAAAsO,EAAAjQ,MAAA,cAAAiQ,EAAAjQ,KAAA,EACQ,IAAIuB,SAAQ,SAAA8N,GAChB/H,EAAKoI,gBAAkBL,EACvB/H,EAAKuD,MAAMY,KAAK,CAAE6D,SAAUD,GAC9B,IAAE,OACF9T,KAAKsP,MAAM0E,WAAW,wBAAAU,EAAAnO,OAAA,GAAAkO,EAAA,UACvB,WANS,OAAAD,EAAA9L,MAAC,KAADD,UAAA,IAQV,CAAAvI,IAAA,OAAAC,MACA,WAEE,OADAH,KAAKsP,MAAM/I,OACJP,QAAQvC,SACjB,GAEA,CAAAvD,IAAA,QAAAC,MACA,WAAUH,KAAKsP,MAAMf,OAAS,GAC9B,CAAArO,IAAA,SAAAC,MACA,WAAWH,KAAKsP,MAAMd,QAAU,GAChC,CAAAtO,IAAA,kBAAAC,MACA,SAAgBwP,GACd3P,KAAK2P,KAAOA,EACZ3P,KAAKsP,MAAMH,gBAAgBQ,EAC7B,GAEA,CAAAzP,IAAA,SAAAC,MACA,WACEH,KAAKsP,MAAM/I,OACXvG,KAAKmU,iBACP,KA9BC,IAAAK,CA8BA,CA3DmB,GA+DhBX,EAAc,CAClBc,IAAK,61BACLC,IAAK,27KC5JPpU,GAAA,kBAAAC,CAAA,MAAAC,EAAAD,EAAA,GAAAE,EAAAP,OAAAQ,UAAAC,EAAAF,EAAAG,eAAAC,EAAAX,OAAAY,gBAAA,SAAAN,EAAAD,EAAAE,GAAAD,EAAAD,GAAAE,EAAAR,KAAA,EAAAc,EAAA,mBAAAC,OAAAA,OAAA,GAAAC,EAAAF,EAAAG,UAAA,aAAAC,EAAAJ,EAAAK,eAAA,kBAAAC,EAAAN,EAAAO,aAAA,yBAAAC,EAAAf,EAAAD,EAAAE,GAAA,OAAAP,OAAAY,eAAAN,EAAAD,EAAA,CAAAN,MAAAQ,EAAAe,YAAA,EAAAC,cAAA,EAAAC,UAAA,IAAAlB,EAAAD,EAAA,KAAAgB,EAAA,aAAAf,GAAAe,EAAA,SAAAf,EAAAD,EAAAE,GAAA,OAAAD,EAAAD,GAAAE,CAAA,WAAAkB,EAAAnB,EAAAD,EAAAE,EAAAE,GAAA,IAAAI,EAAAR,GAAAA,EAAAG,qBAAAkB,EAAArB,EAAAqB,EAAAX,EAAAf,OAAA2B,OAAAd,EAAAL,WAAAS,EAAA,IAAAW,EAAAnB,GAAA,WAAAE,EAAAI,EAAA,WAAAhB,MAAA8B,EAAAvB,EAAAC,EAAAU,KAAAF,CAAA,UAAAe,EAAAxB,EAAAD,EAAAE,GAAA,WAAAwB,KAAA,SAAAC,IAAA1B,EAAA2B,KAAA5B,EAAAE,GAAA,OAAAD,GAAA,OAAAyB,KAAA,QAAAC,IAAA1B,EAAA,EAAAD,EAAAoB,KAAAA,EAAA,IAAAS,EAAA,iBAAAC,EAAA,iBAAAC,EAAA,YAAAC,EAAA,YAAAC,EAAA,YAAAZ,IAAA,UAAAa,IAAA,UAAAC,IAAA,KAAAC,EAAA,GAAApB,EAAAoB,EAAA1B,GAAA,8BAAA2B,EAAA1C,OAAA2C,eAAAC,EAAAF,GAAAA,EAAAA,EAAAG,EAAA,MAAAD,GAAAA,IAAArC,GAAAE,EAAAwB,KAAAW,EAAA7B,KAAA0B,EAAAG,GAAA,IAAAE,EAAAN,EAAAhC,UAAAkB,EAAAlB,UAAAR,OAAA2B,OAAAc,GAAA,SAAAM,EAAAzC,GAAA,0BAAA0C,SAAA,SAAA3C,GAAAgB,EAAAf,EAAAD,GAAA,SAAAC,GAAA,YAAA2C,QAAA5C,EAAAC,EAAA,gBAAA4C,EAAA5C,EAAAD,GAAA,SAAA8C,EAAA5C,EAAAI,EAAAE,EAAAE,GAAA,IAAAE,EAAAa,EAAAxB,EAAAC,GAAAD,EAAAK,GAAA,aAAAM,EAAAc,KAAA,KAAAZ,EAAAF,EAAAe,IAAAE,EAAAf,EAAApB,MAAA,OAAAmC,GAAA,UAAAkB,EAAAlB,IAAAzB,EAAAwB,KAAAC,EAAA,WAAA7B,EAAAgD,QAAAnB,EAAAoB,SAAAC,MAAA,SAAAjD,GAAA6C,EAAA,OAAA7C,EAAAO,EAAAE,EAAA,aAAAT,GAAA6C,EAAA,QAAA7C,EAAAO,EAAAE,EAAA,IAAAV,EAAAgD,QAAAnB,GAAAqB,MAAA,SAAAjD,GAAAa,EAAApB,MAAAO,EAAAO,EAAAM,EAAA,aAAAb,GAAA,OAAA6C,EAAA,QAAA7C,EAAAO,EAAAE,EAAA,IAAAA,EAAAE,EAAAe,IAAA,KAAAzB,EAAAI,EAAA,gBAAAZ,MAAA,SAAAO,EAAAG,GAAA,SAAA+C,IAAA,WAAAnD,GAAA,SAAAA,EAAAE,GAAA4C,EAAA7C,EAAAG,EAAAJ,EAAAE,EAAA,WAAAA,EAAAA,EAAAA,EAAAgD,KAAAC,EAAAA,GAAAA,GAAA,aAAA3B,EAAAxB,EAAAE,EAAAE,GAAA,IAAAE,EAAAuB,EAAA,gBAAArB,EAAAE,GAAA,GAAAJ,IAAAyB,EAAA,MAAAqB,MAAA,mCAAA9C,IAAA0B,EAAA,cAAAxB,EAAA,MAAAE,EAAA,OAAAhB,MAAAO,EAAAoD,MAAA,OAAAjD,EAAAkD,OAAA9C,EAAAJ,EAAAuB,IAAAjB,IAAA,KAAAE,EAAAR,EAAAmD,SAAA,GAAA3C,EAAA,KAAAE,EAAA0C,EAAA5C,EAAAR,GAAA,GAAAU,EAAA,IAAAA,IAAAmB,EAAA,gBAAAnB,CAAA,cAAAV,EAAAkD,OAAAlD,EAAAqD,KAAArD,EAAAsD,MAAAtD,EAAAuB,SAAA,aAAAvB,EAAAkD,OAAA,IAAAhD,IAAAuB,EAAA,MAAAvB,EAAA0B,EAAA5B,EAAAuB,IAAAvB,EAAAuD,kBAAAvD,EAAAuB,IAAA,gBAAAvB,EAAAkD,QAAAlD,EAAAwD,OAAA,SAAAxD,EAAAuB,KAAArB,EAAAyB,EAAA,IAAAK,EAAAX,EAAAzB,EAAAE,EAAAE,GAAA,cAAAgC,EAAAV,KAAA,IAAApB,EAAAF,EAAAiD,KAAArB,EAAAF,EAAAM,EAAAT,MAAAM,EAAA,gBAAAvC,MAAA0C,EAAAT,IAAA0B,KAAAjD,EAAAiD,KAAA,WAAAjB,EAAAV,OAAApB,EAAA0B,EAAA5B,EAAAkD,OAAA,QAAAlD,EAAAuB,IAAAS,EAAAT,IAAA,YAAA6B,EAAAxD,EAAAE,GAAA,IAAAE,EAAAF,EAAAoD,OAAAhD,EAAAN,EAAAW,SAAAP,GAAA,GAAAE,IAAAL,EAAA,OAAAC,EAAAqD,SAAA,eAAAnD,GAAAJ,EAAAW,SAAAkD,SAAA3D,EAAAoD,OAAA,SAAApD,EAAAyB,IAAA1B,EAAAuD,EAAAxD,EAAAE,GAAA,UAAAA,EAAAoD,SAAA,WAAAlD,IAAAF,EAAAoD,OAAA,QAAApD,EAAAyB,IAAA,IAAAmC,UAAA,oCAAA1D,EAAA,aAAA6B,EAAA,IAAAzB,EAAAiB,EAAAnB,EAAAN,EAAAW,SAAAT,EAAAyB,KAAA,aAAAnB,EAAAkB,KAAA,OAAAxB,EAAAoD,OAAA,QAAApD,EAAAyB,IAAAnB,EAAAmB,IAAAzB,EAAAqD,SAAA,KAAAtB,EAAA,IAAAvB,EAAAF,EAAAmB,IAAA,OAAAjB,EAAAA,EAAA2C,MAAAnD,EAAAF,EAAA+D,YAAArD,EAAAhB,MAAAQ,EAAA8D,KAAAhE,EAAAiE,QAAA,WAAA/D,EAAAoD,SAAApD,EAAAoD,OAAA,OAAApD,EAAAyB,IAAA1B,GAAAC,EAAAqD,SAAA,KAAAtB,GAAAvB,GAAAR,EAAAoD,OAAA,QAAApD,EAAAyB,IAAA,IAAAmC,UAAA,oCAAA5D,EAAAqD,SAAA,KAAAtB,EAAA,UAAAiC,EAAAjE,GAAA,IAAAD,EAAA,CAAAmE,OAAAlE,EAAA,SAAAA,IAAAD,EAAAoE,SAAAnE,EAAA,SAAAA,IAAAD,EAAAqE,WAAApE,EAAA,GAAAD,EAAAsE,SAAArE,EAAA,SAAAsE,WAAAC,KAAAxE,EAAA,UAAAyE,EAAAxE,GAAA,IAAAD,EAAAC,EAAAyE,YAAA,GAAA1E,EAAA0B,KAAA,gBAAA1B,EAAA2B,IAAA1B,EAAAyE,WAAA1E,CAAA,UAAAuB,EAAAtB,GAAA,KAAAsE,WAAA,EAAAJ,OAAA,SAAAlE,EAAA0C,QAAAuB,EAAA,WAAAS,OAAA,YAAAnC,EAAAxC,GAAA,GAAAA,GAAA,KAAAA,EAAA,KAAAE,EAAAF,EAAAU,GAAA,GAAAR,EAAA,OAAAA,EAAA0B,KAAA5B,GAAA,sBAAAA,EAAAgE,KAAA,OAAAhE,EAAA,IAAA4E,MAAA5E,EAAA6E,QAAA,KAAAvE,GAAA,EAAAE,EAAA,SAAAwD,IAAA,OAAA1D,EAAAN,EAAA6E,QAAA,GAAAzE,EAAAwB,KAAA5B,EAAAM,GAAA,OAAA0D,EAAAtE,MAAAM,EAAAM,GAAA0D,EAAAX,MAAA,EAAAW,EAAA,OAAAA,EAAAtE,MAAAO,EAAA+D,EAAAX,MAAA,EAAAW,CAAA,SAAAxD,EAAAwD,KAAAxD,CAAA,YAAAsD,UAAAf,EAAA/C,GAAA,2BAAAkC,EAAA/B,UAAAgC,EAAA7B,EAAAmC,EAAA,eAAA/C,MAAAyC,EAAAjB,cAAA,IAAAZ,EAAA6B,EAAA,eAAAzC,MAAAwC,EAAAhB,cAAA,IAAAgB,EAAA4C,YAAA9D,EAAAmB,EAAArB,EAAA,qBAAAd,EAAA+E,oBAAA,SAAA9E,GAAA,IAAAD,EAAA,mBAAAC,GAAAA,EAAA+E,YAAA,QAAAhF,IAAAA,IAAAkC,GAAA,uBAAAlC,EAAA8E,aAAA9E,EAAAiF,MAAA,EAAAjF,EAAAkF,KAAA,SAAAjF,GAAA,OAAAN,OAAAwF,eAAAxF,OAAAwF,eAAAlF,EAAAkC,IAAAlC,EAAAmF,UAAAjD,EAAAnB,EAAAf,EAAAa,EAAA,sBAAAb,EAAAE,UAAAR,OAAA2B,OAAAmB,GAAAxC,CAAA,EAAAD,EAAAqF,MAAA,SAAApF,GAAA,OAAAgD,QAAAhD,EAAA,EAAAyC,EAAAG,EAAA1C,WAAAa,EAAA6B,EAAA1C,UAAAS,GAAA,0BAAAZ,EAAA6C,cAAAA,EAAA7C,EAAAsF,MAAA,SAAArF,EAAAC,EAAAE,EAAAE,EAAAE,QAAA,IAAAA,IAAAA,EAAA+E,SAAA,IAAA7E,EAAA,IAAAmC,EAAAzB,EAAAnB,EAAAC,EAAAE,EAAAE,GAAAE,GAAA,OAAAR,EAAA+E,oBAAA7E,GAAAQ,EAAAA,EAAAsD,OAAAd,MAAA,SAAAjD,GAAA,OAAAA,EAAAoD,KAAApD,EAAAP,MAAAgB,EAAAsD,MAAA,KAAAtB,EAAAD,GAAAzB,EAAAyB,EAAA3B,EAAA,aAAAE,EAAAyB,EAAA/B,GAAA,0BAAAM,EAAAyB,EAAA,qDAAAzC,EAAAwF,KAAA,SAAAvF,GAAA,IAAAD,EAAAL,OAAAM,GAAAC,EAAA,WAAAE,KAAAJ,EAAAE,EAAAsE,KAAApE,GAAA,OAAAF,EAAAuF,UAAA,SAAAzB,IAAA,KAAA9D,EAAA2E,QAAA,KAAA5E,EAAAC,EAAAwF,MAAA,GAAAzF,KAAAD,EAAA,OAAAgE,EAAAtE,MAAAO,EAAA+D,EAAAX,MAAA,EAAAW,CAAA,QAAAA,EAAAX,MAAA,EAAAW,CAAA,GAAAhE,EAAAwC,OAAAA,EAAAjB,EAAApB,UAAA,CAAA6E,YAAAzD,EAAAoD,MAAA,SAAA3E,GAAA,QAAA2F,KAAA,OAAA3B,KAAA,OAAAP,KAAA,KAAAC,MAAAzD,EAAA,KAAAoD,MAAA,OAAAE,SAAA,UAAAD,OAAA,YAAA3B,IAAA1B,EAAA,KAAAsE,WAAA5B,QAAA8B,IAAAzE,EAAA,QAAAE,KAAA,WAAAA,EAAA0F,OAAA,IAAAxF,EAAAwB,KAAA,KAAA1B,KAAA0E,OAAA1E,EAAA2F,MAAA,WAAA3F,GAAAD,EAAA,EAAA6F,KAAA,gBAAAzC,MAAA,MAAApD,EAAA,KAAAsE,WAAA,GAAAG,WAAA,aAAAzE,EAAAyB,KAAA,MAAAzB,EAAA0B,IAAA,YAAAoE,IAAA,EAAApC,kBAAA,SAAA3D,GAAA,QAAAqD,KAAA,MAAArD,EAAA,IAAAE,EAAA,cAAA8F,EAAA5F,EAAAE,GAAA,OAAAI,EAAAgB,KAAA,QAAAhB,EAAAiB,IAAA3B,EAAAE,EAAA8D,KAAA5D,EAAAE,IAAAJ,EAAAoD,OAAA,OAAApD,EAAAyB,IAAA1B,KAAAK,CAAA,SAAAA,EAAA,KAAAiE,WAAAM,OAAA,EAAAvE,GAAA,IAAAA,EAAA,KAAAE,EAAA,KAAA+D,WAAAjE,GAAAI,EAAAF,EAAAkE,WAAA,YAAAlE,EAAA2D,OAAA,OAAA6B,EAAA,UAAAxF,EAAA2D,QAAA,KAAAwB,KAAA,KAAA/E,EAAAR,EAAAwB,KAAApB,EAAA,YAAAM,EAAAV,EAAAwB,KAAApB,EAAA,iBAAAI,GAAAE,EAAA,SAAA6E,KAAAnF,EAAA4D,SAAA,OAAA4B,EAAAxF,EAAA4D,UAAA,WAAAuB,KAAAnF,EAAA6D,WAAA,OAAA2B,EAAAxF,EAAA6D,WAAA,SAAAzD,GAAA,QAAA+E,KAAAnF,EAAA4D,SAAA,OAAA4B,EAAAxF,EAAA4D,UAAA,YAAAtD,EAAA,MAAAsC,MAAA,kDAAAuC,KAAAnF,EAAA6D,WAAA,OAAA2B,EAAAxF,EAAA6D,WAAA,KAAAT,OAAA,SAAA3D,EAAAD,GAAA,QAAAE,EAAA,KAAAqE,WAAAM,OAAA,EAAA3E,GAAA,IAAAA,EAAA,KAAAI,EAAA,KAAAiE,WAAArE,GAAA,GAAAI,EAAA6D,QAAA,KAAAwB,MAAAvF,EAAAwB,KAAAtB,EAAA,oBAAAqF,KAAArF,EAAA+D,WAAA,KAAA7D,EAAAF,EAAA,OAAAE,IAAA,UAAAP,GAAA,aAAAA,IAAAO,EAAA2D,QAAAnE,GAAAA,GAAAQ,EAAA6D,aAAA7D,EAAA,UAAAE,EAAAF,EAAAA,EAAAkE,WAAA,UAAAhE,EAAAgB,KAAAzB,EAAAS,EAAAiB,IAAA3B,EAAAQ,GAAA,KAAA8C,OAAA,YAAAU,KAAAxD,EAAA6D,WAAApC,GAAA,KAAAgE,SAAAvF,EAAA,EAAAuF,SAAA,SAAAhG,EAAAD,GAAA,aAAAC,EAAAyB,KAAA,MAAAzB,EAAA0B,IAAA,gBAAA1B,EAAAyB,MAAA,aAAAzB,EAAAyB,KAAA,KAAAsC,KAAA/D,EAAA0B,IAAA,WAAA1B,EAAAyB,MAAA,KAAAqE,KAAA,KAAApE,IAAA1B,EAAA0B,IAAA,KAAA2B,OAAA,cAAAU,KAAA,kBAAA/D,EAAAyB,MAAA1B,IAAA,KAAAgE,KAAAhE,GAAAiC,CAAA,EAAAiE,OAAA,SAAAjG,GAAA,QAAAD,EAAA,KAAAuE,WAAAM,OAAA,EAAA7E,GAAA,IAAAA,EAAA,KAAAE,EAAA,KAAAqE,WAAAvE,GAAA,GAAAE,EAAAmE,aAAApE,EAAA,YAAAgG,SAAA/F,EAAAwE,WAAAxE,EAAAoE,UAAAG,EAAAvE,GAAA+B,CAAA,GAAAkE,MAAA,SAAAlG,GAAA,QAAAD,EAAA,KAAAuE,WAAAM,OAAA,EAAA7E,GAAA,IAAAA,EAAA,KAAAE,EAAA,KAAAqE,WAAAvE,GAAA,GAAAE,EAAAiE,SAAAlE,EAAA,KAAAG,EAAAF,EAAAwE,WAAA,aAAAtE,EAAAsB,KAAA,KAAApB,EAAAF,EAAAuB,IAAA8C,EAAAvE,EAAA,QAAAI,CAAA,QAAA8C,MAAA,0BAAAgD,cAAA,SAAApG,EAAAE,EAAAE,GAAA,YAAAmD,SAAA,CAAA5C,SAAA6B,EAAAxC,GAAA+D,WAAA7D,EAAA+D,QAAA7D,GAAA,cAAAkD,SAAA,KAAA3B,IAAA1B,GAAAgC,CAAA,GAAAjC,CAAA,UAAAqG,GAAAjG,EAAAH,EAAAD,EAAAE,EAAAI,EAAAI,EAAAE,GAAA,QAAAJ,EAAAJ,EAAAM,GAAAE,GAAAE,EAAAN,EAAAd,KAAA,OAAAU,GAAA,YAAAJ,EAAAI,EAAA,CAAAI,EAAA6C,KAAApD,EAAAa,GAAAyE,QAAAvC,QAAAlC,GAAAoC,KAAAhD,EAAAI,EAAA,UAAAqM,GAAAvM,GAAA,sBAAAH,EAAA,KAAAD,EAAAgI,UAAA,WAAAzC,SAAA,SAAArF,EAAAI,GAAA,IAAAI,EAAAN,EAAA6H,MAAAhI,EAAAD,GAAA,SAAAkI,EAAA9H,GAAAiG,GAAA3F,EAAAR,EAAAI,EAAA4H,EAAAC,EAAA,OAAA/H,EAAA,UAAA+H,EAAA/H,GAAAiG,GAAA3F,EAAAR,EAAAI,EAAA4H,EAAAC,EAAA,QAAA/H,EAAA,CAAA8H,OAAA,gBAAA5I,GAAAoB,EAAAN,GAAA,KAAAM,aAAAN,GAAA,UAAA0D,UAAA,8CAAAwC,GAAAtG,EAAAE,GAAA,QAAAD,EAAA,EAAAA,EAAAC,EAAA2E,OAAA5E,IAAA,KAAAK,EAAAJ,EAAAD,GAAAK,EAAAW,WAAAX,EAAAW,aAAA,EAAAX,EAAAY,cAAA,YAAAZ,IAAAA,EAAAa,UAAA,GAAAxB,OAAAY,eAAAP,EAAAuG,GAAAjG,EAAAb,KAAAa,EAAA,WAAAwQ,GAAA9Q,EAAAE,EAAAD,GAAA,OAAAC,GAAAoG,GAAAtG,EAAAG,UAAAD,GAAAD,GAAAqG,GAAAtG,EAAAC,GAAAN,OAAAY,eAAAP,EAAA,aAAAmB,UAAA,IAAAnB,CAAA,UAAAuG,GAAAtG,GAAA,IAAAO,EAAA,SAAAP,EAAAC,GAAA,aAAA6C,EAAA9C,KAAAA,EAAA,OAAAA,EAAA,IAAAD,EAAAC,EAAAQ,OAAA+F,aAAA,YAAAxG,EAAA,KAAAQ,EAAAR,EAAA4B,KAAA3B,EAAAC,UAAA,aAAA6C,EAAAvC,GAAA,OAAAA,EAAA,UAAAsD,UAAA,uDAAA2C,OAAAxG,EAAA,CAAAyG,CAAAzG,GAAA,gBAAA8C,EAAAvC,GAAAA,EAAAA,EAAA,YAAAuQ,GAAA9Q,EAAAK,EAAAN,GAAA,OAAAM,EAAA0Q,GAAA1Q,GAAA,SAAAL,EAAAD,GAAA,GAAAA,IAAA,UAAA+C,EAAA/C,IAAA,mBAAAA,GAAA,OAAAA,EAAA,YAAAA,EAAA,UAAA8D,UAAA,4EAAA9D,GAAA,YAAAA,EAAA,UAAAiR,eAAA,oEAAAjR,CAAA,CAAAkR,CAAAjR,EAAA,CAAAkR,CAAAlR,EAAAmR,KAAAC,QAAAC,UAAAhR,EAAAN,GAAA,GAAAgR,GAAA/Q,GAAA+E,aAAA1E,EAAA2H,MAAAhI,EAAAD,GAAA,UAAAoR,KAAA,QAAAnR,GAAAsR,QAAApR,UAAAqR,QAAA5P,KAAAyP,QAAAC,UAAAC,QAAA,0BAAAtR,GAAA,QAAAmR,GAAA,mBAAAnR,CAAA,cAAAwR,KAAA,OAAAA,GAAA,oBAAAJ,SAAAA,QAAAK,IAAAL,QAAAK,IAAAC,OAAA,SAAA3R,EAAAC,EAAAC,GAAA,IAAAkC,EAAA,SAAAnC,EAAAK,GAAA,SAAAD,eAAAuB,KAAA3B,EAAAK,IAAA,QAAAL,EAAA+Q,GAAA/Q,MAAA,OAAAA,CAAA,CAAA2R,CAAA5R,EAAAC,GAAA,GAAAmC,EAAA,KAAAhC,EAAAT,OAAAkS,yBAAAzP,EAAAnC,GAAA,OAAAG,EAAAsR,IAAAtR,EAAAsR,IAAA9P,KAAAoG,UAAAnD,OAAA,EAAA7E,EAAAE,GAAAE,EAAAV,KAAA,GAAA+R,GAAAxJ,MAAA,KAAAD,UAAA,UAAAgJ,GAAA/Q,GAAA,OAAA+Q,GAAArR,OAAAwF,eAAAxF,OAAA2C,eAAAqP,OAAA,SAAA1R,GAAA,OAAAA,EAAAmF,WAAAzF,OAAA2C,eAAArC,EAAA,EAAA+Q,GAAA/Q,EAAA,UAAA6R,GAAA7R,EAAAD,GAAA,OAAA8R,GAAAnS,OAAAwF,eAAAxF,OAAAwF,eAAAwM,OAAA,SAAA1R,EAAAD,GAAA,OAAAC,EAAAmF,UAAApF,EAAAC,CAAA,EAAA6R,GAAA7R,EAAAD,EAAA,CAQA,IAIqBoU,GAAY,SAAApC,GAM/B,SAAAoC,EAAY5U,GAAS,IAAA4K,EAMlB,OANkB9K,GAAA,KAAA8U,GACnBhK,EAAA2G,GAAA,KAAAqD,EAAA,CAAM5U,IAGF6U,gBAAgBC,kBAClBD,gBAAgBC,iBAAiB,iBAAiB,kBAAMlK,EAAKkD,OAAOG,QAAQ,gBAAgB,IAC7FrD,CACH,CAEA,OA3BF,SAAAnK,EAAAD,GAAA,sBAAAA,GAAA,OAAAA,EAAA,UAAA8D,UAAA,sDAAA7D,EAAAE,UAAAR,OAAA2B,OAAAtB,GAAAA,EAAAG,UAAA,CAAA6E,YAAA,CAAAtF,MAAAO,EAAAkB,UAAA,EAAAD,cAAA,KAAAvB,OAAAY,eAAAN,EAAA,aAAAkB,UAAA,IAAAnB,GAAA8R,GAAA7R,EAAAD,EAAA,CA2BEsS,CAAA8B,EAAApC,GAAAlB,GAAAsD,EAAA,EAAA3U,IAAA,QAAAC,MACA,SAAMkH,EAAW8G,GAAU,IA5B7BzN,EAAAK,EAAA8B,EA4B6BkI,EAAA,KAEzB,GAAI,iBAAkBsB,UAAW,CAC/B,IAAM2I,EAAQ,IAAIC,MAAMC,IACxBF,EAAMG,MAAO,EAEbnV,KAAK+N,OAAOC,GAAG,SAAS,kBAAMgH,EAAMzG,OAAO,IAC3CvO,KAAK+N,OAAOC,GAAG,UAAU,kBAAMgH,EAAM9E,MAAM,IAG3ClQ,KAAK+N,OAAOC,GAAG,QAAQ,kBAAMgH,EAAMI,IAAM,EAAE,IAC3CJ,EAAM9E,OAAOvM,MAAK,WAChB0I,UAAUgJ,aAAaC,SAAW,IAAIC,cAAc,CAClDC,MAAO1V,GAAG2V,UACVC,OAAQ5V,GAAGG,QAAQqV,SAAS/E,QAAO,SAAAoF,GAAC,MAAe,UAAXA,EAAEC,KAAiB,IAAE5M,KAAI,SAAA2M,GAAC,OAAIA,EAAExV,KAAK,IAAE,GAE/E0V,QAAS,CACP,CAAET,IAAKtV,GAAGG,QAAQ6V,UAAW3T,KAAM,gBAIvCkK,UAAUgJ,aAAaU,iBAAiB,QAAQ,WAC9Cf,EAAM9E,OACNnF,EAAKyD,QACP,IACAnC,UAAUgJ,aAAaU,iBAAiB,SAAS,WAC/Cf,EAAMzG,QACNxD,EAAKwD,OACP,IAOAlC,UAAUgJ,aAAaU,iBAAiB,iBAAiB,kBAAMhL,EAAKiL,cAAc,IAClF3J,UAAUgJ,aAAaU,iBAAiB,aAAa,kBAAMhL,EAAKkL,aAAa,GAC/E,GACF,CAEA,OApEJvV,EAoEImU,EApEJ9T,EAoEI,KApEJ,mBAAA8B,EAAAqP,GAAAT,GAAA,EAoEI,EApEJ/Q,EAAAE,UAAAF,GAoEI,QApEJK,IAAA,SAAAL,GAAA,OAAAmC,EAAA6F,MAAA3H,EAAAL,EAAA,EAAAmC,GAoEI,CAAmBwE,EAAW8G,GAChC,GAEA,CAAAjO,IAAA,YAAAC,MACA,WACE,IAAMgQ,EAAS2E,gBAAgBtH,YAa/B,OAZ4C,GAAxC2C,EAAOI,QAAO,SAAAvN,GAAC,OAAIA,EAAE6N,OAAO,IAAEvL,QAGhC6K,EAAO+F,QAAQ,CACbtH,SAAU,2BACVlJ,KAAM,iBAEN8K,KAAMnE,UAAUI,SAChBoE,SAAS,EACTmC,cAAc,IAGX7C,CACT,GAEA,CAAAjQ,IAAA,cAAAC,MACA,SAAYsK,GACV,OAAO,IAAI0L,GAAY1L,EAAMlD,KAC/B,IAAC,EAAArH,IAAA,cAAAC,MA/ED,WACE,YAA0C,IAA5BkI,OAAOyM,kBAAqC,kBAAkBxI,KAAKD,UAAUF,UAC7F,IAAC,CAH8B,CAASkB,GAoF7B8I,GAAW,WAoCtB,OAAA5E,IAlCA,SAAA4E,EAAY5O,GAAMxH,GAAA,KAAAoW,GAChBnW,KAAKuH,KAAOA,EACZvH,KAAKiQ,QAAS,EACdjQ,KAAK2N,QAAS,EACd3N,KAAKoW,SAAU,EAEfpW,KAAKqW,SAAU,EACfrW,KAAK2P,KAAO,EAGZ3P,KAAKsW,UAAY,KAGjBtW,KAAKsN,MAAQ,KAEbtN,KAAKuW,YAAc,CAEjBhI,MAAO,KAEPiI,SAAU,KAEVpM,MAAO,MAITpK,KAAKyW,WAAa,EAGlBzW,KAAKmU,gBAAkB,KAGvBnU,KAAK0W,eAAiB,IACxB,GAEA,EAAAxW,IAAA,OAAAC,MACA,SAAKiU,GAAQ,IAAAuC,EAAAtL,EAAA,KACXrL,KAAKiQ,QAAS,EACdjQ,KAAKoW,SAAU,EAEfpW,KAAKsW,UAAY,IAAIM,yBAAyB5W,KAAKuH,KAAKjB,MAAMtG,KAAKyW,aAGtC,8BAAf,QAAVE,EAAA3W,KAAKsN,aAAK,IAAAqJ,OAAA,EAAVA,EAAY/H,YACd5O,KAAKsW,UAAUhJ,MAAQtN,KAAKsN,OAG1BtN,KAAKsN,QAAOtN,KAAKsW,UAAU9F,KAAOxQ,KAAKsN,MAAMkD,MACjDxQ,KAAKsW,UAAU3G,KAAO3P,KAAK2P,MAGiC,GAAxDkH,SAASC,WAAW7J,QAAQ,0BAC9BjN,KAAKsW,UAAUvB,iBAAiB,SAAS,kBAAMgC,QAAQC,IAAI,QAAQ,IACnEhX,KAAKsW,UAAUvB,iBAAiB,UAAU,kBAAMgC,QAAQC,IAAI,SAAS,IACrEhX,KAAKsW,UAAUvB,iBAAiB,SAAS,kBAAMgC,QAAQC,IAAI,QAAQ,IACnEhX,KAAKsW,UAAUvB,iBAAiB,OAAO,kBAAMgC,QAAQC,IAAI,MAAM,IAC/DhX,KAAKsW,UAAUvB,iBAAiB,SAAS,kBAAMgC,QAAQC,IAAI,QAAQ,IACnEhX,KAAKsW,UAAUvB,iBAAiB,YAAY,kBAAMgC,QAAQC,IAAI,WAAW,IACzEhX,KAAKsW,UAAUvB,iBAAiB,QAAQ,kBAAMgC,QAAQC,IAAI,OAAO,IACjEhX,KAAKsW,UAAUvB,iBAAiB,UAAU,kBAAMgC,QAAQC,IAAI,SAAS,KAKvEhX,KAAKsW,UAAUvB,iBAAiB,SAAS,SAAAkC,GAAE,OAAI5L,EAAKkL,YAAYnM,MAAQ6M,CAAE,IAC1EjX,KAAKsW,UAAUvB,iBAAiB,YAAY,SAAAkC,GAAE,OAAI5L,EAAKkL,YAAYC,SAAWS,CAAE,IAChFjX,KAAKsW,UAAUvB,iBAAiB,SAAS,SAAAkC,GAAE,OAAI5L,EAAKkL,YAAYhI,MAAQ0I,CAAE,IAG1EjX,KAAKsW,UAAUvB,iBAAiB,SAAS,WACvC1J,EAAK+K,SAAU,EACf/K,EAAKgL,SAAU,EACfhL,EAAKsC,QAAS,CAChB,IACA3N,KAAKsW,UAAUvB,iBAAiB,SAAS,kBAAM1J,EAAKsC,QAAS,CAAI,IACjE3N,KAAKsW,UAAUvB,iBAAiB,UAAU,kBAAM1J,EAAKsC,QAAS,CAAK,IACnE3N,KAAKsW,UAAUvB,iBAAiB,OAAO,SAAAkC,GAChC5L,EAAKsC,QAAWtC,EAAKgL,SAExBhL,EAAKiL,UAAUY,cAAc,IAAIC,YAAY,SAAUF,GAE3D,IACAjX,KAAKiQ,QAAS,EACdmE,GAAUA,GACZ,GAEA,CAAAlU,IAAA,SAAAC,OAAAiX,EAAAhK,GAAA5M,KAAAmF,MAKA,SAAA8B,IAAA,IAAA4P,EAAAC,EAAA,OAAA9W,KAAAqB,MAAA,SAAA+F,GAAA,cAAAA,EAAAxB,KAAAwB,EAAAnD,MAAA,OAWE,OATM4S,EAAYrX,KAAK2N,QAIjB2J,EAActX,KAAKuW,YAAYC,UAAYxW,KAAKuW,YAAYhI,SAEhEvO,KAAKyW,WAAazW,KAAKuH,KAAK0F,QAAQqK,EAAYC,OAAOhQ,MAAQ+P,EAAYE,WAG7E5P,EAAAnD,KAAA,EACMzE,KAAKuG,OAAM,OACjBvG,KAAK4P,OAIAyH,GAAWrX,KAAKkQ,OAAO,wBAAAtI,EAAArB,OAAA,GAAAkB,EAAA,UAC7B,WAlBW,OAAA2P,EAAA1O,MAAC,KAADD,UAAA,KAAAvI,IAAA,OAAAC,MAoBZ,WAAO,IAAA4L,EAAA,KACL/L,KAAK0W,eAAiB1W,KAAK0W,gBAAkB,IAAI1Q,SAAQ,SAAA8N,GAAG,OAAI/H,EAAKoI,gBAAkBL,CAAG,IAC1F9T,KAAKsW,UAAUvB,iBAAiB,SAAU/U,KAAKmU,iBAG/CW,gBAAgB2C,SAEhB3C,gBAAgBtG,SAEhBsG,gBAAgB4C,MAAM1X,KAAKsW,WAE3B,IAAMqB,EAAe3X,KAAKsW,UAAUhJ,OAAStN,KAAKsW,UAAUhJ,MAAM0F,aAGlE,OAFI4E,EAAAA,EAAAA,QAAeD,GAAc3X,KAAK6X,uBAE/B7X,KAAK0W,cACd,GAEA,CAAAxW,IAAA,OAAAC,MACA,WAEE,IAAI2X,EAAa9R,QAAQvC,UAUzB,OATKzD,KAAKqW,UACRyB,EAAa9R,QAAQ+R,KAAK,EACxBC,EAAAA,EAAAA,gBAAehY,KAAKsW,UAAW,QAE/B0B,EAAAA,EAAAA,gBAAehY,KAAKsW,UAAW,YAGnCtW,KAAKqW,SAAU,EACfvB,gBAAgB2C,SACTK,CACT,GAAC,CAAA5X,IAAA,SAAAC,OAAA8X,EAAA7K,GAAA5M,KAAAmF,MAED,SAAA0J,IAAA,OAAA7O,KAAAqB,MAAA,SAAA2N,GAAA,cAAAA,EAAApJ,KAAAoJ,EAAA/K,MAAA,cAAA+K,EAAA/K,KAAA,EACQzE,KAAKuG,OAAM,OACjBvG,KAAKsW,UAAUY,cAAc,IAAIgB,MAAM,WAAW,wBAAA1I,EAAAjJ,OAAA,GAAA8I,EAAA,UACnD,WAHW,OAAA4I,EAAAvP,MAAC,KAADD,UAAA,IAKZ,CAAAvI,IAAA,QAAAC,OAAAgY,EAAA/K,GAAA5M,KAAAmF,MAIA,SAAA8O,IAAA,IAAA2D,EAAAC,EAAAC,EAAA,OAAA9X,KAAAqB,MAAA,SAAA6S,GAAA,cAAAA,EAAAtO,KAAAsO,EAAAjQ,MAAA,WACMzE,KAAK2N,OAAQ,CAAF+G,EAAAjQ,KAAA,eAAAiQ,EAAArQ,OAAA,iBAU0C,GARnD+T,GAAeJ,EAAAA,EAAAA,gBAAehY,KAAKsW,UAAW,SACpDxB,gBAAgBvG,QAMV8J,GAAqBE,EAAAA,EAAAA,OAAerM,MAChB0L,EAAAA,EAAAA,QAAcS,EAEjB,CAAF3D,EAAAjQ,KAAA,SAEoC,OAAjD6T,GAAiB/D,EAAAA,EAAAA,OAAM,KAAK5Q,MAAK,iBAAM,SAAS,IAAC+Q,EAAAjQ,KAAA,GAClCuB,QAAQ+R,KAAK,CAACK,EAAcE,IAAgB,QAArD,GAEE,WAFF5D,EAAAxQ,KAEW,CAAAwQ,EAAAjQ,KAAA,gBAAAiQ,EAAArQ,OAAA,kBAEvBrE,KAAKsW,UAAUY,cAAc,IAAIC,YAAY,QAASnX,KAAKuW,YAAYnM,QAGnEiO,GAAmBrY,KAAKuG,OAAO,yBAAAmO,EAAAnO,OAAA,GAAAkO,EAAA,UAEtC,WAzBU,OAAA0D,EAAAzP,MAAC,KAADD,UAAA,KAAAvI,IAAA,SAAAC,OAAAqY,EAAApL,GAAA5M,KAAAmF,MA2BX,SAAA8S,IAAA,IAAAC,EAAAC,EAAAC,EAAA,OAAApY,KAAAqB,MAAA,SAAAgX,GAAA,cAAAA,EAAAzS,KAAAyS,EAAApU,MAAA,UACOzE,KAAKoW,QAAS,CAAFyC,EAAApU,KAAA,QACH,OAAZzE,KAAKkQ,OAAO2I,EAAAxU,OAAA,oBAITrE,KAAK2N,OAAQ,CAAFkL,EAAApU,KAAA,eAAAoU,EAAAxU,OAAA,iBAWS,GALnBqU,GAAsBd,EAAAA,EAAAA,OAAc1L,MAAiBqM,EAAAA,EAAAA,OAAerM,IACpEyM,GAAqBf,EAAAA,EAAAA,OAAcc,EAGnCE,GAAgBZ,EAAAA,EAAAA,gBAAehY,KAAKsW,UAAW,UACrDxB,gBAAgBtG,UAEZmK,EAAoB,CAAFE,EAAApU,KAAA,gBAAAoU,EAAApU,KAAA,GACCuB,QAAQ+R,KAAK,CAACa,GAAerE,EAAAA,EAAAA,OAAM,KAAK5Q,MAAK,iBAAM,SAAS,MAAG,QAAxE,GAEE,WAFFkV,EAAA3U,KAEW,CAAA2U,EAAApU,KAAA,gBAAAoU,EAAAxU,OAAA,kBAEqC,GAA5DrE,KAAKsW,UAAUY,cAAc,IAAIC,YAAY,SAAU,CAAC,KACpDuB,EAAoB,CAAFG,EAAApU,KAAA,gBAAAoU,EAAApU,KAAA,GACdzE,KAAK8Y,SAAQ,QACnB9Y,KAAKkQ,OAAO,yBAAA2I,EAAAtS,OAAA,GAAAkS,EAAA,UAGjB,WA9BW,OAAAD,EAAA9P,MAAC,KAADD,UAAA,KAAAvI,IAAA,kBAAAC,MAgCZ,SAAgBwP,GACd3P,KAAK2P,KAAOA,EACZ3P,KAAK8Y,QACP,GAEA,CAAA5Y,IAAA,WAAAC,MACA,SAASmN,GACPtN,KAAKsN,MAAQA,EACbtN,KAAK8Y,QACP,GACA,CAAA5Y,IAAA,uBAAAC,OAAA4Y,EAAA3L,GAAA5M,KAAAmF,MAOA,SAAAqT,IAAA,IAAAV,EAAAF,EAAAN,EAAAmB,EAAA,OAAAzY,KAAAqB,MAAA,SAAAqX,GAAA,cAAAA,EAAA9S,KAAA8S,EAAAzU,MAAA,OAG8E,OAFtE6T,GAAiB/D,EAAAA,EAAAA,OAAM,MAAO5Q,MAAK,iBAAM,SAAS,IAClDyU,GAAeJ,EAAAA,EAAAA,gBAAehY,KAAKsW,UAAW,SAAS3S,MAAK,iBAAM,QAAQ,IAC1EmU,GAAaE,EAAAA,EAAAA,gBAAehY,KAAKsW,UAAW,OAAO3S,MAAK,iBAAM,OAAO,IAACuV,EAAAzU,KAAA,EACvDuB,QAAQ+R,KAAK,CAACO,EAAgBF,EAAcN,IAAY,OAAvEmB,EAAMC,EAAAhV,MACgD,GAAxD2S,SAASC,WAAW7J,QAAQ,yBAC9B8J,QAAQC,IAAI,sBAADhI,OAAuBiK,IACnCC,EAAAC,GACOF,EAAMC,EAAAzU,KACT,UADSyU,EAAAC,GACF,GAGP,WAHOD,EAAAC,GAGC,GAYR,YAZQD,EAAAC,GAYC,2BAAAD,EAAA7U,OAAA,2BAAA6U,EAAAzU,KAAA,GANNuB,QAAQ+R,KAAK,EACjBC,EAAAA,EAAAA,gBAAehY,KAAKsW,UAAW,WAC/B/B,EAAAA,EAAAA,OAAM,MAAO5Q,MAAK,iBAAM,SAAS,MACjC,QACgE,MAAxD,WAAVsV,EAAsBjZ,KAAK8Y,SAAW9Y,KAAK6X,uBAAuBqB,EAAA7U,OAAA,oBAK1C,OAAxByQ,gBAAgBvG,QAAQ2K,EAAAzU,KAAA,IAClB8P,EAAAA,EAAAA,OAAM,IAAG,QAEa,OAD5BO,gBAAgBtG,SAChBxO,KAAK6X,uBAAuBqB,EAAA7U,OAAA,qCAAA6U,EAAA3S,OAAA,GAAAyS,EAAA,UAG/B,WAjCyB,OAAAD,EAAArQ,MAAC,KAADD,UAAA,MAP1B,IAAAsQ,EArEWP,EAJXL,EAPCF,EAxDDb,CA+I0B,CAtOJ,GA8QlBlC,GAAiB,ylQC/WVkE,GAIA,kzCCHb5Y,GAAA,kBAAAC,CAAA,MAAAC,EAAAD,EAAA,GAAAE,EAAAP,OAAAQ,UAAAC,EAAAF,EAAAG,eAAAC,EAAAX,OAAAY,gBAAA,SAAAN,EAAAD,EAAAE,GAAAD,EAAAD,GAAAE,EAAAR,KAAA,EAAAc,EAAA,mBAAAC,OAAAA,OAAA,GAAAC,EAAAF,EAAAG,UAAA,aAAAC,EAAAJ,EAAAK,eAAA,kBAAAC,EAAAN,EAAAO,aAAA,yBAAAC,EAAAf,EAAAD,EAAAE,GAAA,OAAAP,OAAAY,eAAAN,EAAAD,EAAA,CAAAN,MAAAQ,EAAAe,YAAA,EAAAC,cAAA,EAAAC,UAAA,IAAAlB,EAAAD,EAAA,KAAAgB,EAAA,aAAAf,GAAAe,EAAA,SAAAf,EAAAD,EAAAE,GAAA,OAAAD,EAAAD,GAAAE,CAAA,WAAAkB,EAAAnB,EAAAD,EAAAE,EAAAE,GAAA,IAAAI,EAAAR,GAAAA,EAAAG,qBAAAkB,EAAArB,EAAAqB,EAAAX,EAAAf,OAAA2B,OAAAd,EAAAL,WAAAS,EAAA,IAAAW,EAAAnB,GAAA,WAAAE,EAAAI,EAAA,WAAAhB,MAAA8B,EAAAvB,EAAAC,EAAAU,KAAAF,CAAA,UAAAe,EAAAxB,EAAAD,EAAAE,GAAA,WAAAwB,KAAA,SAAAC,IAAA1B,EAAA2B,KAAA5B,EAAAE,GAAA,OAAAD,GAAA,OAAAyB,KAAA,QAAAC,IAAA1B,EAAA,EAAAD,EAAAoB,KAAAA,EAAA,IAAAS,EAAA,iBAAAC,EAAA,iBAAAC,EAAA,YAAAC,EAAA,YAAAC,EAAA,YAAAZ,IAAA,UAAAa,IAAA,UAAAC,IAAA,KAAAC,EAAA,GAAApB,EAAAoB,EAAA1B,GAAA,8BAAA2B,EAAA1C,OAAA2C,eAAAC,EAAAF,GAAAA,EAAAA,EAAAG,EAAA,MAAAD,GAAAA,IAAArC,GAAAE,EAAAwB,KAAAW,EAAA7B,KAAA0B,EAAAG,GAAA,IAAAE,EAAAN,EAAAhC,UAAAkB,EAAAlB,UAAAR,OAAA2B,OAAAc,GAAA,SAAAM,EAAAzC,GAAA,0BAAA0C,SAAA,SAAA3C,GAAAgB,EAAAf,EAAAD,GAAA,SAAAC,GAAA,YAAA2C,QAAA5C,EAAAC,EAAA,gBAAA4C,EAAA5C,EAAAD,GAAA,SAAA8C,EAAA5C,EAAAI,EAAAE,EAAAE,GAAA,IAAAE,EAAAa,EAAAxB,EAAAC,GAAAD,EAAAK,GAAA,aAAAM,EAAAc,KAAA,KAAAZ,EAAAF,EAAAe,IAAAE,EAAAf,EAAApB,MAAA,OAAAmC,GAAA,UAAAkB,GAAAlB,IAAAzB,EAAAwB,KAAAC,EAAA,WAAA7B,EAAAgD,QAAAnB,EAAAoB,SAAAC,MAAA,SAAAjD,GAAA6C,EAAA,OAAA7C,EAAAO,EAAAE,EAAA,aAAAT,GAAA6C,EAAA,QAAA7C,EAAAO,EAAAE,EAAA,IAAAV,EAAAgD,QAAAnB,GAAAqB,MAAA,SAAAjD,GAAAa,EAAApB,MAAAO,EAAAO,EAAAM,EAAA,aAAAb,GAAA,OAAA6C,EAAA,QAAA7C,EAAAO,EAAAE,EAAA,IAAAA,EAAAE,EAAAe,IAAA,KAAAzB,EAAAI,EAAA,gBAAAZ,MAAA,SAAAO,EAAAG,GAAA,SAAA+C,IAAA,WAAAnD,GAAA,SAAAA,EAAAE,GAAA4C,EAAA7C,EAAAG,EAAAJ,EAAAE,EAAA,WAAAA,EAAAA,EAAAA,EAAAgD,KAAAC,EAAAA,GAAAA,GAAA,aAAA3B,EAAAxB,EAAAE,EAAAE,GAAA,IAAAE,EAAAuB,EAAA,gBAAArB,EAAAE,GAAA,GAAAJ,IAAAyB,EAAA,MAAAqB,MAAA,mCAAA9C,IAAA0B,EAAA,cAAAxB,EAAA,MAAAE,EAAA,OAAAhB,MAAAO,EAAAoD,MAAA,OAAAjD,EAAAkD,OAAA9C,EAAAJ,EAAAuB,IAAAjB,IAAA,KAAAE,EAAAR,EAAAmD,SAAA,GAAA3C,EAAA,KAAAE,EAAA0C,EAAA5C,EAAAR,GAAA,GAAAU,EAAA,IAAAA,IAAAmB,EAAA,gBAAAnB,CAAA,cAAAV,EAAAkD,OAAAlD,EAAAqD,KAAArD,EAAAsD,MAAAtD,EAAAuB,SAAA,aAAAvB,EAAAkD,OAAA,IAAAhD,IAAAuB,EAAA,MAAAvB,EAAA0B,EAAA5B,EAAAuB,IAAAvB,EAAAuD,kBAAAvD,EAAAuB,IAAA,gBAAAvB,EAAAkD,QAAAlD,EAAAwD,OAAA,SAAAxD,EAAAuB,KAAArB,EAAAyB,EAAA,IAAAK,EAAAX,EAAAzB,EAAAE,EAAAE,GAAA,cAAAgC,EAAAV,KAAA,IAAApB,EAAAF,EAAAiD,KAAArB,EAAAF,EAAAM,EAAAT,MAAAM,EAAA,gBAAAvC,MAAA0C,EAAAT,IAAA0B,KAAAjD,EAAAiD,KAAA,WAAAjB,EAAAV,OAAApB,EAAA0B,EAAA5B,EAAAkD,OAAA,QAAAlD,EAAAuB,IAAAS,EAAAT,IAAA,YAAA6B,EAAAxD,EAAAE,GAAA,IAAAE,EAAAF,EAAAoD,OAAAhD,EAAAN,EAAAW,SAAAP,GAAA,GAAAE,IAAAL,EAAA,OAAAC,EAAAqD,SAAA,eAAAnD,GAAAJ,EAAAW,SAAAkD,SAAA3D,EAAAoD,OAAA,SAAApD,EAAAyB,IAAA1B,EAAAuD,EAAAxD,EAAAE,GAAA,UAAAA,EAAAoD,SAAA,WAAAlD,IAAAF,EAAAoD,OAAA,QAAApD,EAAAyB,IAAA,IAAAmC,UAAA,oCAAA1D,EAAA,aAAA6B,EAAA,IAAAzB,EAAAiB,EAAAnB,EAAAN,EAAAW,SAAAT,EAAAyB,KAAA,aAAAnB,EAAAkB,KAAA,OAAAxB,EAAAoD,OAAA,QAAApD,EAAAyB,IAAAnB,EAAAmB,IAAAzB,EAAAqD,SAAA,KAAAtB,EAAA,IAAAvB,EAAAF,EAAAmB,IAAA,OAAAjB,EAAAA,EAAA2C,MAAAnD,EAAAF,EAAA+D,YAAArD,EAAAhB,MAAAQ,EAAA8D,KAAAhE,EAAAiE,QAAA,WAAA/D,EAAAoD,SAAApD,EAAAoD,OAAA,OAAApD,EAAAyB,IAAA1B,GAAAC,EAAAqD,SAAA,KAAAtB,GAAAvB,GAAAR,EAAAoD,OAAA,QAAApD,EAAAyB,IAAA,IAAAmC,UAAA,oCAAA5D,EAAAqD,SAAA,KAAAtB,EAAA,UAAAiC,EAAAjE,GAAA,IAAAD,EAAA,CAAAmE,OAAAlE,EAAA,SAAAA,IAAAD,EAAAoE,SAAAnE,EAAA,SAAAA,IAAAD,EAAAqE,WAAApE,EAAA,GAAAD,EAAAsE,SAAArE,EAAA,SAAAsE,WAAAC,KAAAxE,EAAA,UAAAyE,EAAAxE,GAAA,IAAAD,EAAAC,EAAAyE,YAAA,GAAA1E,EAAA0B,KAAA,gBAAA1B,EAAA2B,IAAA1B,EAAAyE,WAAA1E,CAAA,UAAAuB,EAAAtB,GAAA,KAAAsE,WAAA,EAAAJ,OAAA,SAAAlE,EAAA0C,QAAAuB,EAAA,WAAAS,OAAA,YAAAnC,EAAAxC,GAAA,GAAAA,GAAA,KAAAA,EAAA,KAAAE,EAAAF,EAAAU,GAAA,GAAAR,EAAA,OAAAA,EAAA0B,KAAA5B,GAAA,sBAAAA,EAAAgE,KAAA,OAAAhE,EAAA,IAAA4E,MAAA5E,EAAA6E,QAAA,KAAAvE,GAAA,EAAAE,EAAA,SAAAwD,IAAA,OAAA1D,EAAAN,EAAA6E,QAAA,GAAAzE,EAAAwB,KAAA5B,EAAAM,GAAA,OAAA0D,EAAAtE,MAAAM,EAAAM,GAAA0D,EAAAX,MAAA,EAAAW,EAAA,OAAAA,EAAAtE,MAAAO,EAAA+D,EAAAX,MAAA,EAAAW,CAAA,SAAAxD,EAAAwD,KAAAxD,CAAA,YAAAsD,UAAAf,GAAA/C,GAAA,2BAAAkC,EAAA/B,UAAAgC,EAAA7B,EAAAmC,EAAA,eAAA/C,MAAAyC,EAAAjB,cAAA,IAAAZ,EAAA6B,EAAA,eAAAzC,MAAAwC,EAAAhB,cAAA,IAAAgB,EAAA4C,YAAA9D,EAAAmB,EAAArB,EAAA,qBAAAd,EAAA+E,oBAAA,SAAA9E,GAAA,IAAAD,EAAA,mBAAAC,GAAAA,EAAA+E,YAAA,QAAAhF,IAAAA,IAAAkC,GAAA,uBAAAlC,EAAA8E,aAAA9E,EAAAiF,MAAA,EAAAjF,EAAAkF,KAAA,SAAAjF,GAAA,OAAAN,OAAAwF,eAAAxF,OAAAwF,eAAAlF,EAAAkC,IAAAlC,EAAAmF,UAAAjD,EAAAnB,EAAAf,EAAAa,EAAA,sBAAAb,EAAAE,UAAAR,OAAA2B,OAAAmB,GAAAxC,CAAA,EAAAD,EAAAqF,MAAA,SAAApF,GAAA,OAAAgD,QAAAhD,EAAA,EAAAyC,EAAAG,EAAA1C,WAAAa,EAAA6B,EAAA1C,UAAAS,GAAA,0BAAAZ,EAAA6C,cAAAA,EAAA7C,EAAAsF,MAAA,SAAArF,EAAAC,EAAAE,EAAAE,EAAAE,QAAA,IAAAA,IAAAA,EAAA+E,SAAA,IAAA7E,EAAA,IAAAmC,EAAAzB,EAAAnB,EAAAC,EAAAE,EAAAE,GAAAE,GAAA,OAAAR,EAAA+E,oBAAA7E,GAAAQ,EAAAA,EAAAsD,OAAAd,MAAA,SAAAjD,GAAA,OAAAA,EAAAoD,KAAApD,EAAAP,MAAAgB,EAAAsD,MAAA,KAAAtB,EAAAD,GAAAzB,EAAAyB,EAAA3B,EAAA,aAAAE,EAAAyB,EAAA/B,GAAA,0BAAAM,EAAAyB,EAAA,qDAAAzC,EAAAwF,KAAA,SAAAvF,GAAA,IAAAD,EAAAL,OAAAM,GAAAC,EAAA,WAAAE,KAAAJ,EAAAE,EAAAsE,KAAApE,GAAA,OAAAF,EAAAuF,UAAA,SAAAzB,IAAA,KAAA9D,EAAA2E,QAAA,KAAA5E,EAAAC,EAAAwF,MAAA,GAAAzF,KAAAD,EAAA,OAAAgE,EAAAtE,MAAAO,EAAA+D,EAAAX,MAAA,EAAAW,CAAA,QAAAA,EAAAX,MAAA,EAAAW,CAAA,GAAAhE,EAAAwC,OAAAA,EAAAjB,EAAApB,UAAA,CAAA6E,YAAAzD,EAAAoD,MAAA,SAAA3E,GAAA,QAAA2F,KAAA,OAAA3B,KAAA,OAAAP,KAAA,KAAAC,MAAAzD,EAAA,KAAAoD,MAAA,OAAAE,SAAA,UAAAD,OAAA,YAAA3B,IAAA1B,EAAA,KAAAsE,WAAA5B,QAAA8B,IAAAzE,EAAA,QAAAE,KAAA,WAAAA,EAAA0F,OAAA,IAAAxF,EAAAwB,KAAA,KAAA1B,KAAA0E,OAAA1E,EAAA2F,MAAA,WAAA3F,GAAAD,EAAA,EAAA6F,KAAA,gBAAAzC,MAAA,MAAApD,EAAA,KAAAsE,WAAA,GAAAG,WAAA,aAAAzE,EAAAyB,KAAA,MAAAzB,EAAA0B,IAAA,YAAAoE,IAAA,EAAApC,kBAAA,SAAA3D,GAAA,QAAAqD,KAAA,MAAArD,EAAA,IAAAE,EAAA,cAAA8F,EAAA5F,EAAAE,GAAA,OAAAI,EAAAgB,KAAA,QAAAhB,EAAAiB,IAAA3B,EAAAE,EAAA8D,KAAA5D,EAAAE,IAAAJ,EAAAoD,OAAA,OAAApD,EAAAyB,IAAA1B,KAAAK,CAAA,SAAAA,EAAA,KAAAiE,WAAAM,OAAA,EAAAvE,GAAA,IAAAA,EAAA,KAAAE,EAAA,KAAA+D,WAAAjE,GAAAI,EAAAF,EAAAkE,WAAA,YAAAlE,EAAA2D,OAAA,OAAA6B,EAAA,UAAAxF,EAAA2D,QAAA,KAAAwB,KAAA,KAAA/E,EAAAR,EAAAwB,KAAApB,EAAA,YAAAM,EAAAV,EAAAwB,KAAApB,EAAA,iBAAAI,GAAAE,EAAA,SAAA6E,KAAAnF,EAAA4D,SAAA,OAAA4B,EAAAxF,EAAA4D,UAAA,WAAAuB,KAAAnF,EAAA6D,WAAA,OAAA2B,EAAAxF,EAAA6D,WAAA,SAAAzD,GAAA,QAAA+E,KAAAnF,EAAA4D,SAAA,OAAA4B,EAAAxF,EAAA4D,UAAA,YAAAtD,EAAA,MAAAsC,MAAA,kDAAAuC,KAAAnF,EAAA6D,WAAA,OAAA2B,EAAAxF,EAAA6D,WAAA,KAAAT,OAAA,SAAA3D,EAAAD,GAAA,QAAAE,EAAA,KAAAqE,WAAAM,OAAA,EAAA3E,GAAA,IAAAA,EAAA,KAAAI,EAAA,KAAAiE,WAAArE,GAAA,GAAAI,EAAA6D,QAAA,KAAAwB,MAAAvF,EAAAwB,KAAAtB,EAAA,oBAAAqF,KAAArF,EAAA+D,WAAA,KAAA7D,EAAAF,EAAA,OAAAE,IAAA,UAAAP,GAAA,aAAAA,IAAAO,EAAA2D,QAAAnE,GAAAA,GAAAQ,EAAA6D,aAAA7D,EAAA,UAAAE,EAAAF,EAAAA,EAAAkE,WAAA,UAAAhE,EAAAgB,KAAAzB,EAAAS,EAAAiB,IAAA3B,EAAAQ,GAAA,KAAA8C,OAAA,YAAAU,KAAAxD,EAAA6D,WAAApC,GAAA,KAAAgE,SAAAvF,EAAA,EAAAuF,SAAA,SAAAhG,EAAAD,GAAA,aAAAC,EAAAyB,KAAA,MAAAzB,EAAA0B,IAAA,gBAAA1B,EAAAyB,MAAA,aAAAzB,EAAAyB,KAAA,KAAAsC,KAAA/D,EAAA0B,IAAA,WAAA1B,EAAAyB,MAAA,KAAAqE,KAAA,KAAApE,IAAA1B,EAAA0B,IAAA,KAAA2B,OAAA,cAAAU,KAAA,kBAAA/D,EAAAyB,MAAA1B,IAAA,KAAAgE,KAAAhE,GAAAiC,CAAA,EAAAiE,OAAA,SAAAjG,GAAA,QAAAD,EAAA,KAAAuE,WAAAM,OAAA,EAAA7E,GAAA,IAAAA,EAAA,KAAAE,EAAA,KAAAqE,WAAAvE,GAAA,GAAAE,EAAAmE,aAAApE,EAAA,YAAAgG,SAAA/F,EAAAwE,WAAAxE,EAAAoE,UAAAG,EAAAvE,GAAA+B,CAAA,GAAAkE,MAAA,SAAAlG,GAAA,QAAAD,EAAA,KAAAuE,WAAAM,OAAA,EAAA7E,GAAA,IAAAA,EAAA,KAAAE,EAAA,KAAAqE,WAAAvE,GAAA,GAAAE,EAAAiE,SAAAlE,EAAA,KAAAG,EAAAF,EAAAwE,WAAA,aAAAtE,EAAAsB,KAAA,KAAApB,EAAAF,EAAAuB,IAAA8C,EAAAvE,EAAA,QAAAI,CAAA,QAAA8C,MAAA,0BAAAgD,cAAA,SAAApG,EAAAE,EAAAE,GAAA,YAAAmD,SAAA,CAAA5C,SAAA6B,EAAAxC,GAAA+D,WAAA7D,EAAA+D,QAAA7D,GAAA,cAAAkD,SAAA,KAAA3B,IAAA1B,GAAAgC,CAAA,GAAAjC,CAAA,UAAAqG,GAAAjG,EAAAH,EAAAD,EAAAE,EAAAI,EAAAI,EAAAE,GAAA,QAAAJ,EAAAJ,EAAAM,GAAAE,GAAAE,EAAAN,EAAAd,KAAA,OAAAU,GAAA,YAAAJ,EAAAI,EAAA,CAAAI,EAAA6C,KAAApD,EAAAa,GAAAyE,QAAAvC,QAAAlC,GAAAoC,KAAAhD,EAAAI,EAAA,UAAAqM,GAAAvM,GAAA,sBAAAH,EAAA,KAAAD,EAAAgI,UAAA,WAAAzC,SAAA,SAAArF,EAAAI,GAAA,IAAAI,EAAAN,EAAA6H,MAAAhI,EAAAD,GAAA,SAAAkI,EAAA9H,GAAAiG,GAAA3F,EAAAR,EAAAI,EAAA4H,EAAAC,EAAA,OAAA/H,EAAA,UAAA+H,EAAA/H,GAAAiG,GAAA3F,EAAAR,EAAAI,EAAA4H,EAAAC,EAAA,QAAA/H,EAAA,CAAA8H,OAAA,gBAAA0Q,GAAA5Y,EAAAE,GAAA,IAAAD,EAAAN,OAAA6F,KAAAxF,GAAA,GAAAL,OAAAkZ,sBAAA,KAAAvY,EAAAX,OAAAkZ,sBAAA7Y,GAAAE,IAAAI,EAAAA,EAAAwP,QAAA,SAAA5P,GAAA,OAAAP,OAAAkS,yBAAA7R,EAAAE,GAAAe,UAAA,KAAAhB,EAAAuE,KAAAyD,MAAAhI,EAAAK,EAAA,QAAAL,CAAA,UAAAqG,GAAAtG,EAAAE,GAAA,QAAAD,EAAA,EAAAA,EAAAC,EAAA2E,OAAA5E,IAAA,KAAAK,EAAAJ,EAAAD,GAAAK,EAAAW,WAAAX,EAAAW,aAAA,EAAAX,EAAAY,cAAA,YAAAZ,IAAAA,EAAAa,UAAA,GAAAxB,OAAAY,eAAAP,EAAAuG,GAAAjG,EAAAb,KAAAa,EAAA,WAAAyQ,GAAA9Q,EAAAK,EAAAN,GAAA,OAAAM,EAAA0Q,GAAA1Q,GAAA,SAAAL,EAAAD,GAAA,GAAAA,IAAA,UAAA+C,GAAA/C,IAAA,mBAAAA,GAAA,OAAAA,EAAA,YAAAA,EAAA,UAAA8D,UAAA,4EAAA9D,GAAA,YAAAA,EAAA,UAAAiR,eAAA,oEAAAjR,CAAA,CAAAkR,CAAAjR,EAAA,CAAAkR,CAAAlR,EAAAmR,KAAAC,QAAAC,UAAAhR,EAAAN,GAAA,GAAAgR,GAAA/Q,GAAA+E,aAAA1E,EAAA2H,MAAAhI,EAAAD,GAAA,UAAAoR,KAAA,QAAAnR,GAAAsR,QAAApR,UAAAqR,QAAA5P,KAAAyP,QAAAC,UAAAC,QAAA,0BAAAtR,GAAA,QAAAmR,GAAA,mBAAAnR,CAAA,cAAAwR,KAAA,OAAAA,GAAA,oBAAAJ,SAAAA,QAAAK,IAAAL,QAAAK,IAAAC,OAAA,SAAA3R,EAAAC,EAAAC,GAAA,IAAAkC,EAAA,SAAAnC,EAAAK,GAAA,SAAAD,eAAAuB,KAAA3B,EAAAK,IAAA,QAAAL,EAAA+Q,GAAA/Q,MAAA,OAAAA,CAAA,CAAA2R,CAAA5R,EAAAC,GAAA,GAAAmC,EAAA,KAAAhC,EAAAT,OAAAkS,yBAAAzP,EAAAnC,GAAA,OAAAG,EAAAsR,IAAAtR,EAAAsR,IAAA9P,KAAAoG,UAAAnD,OAAA,EAAA7E,EAAAE,GAAAE,EAAAV,KAAA,GAAA+R,GAAAxJ,MAAA,KAAAD,UAAA,UAAAgJ,GAAA/Q,GAAA,OAAA+Q,GAAArR,OAAAwF,eAAAxF,OAAA2C,eAAAqP,OAAA,SAAA1R,GAAA,OAAAA,EAAAmF,WAAAzF,OAAA2C,eAAArC,EAAA,EAAA+Q,GAAA/Q,EAAA,UAAA6R,GAAA7R,EAAAD,GAAA,OAAA8R,GAAAnS,OAAAwF,eAAAxF,OAAAwF,eAAAwM,OAAA,SAAA1R,EAAAD,GAAA,OAAAC,EAAAmF,UAAApF,EAAAC,CAAA,EAAA6R,GAAA7R,EAAAD,EAAA,UAAA8Y,GAAA9Y,EAAAE,EAAAD,GAAA,OAAAC,EAAAqG,GAAArG,MAAAF,EAAAL,OAAAY,eAAAP,EAAAE,EAAA,CAAAR,MAAAO,EAAAgB,YAAA,EAAAC,cAAA,EAAAC,UAAA,IAAAnB,EAAAE,GAAAD,EAAAD,CAAA,UAAAuG,GAAAtG,GAAA,IAAAO,EAAA,SAAAP,EAAAC,GAAA,aAAA6C,GAAA9C,KAAAA,EAAA,OAAAA,EAAA,IAAAD,EAAAC,EAAAQ,OAAA+F,aAAA,YAAAxG,EAAA,KAAAQ,EAAAR,EAAA4B,KAAA3B,EAAAC,UAAA,aAAA6C,GAAAvC,GAAA,OAAAA,EAAA,UAAAsD,UAAA,uDAAA2C,OAAAxG,EAAA,CAAAyG,CAAAzG,GAAA,gBAAA8C,GAAAvC,GAAAA,EAAAA,EAAA,GAWA,IAAMuY,GAAsEnR,OAAOmR,WAKtEC,GAAS,SAAAC,GAAA,SAAAD,IAAA,IAAA5O,GAhBtB,SAAA1J,EAAAN,GAAA,KAAAM,aAAAN,GAAA,UAAA0D,UAAA,qCAgBsBxE,CAAA,KAAA0Z,GAAA,QAAAE,EAAAlR,UAAAnD,OAAAsU,EAAA,IAAAC,MAAAF,GAAAG,EAAA,EAAAA,EAAAH,EAAAG,IAAAF,EAAAE,GAAArR,UAAAqR,GAgBnB,OAhBmBP,GAAA1O,EAAA2G,GAAA,KAAAiI,EAAA,GAAAzK,OAAA4K,IAAA,UACV,CACRG,SAAS,EAKTrS,aAAc,oIAQdsS,aAAc,mGACfnP,CAAA,QAhCH,SAAAnK,EAAAD,GAAA,sBAAAA,GAAA,OAAAA,EAAA,UAAA8D,UAAA,sDAAA7D,EAAAE,UAAAR,OAAA2B,OAAAtB,GAAAA,EAAAG,UAAA,CAAA6E,YAAA,CAAAtF,MAAAO,EAAAkB,UAAA,EAAAD,cAAA,KAAAvB,OAAAY,eAAAN,EAAA,aAAAkB,UAAA,IAAAnB,GAAA8R,GAAA7R,EAAAD,EAAA,CAgCGsS,CAAA0G,EAAAC,GAhCHjZ,EAgCGgZ,EAhCH9Y,EAgCG,EAAAT,IAAA,QAAAC,MAMD,SAAMF,GAtCR,IAAAS,EAAAK,EAAA8B,EA6CI,IA7CJnC,EAuCI+Y,EAvCJ1Y,EAuCI,KAvCJ,mBAAA8B,EAAAqP,GAAAT,GAAA,EAuCI,EAvCJ/Q,EAAAE,UAAAF,GAuCI,QAvCJK,IAAA,SAAAL,GAAA,OAAAmC,EAAA6F,MAAA3H,EAAAL,EAAA,EAAAmC,GAuCI,CAAYzC,OAAOC,OAAO,CAExB4Z,OAAQja,KAAKF,GAAGG,QAAQga,OACxBC,SAAUla,KAAKF,GAAGG,QAAQia,UACzBja,KAEED,KAAKC,QAAQ8Z,QAAlB,CAGA/Z,KAAKma,iBAAmB,CAAC,EAEzB,ILZsB1N,EKYlB2N,EAAYvF,GAAawF,cAAgBxF,GAC3CrC,EAAkB6H,cAAgB7H,EAChC,KAEJ,GAAI,iCAAiClG,KAAKuK,SAASC,YAAa,CAC9D,IAAMwD,EAAazD,SAASC,WAAWtD,MAAM,kCAAkC,GAC/E4G,EAAY,CAAEG,SAAU/H,EAAmBgI,IAAK3F,IAAeyF,EACjE,CAEIF,IAEFpa,KAAKya,UAAY,IAAIL,EA7D3B,SAAA3Z,GAAA,QAAAE,EAAA,EAAAA,EAAA8H,UAAAnD,OAAA3E,IAAA,KAAAD,EAAA,MAAA+H,UAAA9H,GAAA8H,UAAA9H,GAAA,GAAAA,EAAA,EAAA0Y,GAAAjZ,OAAAM,IAAA,GAAA0C,SAAA,SAAAzC,GAAA4Y,GAAA9Y,EAAAE,EAAAD,EAAAC,GAAA,IAAAP,OAAAsa,0BAAAta,OAAAua,iBAAAla,EAAAL,OAAAsa,0BAAAha,IAAA2Y,GAAAjZ,OAAAM,IAAA0C,SAAA,SAAAzC,GAAAP,OAAAY,eAAAP,EAAAE,EAAAP,OAAAkS,yBAAA5R,EAAAC,GAAA,WAAAF,CAAA,CA6DoCma,CAAC,CAC7BlT,cAAcM,EAAAA,EAAAA,GAAehI,KAAKC,QAAQyH,aAAc1H,KAAKF,GAAGG,QAAQ4a,MACxEpN,cLzBkBhB,EKyBMzM,KAAKF,GAAGG,QAAQwN,aLxBzChB,EAGED,EAFPC,EAAWA,EAASO,cAEc,CAAC,eACjCR,EAAiBC,EAAU,CAAC,iBAC5BD,EAAiBC,EAAU,CAAC,cAAe,UAAW,SALlC,MKyBhB2B,eAAgBpO,KAAKF,GAAGgb,kBAAkB1I,KAAKpS,KAAKF,GAAI,oBACxD+P,kBAAmB7P,KAAKF,GAAGib,oBAAoB3I,KAAKpS,KAAKF,IACzD2P,OAAQzP,KAAKuG,KAAK6L,KAAKpS,MACvB8P,gBAAiB9P,KAAK8P,gBAAgBsC,KAAKpS,MAC3CgQ,eAAgBhQ,KAAKgb,gCAAgC5I,KAAKpS,OACtDoa,IAAc5H,EAAoB,CACpCM,aAAa9K,EAAAA,EAAAA,GAAehI,KAAKC,QAAQ+Z,aAAcha,KAAKF,GAAGG,QAAQ4a,OACrE,CAAC,IA1BwB,CA6BnC,GAEA,CAAA3a,IAAA,OAAAC,MACA,WAAO,IAAA4K,EAAA,KACA/K,KAAKC,QAAQ8Z,SAElB/Z,KAAKF,GAAGsS,KAAKoH,GAAWyB,WAAWC,UAAU,WAC3CnQ,EAAKjL,GAAG+H,EAAE,gBAAgBsT,OAAM,WAE9B,OADApQ,EAAKqQ,UACE,CACT,IACIrQ,EAAK0P,YACP1P,EAAK0P,UAAUY,OACX,0BAA0B/O,KAAKuK,SAASC,aAC1C/L,EAAKX,OAAM,GAGjB,GAOF,GAEA,CAAAlK,IAAA,0BAAAC,MAIA,SAAwBG,GACtB,GAAIN,KAAKC,QAAQ8Z,SAAWzZ,EAAckK,MAAQlK,EAAckK,KAAKgB,SAASxL,KAAKma,iBAAkB,CACnG,IAAMlS,EAAY3H,EAAckK,KAAKgB,OACrC8P,EAAAA,GAAAA,IAAgC,iBAAkBtb,KAAKma,iBAAiBlS,GAAY3H,EAAckK,KAAMlK,EAAcib,WAAW,GACnI,CACF,GAEA,CAAArb,IAAA,eAAAC,MAIA,SAAaI,GAAS,IAAA8K,EAAA,KACpB,GAAKrL,KAAKC,QAAQ8Z,SAAY/Z,KAAKya,UAAnC,CAEAza,KAAKF,GAAG0b,KAAKC,oBAAsB5T,GAAE,wHAADmH,ODpHvB,iBCuH6E,ofAAAA,ODrHpF,oBCiI4D,+JAAAA,ODpI9D,OCyI0D,iNAAAA,OD1IvD,qBCgJ6D,4RAWpEzO,EAAQuO,KAAK,eAAe4M,QAAQ1b,KAAKF,GAAG0b,KAAKC,qBAEjD,IAAME,EAAoB,SAACxL,GACzB,OAAOA,EAAOnH,KAAI,SAAAsE,GAAK,wBAAA0B,OACH1B,EAAMsB,SAAQ,MAAAI,OAAK1B,EAAMkD,KAAI,OAAAxB,OAAM1B,EAAM5H,KAAI,gBAAakW,KAAK,GACrF,EAEMC,EAAiB,SAAC1a,EAAE2a,GAAC,MAAK,GAAA9M,OAAG7N,EAAEqP,KAAI,OAAAxB,OAAM7N,EAAEuE,MAAOqW,cAAc,GAAD/M,OAAI8M,EAAEtL,KAAI,OAAAxB,OAAM8M,EAAEpW,MAAO,EAExFsW,EAAmB,SAACC,GACxBA,EAAWC,QACX,IAAMzO,EAAepC,EAAKoP,UAAUpQ,KAAKoD,aACnC0O,EAAgB9Q,EAAKoP,UAAUjN,YAAY+C,QAAO,SAAAvN,GAAC,OAAIA,EAAEwN,KAAKC,WAAWhD,EAAa,IAAE2O,KAAKP,GAC7FQ,EAAiBhR,EAAKoP,UAAUjN,YAAY+C,QAAO,SAAAvN,GAAC,OAAKA,EAAEwN,KAAKC,WAAWhD,EAAa,IAAE2O,KAAKP,GAEjGxQ,EAAKoP,UAAUjN,YAAYlI,OAAS,GACtC2W,EAAWK,OAAOzU,GAAE,mCAADmH,OAAoCvB,EAAY,QAAAuB,OAAO2M,EAAkBQ,GAAc,kBAC1GF,EAAWK,OAAOzU,GAAE,sCAADmH,OAAuC2M,EAAkBU,GAAe,kBAE3FJ,EAAWM,IAAIlR,EAAKoP,UAAUnN,MAAMsB,UACpCqN,EAAWO,QAEXP,EAAWQ,MAEf,EAEMR,EAAajc,KAAKF,GAAG0b,KAAKC,oBAAoB3M,KAAK,yBACzDkN,EAAiBC,GACjBA,EAAWjO,GAAG,UAAU,SAAAiJ,GAAE,OAAI5L,EAAKoP,UAAUxL,SAASgN,EAAWM,MAAM,IACvEvc,KAAKya,UAAU1M,OAAOC,GAAG,sBAAsB,kBAAM3C,EAAKqR,aAAa,IACvE1c,KAAKya,UAAU1M,OAAOC,GAAG,iBAAiB,kBAAMgO,EAAiBC,EAAW,IAC5Ejc,KAAKF,GAAG0b,KAAKC,oBAAoB3M,KAAK,eAAed,GAAG,QAAShO,KAAK2c,UAAUvK,KAAKpS,OACrFA,KAAKF,GAAG0b,KAAKC,oBAAoB3M,KAAK,kBAAkBd,GAAG,QAAShO,KAAKiW,YAAY7D,KAAKpS,OAC1FA,KAAKF,GAAG0b,KAAKC,oBAAoB3M,KAAK,iBAAiBd,GAAG,QAAShO,KAAKgW,aAAa5D,KAAKpS,OAC1F,IAAM4c,EAAgB5c,KAAKF,GAAG0b,KAAKC,oBAAoB3M,KAAK,iCAC5D8N,EAAc5O,GAAG,UAAU,SAAAiJ,GAAE,OAAI5L,EAAKoP,UAAUtL,gBAAgB0N,WAAWD,EAAcL,OAAO,IAChG1U,GAAE,+DAADmH,OACmD8N,GAAkB,8FAAA9N,OAEtC8N,GAAkB,4CAExCC,aAAaxc,EAAQuO,KAAK,gCAAgCkO,QAAQ,MAhFxB,CAiFtD,GAAC,CAAA9c,IAAA,SAAAC,MAED,WAAS,IAAA8c,EACkB,QAAzBA,EAAAjd,KAAKF,GAAGod,SAASC,gBAAQ,IAAAF,GAAzBA,EAA2B1W,OACvBvG,KAAKya,UAAU/M,QACjB1N,KAAKuG,OAELvG,KAAKoK,OAET,GAAC,CAAAlK,IAAA,QAAAC,MAED,WAA6B,IAAvBid,IAAc3U,UAAAnD,OAAA,QAAA8G,IAAA3D,UAAA,KAAAA,UAAA,GACdzI,KAAKF,GAAGud,gBAAkBrd,KAAKF,GAAGwd,MACpCtd,KAAKF,GAAGyd,WAAWvd,KAAKF,GAAG0d,cAE7Bxd,KAAKF,GAAG0b,KAAKC,oBAAoBgC,SAAS,WAC1Czd,KAAKF,GAAG+H,EAAE,gBAAgB4V,SAAS,iBACnCzd,KAAK0d,mBAAmB,SACpBN,GACFpd,KAAKya,UAAUrQ,MAAMpK,KAAKF,GAAG6d,eAAgB3d,KAAKF,GAAG8d,KAAKC,cAC9D,GAAC,CAAA3d,IAAA,cAAAC,MAED,WACMH,KAAKya,UAAU9M,QACjB3N,KAAKya,UAAUjM,SAEjBxO,KAAKya,UAAUxE,aACjB,GAAC,CAAA/V,IAAA,eAAAC,MAED,WACMH,KAAKya,UAAU9M,QACjB3N,KAAKya,UAAUjM,SAEjBxO,KAAKya,UAAUzE,cACjB,GAAC,CAAA9V,IAAA,cAAAC,MAED,WACE,IAAM2d,IAAc9d,KAAKya,UAAU9M,SAAW3N,KAAKya,UAAU/M,SAC7D1N,KAAKF,GAAG+H,EAAE,2BAA2BkW,YAAY,UAAWD,EAC9D,GAAC,CAAA5d,IAAA,YAAAC,MAED,WACOH,KAAKya,UAAU/M,SAGlB1N,KAAKya,UAAUuD,kBACfhe,KAAK0c,eAHL1c,KAAKob,QAKT,GAAC,CAAAlb,IAAA,OAAAC,MAGD,WACEH,KAAKF,GAAG0b,KAAKC,oBAAoBwC,YAAY,WAC7Cje,KAAKF,GAAG+H,EAAE,gBAAgBoW,YAAY,iBACtCje,KAAK0d,mBAAmB,QACxB1d,KAAKya,UAAUlU,OACfvG,KAAKke,gBACLle,KAAKF,GAAGib,qBACV,GAEA,CAAA7a,IAAA,kBAAAC,OAAAge,EAAA/Q,GAAA5M,KAAAmF,MAIA,SAAA8B,EAAsBgD,GAAK,OAAAjK,KAAAqB,MAAA,SAAA+F,GAAA,cAAAA,EAAAxB,KAAAwB,EAAAnD,MAAA,cAAAmD,EAAAnD,KAAA,EACnBzE,KAAKoe,iBAAiB3T,EAAMpD,WAAU,OAC5CrH,KAAKqe,eAAe5T,GACpBzK,KAAKse,cAAc7T,GAAO,wBAAA7C,EAAArB,OAAA,GAAAkB,EAAA,UAC3B,SAJoBoB,GAAA,OAAAsV,EAAAzV,MAAC,KAADD,UAAA,IAMrB,CAAAvI,IAAA,kCAAAC,MAGA,SAAgCsK,GLxQ3B,IACCkL,EKwQJ3V,KAAK0d,mBAAmB,uBLxQpB/H,EKwQgElL,EAAMlD,KLxQ7DiM,MAAM,SACVmC,EAAErQ,OAAS,EKwQtB,GAEA,CAAApF,IAAA,mBAAAC,OAAAoe,EAAAnR,GAAA5M,KAAAmF,MAIA,SAAA0J,EAAuBhI,GAAS,OAAA7G,KAAAqB,MAAA,SAAA2N,GAAA,cAAAA,EAAApJ,KAAAoJ,EAAA/K,MAAA,UAC1BzE,KAAKF,GAAG0e,cAAgBxe,KAAKF,GAAGwd,KAAI,CAAA9N,EAAA/K,KAAA,QACtCzE,KAAKF,GAAG2e,YAAYpX,GAAWmI,EAAA/K,KAAA,sBAAA+K,EAAA/K,KAAA,EAEzBzE,KAAKF,GAAG4e,OAAOC,QAAQC,WAAWH,YAAYpX,GAAU,wBAAAmI,EAAAjJ,OAAA,GAAA8I,EAAA,UAEjE,SANqBvG,GAAA,OAAAyV,EAAA7V,MAAC,KAADD,UAAA,IAQtB,CAAAvI,IAAA,iBAAAC,MAGA,SAAesK,GAAO,IAAAsB,EAAA,KAEd9D,EAAYwC,EAAMpD,UAExBrH,KAAKke,gBAGLle,KAAKma,iBAAgBZ,GAAA,GAClBtR,EAAYwC,EAAMjD,UAAUwB,KAAI,SAAA6V,GAAA,IAAAC,EAAAvV,GAAAsV,EAAA,GAAEtc,EAACuc,EAAA,GAAEhD,EAACgD,EAAA,GAAM,MAAO,CAACvc,EAAAA,EAAG5B,EAAdme,EAAA,GAAiBhD,EAAAA,EAAGpb,EAAjBoe,EAAA,GAAmB,KAIlE,IADA,IAAA1N,EAAA,WACK,IAAA2N,EAAAxV,GAAAyV,EAAAC,GAAA,GAAOC,EAAeH,EAAA,GAAEI,EAAKJ,EAAA,GAC1B9W,EAAY4U,WAAWqC,GACvB1U,EAAOuB,EAAKjM,GAAG8d,KAAKwB,QAAQnX,GACX8D,EAAKjM,GAAGuf,uCAAuCpX,GACvD7E,SAAQ,SAAAkc,GAAS,OAAIhE,EAAAA,GAAAA,IAAgC,iBAAkB6D,EAAO3U,EAAM8U,EAAU,GAC/G,EALAL,EAAA,EAAAD,EAAuC5e,OAAOmf,QAAQvf,KAAKma,kBAAiB8E,EAAAD,EAAA1Z,OAAA2Z,IAAA7N,GAM9E,GAEA,CAAAlR,IAAA,gBAAAC,MAGA,SAAcsK,GAAO,IAAA+U,EAEfxf,KAAKF,GAAGud,gBAAkBrd,KAAKF,GAAGwd,OAEqB,QAA3DkC,EAAA3X,GAAE,WAADmH,OAAYvE,EAAMpD,UAAS,0BAAyBoY,cAAM,IAAAD,GAAK,QAALA,EAA3DA,EAA8D,UAAE,IAAAA,GAAhEA,EAAkEE,eAAe,CAO/EC,MAAO3f,KAAKF,GAAG0d,cAAgBxd,KAAKF,GAAGwd,MAAQtd,KAAKF,GAAG8f,mBAAqB,SAAW,UACvFC,OAAQ,SACRC,SAAU,WAEd,GAAC,CAAA5f,IAAA,gBAAAC,MAED,WACE0H,GAAE7H,KAAKF,GAAGigB,kCAAkCjR,KAAK,mBAAmBkR,SACpEhgB,KAAKma,iBAAmB,CAAC,CAC3B,GAEA,CAAAja,IAAA,qBAAAC,MAMA,SAAmB8f,EAAQ9f,GACzB,GAAIH,KAAKF,GAAGod,SAASgD,iBAAkB,CACrC,IAAMC,EAAc,CAAC,EACfC,EAAgBpgB,KAAKya,UAAUpQ,KAAKoD,aACtC2S,IAAeD,EAAYC,cAAgBA,GAC/CpgB,KAAKF,GAAGod,SAASgD,iBAAiBG,UAAU,cAAeJ,EAAQ9f,EAAOggB,EAC5E,CACF,IA3VFxf,GAAAoG,GAAAtG,EAAAG,UAAAD,GAAAP,OAAAY,eAAAP,EAAA,aAAAmB,UAAA,IAAAnB,EAAA,IAAAA,EAAAE,EAkRE4d,EAjBAJ,CA0FC,CA3UmB,CAASte,GAAAA,GA8U/B2Z,UAAAA,GAAY8G,eAAe,MAAO7G,6IClV3B,SAASzR,EAAeuY,EAAU1F,GAAuD,IAAjD2F,EAAS/X,UAAAnD,OAAA,QAAA8G,IAAA3D,UAAA,GAAAA,UAAA,GAAG,CAAC,EAAGgY,EAAehY,UAAAnD,OAAA,QAAA8G,IAAA3D,UAAA,GAAAA,UAAA,GAAGiY,EAC/E,OAAOH,aAAQ,EAARA,EAAUtW,QAAQ,qBAAqB,SAAC0W,EAAIC,GACjD,IAAKA,EAAI,OAAOD,EAEhB,MAC0EE,8CADvDD,EAC0B9T,MAAM,KAAK9D,KAAI,SAAA+D,GAAC,OAAIA,EAAE+T,MAAM,6jBAAlEC,EAAOF,EAAA,GAAKG,EAAWH,EAAAva,MAAA,GAI9B,KAHgBya,KAAWP,MAAaO,KAAWlG,GAGrC,OAAO8F,EAErB,IAAMxgB,EAAQ4gB,KAAWP,EAAYA,EAAUO,GAC3CA,KAAWlG,EAAOA,EAAKkG,GAAW,KAEtC,OADgBC,EAAYhY,KAAI,SAAAnI,GAAC,OAAI4f,EAAgB5f,EAAE,IACxCogB,QAAO,SAACC,EAAKC,GAAG,OAAKA,EAAID,EAAI,GAAE/gB,GAASA,EAAM2W,WAC/D,GACF,iKAGO,IAAM4J,EAAgB,CAC3BU,UAAWC,qDC5BbC,EAAA,OAAqB,EAErBA,EAAA,EADe,CAAC,CAAC,UAAW,eAAgB,KAAM,MAAO,OAAQ,CAAC,gCAAiC,SAAU,KAAM,MAAO,OAAQ,CAAC,oBAAqB,gBAAiB,KAAM,MAAO,OAAQ,CAAC,WAAY,aAAc,KAAM,MAAO,OAAQ,CAAC,UAAW,iBAAkB,KAAM,MAAO,OAAQ,CAAC,UAAW,SAAU,KAAM,MAAO,OAAQ,CAAC,OAAQ,OAAQ,KAAM,MAAO,OAAQ,CAAC,QAAS,6BAA8B,KAAM,MAAO,OAAQ,CAAC,SAAU,UAAW,KAAM,MAAO,OAAQ,CAAC,YAAa,QAAS,KAAM,MAAO,OAAQ,CAAC,SAAU,WAAY,KAAM,MAAO,OAAQ,CAAC,QAAS,0BAA2B,KAAM,MAAO,OAAQ,CAAC,UAAW,QAAS,KAAM,MAAO,OAAQ,CAAC,WAAY,QAAS,KAAM,MAAO,OAAQ,CAAC,SAAU,YAAa,KAAM,MAAO,OAAQ,CAAC,cAAe,kBAAmB,KAAM,MAAO,OAAQ,CAAC,UAAW,wBAAyB,KAAM,MAAO,OAAQ,CAAC,OAAQ,UAAW,KAAM,MAAO,OAAQ,CAAC,WAAY,oBAAqB,KAAM,MAAO,OAAQ,CAAC,UAAW,UAAY,KAAM,MAAO,OAAQ,CAAC,UAAW,qBAAsB,KAAM,MAAO,OAAQ,CAAC,YAAa,SAAU,KAAM,MAAO,OAAQ,CAAC,SAAU,SAAU,KAAM,MAAO,OAAQ,CAAC,OAAQ,WAAY,KAAM,MAAO,OAAQ,CAAC,QAAS,UAAW,KAAM,MAAO,OAAQ,CAAC,UAAW,gBAAiB,KAAM,MAAO,OAAQ,CAAC,UAAW,kBAAmB,KAAM,MAAO,OAAQ,CAAC,WAAY,kBAAmB,KAAM,MAAO,OAAQ,CAAC,YAAa,aAAc,KAAM,MAAO,OAAQ,CAAC,QAAS,eAAgB,KAAM,MAAO,OAAQ,CAAC,iBAAkB,OAAQ,KAAM,MAAO,OAAQ,CAAC,UAAW,oBAAqB,KAAM,MAAO,OAAQ,CAAC,YAAa,QAAS,KAAM,MAAO,OAAQ,CAAC,UAAW,YAAa,KAAM,MAAO,OAAQ,CAAC,QAAS,yBAA0B,KAAM,MAAO,OAAQ,CAAC,iBAAkB,wBAAyB,KAAM,MAAO,OAAQ,CAAC,UAAW,UAAW,KAAM,MAAO,OAAQ,CAAC,mBAAoB,eAAgB,KAAM,MAAO,OAAQ,CAAC,oBAAqB,gBAAiB,KAAM,MAAO,OAAQ,CAAC,aAAc,mBAAoB,KAAM,MAAO,OAAQ,CAAC,MAAO,MAAO,KAAM,MAAO,OAAQ,CAAC,YAAa,YAAa,KAAM,MAAO,OAAQ,CAAC,cAAe,cAAe,KAAM,MAAO,OAAQ,CAAC,cAAe,4DAA6D,KAAM,MAAO,OAAQ,CAAC,MAAO,MAAO,KAAM,MAAO,OAAQ,CAAC,UAAW,UAAW,KAAM,MAAO,OAAQ,CAAC,mBAAoB,UAAW,KAAM,MAAO,OAAQ,CAAC,kBAAmB,QAAS,KAAM,MAAO,OAAQ,CAAC,WAAY,YAAa,KAAM,MAAO,OAAQ,CAAC,mFAAoF,mBAAoB,KAAM,MAAO,OAAQ,CAAC,OAAQ,OAAQ,KAAM,MAAO,OAAQ,CAAC,UAAW,SAAU,KAAM,MAAO,OAAQ,CAAC,QAAS,wBAAyB,KAAM,MAAO,OAAQ,CAAC,WAAY,UAAW,KAAM,MAAO,OAAQ,CAAC,QAAS,UAAW,KAAM,MAAO,OAAQ,CAAC,UAAW,UAAW,KAAM,MAAO,OAAQ,CAAC,gBAAiB,aAAc,KAAM,MAAO,OAAQ,CAAC,UAAW,+BAAgC,KAAM,MAAO,OAAQ,CAAC,QAAS,QAAS,KAAM,MAAO,OAAQ,CAAC,gBAAiB,aAAc,KAAM,MAAO,OAAQ,CAAC,QAAS,iBAAkB,KAAM,MAAO,OAAQ,CAAC,QAAS,eAAgB,KAAM,MAAO,OAAQ,CAAC,UAAW,QAAS,KAAM,MAAO,OAAQ,CAAC,eAAgB,SAAU,KAAM,MAAO,OAAQ,CAAC,QAAS,WAAY,KAAM,MAAO,OAAQ,CAAC,gBAAiB,6BAA8B,KAAM,MAAO,OAAQ,CAAC,kBAAmB,QAAS,KAAM,MAAO,OAAQ,CAAC,UAAW,QAAS,KAAM,MAAO,OAAQ,CAAC,SAAU,2BAA4B,KAAM,MAAO,OAAQ,CAAC,YAAa,uBAAwB,KAAM,MAAO,OAAQ,CAAC,OAAQ,SAAU,KAAM,MAAO,OAAQ,CAAC,YAAa,YAAa,KAAM,MAAO,OAAQ,CAAC,UAAW,OAAQ,KAAM,MAAO,OAAQ,CAAC,YAAa,WAAY,KAAM,MAAO,OAAQ,CAAC,WAAY,UAAW,KAAM,MAAO,OAAQ,CAAC,UAAW,aAAc,KAAM,MAAO,OAAQ,CAAC,UAAW,eAAgB,KAAM,MAAO,OAAQ,CAAC,SAAU,mBAAoB,KAAM,MAAO,OAAQ,CAAC,aAAc,kBAAmB,KAAM,MAAO,OAAQ,CAAC,UAAW,iBAAkB,KAAM,MAAO,OAAQ,CAAC,SAAU,YAAa,KAAM,MAAO,OAAQ,CAAC,YAAa,iBAAkB,KAAM,MAAO,OAAQ,CAAC,UAAW,QAAS,KAAM,MAAO,OAAQ,CAAC,qBAAsB,mBAAoB,KAAM,MAAO,OAAQ,CAAC,WAAY,UAAW,KAAM,MAAO,OAAQ,CAAC,UAAW,eAAgB,KAAM,MAAO,OAAQ,CAAC,0BAA2B,sBAAuB,KAAM,MAAO,OAAQ,CAAC,UAAW,cAAe,KAAM,MAAO,OAAQ,CAAC,UAAW,WAAY,KAAM,MAAO,OAAQ,CAAC,WAAY,sBAAuB,KAAM,MAAO,OAAQ,CAAC,WAAY,iBAAkB,KAAM,MAAO,OAAQ,CAAC,QAAS,uBAAwB,KAAM,MAAO,OAAQ,CAAC,SAAU,QAAS,KAAM,MAAO,OAAQ,CAAC,6BAA8B,SAAU,KAAM,MAAO,OAAQ,CAAC,iBAAkB,qBAAsB,KAAM,MAAO,OAAQ,CAAC,WAAY,SAAU,KAAM,MAAO,OAAQ,CAAC,UAAW,UAAW,KAAM,MAAO,OAAQ,CAAC,MAAO,SAAU,KAAM,MAAO,OAAQ,CAAC,UAAW,WAAY,KAAM,MAAO,OAAQ,CAAC,SAAU,gBAAiB,KAAM,MAAO,OAAQ,CAAC,UAAW,sBAAuB,KAAM,MAAO,OAAQ,CAAC,SAAU,6BAA8B,KAAM,MAAO,OAAQ,CAAC,WAAY,SAAU,KAAM,MAAO,OAAQ,CAAC,WAAY,UAAW,KAAM,MAAO,OAAQ,CAAC,SAAU,UAAW,KAAM,MAAO,OAAQ,CAAC,iBAAkB,WAAY,KAAM,MAAO,OAAQ,CAAC,WAAY,UAAW,KAAM,MAAO,OAAQ,CAAC,0BAA2B,iBAAkB,KAAM,MAAO,OAAQ,CAAC,QAAS,iBAAkB,KAAM,MAAO,OAAQ,CAAC,SAAU,aAAc,KAAM,MAAO,OAAQ,CAAC,QAAS,gBAAiB,KAAM,MAAO,OAAQ,CAAC,YAAa,YAAa,KAAM,MAAO,OAAQ,CAAC,YAAa,SAAU,KAAM,MAAO,OAAQ,CAAC,QAAS,UAAW,KAAM,MAAO,OAAQ,CAAC,OAAQ,aAAc,KAAM,MAAO,OAAQ,CAAC,YAAa,WAAY,KAAM,MAAO,OAAQ,CAAC,UAAW,WAAY,KAAM,MAAO,OAAQ,CAAC,WAAY,aAAc,KAAM,MAAO,OAAQ,CAAC,WAAY,kBAAmB,KAAM,MAAO,OAAQ,CAAC,2BAA4B,iCAAkC,KAAM,MAAO,OAAQ,CAAC,UAAW,QAAS,KAAM,MAAO,OAAQ,CAAC,WAAY,mBAAoB,KAAM,MAAO,OAAQ,CAAC,SAAU,aAAc,KAAM,MAAO,OAAQ,CAAC,iBAAkB,SAAU,KAAM,MAAO,OAAQ,CAAC,cAAe,eAAgB,KAAM,MAAO,OAAQ,CAAC,kBAAmB,wBAAyB,KAAM,MAAO,OAAQ,CAAC,SAAU,MAAO,KAAM,MAAO,OAAQ,CAAC,qBAAsB,WAAY,KAAM,MAAO,OAAQ,CAAC,+BAAgC,iBAAkB,KAAM,MAAO,OAAQ,CAAC,QAAS,UAAW,KAAM,MAAO,OAAQ,CAAC,mCAAoC,WAAY,KAAM,MAAO,OAAQ,CAAC,UAAW,UAAW,KAAM,MAAO,OAAQ,CAAC,MAAO,UAAW,KAAM,MAAO,OAAQ,CAAC,aAAc,iBAAkB,KAAM,MAAO,OAAQ,CAAC,OAAQ,gBAAiB,KAAM,MAAO,OAAQ,CAAC,aAAc,mBAAoB,KAAM,MAAO,OAAQ,CAAC,YAAa,SAAU,KAAM,MAAO,OAAQ,CAAC,UAAW,QAAS,KAAM,MAAO,OAAQ,CAAC,cAAe,eAAgB,KAAM,MAAO,OAAQ,CAAC,iBAAkB,cAAe,KAAM,MAAO,OAAQ,CAAC,SAAU,SAAU,KAAM,MAAO,OAAQ,CAAC,SAAU,SAAU,KAAM,MAAO,OAAQ,CAAC,UAAW,sBAAwB,KAAM,MAAO,OAAQ,CAAC,oBAAqB,aAAc,KAAM,MAAO,OAAQ,CAAC,mBAAoB,SAAU,KAAM,MAAO,OAAQ,CAAC,SAAU,4BAA6B,KAAM,MAAO,OAAQ,CAAC,aAAc,YAAa,KAAM,MAAO,OAAQ,CAAC,UAAW,qBAAsB,KAAM,MAAO,OAAQ,CAAC,UAAW,UAAW,KAAM,MAAO,OAAQ,CAAC,SAAU,uBAAwB,KAAM,MAAO,OAAQ,CAAC,gBAAiB,kBAAmB,KAAM,MAAO,OAAQ,CAAC,SAAU,oBAAsB,KAAM,MAAO,OAAQ,CAAC,QAAS,iBAAkB,KAAM,MAAO,OAAQ,CAAC,0BAA2B,WAAY,KAAM,MAAO,OAAQ,CAAC,QAAS,WAAY,KAAM,MAAO,OAAQ,CAAC,qBAAsB,QAAS,KAAM,MAAO,OAAQ,CAAC,SAAU,8BAA+B,KAAM,MAAO,OAAQ,CAAC,SAAU,0BAA2B,KAAM,MAAO,OAAQ,CAAC,iBAAkB,UAAW,KAAM,MAAO,OAAQ,CAAC,qBAAsB,UAAW,KAAM,MAAO,OAAQ,CAAC,YAAa,aAAc,KAAM,MAAO,OAAQ,CAAC,UAAW,UAAW,KAAM,MAAO,OAAQ,CAAC,QAAS,QAAS,KAAM,MAAO,OAAQ,CAAC,SAAU,SAAU,KAAM,MAAO,OAAQ,CAAC,QAAS,0BAA2B,KAAM,MAAO,OAAQ,CAAC,OAAQ,MAAO,KAAM,MAAO,OAAQ,CAAC,WAAY,OAAQ,KAAM,MAAO,OAAQ,CAAC,UAAW,mBAAoB,KAAM,MAAO,OAAQ,CAAC,SAAU,WAAY,KAAM,MAAO,OAAQ,CAAC,yBAA0B,aAAc,KAAM,MAAO,OAAQ,CAAC,UAAW,SAAU,KAAM,MAAO,OAAQ,CAAC,SAAU,WAAY,KAAM,MAAO,OAAQ,CAAC,QAAS,yBAA0B,KAAM,MAAO,OAAQ,CAAC,iBAAkB,uBAAwB,KAAM,MAAO,OAAQ,CAAC,YAAa,aAAc,KAAM,MAAO,OAAQ,CAAC,OAAQ,OAAQ,KAAM,MAAO,OAAQ,CAAC,QAAS,YAAa,KAAM,MAAO,OAAQ,CAAC,aAAc,aAAc,KAAM,MAAO,OAAQ,CAAC,UAAW,QAAS,KAAM,MAAO,OAAQ,CAAC,QAAS,UAAW,KAAM,MAAO,OAAQ,CAAC,QAAS,SAAU,KAAM,MAAO,OAAQ,CAAC,QAAS,WAAY,KAAM,MAAO,OAAQ,CAAC,SAAU,SAAU,KAAM,MAAO,OAAQ,CAAC,OAAQ,UAAW,KAAM,MAAO,8BCNnkS,QAmBI,EAAO,CAAC,cAEP,KAFkB,EAAF,SAAYzZ,GAC3B,OASJ,SAAS0Z,GACT,aAEA,SAASC,EAASC,QAEJrV,IAAPqV,IACHA,EAAKpZ,OAAOgE,UAAUF,WAExBsV,EAAKA,EAAGzU,cAER,IAAIwG,EAAQ,mBAAmBkO,KAAMD,IACjC,oBAAoBC,KAAMD,IAC1B,wBAAwBC,KAAMD,IAC9B,yBAAyBC,KAAMD,IAC/B,6DAA6DC,KAAMD,IACnE,uEAAuEC,KAAMD,IAC7E,wBAAwBC,KAAMD,IAC9B,qCAAqCC,KAAMD,IAC3C,kBAAkBC,KAAMD,IACxBA,EAAGxU,QAAQ,YAAc,GAAK,sBAAsByU,KAAMD,IAC1DA,EAAGxU,QAAQ,cAAgB,GAAK,gCAAgCyU,KAAMD,IACtE,GAEAE,EAAiB,SAASD,KAAMD,IAChC,SAASC,KAAMD,IACf,kBAAkBC,KAAMD,IACxB,WAAWC,KAAMD,IACjB,WAAWC,KAAMD,IACjB,SAASC,KAAMD,IACf,YAAYC,KAAMD,IAClB,QAAQC,KAAMD,IACd,QAAQC,KAAMD,IACd,UAAUC,KAAMD,IAChB,SAASC,KAAMD,IACf,aAAaC,KAAMD,IACnB,OAAOC,KAAMD,IACb,eAAeC,KAAMD,IACrB,GAEA7O,EAAU,CAAC,EACXgP,EAAU,CACRhP,QAASY,EAAO,IAAOA,EAAO,IAAOA,EAAO,IAAO,GACnDqO,QAASrO,EAAO,IAAOA,EAAO,IAAO,IACrCsO,cAAetO,EAAO,IAAOA,EAAO,IAAO,IAC3CuO,SAAUJ,EAAgB,IAAO,IA8BvC,GA3BKC,EAAQhP,UACXA,EAASgP,EAAQhP,UAAY,EAC7BA,EAAQiP,QAAUD,EAAQC,QAC1BjP,EAAQkP,cAAgBE,SAASJ,EAAQE,cAAe,KAGrDF,EAAQG,WACXnP,EAASgP,EAAQG,WAAa,IAI3BnP,EAAQqP,SAAWrP,EAAQsP,IAAMtP,EAAQuP,YAAcvP,EAAQwP,MAAQxP,EAAQyP,QAClFzP,EAAQ0P,MAAQ1P,EAAQ2P,QAAU3P,EAAQ4P,UAAY5P,EAAQ6P,MAAQ7P,EAAS,oBAC/EA,EAAQ8P,QAAS,IAId9P,EAAQ+P,MAAQ/P,EAAQgQ,KAAOhQ,EAAQiQ,OAASjQ,EAAQkQ,OAC3DlQ,EAAQmQ,SAAU,IAIfnQ,EAAQoQ,QAAUpQ,EAAQqQ,KAAOrQ,EAAQsQ,UAC5CtQ,EAAQuQ,QAAS,GAIdvQ,EAAQwQ,IAAMxQ,EAAQyQ,SAAU,CACnC,IAAIC,EAAK,OAET1B,EAAQhP,QAAU0Q,EAClB1Q,EAAQ0Q,IAAM,CAChB,CAGA,GAAK1Q,EAAQ2Q,KAAO,QACX3Q,EAAQ2Q,KACf,IAAIC,EAAS,SAEb5B,EAAQhP,QAAU4Q,EAClB5Q,EAAQ4Q,IAAU,CACpB,CAGA,GAAK5Q,EAAQsQ,QAAUtQ,EAAQuP,WAAa,CAC1C,IAAIA,EAAa,aAEjBP,EAAQhP,QAAUuP,EAClBvP,EAAQuP,IAAc,CACxB,CAGA,GAAKvP,EAAQsQ,QAAUtQ,EAAQ4P,SAAW,CACxC,IAAIA,EAAW,WAEfZ,EAAQhP,QAAU4P,EAClB5P,EAAQ4P,IAAY,CACtB,CAGA,GAAK5P,EAAQsP,GAAK,CAChB,IAAIA,EAAK,aAETN,EAAQhP,QAAUsP,EAClBtP,EAAQsP,IAAM,CAChB,CAGA,GAAKtP,EAAQqQ,IAAM,CACjB,IAAIQ,EAAQ,QAEZ7B,EAAQhP,QAAU6Q,EAClB7Q,EAAQ6Q,IAAS,CACnB,CAGA,GAAK7Q,EAAQsQ,QAAUtQ,EAAQqP,QAAU,CACvC,IAAIA,EAAU,UAEdL,EAAQhP,QAAUqP,EAClBrP,EAAQqP,IAAW,CACrB,CAGA,GAAKrP,EAAQsQ,QAAUtQ,EAAQ2P,OAAS,CACtC,IAAIA,EAAS,SAEbX,EAAQhP,QAAU2P,EAClB3P,EAAQ2P,IAAU,CACpB,CAGA,GAAK3P,EAAQsQ,QAAUtQ,EAAQ6P,KAAO,CACpC,IAAIA,EAAO,OAEXb,EAAQhP,QAAU6P,EAClB7P,EAAQ6P,IAAQ,CAClB,CAKA,OAFA7P,EAAQlN,KAAOkc,EAAQhP,QACvBA,EAAQmP,SAAWH,EAAQG,SACpBnP,CACT,CAYA,OARAvK,OAAOqb,UAAYlC,EAASnZ,OAAOgE,UAAUF,WAC7C9D,OAAOqb,UAAUlC,QAAUA,EAGtBD,IACHA,EAAO3O,QAAUvK,OAAOqb,WAGnBrb,OAAOqb,SAChB,CA5KaC,CAAQ9b,EAChB,mDCrBL,iBA6BC,SAAaQ,EAAQub,GAItB,aAEA,IAAKvb,IAAWA,EAAOwb,SAKrB,MAAM,IAAIhgB,MAAM,qEAIlB,IAAIoP,EAAe,KAYnB,SAAS6Q,EAAaC,EAAOC,GAQ3BhkB,KAAKikB,aAAe,CAElBlc,IAAMgc,GAAS,KACfzQ,aAAc,EACdH,WAAW,EACX+Q,YAAY,EACZC,YAAY,EACZC,aAAa,EACbC,mBAAmB,EACnBC,QAAS,UACTC,oBAAoB,EACpBC,qBAAsB,KACtBC,qBAAsB,KACtBC,iBAAkB,IAClBC,MAAO,KACPC,kBAAmB,SACnBC,eAAe,EACfxR,eAAe,EACfyR,0BAA0B,EAC1BC,0BAA0B,EAC1BC,UAAW,sBACX5R,aAAa,EACb6R,YAAY,EACZC,SAAU,SAIZllB,KAAKmlB,eAAiB,CAOpBC,UAAU,EACVC,UAAU,EACVC,KAAM,KACNC,MAAO,EACPC,MAAO,KACPC,QAAS,KACTrR,OAAQ,KACRsR,aAAc,KACdC,OAAQ,KACRC,QAAS,KACTtR,SAAU,KACVuR,aAAc,KACdC,WAAY,KACZC,OAAQ,KACRhS,SAAU,KACViS,WAAW,EACXC,iBAAiB,EACjBC,SAAU,KACVC,IAAK,EACLrY,aAAc,EACdsY,QAAQ,EACRC,GAAI,KACJlkB,KAAM,KACNmkB,eAAe,EACfC,OAAQ,KAIVvmB,KAAKwmB,cAAgB,CAOnBC,UAAW,KACXC,YAAa,KACbC,aAAa,EACbC,iBAAiB,EACjBC,WAAW,EACXC,eAAgB,KAChBC,YAAa,MAIf/mB,KAAKgnB,iBAAmB,CAOtBC,WAAY,EACZC,UAAW,KACXC,UAAW,KACXC,SAAU,MAIZpnB,KAAKqnB,aAAe,CAQlB1S,IAAK,CACHxS,KAAM,CAAC,2BAA4B,aAAc,YAAa,YAAa,oBAC3EmlB,UAAU,GAGZC,IAAK,CACHC,QAAS,CAAC,MAAO,MAAO,OACxBrlB,KAAM,CAAC,gCAAiC,YAAa,cAAe,kBAAmB,uBACvFmlB,UAAU,GAGZ1S,IAAK,CACHzS,KAAM,CAAC,4BACPmlB,UAAU,GAGZG,KAAM,CACJtlB,KAAM,CAAC,yBAA0B,cACjCmlB,UAAU,GAGZI,IAAK,CACHvlB,KAAM,CAAC,wBAAyB,YAAa,aAAc,eAC3DmlB,UAAU,GAGZK,KAAM,CACJxlB,KAAM,CAAC,cACPmlB,UAAU,IAOdtnB,KAAK4nB,QAAU,gBACf5nB,KAAK6nB,GAAM7D,GAAQ,WAEnBhkB,KAAK8nB,QAAU,qBACf9nB,KAAK+nB,cAAgB,kBAIrB/nB,KAAK8hB,cAAgB,kBACrB9hB,KAAK6hB,QAAU,KACf7hB,KAAKgoB,SAAW,KAChBhoB,KAAKioB,OAAS,KACdjoB,KAAKkoB,WAAY,EACjBloB,KAAK+Z,SAAU,EACf/Z,KAAKmoB,IAAM,KACXnoB,KAAKooB,OAAS,CAAC,EACfpoB,KAAKqoB,SAAW,GAChBroB,KAAKsoB,OAAQ,EACbtoB,KAAKuoB,eAAgB,EACrBvoB,KAAKwoB,YAAc,KAEnBxoB,KAAKyoB,aAAe,CAClBC,OAAQ,iBACRC,OAAQ,kBAKV3oB,KAAK4oB,SAAW,CACdC,WAAW,EACXC,UAAU,EACVC,cAAc,EACdC,QAAQ,EACRC,WAAW,GAKbjpB,KAAKkpB,QAAU,CAEb/mB,KAAM,KACNgnB,MAAO,CACLC,OAAQ,8BACRC,cAAe,8CACfC,iBAAkB,6DAClBC,aAAc,0CAEhBC,YAAa,KACbC,SAAU,KACVC,QAAS,MAWX1pB,KAAK2pB,MAAQ,CACXC,WAAY,MAId5pB,KAAK6pB,MAAQ,CAAC,EAGd7pB,KAAK8pB,WAAY,EAGjB9pB,KAAK+pB,aAAc,EAMnB,IAAIC,EACqGnC,EAAoFoC,EAAWC,EAAe7O,EAAM8O,EAAqCC,EAA4GC,EAAmBC,EAAcC,EAAOlqB,EAAQmqB,EAAcC,EAAYC,EAAiBC,EAAgBC,EAAgBC,EAAWC,EAAiBC,EAAgBC,EAAaC,EAASC,EAAWC,EAAkBC,EAAWC,EAAaC,EAAaC,EAAaC,EAAYC,EAAYC,EAAoFC,EAAeC,EAAYC,EAAyDC,EAAKC,EAAmBC,EAAWC,EAAQC,EAAaC,EAASC,EAAWC,EAAUC,EAAoDC,EAAYC,EAAWC,EAAwDC,EACnhCC,EAAmCC,EAAcC,EAASC,EAAcC,GAAiBC,GAAUC,GAAaC,GAAoBC,GAAWC,GAAmEC,GAAoBC,GAAUC,GAAaC,GAAcC,GAAcC,GAAaC,GAAeC,GAA6BC,GADlVC,GAAM9tB,KAAM+tB,GAAmB,KAAMlE,GAAQ,KAAMmE,GAAK,eAAgBC,GAAMD,GAAK,KAA0BvM,GAAKpV,UAAUF,UAAW+hB,GAAK7lB,EAAOwO,SAASsX,KAAKrX,WAAYsX,GAAMvK,SAA8CwK,GAAW,GAAIC,IAAY,EAAeC,IAAY,EAAOC,IAAgB,EAAOC,IAAU,EAAOC,IAAW,EAAOC,IAAe,EAAaC,GAAU,EAA+RC,GAAc,CAAC,MAAO,OAAQ,OAAQ,SAAiFC,GAAW,KAAMC,GAAe,KAAqGC,IAAe,EAAOC,IAAc,EAA4CC,GAAe,EAAGC,GAAkB,KAAgBC,GAAW,GACxhCC,GAAa,KAAyH/oB,GAAQuT,MAAMjZ,UAAU0F,MAAOgpB,IAAsB,EAAwHC,GAAY,EAAaC,GAAY,IACxWC,GAAahO,GAAGjO,MAAM,uBAAwBtH,GAAYuV,GAAGjO,MAAM,YAAakc,GAAOjO,GAAGjO,MAAM,iBAChGmc,GAAWlO,GAAGjO,MAAM,WACpBoc,GAAYnO,GAAGjO,MAAM,aAAeiO,GAAGjO,MAAM,WAC7Cqc,GAAWpO,GAAGjO,MAAM,UACpBsc,GAAerO,GAAGjO,MAAM,yBAA2Bic,IAAcvjB,GACjE6jB,IAAgB7B,GAAG1a,MAAM,oBAAsB0a,GAAG1a,MAAM,qBAAuBoc,KAAanO,GAAGjO,MAAM,UAAYiO,GAAGjO,MAAM,wBAC1Hwc,GAAc3nB,EAAO0O,UAAY6M,GAAc7M,QAAQC,MAAQ4M,EAC/DqM,GAAa7B,GAAI8B,WAAatM,EAAawK,GAAI8B,WAAa,KAC5DC,GAAkBP,KAAaxB,GAAI8B,WAAatM,IAAewK,GAAI8B,YACnEE,IAAeD,GACfE,GAAY,yBACZC,GAAW,cAEXC,GAAYnC,GAAIvX,SAAWuX,GAAIvX,SAAS2Z,SAAShd,MAAM,SAAW,KAClEid,GAASF,GAAkB,GAAP,KAEpBG,GAAqB,kFAErBC,GAAiB,CAAC,QAAS,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAAQ,MAAO,OAClGC,GAAmB,IAAIC,OAAO,OAASF,GAAe/U,KAAK,KAAO,aAAc,KAi6GhF,SAASkV,GAAiBC,GAGxB,OAAQjD,GAAI1a,aAAeka,KAAaQ,GAAI/D,aAAgB+D,GAAIjE,MAAMkH,KAAUnN,GAAckK,GAAIjE,MAAMkH,EAE1G,CAwEA,SAASC,GAAYC,GAInB,OAAO,SAASxwB,GAEd,IACIwY,EADAxW,EAAIzC,KAAKkxB,GAgBb,OAbKzuB,GAAMA,EAAE0uB,GAUXlY,EAASgY,EAAI5uB,KAAKrC,KAAMS,IARpBgC,GAAKA,EAAEolB,GACTiG,GAAIsD,IAAI3uB,EAAEolB,GAAK,cAAgBpnB,EAAE0B,MAEjC2rB,GAAIsD,IAAIC,mBAAmB5wB,EAAE0B,MAG/B8W,EAAS,MAKJA,CAET,CAEF,CAtgHAjZ,KAAKsxB,YAAc,8CAGnBtxB,KAAKuxB,WAAahB,GAElBtE,EAAS,CACPuF,OAAQ,iBACRC,WAAY,iBACZC,SAAU,YACVC,YAAa,eACbzJ,UAAW,aACX0J,aAAc,gBACdC,SAAU,YACVC,SAAU,mBACVC,WAAY,eAWdhF,GAAkB,CAChB,KACA,oBACA,oBACA,mBACA,+BASF/sB,KAAKgyB,SAAY,WACf,IAEE,OAAQ/c,QAAU2O,IAAeiM,IAAWpM,QAAUG,GAAcH,MAAM5B,UAAY,GAAK,IAAI5M,MAAM,MAAQ,IAAIA,OAASgd,cAAgBrO,CAC5I,CAAE,MAAMnjB,GACN,OAAO,CACT,CACF,CAPgB,GAqBhBT,KAAKkT,MAAQ,SAASjT,GAEpB,IAAIiyB,GAAUpE,GAAI/lB,IA+FlB,OA3FI9H,IAAY2jB,GAAc6K,IAAWY,IAAcvB,GAAIqE,OAASlyB,EAAQqT,eAAiBsQ,GAAc3jB,EAAQ8H,MAAQ6b,GAAc3jB,EAAQ+kB,YAAcpB,IAC7JyI,EAASP,EAAI,cAKfzrB,EAAOJ,GAEFqvB,KAECQ,GAGGhC,GAAI7J,aAAac,2BAA4B+I,GAAI7J,aAAaa,2BACjEsK,GAASnqB,KAAKgmB,EAAQmH,aACtB9C,IAAsB,GAGfxB,GAAI7J,aAAaa,2BAG1BsK,GAASnqB,KAAKgmB,EAAQmH,aACtB9C,IAAsB,KAMrBzB,IAAYiC,KAEXhC,GAAI7J,aAAac,yBAEnBqK,GAASnqB,KAAKgmB,EAAQoH,eAOjBvE,GAAI7J,aAAa5Q,gBAAiBya,GAAI7J,aAAa7Q,aAEtD0a,GAAIsD,IAAInG,EAAQqH,UAIlBxE,GAAI7J,aAAa5Q,eAAgB,EACjCya,GAAI7J,aAAa7Q,aAAc,EAE3Bqc,GAGF3B,GAAI/D,aAAc,GAER7d,KAAcuV,GAAGjO,MAAM,oBAAuBtH,MASxD4hB,GAAIsD,IAAInG,EAAQmH,aAGhB9C,IAAsB,KAUxBrvB,IAEEiyB,GAAS7G,GAAeprB,EAAQ8H,MAAQ6b,GAC1CkK,GAAIyE,mBAKDlH,GAAeprB,EAAQ8H,MAAQ6b,GAAiC,aAAnBwK,GAAIoE,YACpDC,WAAWtH,EAAkB,IAKjC0C,IAAW,EAEJC,EAET,EAEA9tB,KAAKmyB,GAAK,WAER,OAAQ9C,GAAcZ,KAAYC,GAAaZ,GAAIza,eAAiBya,GAAIkE,QAE1E,EAEAhyB,KAAKiU,UAAYjU,KAAKmyB,GAEtBnyB,KAAK0yB,SAAW,SAASC,GAGvB,OAAO9K,EAAG8K,IAAavE,GAAIuE,IAAatqB,EAAOsqB,EAEjD,EASA3yB,KAAK0P,YAAc,SAASkjB,EAAUC,GAEpC,IAAIC,EAAIC,EAAW9yB,EAAS+yB,EAAS,KAOrC,GAHAD,GADAD,EAAK9E,GAAK,oBACOlC,EAAK2C,GAAuB,QAAb,aAG3BA,KAAYX,GAAIqE,KAEnB,OADA9F,EAAS0G,IACF,EA6BT,GA1BIF,IAASjP,IAEXgP,EAAW,CACT/K,GAAI+K,EACJ7qB,IAAK8qB,KAKT5yB,EAAUsqB,EAAMqI,IAER7qB,IAAM2kB,EAASzsB,EAAQ8H,KAG3B9H,EAAQ4nB,KAAOjE,IACjB3jB,EAAQ4nB,GAAKiG,GAAI7J,aAAaiB,SAAYqK,MAIxCtvB,EAAQ4nB,GAAG/Q,WAAWzQ,OAAO,GAAGmN,MAAM,YACxCsa,GAAIsD,IAAI0B,EAAKhH,EAAI,QAAS7rB,EAAQ4nB,IAAK,GAGzCiG,GAAIsD,IAAI0B,EAAK7yB,EAAQ4nB,IAAM5nB,EAAQ8H,IAAM,KAAO9H,EAAQ8H,IAAM,IAAM,IAAK,GAGrEukB,EAAQrsB,EAAQ4nB,IAAI,GAEtB,OADAiG,GAAIsD,IAAI0B,EAAK7yB,EAAQ4nB,GAAK,UAAW,GAC9BiG,GAAI1F,OAAOnoB,EAAQ4nB,IAG5B,SAASoL,IAKP,OAHAhzB,EAAUksB,EAAQlsB,GAClB6tB,GAAI1F,OAAOnoB,EAAQ4nB,IAAM,IAAImC,EAAQ/pB,GACrC6tB,GAAIzF,SAASpjB,KAAKhF,EAAQ4nB,IACnBiG,GAAI1F,OAAOnoB,EAAQ4nB,GAE5B,CAEA,GAAIgF,EAAQ5sB,GAEV+yB,EAASC,IAEJnF,GAAIhE,WACPgE,GAAIsD,IAAInxB,EAAQ4nB,GAAK,iBAGvBmL,EAAOE,aAAajzB,OAEf,CAEL,GAAI6tB,GAAIhE,UAEN,OADAgE,GAAIsD,IAAInxB,EAAQ4nB,GAAK,6DACdoL,IAKT,GAAInF,GAAInE,MAAMC,YAAc3pB,EAAQ8H,KAAO9H,EAAQ8H,IAAIyL,MAAM,UAG3D,OADAsa,GAAIsD,IAAInxB,EAAQ4nB,GAAK,kDACdoL,IAGL9I,EAAK,IACqB,OAAxBlqB,EAAQymB,cAEVzmB,EAAQymB,eAAiBzmB,EAAQinB,WAAcjnB,EAAQkC,MAAOlC,EAAQkC,KAAKqR,MAAMkd,KAAiCzwB,EAAQ8H,KAAO9H,EAAQ8H,IAAIyL,MAAMod,MAGjJ3wB,EAAQymB,cACVoH,GAAIsD,IAAI0B,EAAK,4BACT7yB,EAAQslB,MAAQ,GAClB8E,EAAK,cAMXpqB,EAAUmsB,EAAUnsB,EAAS6yB,GAC7BE,EAASC,IAEE,IAAP9I,EACFN,GAAMsJ,aAAalzB,EAAQ4nB,GAAI5nB,EAAQslB,OAAS,EAAGtlB,EAAQqmB,gBAE3DuD,GAAMsJ,aAAalzB,EAAQ4nB,GAAI5nB,EAAQ8H,IAAK9H,EAAQ0mB,YAAa1mB,EAAQ2mB,gBAAiB3mB,EAAQ4mB,UAAW5mB,EAAQymB,cAAczmB,EAAQymB,aAAczmB,EAAQgnB,WAAqBhnB,EAAQslB,OAAS,EAAGtlB,EAAQinB,UAAWjnB,EAAQmnB,UAAY,KAAMnnB,EAAQolB,UAAU,EAAMplB,EAAQmlB,SAAUnlB,EAAQqmB,eACpSrmB,EAAQinB,YAEX8L,EAAOI,WAAY,EACfnzB,EAAQknB,WACVlnB,EAAQknB,UAAUze,MAAMsqB,KAKzB/yB,EAAQinB,YAAcjnB,EAAQmlB,WAAYnlB,EAAQolB,UAErD2N,EAAOpjB,KAAK3P,EAGhB,CAOA,OAJKA,EAAQinB,WAAajnB,EAAQolB,UAChC2N,EAAO9iB,OAGF8iB,CAET,EAQAhzB,KAAKqzB,aAAe,SAASC,EAAKC,GAIhC,IAAKjH,EAAQgH,GAAM,OAAO,EAE1B,IAA0BryB,EAAtBuyB,EAAK1F,GAAI1F,OAAOkL,GASpB,IAPAE,EAAGjtB,OAGHitB,EAAGC,IAAM,CAAC,EAEVD,EAAGE,SAEEzyB,EAAI,EAAGA,EAAI6sB,GAAIzF,SAAS/iB,OAAQrE,IACnC,GAAI6sB,GAAIzF,SAASpnB,KAAOqyB,EAAK,CAC3BxF,GAAIzF,SAASsL,OAAO1yB,EAAG,GACvB,KACF,CAWF,OARKsyB,GAEHC,EAAGxf,UAAS,GAGdwf,EAAK,YACE1F,GAAI1F,OAAOkL,IAEX,CAET,EASAtzB,KAAK4P,KAAO,SAAS0jB,EAAKV,GAExB,QAAKtG,EAAQgH,IAENxF,GAAI1F,OAAOkL,GAAK1jB,KAAKgjB,EAE9B,EAQA5yB,KAAK0zB,OAAS,SAASJ,GAErB,QAAKhH,EAAQgH,IAENxF,GAAI1F,OAAOkL,GAAKI,QAEzB,EAYA1zB,KAAK4zB,WAAa,SAASN,EAAKO,EAAWC,EAASC,GAElD,QAAKzH,EAAQgH,IAENxF,GAAI1F,OAAOkL,GAAKxN,WAAW+N,EAAWC,EAASC,EAExD,EAGA/zB,KAAK8lB,WAAa9lB,KAAK4zB,WAWvB5zB,KAAKg0B,gBAAkB,SAASV,EAAKO,EAAWC,GAE9C,QAAKxH,EAAQgH,IAENxF,GAAI1F,OAAOkL,GAAKU,gBAAgBH,EAAWC,EAEpD,EAUA9zB,KAAKkQ,KAAO,SAASojB,EAAKV,GAExB,IAAI3Z,EAAS,KAETgb,EAAcrB,KAAcA,aAAoBxyB,QAEpD,IAAKquB,KAAYX,GAAIqE,KAEnB,OADA9F,EAAS2B,GAAK,YAAclC,EAAK2C,GAAuB,QAAb,cACpC,EAGT,GAAKnC,EAAQgH,EAAKW,GAkBPA,IAGTrB,EAAW,CACT7qB,IAAK6qB,QAtBsB,CAG7B,IAAKqB,EAAY,OAAO,EAEpBA,IACFrB,EAAW,CACT7qB,IAAK6qB,IAILA,GAAYA,EAAS7qB,MAEvB+lB,GAAIsD,IAAIpD,GAAK,kCAAoCsF,EAAM,IAAK,GAC5DV,EAAS/K,GAAKyL,EACdra,EAAS6U,GAAIpe,YAAYkjB,GAAU1iB,OAGvC,CAcA,OALe,OAAX+I,IAEFA,EAAS6U,GAAI1F,OAAOkL,GAAKpjB,KAAK0iB,IAGzB3Z,CAET,EAGAjZ,KAAKoK,MAAQpK,KAAKkQ,KASlBlQ,KAAKmP,gBAAkB,SAASmkB,EAAK3jB,EAAMukB,GAEzC,QAAK5H,EAAQgH,IAENxF,GAAI1F,OAAOkL,GAAKnkB,gBAAgBQ,EAAMukB,EAE/C,EAUAl0B,KAAKm0B,YAAc,SAASb,EAAKc,GAE/B,QAAK9H,EAAQgH,IAENxF,GAAI1F,OAAOkL,GAAKa,YAAYC,EAErC,EASAp0B,KAAKuG,KAAO,SAAS+sB,GAEnB,QAAKhH,EAAQgH,KAEbxF,GAAIsD,IAAIpD,GAAK,SAAWsF,EAAM,IAAK,GAE5BxF,GAAI1F,OAAOkL,GAAK/sB,OAEzB,EAMAvG,KAAKq0B,QAAU,WAEb,IAAIrB,EAGJ,IAAKA,KAFLlF,GAAIsD,IAAIpD,GAAK,aAAc,GAEZF,GAAI1F,OACb0F,GAAI1F,OAAOtnB,eAAekyB,IAE5BlF,GAAI1F,OAAO4K,GAAQzsB,MAIzB,EASAvG,KAAKuO,MAAQ,SAAS+kB,GAEpB,QAAKhH,EAAQgH,IAENxF,GAAI1F,OAAOkL,GAAK/kB,OAEzB,EAMAvO,KAAKs0B,SAAW,WAEd,IAAIrzB,EACJ,IAAKA,EAAI6sB,GAAIzF,SAAS/iB,OAAS,EAAGrE,GAAK,EAAGA,IACxC6sB,GAAI1F,OAAO0F,GAAIzF,SAASpnB,IAAIsN,OAGhC,EASAvO,KAAKwO,OAAS,SAAS8kB,GAErB,QAAKhH,EAAQgH,IAENxF,GAAI1F,OAAOkL,GAAK9kB,QAEzB,EAMAxO,KAAKu0B,UAAY,WAEf,IAAItzB,EACJ,IAAKA,EAAI6sB,GAAIzF,SAAS/iB,OAAS,EAAGrE,GAAK,EAAGA,IACxC6sB,GAAI1F,OAAO0F,GAAIzF,SAASpnB,IAAIuN,QAGhC,EASAxO,KAAKw0B,YAAc,SAASlB,GAE1B,QAAKhH,EAAQgH,IAENxF,GAAI1F,OAAOkL,GAAKkB,aAEzB,EAUAx0B,KAAKy0B,OAAS,SAASnB,EAAKoB,GAE1B,QAAKpI,EAAQgH,IAENxF,GAAI1F,OAAOkL,GAAKmB,OAAOC,EAEhC,EAWA10B,KAAK20B,UAAY,SAASrB,EAAKsB,GAI7B,IAAI3zB,EAAG4zB,EAEP,GAAIvB,IAAQ1P,IAAeve,MAAMiuB,IAAQsB,IAAShR,EAAY,CAC5D,IAAK3iB,EAAI,EAAG4zB,EAAI/G,GAAIzF,SAAS/iB,OAAQrE,EAAI4zB,EAAG5zB,IAC1C6sB,GAAI1F,OAAO0F,GAAIzF,SAASpnB,IAAI0zB,UAAUrB,GAExC,OAAO,CACT,CAIA,QAAKhH,EAAQgH,IAENxF,GAAI1F,OAAOkL,GAAKqB,UAAUC,EAEnC,EAQA50B,KAAK80B,KAAO,SAASxB,GAEnB,IAAIryB,EAAI,EAMR,GAJIqyB,aAAepsB,SACjBosB,EAAM,MAGHA,EAUH,QAAKhH,EAAQgH,KAEbxF,GAAIsD,IAAIpD,GAAK,oBAAsBsF,EAAM,KAClCxF,GAAI1F,OAAOkL,GAAKwB,QAVvB,IADAhH,GAAIsD,IAAIpD,GAAK,8BACR/sB,EAAI6sB,GAAIzF,SAAS/iB,OAAS,EAAGrE,GAAK,EAAGA,IACxC6sB,GAAI1F,OAAO0F,GAAIzF,SAASpnB,IAAI6zB,OAahC,OAXEhH,GAAIxF,OAAQ,GAWP,CAET,EAMAtoB,KAAK+0B,QAAU,WAEbjH,GAAIgH,MAEN,EAQA90B,KAAKg1B,OAAS,SAAS1B,GAErB,IAAIryB,EAMJ,GAJIqyB,aAAepsB,SACjBosB,EAAM,MAGHA,EAUH,QAAKhH,EAAQgH,KAEbxF,GAAIsD,IAAIpD,GAAK,wBAA0BsF,EAAM,KAEtCxF,GAAI1F,OAAOkL,GAAK0B,UAXvB,IADAlH,GAAIsD,IAAIpD,GAAK,kCACR/sB,EAAI6sB,GAAIzF,SAAS/iB,OAAS,EAAGrE,GAAK,EAAGA,IACxC6sB,GAAI1F,OAAO0F,GAAIzF,SAASpnB,IAAI+zB,SAchC,OAZElH,GAAIxF,OAAQ,GAYP,CAET,EAMAtoB,KAAKi1B,UAAY,WAEfnH,GAAIkH,QAEN,EASAh1B,KAAKk1B,WAAa,SAAS5B,GAEzB,QAAKhH,EAAQgH,IAENxF,GAAI1F,OAAOkL,GAAK4B,YAEzB,EAQAl1B,KAAKm1B,aAAe,WAGlB,IAAIC,EAAM,EAMV,OAJIvL,IAAgB,IAAPM,IACXiL,EAAMpT,SAAS6H,GAAMwL,gBAAiB,KAGjCD,CAET,EAMAp1B,KAAKs1B,QAAU,SAASC,GAGtB,IAAIt0B,EAOJ,GALIs0B,IAAe3R,IACjB2R,GAAa,GAIX7G,GAAU,OAAO,EAMrB,IAJAA,IAAW,EAEXrE,EAAK,WAAY,GAEZppB,EAAI6sB,GAAIzF,SAAS/iB,OAAS,EAAGrE,GAAK,EAAGA,IACxC0qB,EAAcmC,GAAI1F,OAAO0F,GAAIzF,SAASpnB,KAUxC,OAPA0qB,EAAcmC,IAGdxD,EAAaiL,GAEbnI,GAAMpN,OAAO3X,EAAQ,OAAQsiB,IAEtB,CAET,EAMA3qB,KAAKw1B,YAAc,SAASC,GAE1B,IAAIxc,EAaJ,OAXI6U,GAAIkE,WACN/Y,EAAS6T,EAAa,CACpB3qB,KAAMszB,MAILxc,GAAUoW,KAEbpW,EAAUwc,GAAS3H,GAAIqE,QAAWhI,EAAK,GAAIsL,EAAMjiB,MAAMkd,KAA+B+E,EAAMjiB,MAAMsa,GAAIwD,cAAgB,MAGjHrY,CAET,EASAjZ,KAAK01B,WAAa,SAASC,GAEzB,IAAI1c,EAYJ,OAVI6U,GAAIkE,WACN/Y,EAAS6T,EAAa,CACpB/kB,IAAK4tB,MAIJ1c,GAAUoW,KACbpW,EAAU0c,GAAQ7H,GAAIqE,OAAUwD,EAAKniB,MAAMsa,GAAItF,aAAgB,MAG1DvP,CAET,EASAjZ,KAAK41B,YAAc,SAASC,GAE1B,QAAIA,EAAM1zB,OAASyhB,IAAciS,EAAM1zB,OAAQ2rB,GAAI0H,YAAYK,EAAM1zB,QAE9D2rB,GAAI4H,WAAWG,EAAM1H,KAE9B,EASAnuB,KAAK81B,aAAe,SAASxC,EAAKyC,GAEhC,IAAKzC,EAAK,OAAO,KAEjB,IAAIra,EAAS6U,GAAI1F,OAAOkL,GAQxB,OALKra,GAAW8c,GACdjI,GAAIsD,IAAIpD,GAAK,2BAA6BsF,EAAM,eAAgB,GAI3Dra,CAET,EASAjZ,KAAKg2B,QAAU,SAASlC,EAASC,GAE/B,IAAIkC,EAAQ,UAGZ,GAAuB,mBAAZnC,EAmBT,MAAMhI,EAAI,eAAgBmK,GAI5B,OApBMxH,IACFX,GAAIsD,IAAItF,EAAI,QAASmK,IAIlBlC,IACHA,EAAS1rB,GAGXoiB,EAAWwL,EAAOnC,EAASC,GAC3BrJ,KAES,CAUb,EASA1qB,KAAKk2B,UAAY,SAASpC,EAASC,GAEjC,IAAIkC,EAAQ,YAGZ,GAAuB,mBAAZnC,EAmBT,MAAMhI,EAAI,eAAgBmK,GAI5B,OApBMxH,IACFX,GAAIsD,IAAItF,EAAI,QAASmK,IAIlBlC,IACHA,EAAS1rB,GAGXoiB,EAAWwL,EAAOnC,EAASC,GAC3BrJ,EAAgB,CAAEvoB,KAAM8zB,KAEf,CAUb,EAUAj2B,KAAKm2B,YAAc,SAASC,EAAOC,GAKjC,IAAiCt1B,EAAGu1B,EAEpC,SAAKxI,GAAI7J,aAAa9Q,aAElB6c,IAAclC,GAAI3J,aAChBkS,GAA0C,iBAAlBA,EAE1Btf,QAAQC,IAAIof,EAAOC,GACVxH,GAAYwH,KAAmBzS,EACxC7M,QAAQ8X,GAAYwH,IAAgBD,GAEpCrf,QAAQC,IAAIof,GAEVtI,GAAI1J,kBAGVrjB,EAAI8mB,EAhBO,yBAoBXyO,EAAQlI,GAAImI,cAAc,SAEpB3H,GAAU,GAAM,IACpB0H,EAAME,UAAY,WAIlBH,EADEA,IAAkBzS,EACJ,EAEA5B,SAASqU,EAAe,IAG1CC,EAAMG,YAAYrI,GAAIsI,eAAeN,IAEjCC,IACEA,GAAiB,IACnBC,EAAMK,MAAMC,WAAa,QAEL,IAAlBP,IACFC,EAAMK,MAAME,MAAQ,YAQxB91B,EAAEgc,aAAauZ,EAAOv1B,EAAE+1B,YAExB/1B,EAAI,KAGG,IAET,GAIuC,IAAnCmtB,GAAGjhB,QAAQ,qBACbjN,KAAKm2B,YAAc,SAASC,GAC1B/tB,EAAO0uB,MAAMX,EACf,GAKFp2B,KAAKoxB,IAAMpxB,KAAKm2B,YAMhBn2B,KAAKg3B,OAAS,WAGZ,IAAI/1B,EAAG4zB,EAGP,IAFAxK,EAAK,aAAc,GAEdppB,EAAI,EAAG4zB,EAAI/G,GAAIzF,SAAS/iB,OAAQrE,EAAI4zB,EAAG5zB,IAC1C6sB,GAAI1F,OAAO0F,GAAIzF,SAASpnB,IAAI+1B,QAIhC,EAUAh3B,KAAKi3B,OAAS,SAASC,EAAaC,GAUlC,IAAIl2B,EAAG4zB,EAAGuC,EAEV,IAPItJ,GAAIzF,SAAS/iB,QACfwoB,GAAIsD,IAAI,cAAgBtD,GAAIzF,SAAS/iB,OAAS,mBAA6C,IAAxBwoB,GAAIzF,SAAS/iB,OAAe,IAAM,IAAM,OAMxGrE,EAAI6sB,GAAIzF,SAAS/iB,OAAS,EAAGrE,GAAK,EAAGA,IACxC6sB,GAAI1F,OAAO0F,GAAIzF,SAASpnB,IAAI+S,WAK9B,GAAI6V,GAEF,IAEM6F,KACFX,GAAelF,GAAMwN,WAGvBvI,GAAWjF,GAAMyN,WAAWC,YAAY1N,GAE1C,CAAE,MAAMppB,GAIN4pB,EAAK,YAAa,EAEpB,CAgBF,GAVA0E,GAAeD,GAAWO,GAAaxF,GAAQ,KAE/CiE,GAAI/T,QAAUsR,EAAcoD,GAAUO,GAAeC,GAAcV,GAAYC,GAAgBE,GAAWY,GAAsBxB,GAAI5F,WAAY,EAEhJ4F,GAAIzF,SAAW,GACfyF,GAAI1F,OAAS,CAAC,EAEdmH,GAAY,EACZ1B,IAAW,EAENqJ,EAWH7I,GAAW,QATX,IAAKptB,KAAKotB,GACR,GAAIA,GAASvtB,eAAeG,GAC1B,IAAK4zB,EAAI,EAAGuC,EAAI/I,GAASptB,GAAGqE,OAAQuvB,EAAIuC,EAAGvC,IACzCxG,GAASptB,GAAG4zB,GAAG2C,OAAQ,EAsC/B,OA5BKL,GACHrJ,GAAIsD,IAAIpD,GAAK,kBAMfF,GAAInE,MAAQ,CACVC,WAAY,MAGdkE,GAAIjE,MAAQ,CAAC,EAIbiE,GAAIhE,WAAY,EAChBgE,GAAI/D,aAAc,EAElB1hB,EAAOoqB,YAAW,WAIX0E,GACHrJ,GAAIyE,kBAGR,GAAG,IAEIzE,EAET,EAEA9tB,KAAKoF,MAAQ,WAUX,OAFAilB,EAAK,SAEEyD,GAAImJ,QAAO,GAAM,EAE1B,EAQAj3B,KAAKy3B,gBAAkB,WASrB,OAAQ5N,IAAS,kBAAmBA,GAAQA,GAAM6N,gBAAkB,IAEtE,EAMA13B,KAAKuyB,iBAAmB,WAEtB5D,IAAe,EACfxD,IAEAsH,YAAW,WAET,OAAIxD,KAEJ1D,IACAL,IACA+D,IAAc,GAEP,EAET,GAAG,IAEHrE,GAEF,EAMA5qB,KAAKgU,SAAW,WAEd8Z,GAAIsD,IAAIpD,GAAK,eACbF,GAAIwH,SAAQ,EAEd,EAUAtL,EAAU,SAAS4I,GAEjB,IAAc+E,EAAiBC,EAAkBC,EAAqBC,EAAkBC,EAAmBC,EAAoFC,EAAkBC,EAA6BC,EAAgBC,EAA1P31B,EAAIzC,KAAqHq4B,GAAgB,EAAOC,EAAkB,GAAIC,EAAkB,EAAkCC,EAAU,KAExOL,EAAiB,CAEf/Q,SAAU,KACVqR,KAAM,MAGRz4B,KAAK6nB,GAAK+K,EAAS/K,GAGnB7nB,KAAKszB,IAAMtzB,KAAK6nB,GAEhB7nB,KAAK+H,IAAM6qB,EAAS7qB,IACpB/H,KAAKC,QAAUsqB,EAAMqI,GAGrB5yB,KAAK04B,gBAAkB14B,KAAKC,QAG5BD,KAAKyzB,IAAMzzB,KAAK04B,gBAGhB14B,KAAKmmB,IAAMnmB,KAAKC,QAAQkmB,IACxBnmB,KAAKumB,OAASvmB,KAAKC,QAAQsmB,OAG3BvmB,KAAK24B,SAAU,EAGf34B,KAAKmxB,GAAK,KAGViH,GAAep4B,KAAK+H,IAOpB/H,KAAK44B,IAAM,CAAC,EAMZ54B,KAAKg3B,OAAS,WAGZlJ,GAAIsD,IAAI3uB,EAAEolB,GAAK,oBAAqBplB,EAAExC,QAGxC,EASAD,KAAK4P,KAAO,SAAS3P,GAEnB,IAAmBy4B,EA4BnB,GA1BIz4B,IAAY2jB,EACdnhB,EAAEgxB,IAAMlJ,EAAMtqB,EAASwC,EAAExC,UAEzBA,EAAUwC,EAAExC,QACZwC,EAAEgxB,IAAMxzB,EACJu4B,GAAWA,IAAY/1B,EAAEsF,MAC3BsiB,EAAK,UACL5nB,EAAEgxB,IAAI1rB,IAAMtF,EAAEsF,IACdtF,EAAEsF,IAAM,OAIPtF,EAAEgxB,IAAI1rB,MACTtF,EAAEgxB,IAAI1rB,IAAMtF,EAAEsF,KAGhBtF,EAAEgxB,IAAI1rB,IAAM2kB,EAASjqB,EAAEgxB,IAAI1rB,KAG3BtF,EAAEi2B,gBAAkBj2B,EAAEgxB,IAGtBiF,EAAkBj2B,EAAEgxB,IAEpB3F,GAAIsD,IAAI3uB,EAAEolB,GAAK,WAAa6Q,EAAgB3wB,IAAM,MAE7C2wB,EAAgB3wB,MAAQtF,EAAEsF,IAE7B,OADA+lB,GAAIsD,IAAI3uB,EAAEolB,GAAK,wCAAyC,GACjDplB,EAUT,GANKA,EAAEk2B,SAAkB,IAAPxO,GAAa1nB,EAAEsF,KAAQ2wB,EAAgBrT,UAEvDyI,GAAIsD,IAAI3uB,EAAEolB,GAAK,wEAAyE,GAItF6Q,EAAgB3wB,MAAQtF,EAAEsF,KAAwB,IAAjBtF,EAAE+vB,YAAqC,IAAjB/vB,EAAE+vB,WAS3D,OARAnI,EAAK,QAAS,GAEO,IAAjB5nB,EAAE+vB,YAAoBkG,EAAgBtkB,QAExCwZ,GAAanrB,GAAG,WACdi2B,EAAgBtkB,OAAO1L,MAAMjG,EAAG,GAAIA,EAAE2kB,UACxC,IAEK3kB,EAYT,GAPAA,EAAEwN,QAAS,EACXxN,EAAE+vB,WAAa,EACf/vB,EAAEo2B,UAAY,EACdp2B,EAAEm2B,IAAM,CAAC,EAIL/L,EAAQ6L,GAEDj2B,EAAEywB,aAAawF,GAEZI,aAkCVhL,GAAIsD,IAAI3uB,EAAEolB,GAAK,qCAhCfplB,EAAEs2B,gBAAiB,EAMft2B,EAAEsF,MAAQ2wB,EAAgB3wB,MAE5B+lB,GAAIsD,IAAI/G,EAAK,UAAY,KAAOqO,EAAgB3wB,KAEhDtF,EAAE0uB,GAAG/b,IAAMsjB,EAAgB3wB,IAK3BtF,EAAE0xB,YAAY,IAOhB1xB,EAAE0uB,GAAG6H,WAAa,OAIlBv2B,EAAE0uB,GAAG8H,QAAU,OAEfx2B,EAAE0uB,GAAG2H,cAAe,OAQjB,CAEL,GAAIhL,GAAIhE,UAEN,OADAgE,GAAIsD,IAAI3uB,EAAEolB,GAAK,gCACRplB,EAGT,GAAIA,EAAEgxB,IAAI1rB,KAAOtF,EAAEgxB,IAAI1rB,IAAIyL,MAAM,UAG/B,OADAsa,GAAIsD,IAAI3uB,EAAEolB,GAAK,kDACRplB,EAGT,IACEA,EAAEk2B,SAAU,EACZl2B,EAAEgxB,IAAMrH,EAAUD,EAAQuM,IAEtBj2B,EAAEgxB,IAAIpO,WAAa5iB,EAAEgxB,IAAIvN,UAAYzjB,EAAEgxB,IAAInO,QAC7CwI,GAAIsD,IAAI3uB,EAAEolB,GAAK,wDACfplB,EAAEgxB,IAAIpO,UAAW,GAGnBqT,EAAkBj2B,EAAEgxB,IACT,IAAPtJ,EACFN,GAAMqP,MAAMz2B,EAAEolB,GAAI6Q,EAAgB3wB,IAAK2wB,EAAgBtS,OAAQsS,EAAgBrT,SAAUqT,EAAgBpS,eAEzGuD,GAAMqP,MAAMz2B,EAAEolB,GAAI6Q,EAAgB3wB,MAAQ2wB,EAAsB,SAAMA,EAAwB,SAAGA,EAAgBnT,OAAS,IAAMmT,EAAwB,SAAGA,EAAgBpS,cAE/K,CAAE,MAAM7lB,GACN4pB,EAAK,UAAW,GAChBD,EAAQ,UAAU,GAClBoB,EAAW,CACTrpB,KAAM,4BACNg3B,OAAO,GAEX,CAEF,CAKA,OAFA12B,EAAEsF,IAAM2wB,EAAgB3wB,IAEjBtF,CAET,EAQAzC,KAAK0zB,OAAS,WAsCZ,OAhCqB,IAAjBjxB,EAAE+vB,aAEJ1E,GAAIsD,IAAI3uB,EAAEolB,GAAK,cAEVplB,EAAEk2B,SAULb,IAEIr1B,EAAE0uB,KAEJ1uB,EAAE0uB,GAAG5iB,QAGLiqB,EAAUvL,GAAYxqB,EAAE0uB,MAff,IAAPhH,EACFN,GAAMuP,QAAQ32B,EAAEolB,GAAIyI,IAEpBzG,GAAMuP,QAAQ32B,EAAEolB,IAmBpB8P,KAIKl1B,CAET,EAMAzC,KAAKgU,SAAW,SAASqlB,GAEvBvL,GAAIsD,IAAI3uB,EAAEolB,GAAK,cAEVplB,EAAEk2B,SASLb,IAEIr1B,EAAE0uB,KACJ1uB,EAAE0uB,GAAG5iB,QACL0e,GAAYxqB,EAAE0uB,IACT7B,IACHuI,IAGFp1B,EAAE0uB,GAAGD,GAAK,KACVzuB,EAAE0uB,GAAK,QAfT1uB,EAAEgxB,IAAIhN,UAAY,KAClBoD,GAAMyP,cAAc72B,EAAEolB,KAmBnBwR,GAEHvL,GAAIuF,aAAa5wB,EAAEolB,IAAI,EAG3B,EASA7nB,KAAKkQ,KAAO,SAASjQ,EAASs5B,GAE5B,IAAIC,EAAgBr4B,EAAG60B,EACnByD,EAAYC,EAASC,EACrBC,GAAU,EA6Bd,GA1BAJ,EAAK/2B,EAAEolB,GAAK,aAIZ0R,EAAoBA,IAAqB3V,GAAoB2V,EAExDt5B,IACHA,EAAU,CAAC,GAITwC,EAAEsF,MACJtF,EAAEgxB,IAAI1rB,IAAMtF,EAAEsF,KAIhBtF,EAAEgxB,IAAMlJ,EAAM9nB,EAAEgxB,IAAKhxB,EAAExC,SAGvBwC,EAAEgxB,IAAMlJ,EAAMtqB,EAASwC,EAAEgxB,KAEzBhxB,EAAEgxB,IAAI1rB,IAAM2kB,EAASjqB,EAAEgxB,IAAI1rB,KAE3BtF,EAAEi2B,gBAAkBj2B,EAAEgxB,KAGjBhxB,EAAEk2B,SAAWl2B,EAAEgxB,IAAIvM,YAAczkB,EAAE2wB,UAMtC,OALK3wB,EAAEo3B,gBACL/L,GAAIsD,IAAIoI,EAAK,mDACb/2B,EAAEq3B,aAAY,IAGTr3B,EAQT,GALIoqB,EAAQpqB,EAAEgxB,OACZhxB,EAAEywB,aAAazwB,EAAEgxB,KACjBsE,KAGkB,IAAhBt1B,EAAEo2B,YAAoBp2B,EAAEkL,OAAQ,CAIlC,IAFalL,EAAEgxB,IAAIzN,UAWjB,OAPA8H,GAAIsD,IAAIoI,EAAK,6BAA8B,GAEvC/2B,EAAEk2B,SAEJl2B,EAAE0xB,YAAY1xB,EAAEgxB,IAAIvN,UAGfzjB,EAITqrB,GAAIsD,IAAIoI,EAAK,+BAAgC,EAE/C,CAmBA,GAhBIv5B,EAAQ8H,KAAO9H,EAAQ8H,MAAQtF,EAAEsF,MAG9BtF,EAAE+vB,YAAe/vB,EAAEk2B,SAAkB,IAAPxO,IAAYiO,EAO7C31B,EAAEmN,KAAKnN,EAAEgxB,KALT2E,GAAa,GAWZ31B,EAAEwN,OA4CL6d,GAAIsD,IAAIoI,EAAGO,OAAO,EAAGP,EAAGQ,YAAY,YA1CpC,GAAqB,IAAjBv3B,EAAE+vB,WAAkB,CAKtB,GAHA1E,GAAIsD,IAAIoI,EAAK,sBAGR/2B,EAAEk2B,SAAY7K,GAAIhE,UAMhB,KAAIrnB,EAAEk2B,QASX,OAFA7K,GAAIsD,IAAIoI,EAAK,8BAEN/2B,EANPA,EAAEmN,KAAKnN,EAAEgxB,IAQX,MAdEhxB,EAAEgxB,IAAIpO,UAAW,EACjB5iB,EAAEmN,KAAKnN,EAAEgxB,KAgBXhxB,EAAEi2B,gBAAkBj2B,EAAEgxB,GAExB,KAAO,IAAqB,IAAjBhxB,EAAE+vB,WAIX,OAFA1E,GAAIsD,IAAIoI,EAAK,2BAA4B,GAElC/2B,EAIPqrB,GAAIsD,IAAIoI,EAAK,kCAEf,CA2LF,OAlLK/2B,EAAEk2B,SAAkB,IAAPxO,GAAY1nB,EAAEyjB,SAAW,GAAKzjB,EAAEyjB,WAAazjB,EAAE2kB,WAE/D0G,GAAIsD,IAAIoI,EAAK,0CACbv5B,EAAQimB,SAAW,GAYjBzjB,EAAEkL,QAAUlL,EAAEyjB,UAAY,KAAOzjB,EAAEgxB,IAAIvM,WAAazkB,EAAEyjB,SAAW,IAGnE4H,GAAIsD,IAAIoI,EAAK,6BAA8B,GAC3C/2B,EAAE+L,WAIF/L,EAAEgxB,IAAMlJ,EAAMtqB,EAASwC,EAAEgxB,OAMlBhxB,EAAEk2B,SAA8B,OAAnBl2B,EAAEgxB,IAAIvN,UAAqBzjB,EAAEgxB,IAAIvN,SAAW,GAAsB,OAAfzjB,EAAEgxB,IAAInO,MAAiB7iB,EAAEgxB,IAAInO,KAAO,GAAmB,OAAb7iB,EAAEgxB,IAAIpN,KAAoC,IAApB5jB,EAAEw3B,eAAuC,IAAhBx3B,EAAEo2B,YAAoBp2B,EAAEgxB,IAAIvM,YAE1L8O,EAAU,WAGRvzB,EAAEgxB,IAAMlJ,EAAMtqB,EAASwC,EAAEgxB,KACzBhxB,EAAEyN,KAAKzN,EAAEgxB,IACX,EAGIhxB,EAAEk2B,UAAYl2B,EAAEs2B,gBAGlBjL,GAAIsD,IAAIoI,EAAK,2CAEb/2B,EAAEmN,KAAK,CAELsqB,WAAYlE,KAGJvzB,EAAEk2B,SAAYl2B,EAAEwN,QAAYxN,EAAE+vB,YAA+B,IAAjB/vB,EAAE+vB,aAIxD1E,GAAIsD,IAAIoI,EAAK,uCAEb/2B,EAAEmN,KAAK,CACLwE,OAAQ4hB,KAOZvzB,EAAEgxB,IAAMyE,OAOLz1B,EAAEw3B,eAAiBx3B,EAAEgxB,IAAIxN,iBAAoBxjB,EAAEk2B,SAAWl2B,EAAEgxB,IAAIzN,YAAcsJ,KAA0B7sB,EAAEk2B,SAAWxO,EAAK,IAAM1nB,EAAEo3B,gBACrIp3B,EAAEw3B,gBAIAx3B,EAAEgxB,IAAI3N,YAA8B,IAAhBrjB,EAAEo2B,WACxBb,EAAiBv1B,GAGnBA,EAAEo2B,UAAY,EACdp2B,EAAEkL,QAAS,EAEXlL,EAAEyjB,SAAYzjB,EAAEgxB,IAAIvN,WAAatC,GAAeve,MAAM5C,EAAEgxB,IAAIvN,UAA6B,EAAjBzjB,EAAEgxB,IAAIvN,SAEzEzjB,EAAEk2B,UACLl2B,EAAEgxB,IAAMrH,EAAUD,EAAQ1pB,EAAEgxB,OAG1BhxB,EAAEgxB,IAAI9N,QAAU4T,IAClB92B,EAAEgxB,IAAI9N,OAAOjd,MAAMjG,GACnB41B,GAAgB,GAGlB51B,EAAEkyB,UAAUlyB,EAAEgxB,IAAIlN,QAAQ,GAC1B9jB,EAAEgyB,OAAOhyB,EAAEgxB,IAAItN,KAAK,GAEO,IAAvB1jB,EAAEgxB,IAAI3lB,cACRrL,EAAE0M,gBAAgB1M,EAAEgxB,IAAI3lB,cAGrBrL,EAAEk2B,QAeIl2B,EAAEw3B,cAAgB,GAIzBlC,IAEA52B,EAAIsB,EAAEywB,eAENzwB,EAAE0xB,YAAY1xB,EAAEgxB,IAAIvN,UAEpB/kB,EAAE+O,SAMF4d,GAAIsD,IAAI3uB,EAAEolB,GAAK,mCAAqCplB,EAAEw3B,cAAgB,OAEtER,EAAa,IAAIxkB,MAAMxS,EAAEgxB,IAAI1rB,KAE7B2xB,EAAU,WACRtM,GAAMpN,OAAOyZ,EAAY,QAASC,GAClCj3B,EAAE03B,UAAU13B,GAEZwqB,GAAYwM,GACZA,EAAa,IACf,EAEAE,EAAY,WACVvM,GAAMpN,OAAOyZ,EAAY,UAAWE,GACpC,IACEF,EAAWW,YAAc33B,EAAEgxB,IAAIvN,SAAWsJ,EAC5C,CAAE,MAAMle,GACN+a,EAAS5pB,EAAEolB,GAAK,kDAAqDplB,EAAEgxB,IAAIvN,SAAWsJ,GACxF,CACAiK,EAAWvpB,MACb,EAEAkd,GAAMiN,IAAIZ,EAAY,QAASC,GAG3Bj3B,EAAEgxB,IAAIlN,SAAW3C,IACnB6V,EAAWlT,OAAS9a,KAAKC,IAAI,EAAGD,KAAKI,IAAI,EAAGpJ,EAAEgxB,IAAIlN,OAAS,OAIzD9jB,EAAE6lB,QACJmR,EAAWnR,OAAQ,GAGjB7lB,EAAEgxB,IAAIvN,SAGRkH,GAAMiN,IAAIZ,EAAY,UAAWE,GAGjCF,EAAWvpB,SArEf0pB,EAAU/P,GAAMyQ,OAAO73B,EAAEolB,GAAIplB,EAAEgxB,IAAIlO,OAAS,EAAW,IAAP4E,EAAW1nB,EAAEyjB,SAAWzjB,EAAEyjB,SAAWsJ,GAAY/sB,EAAEgxB,IAAIzN,YAAa,GAEzG,IAAPmE,GAAayP,IAIf9L,GAAIsD,IAAIoI,EAAK,6CAA8C,GACvD/2B,EAAEgxB,IAAI8G,aACR93B,EAAEgxB,IAAI8G,YAAY7xB,MAAMjG,MAoEzBA,CAET,EAGAzC,KAAKoK,MAAQpK,KAAKkQ,KASlBlQ,KAAKuG,KAAO,SAASi0B,GAEnB,IACIC,EADA/B,EAAkBj2B,EAAEgxB,IAgExB,OA7DoB,IAAhBhxB,EAAEo2B,YAEJ/K,GAAIsD,IAAI3uB,EAAEolB,GAAK,YAEfplB,EAAEi4B,gBAAgB,GAClBj4B,EAAEk4B,iBAAiB,GACnBl4B,EAAEkL,QAAS,EAENlL,EAAEk2B,UACLl2B,EAAEo2B,UAAY,GAIhBZ,IAGIS,EAAgBrS,IAClB5jB,EAAEuxB,gBAAgB0E,EAAgBrS,IAG/B5jB,EAAEk2B,QASIl2B,EAAE0uB,KAETsJ,EAAmBh4B,EAAEyjB,SAGrBzjB,EAAE0xB,YAAY,GAGd1xB,EAAEyjB,SAAWuU,EAIbh4B,EAAE0uB,GAAG5iB,QAEL9L,EAAEo2B,UAAY,EAGdp2B,EAAEm4B,WAEF9C,MA1BFjO,GAAMgR,MAAMp4B,EAAEolB,GAAI2S,GAGd9B,EAAgBxR,WAClBzkB,EAAEixB,UA0BNjxB,EAAEw3B,cAAgB,EAClBx3B,EAAEgxB,IAAM,CAAC,EAELiF,EAAgB3S,QAClB2S,EAAgB3S,OAAOrd,MAAMjG,IAK1BA,CAET,EAQAzC,KAAK85B,YAAc,SAASzU,GAE1ByI,GAAIsD,IAAI3uB,EAAEolB,GAAK,sBAAwBxC,EAAW,KAAO,QACzD5iB,EAAEgxB,IAAIpO,SAAWA,EAEZ5iB,EAAEk2B,UACL9O,GAAMiR,aAAar4B,EAAEolB,GAAIxC,GACrBA,IAEG5iB,EAAEw3B,eAAkC,IAAjBx3B,EAAE+vB,aACxB/vB,EAAEw3B,gBACFnM,GAAIsD,IAAI3uB,EAAEolB,GAAK,mCAAqCplB,EAAEw3B,iBAK9D,EAQAj6B,KAAK65B,YAAc,WAEjB,OAAOp3B,EAAEgxB,IAAIpO,QAEf,EASArlB,KAAKmP,gBAAkB,SAASrB,GAI9B,IAAIitB,EAAiBtvB,KAAKC,IAAI,GAAKD,KAAKI,IAAI,EAAGiC,IAQ/C,GALIitB,IAAmBjtB,GACrBggB,GAAIsD,IAAI3uB,EAAEolB,GAAK,qBAAuB/Z,EAAe,uBAAyBitB,EAAgB,GAI5Ft4B,EAAEk2B,QACJ,IACEl2B,EAAEgxB,IAAI3lB,aAAeitB,EACrBt4B,EAAE0uB,GAAGrjB,aAAeitB,CACtB,CAAE,MAAMt6B,GACNqtB,GAAIsD,IAAI3uB,EAAEolB,GAAK,qBAAuBkT,EAAiB,aAAet6B,EAAEu6B,QAAS,EACnF,CAGF,OAAOv4B,CAET,EASAzC,KAAKm0B,YAAc,SAASC,GAEtBA,IAAgBxQ,IAClBwQ,EAAc,GAGhB,IAAIlO,EAAU+U,EAGVC,EAAUz4B,EAAEk2B,QAAUltB,KAAKC,IAAI0oB,EAAa,GAAK3oB,KAAKI,IAAIpJ,EAAE2kB,UAAY3kB,EAAEgxB,IAAIrM,SAAU3b,KAAKC,IAAI0oB,EAAa,IAOlH,GALA3xB,EAAEyjB,SAAWgV,EACbD,EAAax4B,EAAEyjB,SAAWsJ,GAC1B/sB,EAAEk4B,iBAAiBl4B,EAAEyjB,UACrBzjB,EAAEgxB,IAAIvN,SAAWgV,EAEZz4B,EAAEk2B,SASA,GAAIl2B,EAAE0uB,GAAI,CAGf,GAAI1uB,EAAEs2B,gBAEJ,GAAIt2B,EAAE0uB,GAAGiJ,YAAYe,QAAQ,KAAOF,EAAWE,QAAQ,GAAI,CAOzDrN,GAAIsD,IAAI3uB,EAAEolB,GAAK,iBAAmBoT,EAAa,KAE/C,IACEx4B,EAAE0uB,GAAGiJ,YAAca,GACC,IAAhBx4B,EAAEo2B,WAAmBp2B,EAAEkL,SAEzBlL,EAAE0uB,GAAG5iB,OAET,CAAE,MAAM9N,GACNqtB,GAAIsD,IAAI3uB,EAAEolB,GAAK,iBAAmBoT,EAAa,aAAex6B,EAAEu6B,QAAS,EAC3E,CAEF,OAEK,GAAIC,EAIT,OADAnN,GAAIsD,IAAI3uB,EAAEolB,GAAK,iBAAmBoT,EAAa,sCAAuC,GAC/Ex4B,EAILA,EAAEkL,QAGJlL,EAAEm4B,UAAS,EAIf,OAhDE1U,EAAmB,IAAPiE,EAAW1nB,EAAEyjB,SAAW+U,EAEhCx4B,EAAE+vB,YAA+B,IAAjB/vB,EAAE+vB,YAEpB3I,GAAMuR,aAAa34B,EAAEolB,GAAI3B,EAAWzjB,EAAEkL,SAAWlL,EAAEo2B,UAAYp2B,EAAEgxB,IAAIzN,WA8CzE,OAAOvjB,CAET,EAQAzC,KAAKuO,MAAQ,SAAS8sB,GAEpB,OAAI54B,EAAEkL,QAA2B,IAAhBlL,EAAEo2B,WAAoC,IAAjBp2B,EAAE+vB,aAExC1E,GAAIsD,IAAI3uB,EAAEolB,GAAK,aACfplB,EAAEkL,QAAS,EAENlL,EAAEk2B,SAKLl2B,EAAEywB,eAAe3kB,QACjBupB,MALIuD,GAAeA,IAAgBzX,IACjCiG,GAAM1R,OAAO1V,EAAEolB,GAAIplB,EAAEgxB,IAAIzN,WAOzBvjB,EAAEgxB,IAAI7N,SACRnjB,EAAEgxB,IAAI7N,QAAQld,MAAMjG,IAf4CA,CAoBpE,EAgBAzC,KAAKwO,OAAS,WAEZ,IAAIkqB,EAAkBj2B,EAAEgxB,IAExB,OAAKhxB,EAAEkL,QAEPmgB,GAAIsD,IAAI3uB,EAAEolB,GAAK,cACfplB,EAAEkL,QAAS,EACXlL,EAAEo2B,UAAY,EAETp2B,EAAEk2B,SAYLl2B,EAAEywB,eAAehjB,OACjB6nB,MAXIW,EAAgBhS,cAAgBgS,EAAgBxR,WAElDzkB,EAAE0xB,YAAY1xB,EAAEyjB,UAIlB2D,GAAM1R,OAAO1V,EAAEolB,GAAI6Q,EAAgB1S,aAShCqS,GAAiBK,EAAgB/S,QAEpC+S,EAAgB/S,OAAOjd,MAAMjG,GAC7B41B,GAAgB,GAEPK,EAAgBpkB,UAEzBokB,EAAgBpkB,SAAS5L,MAAMjG,GAI1BA,GAlCeA,CAoCxB,EAQAzC,KAAKw0B,YAAc,WAIjB,OAFA1G,GAAIsD,IAAI3uB,EAAEolB,GAAK,mBAEK,IAAhBplB,EAAEo2B,WACJp2B,EAAEyN,KAAK,CACLgW,SAAkB,IAAPiE,GAAa1nB,EAAEk2B,QAAuBl2B,EAAEyjB,SAAWsJ,GAA1B/sB,EAAEyjB,WAEjCzjB,IAGLA,EAAEkL,OACJlL,EAAE+L,SAEF/L,EAAE8L,QAGG9L,EAET,EASAzC,KAAKy0B,OAAS,SAASC,EAAM4G,GAqB3B,OAnBI5G,IAAS9Q,IACX8Q,EAAO,GAGL4G,IAAkB1X,IACpB0X,GAAgB,GAGb74B,EAAEk2B,SACL9O,GAAM0R,QAAQ94B,EAAEolB,GAAI6M,GAGtBjyB,EAAEgxB,IAAItN,IAAMuO,EAEP4G,IACH74B,EAAE0jB,IAAMuO,EACRjyB,EAAExC,QAAQkmB,IAAMuO,GAGXjyB,CAET,EASAzC,KAAK20B,UAAY,SAASC,EAAM4G,GAwC9B,OA/BI5G,IAAShR,IACXgR,EAAO,KAGL4G,IAAmB5X,IACrB4X,GAAiB,GAGd/4B,EAAEk2B,QAIIl2B,EAAE0uB,KAEPrD,GAAIxF,QAAU7lB,EAAE6lB,QAClB7lB,EAAE6lB,OAAQ,EACV7lB,EAAE0uB,GAAG7I,OAAQ,GAIf7lB,EAAE0uB,GAAG5K,OAAS9a,KAAKC,IAAI,EAAGD,KAAKI,IAAI,EAAG+oB,EAAO,OAV7C/K,GAAM4R,WAAWh5B,EAAEolB,GAAKiG,GAAIxF,QAAU7lB,EAAE6lB,OAAU7lB,EAAE6lB,MAAQ,EAAIsM,GAclEnyB,EAAEgxB,IAAIlN,OAASqO,EAEV4G,IACH/4B,EAAE8jB,OAASqO,EACXnyB,EAAExC,QAAQsmB,OAASqO,GAGdnyB,CAET,EAQAzC,KAAK80B,KAAO,WAUV,OARAryB,EAAE6lB,OAAQ,EAEL7lB,EAAEk2B,QAEIl2B,EAAE0uB,KACX1uB,EAAE0uB,GAAG7I,OAAQ,GAFbuB,GAAM4R,WAAWh5B,EAAEolB,GAAI,GAKlBplB,CAET,EAQAzC,KAAKg1B,OAAS,WAEZvyB,EAAE6lB,OAAQ,EACV,IAAIoT,EAASj5B,EAAEgxB,IAAIlN,SAAW3C,EAQ9B,OANKnhB,EAAEk2B,QAEIl2B,EAAE0uB,KACX1uB,EAAE0uB,GAAG7I,OAAQ,GAFbuB,GAAM4R,WAAWh5B,EAAEolB,GAAI6T,EAAQj5B,EAAEgxB,IAAIlN,OAAS9jB,EAAExC,QAAQsmB,QAKnD9jB,CAET,EAQAzC,KAAKk1B,WAAa,WAEhB,OAAQzyB,EAAE6lB,MAAQ7lB,EAAEuyB,SAAWvyB,EAAEqyB,MAEnC,EAWA90B,KAAK4zB,WAAa,SAASC,EAAWC,EAASC,GAW7C,OAPAuE,EAAgBrzB,KAAK,CACnBihB,SAAUlE,SAAS6R,EAAW,IAC9B9vB,OAAQ+vB,EACR6H,MAAQ5H,IAAWnQ,EAAamQ,EAAStxB,EACzC+0B,OAAO,IAGF/0B,CAET,EAGAzC,KAAK8lB,WAAa9lB,KAAK4zB,WAUvB5zB,KAAKg0B,gBAAkB,SAASH,EAAWC,GAEzC,IAAI7yB,EAIJ,GAFA4yB,EAAY7R,SAAS6R,EAAW,KAE5BxuB,MAAMwuB,GAKV,IAAK5yB,EAAI,EAAGA,EAAIq3B,EAAgBhzB,OAAQrE,IAElC4yB,IAAcyE,EAAgBr3B,GAAGilB,WAG9B4N,GAAYA,IAAYwE,EAAgBr3B,GAAG8C,SAE1Cu0B,EAAgBr3B,GAAGu2B,OAErBe,IAGFD,EAAgB3E,OAAO1yB,EAAG,IAQlC,EAEAjB,KAAK47B,mBAAqB,WAExB,IAAI36B,EAAG46B,EAAMhH,EAAIyD,EAAgBhzB,OAEjC,IAAKuvB,IAAMpyB,EAAEo2B,WAAaN,GAAmB1D,EAAG,OAAO,EAEvD,IAAK5zB,EAAI4zB,EAAI,EAAG5zB,GAAK,EAAGA,MAEtB46B,EAAOvD,EAAgBr3B,IAEbu2B,OAAS/0B,EAAEyjB,UAAY2V,EAAK3V,WAEpC2V,EAAKrE,OAAQ,EACbe,IACAsD,EAAK93B,OAAO2E,MAAMmzB,EAAKF,MAAO,CAACE,EAAK3V,WAGpC2O,EAAIyD,EAAgBhzB,QAMxB,OAAO,CAET,EAEAtF,KAAK26B,iBAAmB,SAAS9G,GAG/B,IAAI5yB,EAAG46B,EAAMhH,EAAIyD,EAAgBhzB,OAEjC,IAAKuvB,EAAG,OAAO,EAEf,IAAK5zB,EAAI4zB,EAAI,EAAG5zB,GAAK,EAAGA,KAEtB46B,EAAOvD,EAAgBr3B,IAEdu2B,OAAS3D,GAAagI,EAAK3V,WAClC2V,EAAKrE,OAAQ,EACbe,KAKJ,OAAO,CAET,EAOAL,EAAc,WAEZ,IAGI9tB,EAAOwB,EAHP8sB,EAAkBj2B,EAAEgxB,IACpBjxB,EAAIk2B,EAAgBpT,KACpB5kB,EAAIg4B,EAAgBrS,GAwCxB,OArCAza,EAAM,WAGJkiB,GAAIsD,IAAI3uB,EAAEolB,GAAK,kBAAoBnnB,EAAI,aAGvC+B,EAAEuxB,gBAAgBtzB,EAAGkL,GAGrBnJ,EAAE8D,MAEJ,EAEA6D,EAAQ,WAEN0jB,GAAIsD,IAAI3uB,EAAEolB,GAAK,oBAAsBrlB,GAG3B,OAAN9B,GAAe2E,MAAM3E,IACvB+B,EAAEmxB,WAAWlzB,EAAGkL,EAGpB,EAEU,OAANpJ,GAAe6C,MAAM7C,KAGvBk2B,EAAgBxS,SAAW1jB,EAG3Bk2B,EAAgB1S,WAAY,EAE5B5b,KAKKsuB,CAET,EAEAV,EAAmB,WAEjB,IAAI6D,EACAC,EAAKr5B,EAAEgxB,IAAI3N,WAIf,GAAIgW,EAEF,IAAKD,KAAQC,EACPA,EAAGh7B,eAAe+6B,IACpBp5B,EAAEmxB,WAAW5R,SAAS6Z,EAAM,IAAKC,EAAGD,GAM5C,EAEA5D,EAAmB,WAEjB,IAAI4D,EACAC,EAAKr5B,EAAEgxB,IAAI3N,WAIf,GAAIgW,EAEF,IAAKD,KAAQC,EACPA,EAAGh7B,eAAe+6B,IACpBp5B,EAAEuxB,gBAAgBhS,SAAS6Z,EAAM,IAMzC,EAEA9D,EAAoB,WAEdt1B,EAAEk2B,SACJpM,EAAW9pB,EAGf,EAEAq1B,EAAmB,WAEbr1B,EAAEk2B,SACJnM,EAAU/pB,EAGd,GAEAk1B,EAAkB,SAASoE,GAEpBA,IACHzD,EAAkB,GAClBC,EAAkB,GAGpBF,GAAgB,EAEhB51B,EAAEu5B,UAAY,KACdv5B,EAAE0uB,GAAK,KACP1uB,EAAEs2B,gBAAiB,EACnBt2B,EAAEw5B,YAAc,KAChBx5B,EAAEy5B,WAAa,KACfz5B,EAAE2kB,SAAY3kB,EAAEgxB,KAAOhxB,EAAEgxB,IAAIrM,SAAW3kB,EAAEgxB,IAAIrM,SAAW,KACzD3kB,EAAE05B,iBAAmB,KACrB15B,EAAE25B,SAAW,GAGb35B,EAAEumB,OAAS,GAEXvmB,EAAEumB,OAAOrf,KAAO,GAChBlH,EAAEumB,OAAOqT,MAAQ,GAEjB55B,EAAE65B,SAAW,EACb75B,EAAE85B,aAAc,EAChB95B,EAAEi2B,gBAAkB,CAAC,EACrBj2B,EAAEw3B,cAAgB,EAClBx3B,EAAEwN,QAAS,EACXxN,EAAE6S,SAAW,CAAC,EAGd7S,EAAE+vB,WAAa,EAEf/vB,EAAE6lB,OAAQ,EACV7lB,EAAEkL,QAAS,EAEXlL,EAAEqmB,SAAW,CACXnf,KAAM,EACN0yB,MAAO,GAGT55B,EAAEsmB,aAAe,CACfpf,KAAM,GACN0yB,MAAO,IAGT55B,EAAEo2B,UAAY,EACdp2B,EAAEyjB,SAAW,KAEbzjB,EAAEm2B,IAAM,CAAC,CAEX,KASA54B,KAAK46B,SAAW,SAAS4B,GAQvB,IAAIpV,EAAyBqR,EAAfgE,GAAQ,EAAa1vB,EAAI,CAAC,EA8CxC,OA5CItK,EAAEu5B,WAAaQ,IAIb/5B,EAAE0uB,KAAOqL,IAAY/5B,EAAEo2B,UAAY,GAAsB,IAAjBp2B,EAAE+vB,cAAsB/vB,EAAEkL,WAEpEyZ,EAAW3kB,EAAEi6B,yBAEIvE,EAAe/Q,WAE9B+Q,EAAe/Q,SAAWA,EAC1B3kB,EAAE2kB,SAAWA,EACbqV,GAAQ,GAKVh6B,EAAE05B,iBAAmB15B,EAAE2kB,UAEvBqR,EAAQh2B,EAAE0uB,GAAGiJ,YAAc5K,IAAa,KAE3B2I,EAAeM,OAE1BN,EAAeM,KAAOA,EACtBgE,GAAQ,IAINA,GAASD,IAEX/5B,EAAEk6B,cAAclE,EAAM1rB,EAAGA,EAAGA,EAAGA,IAc9B0vB,CAET,EAEAz8B,KAAK08B,oBAAsB,WAEzB,IAAIhE,EAAkBj2B,EAAEgxB,IAEpB3wB,EAAKL,EAAE0uB,IAAM1uB,EAAE0uB,GAAG/J,SAAW3kB,EAAE0uB,GAAG/J,SAAWoI,GAAakJ,GAAmBA,EAAgBtR,SAAWsR,EAAgBtR,SAAW,KAGvI,OAFctkB,IAAMuC,MAAMvC,IAAMA,IAAM85B,IAAW95B,EAAI,IAIvD,EAEA9C,KAAK68B,YAAc,SAAS17B,EAAG27B,IAQxB37B,EAAEgU,MAAQ2nB,EAAS,GACtBhP,GAAIsD,IAAI,0CAA2C,GAIrDjwB,EAAEgU,KAAQ2nB,EAAS,EAAI,OAAS,EAElC,EAEA98B,KAAKkzB,aAAe,SAASjzB,GAE3B,IAGI88B,EAHArE,EAAkBnO,EAAM9nB,EAAEgxB,IAAKxzB,GAC/BkB,EAAImuB,GAAsBvB,GAAmBtrB,EAAE0uB,GAC/C6L,EAAOC,UAAUvE,EAAgB3wB,KAuBrC,GAdIunB,GAEE0N,IAASC,UAAU5P,MAErB0P,GAAU,GAGHC,IAASC,UAAUzE,KAG5BuE,GAAU,GAIR57B,EAAG,CAEL,GAAIA,EAAE+vB,GAEJ,GAAI5B,GAEEnuB,EAAE+vB,IAAM/vB,EAAE+vB,GAAG2H,YAAckE,GAG7B57B,EAAE+vB,GAAG3qB,YAIF,IAAK+oB,IAAuB0N,IAASC,UAAUzE,GAKpD,OAFA/1B,EAAEo6B,YAAY17B,EAAGu3B,EAAgBnT,OAE1BpkB,EAMN47B,IAICvE,GACFb,GAAgB,GAKlBx2B,EAAEiU,IAAMsjB,EAAgB3wB,IAExBtF,EAAEsF,IAAM2wB,EAAgB3wB,IAExBywB,EAAUE,EAAgB3wB,IAE1BslB,GAAqBqL,EAAgB3wB,IAErC5G,EAAE23B,cAAe,EAIrB,MAEMJ,EAAgBtT,UAAYsT,EAAgBrT,UAE9C5iB,EAAE0uB,GAAK,IAAIlc,MAAMyjB,EAAgB3wB,KACjCtF,EAAE0uB,GAAGvhB,QAKLnN,EAAE0uB,GAAMtB,IAAWpM,MAAM5B,UAAY,GAAK,IAAI5M,MAAM,MAAQ,IAAIA,OAKlE9T,EAAIsB,EAAE0uB,IAEJ2H,cAAe,EAEbxJ,KAEFvB,GAAmB5sB,GAgCvB,OA1BAsB,EAAEk2B,SAAU,EAGZl2B,EAAE0uB,GAAKhwB,EAGPA,EAAE+vB,GAAKzuB,EAEPm1B,IAEAn1B,EAAEo6B,YAAY17B,EAAGu3B,EAAgBnT,OAE7BmT,EAAgBtT,UAAYsT,EAAgBrT,SAE9C5iB,EAAEmN,QAKFzO,EAAE63B,YAAa,EAGf73B,EAAE83B,QAAU,QAIP93B,CAET,EAEAy2B,EAAmB,WAEjB,GAAIn1B,EAAE0uB,GAAG+L,cAAe,OAAO,EAE/B,IAAI16B,EAES26B,EAAMlM,EAMnB,IAAKzuB,KAFLC,EAAE0uB,GAAG+L,eAAgB,EAEXzP,GACJA,GAAa3sB,eAAe0B,KAPrB26B,EAQL36B,EARWyuB,EAQRxD,GAAajrB,GAPfC,EAAE0uB,IAAK1uB,EAAE0uB,GAAGpc,iBAAiBooB,EAAMlM,GAAiB,IAW7D,OAAO,CAET,EAEA4G,EAAsB,WAIpB,IAAIr1B,EAEY26B,EAAMlM,EAOtB,IAAKzuB,KAHLsrB,GAAIsD,IAAI3uB,EAAEolB,GAAK,8BACfplB,EAAE0uB,GAAG+L,eAAgB,EAEXzP,GACJA,GAAa3sB,eAAe0B,KARlB26B,EASL36B,EATWyuB,EASRxD,GAAajrB,GARjBC,EAAE0uB,IAAK1uB,EAAE0uB,GAAGiM,oBAAoBD,EAAMlM,GAAiB,GAYnE,EAOAjxB,KAAKq9B,QAAU,SAASC,GAEtB,IAAI9D,EAEA+D,IAAWD,IAAc76B,EAAEk2B,SAAkB,IAAPxO,GAAY1nB,EAAE2kB,SA+BxD,OA5BAoS,EAAK/2B,EAAEolB,GAAK,KACZiG,GAAIsD,IAAIoI,GAAM+D,EAAS,WAAa,mCAAsC96B,EAAE2kB,SAA+C,KAApC,mCAA4C,KAAO3kB,EAAEsF,IAAM,KAAOw1B,EAAS,EAAI,GAEjKA,GAAW96B,EAAEk2B,WACa,IAAzB7K,GAAI5E,QAAQO,UACdqE,GAAIsD,IAAIoI,EAAK1N,EAAI,SAAU,IAED,IAAxBgC,GAAI5E,QAAQQ,SACdoE,GAAIsD,IAAIoI,EAAK1N,EAAI,WAAY,IAKjCrpB,EAAEwN,OAASstB,EACX96B,EAAE+vB,WAAc+K,EAAS,EAAI,EAC7B96B,EAAEi4B,gBAAgB,GAEb6C,GAAW96B,EAAEk2B,SAEhBl2B,EAAE+6B,WAGA/6B,EAAEgxB,IAAIrf,QACRwZ,GAAanrB,GAAG,WACdA,EAAEgxB,IAAIrf,OAAO1L,MAAMjG,EAAG,CAAC86B,GACzB,KAGK,CAET,EAEAv9B,KAAKw9B,SAAW,SAASC,EAAWjU,GAG9B/mB,EAAEgxB,IAAIhO,SACRmI,GAAanrB,GAAG,WACdA,EAAEgxB,IAAIhO,QAAQ/c,MAAMjG,EAAG,CAACg7B,EAAWjU,GACrC,GAGJ,EAEAxpB,KAAK06B,gBAAkB,SAASgD,GAG9B,QAAoB,IAAhBj7B,EAAEo2B,WAED6E,GAAgBj7B,EAAE85B,cAAkBmB,IAAiBj7B,EAAE85B,cAE5D95B,EAAE85B,YAAgC,IAAjBmB,EAEbj7B,EAAEgxB,IAAI3M,iBACRgH,GAAIsD,IAAI3uB,EAAEolB,GAAK,0BAA4B6V,GAC3Cj7B,EAAEgxB,IAAI3M,eAAepe,MAAMjG,EAAG,CAACi7B,KAG1B,GAET,EAOA19B,KAAK29B,WAAa,WAOhB,OALIl7B,EAAEgxB,IAAImK,YACR9P,GAAIsD,IAAI3uB,EAAEolB,GAAK,wBACfplB,EAAEgxB,IAAImK,UAAUl1B,MAAMjG,KAGjB,CAET,EAOAzC,KAAK69B,WAAa,SAASC,EAAKC,EAAOC,GAErCv7B,EAAE65B,WACFxO,GAAIsD,IAAI3uB,EAAEolB,GAAK,cAAgBplB,EAAE65B,SAAW,MAAQwB,GAEhDr7B,EAAEgxB,IAAIhN,WAA4B,IAAfhkB,EAAE65B,SACvB75B,EAAEgxB,IAAIhN,UAAUqX,EAAKC,EAAOC,GAE5BlQ,GAAIsD,IAAI3uB,EAAEolB,GAAK,qBAGnB,EAOA7nB,KAAKi+B,WAAa,SAASH,EAAKC,EAAOC,GAEjCv7B,EAAEgxB,IAAIyK,WACRz7B,EAAEgxB,IAAIyK,UAAUJ,EAAKC,EAAOC,EAGhC,EAEAh+B,KAAKm6B,UAAY,WAGf,IAAIgE,EAAc17B,EAAEgxB,IAAI1f,SAExBtR,EAAEi4B,gBAAgB,GAClBj4B,EAAEk4B,iBAAiB,GAGfl4B,EAAEw3B,gBAEJx3B,EAAEw3B,gBAEGx3B,EAAEw3B,gBAGLhC,IAGAx1B,EAAEo2B,UAAY,EACdp2B,EAAEkL,QAAS,EACXlL,EAAEw3B,cAAgB,EAClBx3B,EAAEi2B,gBAAkB,CAAC,EACrBj2B,EAAEgxB,IAAM,CAAC,EACTqE,IAGIr1B,EAAEk2B,UACJl2B,EAAEyjB,SAAW,IAKZzjB,EAAEw3B,gBAAiBx3B,EAAEgxB,IAAIxN,iBAExBkY,IACFrQ,GAAIsD,IAAI3uB,EAAEolB,GAAK,gBACf+F,GAAanrB,GAAG,WACd07B,EAAYz1B,MAAMjG,EACpB,KAMR,EAEAzC,KAAKo+B,cAAgB,SAASC,EAAcC,EAAaC,EAAWC,GAElE,IAAI9F,EAAkBj2B,EAAEgxB,IAExBhxB,EAAEw5B,YAAcoC,EAChB57B,EAAEy5B,WAAaoC,EACf77B,EAAE2kB,SAAW3b,KAAKgzB,MAAMF,GACxB97B,EAAEi8B,aAAeF,EAEZ/7B,EAAEk2B,SAAYD,EAAgBhS,YAWjCjkB,EAAE05B,iBAAmB15B,EAAE2kB,SATnBsR,EAAgBtR,SAElB3kB,EAAE05B,iBAAoB15B,EAAE2kB,SAAWsR,EAAgBtR,SAAY3kB,EAAE2kB,SAAWsR,EAAgBtR,SAE5F3kB,EAAE05B,iBAAmBna,SAAUvf,EAAEy5B,WAAaz5B,EAAEw5B,YAAex5B,EAAE2kB,SAAU,IAU1E3kB,EAAEk2B,UACLl2B,EAAE25B,SAAW,CAAC,CACZhyB,MAAO,EACPwB,IAAKnJ,EAAE2kB,aAKW,IAAjB3kB,EAAE+vB,YAAoB/vB,EAAEk2B,UAAYD,EAAgBhT,cACvDgT,EAAgBhT,aAAahd,MAAMjG,EAGvC,EAEAzC,KAAK28B,cAAgB,SAAS9I,EAAW8K,EAAWC,EAAmBC,EAAoBC,GAEzF,IACIC,EADArG,EAAkBj2B,EAAEgxB,IAIxB,OAAIpuB,MAAMwuB,IAA4B,OAAdA,IAGxBpxB,EAAEyjB,SAAWza,KAAKC,IAAI,EAAGmoB,GAEzBpxB,EAAEm5B,sBAEGn5B,EAAEk2B,SAAWxO,EAAK,IAEjBuO,EAAgB/R,aAAegY,IAAc/a,GAAc+a,IAC7Dl8B,EAAEqmB,SAAW,CACXnf,KAAMg1B,EAAUK,SAChB3C,MAAOsC,EAAUM,YAIjBvG,EAAgB9R,iBAAmBgY,IAAsBhb,GAAcgb,IACzEn8B,EAAEsmB,aAAe,CACfpf,KAAMi1B,EAAkB9xB,MAAM,KAC9BuvB,MAAOwC,EAAmB/xB,MAAM,OAIhC4rB,EAAgB7R,WACdiY,IAAYlb,GAAckb,GAAWA,EAAQI,SAC/CH,EAASD,EAAQI,OAAOpyB,MAAM,KAC9BrK,EAAEumB,OAAS+V,EACXt8B,EAAEumB,OAAOrf,KAAOo1B,EACZD,EAAQK,UAAYvb,GAAckb,EAAQK,UAC5C18B,EAAEumB,OAAOqT,MAAQyC,EAAQK,QAAQryB,MAAM,QAO3B,IAAhBrK,EAAEo2B,YAGCp2B,EAAEk2B,SAAkB,IAAPxO,GAAa1nB,EAAEyjB,WAAYzjB,EAAE85B,aAC7C95B,EAAEi4B,gBAAgB,GAGhBhC,EAAgB7S,cAElB6S,EAAgB7S,aAAand,MAAMjG,KAKhC,EAET,EAEAzC,KAAKo/B,eAAiB,SAASC,GAQ7BvR,GAAIsD,IAAI3uB,EAAEolB,GAAK,4BAEfplB,EAAE68B,YAAcD,EAEZ58B,EAAEgxB,IAAI8L,eACR98B,EAAEgxB,IAAI8L,cAAc72B,MAAMjG,EAAG,CAAC48B,GAGlC,EAEAr/B,KAAKw/B,YAAc,SAASC,EAAUC,GAUpC5R,GAAIsD,IAAI3uB,EAAEolB,GAAK,wBAEf,IAAgB5mB,EAAG4zB,EAAfwK,EAAQ,CAAC,EAEb,IAAKp+B,EAAI,EAAG4zB,EAAI4K,EAASn6B,OAAQrE,EAAI4zB,EAAG5zB,IACtCo+B,EAAMI,EAASx+B,IAAMy+B,EAAQz+B,GAG/BwB,EAAE6S,SAAW+pB,EAET58B,EAAEgxB,IAAIkM,YACRl9B,EAAEgxB,IAAIkM,WAAWt9B,KAAKI,EAAGA,EAAE6S,SAG/B,EAEAtV,KAAK4/B,OAAS,SAASC,EAAWC,GAUhChS,GAAIsD,IAAI3uB,EAAEolB,GAAK,wBAEf,IAAgB5mB,EAAG4zB,EAAfwK,EAAQ,GAEZ,IAAKp+B,EAAI,EAAG4zB,EAAIgL,EAAUv6B,OAAQrE,EAAI4zB,EAAG5zB,IACvCo+B,EAAMQ,EAAU5+B,IAAM6+B,EAAS7+B,GAGjCwB,EAAEm2B,IAAMrO,EAAM9nB,EAAEm2B,IAAKyG,GAEjB58B,EAAEgxB,IAAIjO,OACR/iB,EAAEgxB,IAAIjO,MAAM9c,MAAMjG,EAGtB,EAIAzC,KAAK+/B,WAAa,SAASC,GAEzBA,EAAyB,IAAbA,EACZlS,GAAIsD,IAAI3uB,EAAEolB,GAAK,MAAQmY,EAAW,aAAe,wBAA0Bv9B,EAAEsF,KAAOi4B,EAAW,EAAI,GACnGv9B,EAAE2wB,UAAY4M,EAEVA,IAEFv9B,EAAE65B,SAAW,EAEThQ,EAAQ7pB,EAAEolB,MACRplB,EAAEo3B,cAEJp3B,EAAEyN,KAAK0T,EAAYnhB,EAAEo3B,eACZp3B,EAAEgxB,IAAIrO,UACf3iB,EAAEmN,QAIFnN,EAAEgxB,IAAItM,WACR1kB,EAAEgxB,IAAItM,UAAUze,MAAMjG,EAAG,CAACu9B,IAKhC,EAEAhgC,KAAKigC,aAAe,SAASC,GAIvBz9B,EAAEo2B,UAAY,IAChB/K,GAAIsD,IAAI3uB,EAAEolB,GAAK,iBAAmBqY,GAC9Bz9B,EAAEgxB,IAAI1M,aACRtkB,EAAEgxB,IAAI1M,YAAYre,MAAMjG,GAI9B,EAGAzC,KAAKg3B,QAGP,EAOA1L,EAAc,WAEZ,OAAQ8C,GAAI+R,MAAQ/R,GAAIgS,qBAAqB,OAAO,EAEtD,EAEAvY,EAAK,SAASyL,GAEZ,OAAOlF,GAAIiS,eAAe/M,EAE5B,EAEA/I,EAAQ,SAAS+V,EAAOC,GAGtB,IAAwBC,EAAIz/B,EAAxB0/B,EAAMH,GAAS,CAAC,EAKpB,IAAKv/B,KAFLy/B,EAAMD,IAAS3c,EAAakK,GAAI3I,eAAiBob,EAI3CC,EAAG1/B,eAAeC,IAAM0/B,EAAG1/B,KAAO6iB,IAEf,iBAAV4c,EAAGz/B,IAA6B,OAAVy/B,EAAGz/B,GAGlC0/B,EAAG1/B,GAAKy/B,EAAGz/B,GAKX0/B,EAAG1/B,GAAKwpB,EAAMkW,EAAG1/B,GAAIy/B,EAAGz/B,KAQ9B,OAAO0/B,CAET,EAEA7S,GAAe,SAASoF,EAAQ0N,GASzB1N,EAAO2F,SAAkB,IAAPxO,EAGrBuW,IAFAr4B,EAAOoqB,WAAWiO,EAAU,EAKhC,EAIAlW,EAAe,CACbwL,QAAS,EACTE,UAAW,EACX/Q,eAAgB,EAChBqB,cAAe,EACfQ,iBAAkB,GAGpB3mB,EAAS,SAASU,EAAG4/B,GAOnB,IAAI1/B,EACAgY,GAAS,EACT2nB,EAAaD,IAAY/c,EACzBK,EAAe6J,GAAI7J,aACnB4c,EAAerW,EAMnB,GAAIzpB,IAAM6iB,EAAY,CAIpB,IAAK3iB,KAFLgY,EAAS,GAECgL,EAEJA,EAAanjB,eAAeG,IAC9BgY,EAAOhU,KAAKhE,GAKhB,IAAKA,KAAK4/B,EAEJA,EAAa//B,eAAeG,KAER,iBAAX6sB,GAAI7sB,GACbgY,EAAOhU,KAAKhE,EAAI,WACP6sB,GAAI7sB,aAAc6/B,SAC3B7nB,EAAOhU,KAAKhE,EAAI,sBAEhBgY,EAAOhU,KAAKhE,IASlB,OAFA6sB,GAAIsD,IAAItF,EAAI,QAAS7S,EAAO2C,KAAK,SAE1B,CAET,CAIA,IAAK3a,KAAKF,EAER,GAAIA,EAAED,eAAeG,GAInB,GAAoB,iBAATF,EAAEE,IAA4B,OAATF,EAAEE,IAAeF,EAAEE,aAAc4Y,OAAS9Y,EAAEE,aAAc4vB,OAIpF+P,GAAaC,EAAaF,KAAa/c,EAGzCkK,GAAI6S,GAAS1/B,GAAKF,EAAEE,GAEXgjB,EAAahjB,KAAO2iB,GAG7BkK,GAAI7J,aAAahjB,GAAKF,EAAEE,GAGxB6sB,GAAI7sB,GAAKF,EAAEE,IAEF4/B,EAAa5/B,KAAO2iB,GAG7ByI,EAASP,EAAKgC,GAAI7sB,KAAO2iB,EAAa,aAAe,aAAe3iB,GAAI,GAExEgY,GAAS,GAEA6U,GAAI7sB,aAAc6/B,SAO3BhT,GAAI7sB,GAAGyH,MAAMolB,GAAM/sB,EAAEE,aAAc4Y,MAAQ9Y,EAAEE,GAAK,CAACF,EAAEE,KAKrD6sB,GAAI7sB,GAAKF,EAAEE,OAIR,IAAI4/B,EAAa5/B,KAAO2iB,EAY7B,OAAOvjB,EAAOU,EAAEE,GAAIA,GAPpBorB,EAASP,EAAKgC,GAAI7sB,KAAO2iB,EAAa,aAAe,aAAe3iB,GAAI,GAExEgY,GAAS,CAOX,CAMJ,OAAOA,CAET,EAcAmU,GAAS,WAGP,IAAI2T,EAAO14B,EAAkB,YAC7B24B,EAAM,CACJ3G,IAAM0G,EAAM,cAAgB,mBAC5B/gB,OAAS+gB,EAAM,cAAgB,uBAIjC,SAASE,EAAQC,GAEf,IAAItnB,EAAOtT,GAAMjE,KAAK6+B,GAClBC,EAAMvnB,EAAKtU,OAaf,OAXIy7B,GAEFnnB,EAAK,GAAK,KAAOA,EAAK,GAClBunB,EAAM,GAERvnB,EAAKzT,OAEU,IAARg7B,GACTvnB,EAAK3U,MAAK,GAGL2U,CAET,CAEA,SAASlR,EAAMkR,EAAMqc,GAGnB,IAAImL,EAAUxnB,EAAKynB,QACft9B,EAAS,CAACi9B,EAAI/K,IAEd8K,EAEFK,EAAQr9B,GAAQ6V,EAAK,GAAIA,EAAK,IAE9BwnB,EAAQr9B,GAAQ2E,MAAM04B,EAASxnB,EAGnC,CAUA,MAAO,CACLygB,IATF,WACE3xB,EAAMu4B,EAAQx4B,WAAY,MAC5B,EAQEuX,OANF,WACEtX,EAAMu4B,EAAQx4B,WAAY,SAC5B,EAOF,CA1DQ,GA6FRglB,GAAe,CAIb6T,MAAOtQ,IAAY,WAEjBlD,GAAIsD,IAAIpxB,KAAKkxB,GAAGrJ,GAAK,UAEvB,IAIA0Z,QAASvQ,IAAY,WAEnB,IACIiK,EADAx4B,EAAIzC,KAAKkxB,GAGb,IAAIzuB,EAAEs2B,eAAN,CAaA,GARAt2B,EAAEs2B,gBAAiB,EACnBjL,GAAIsD,IAAI3uB,EAAEolB,GAAK,aACfplB,EAAEi4B,gBAAgB,GAGlBO,EAAcx4B,EAAEgxB,IAAIvN,WAAatC,GAAeve,MAAM5C,EAAEgxB,IAAIvN,UAAyC,KAA7BzjB,EAAEgxB,IAAIvN,SAAWsJ,GAGrFxvB,KAAKo6B,cAAgBa,EAAY,CACnCnN,GAAIsD,IAAI3uB,EAAEolB,GAAK,kCAAoCoT,GACnD,IACEj7B,KAAKo6B,YAAca,CACrB,CAAE,MAAMuG,GACN1T,GAAIsD,IAAI3uB,EAAEolB,GAAK,kCAAoCoT,EAAa,YAAcuG,EAAGxG,QAAS,EAC5F,CACF,CAGIv4B,EAAEgxB,IAAIyG,YACRz3B,EAAEgxB,IAAIyG,YArBR,CAwBF,IAEAuH,eAAgBzQ,IAAY,WAE1B,IAAIvuB,EAAIzC,KAAKkxB,GAERzuB,EAAEwN,SACLxN,EAAEi4B,gBAAgB,GAClBj4B,EAAE27B,cAAc37B,EAAEw5B,YAAax5B,EAAEy5B,WAAYz5B,EAAEi6B,uBAC/Cj6B,EAAE46B,SAAQ,GAGd,IAEAqE,eAAgB1Q,IAAY,WAI1B,IACI5J,EADA3kB,EAAIzC,KAAKkxB,GAGb9J,EAAW3kB,EAAEi6B,sBAERr3B,MAAM+hB,IAAaA,IAAa3kB,EAAE2kB,WAErC0G,GAAIsD,IAAIpxB,KAAKkxB,GAAGrJ,GAAK,qBAAuBT,EAAW,KAAO3kB,EAAE2kB,SAAW,gBAAkB3kB,EAAE2kB,SAAW,KAE1G3kB,EAAE05B,iBAAmB15B,EAAE2kB,SAAWA,EAItC,IAWAua,MAAO3Q,IAAY,WAEjB,IAAIvuB,EAAIzC,KAAKkxB,GAEbpD,GAAIsD,IAAI3uB,EAAEolB,GAAK,WAEfplB,EAAE03B,WAEJ,IAEAyH,MAAO5Q,IAAY,WAEjB,IAAIxH,EAAeuD,GAAgB/sB,KAAK4hC,MAAM5D,OAAS,KACvDlQ,GAAIsD,IAAIpxB,KAAKkxB,GAAGrJ,GAAK,uBAAyB7nB,KAAK4hC,MAAM5D,MAAQxU,EAAc,KAAOA,EAAc,IAAM,KAC1GxpB,KAAKkxB,GAAGmM,SAAQ,GAChBr9B,KAAKkxB,GAAGsM,SAASx9B,KAAK4hC,MAAM5D,KAAMxU,EAEpC,IAEAqY,WAAY7Q,IAAY,WAEtB,IAAIvuB,EAAIzC,KAAKkxB,GAEbpD,GAAIsD,IAAI3uB,EAAEolB,GAAK,gBAGVplB,EAAEq/B,SAAYlS,KACjBntB,EAAE2kB,SAAW3kB,EAAEi6B,sBAGnB,IAEAqF,eAAgB/Q,IAAY,WAE1BlD,GAAIsD,IAAIpxB,KAAKkxB,GAAGrJ,GAAK,mBAEvB,IAEAma,UAAWhR,IAAY,WAErBlD,GAAIsD,IAAIpxB,KAAKkxB,GAAGrJ,GAAK,eAErB7nB,KAAKkxB,GAAGwJ,gBAAgB,EAE1B,IAEAxqB,KAAM8gB,IAAY,WAIhBhxB,KAAKkxB,GAAGwJ,gBAAgB,EAE1B,IAEAhtB,QAASsjB,IAAY,WAEnBlD,GAAIsD,IAAIpxB,KAAKkxB,GAAGrJ,GAAK,aAAe3gB,OAAO+6B,aAAa,OAExDjiC,KAAKkxB,GAAGwJ,gBAAgB,EAE1B,IAEAwH,SAAUlR,IAAY,SAASvwB,GAI7B,IACIQ,EAAG4zB,EAAGsN,EADN1/B,EAAIzC,KAAKkxB,GACMkL,EAAW,EAC1BgG,EAAyB,aAAX3hC,EAAE0B,KAChBkgC,EAAS5hC,EAAE8W,OAAO6kB,SAElBnsB,EAAUxP,EAAEwP,QAAU,EACtBqyB,EAAS7hC,EAAE6hC,OAAS,EAKxB,GAFA7/B,EAAE25B,SAAW,GAETiG,GAAUA,EAAO/8B,OAAQ,CAO3B,IAAKrE,EAAI,EAAG4zB,EAAIwN,EAAO/8B,OAAQrE,EAAI4zB,EAAG5zB,IACpCwB,EAAE25B,SAASn3B,KAAK,CACdmF,MAAOi4B,EAAOj4B,MAAMnJ,GAAKuuB,GACzB5jB,IAAKy2B,EAAOz2B,IAAI3K,GAAKuuB,KAWzB,GANA4M,GAAYiG,EAAOz2B,IAAI,GAAKy2B,EAAOj4B,MAAM,IAAMolB,GAG/Cvf,EAASxE,KAAKI,IAAI,EAAGuwB,GAAY37B,EAAE8W,OAAO6P,SAAWoI,KAGjD4S,GAAcC,EAAO/8B,OAAS,EAAG,CAGnC,IAFA68B,EAAU,GACVtN,EAAIwN,EAAO/8B,OACNrE,EAAI,EAAGA,EAAI4zB,EAAG5zB,IACjBkhC,EAAQl9B,KAAMxE,EAAE8W,OAAO6kB,SAAShyB,MAAMnJ,GAAKuuB,GAAa,IAAO/uB,EAAE8W,OAAO6kB,SAASxwB,IAAI3K,GAAKuuB,IAE5F1B,GAAIsD,IAAIpxB,KAAKkxB,GAAGrJ,GAAK,2BAA6Bsa,EAAQvmB,KAAK,MACjE,CAEIwmB,IAAe/8B,MAAM4K,IACvB6d,GAAIsD,IAAIpxB,KAAKkxB,GAAGrJ,GAAK,eAAiBpc,KAAKgzB,MAAe,IAATxuB,GAAgB,WAIrE,CAEK5K,MAAM4K,KAGTxN,EAAE27B,cAAcnuB,EAAQqyB,EAAO7/B,EAAEi6B,uBAC7BzsB,GAAUqyB,GAASryB,IAAWqyB,GAEhC7U,GAAagU,eAAep/B,KAAKrC,KAAMS,GAK7C,IAEA8hC,WAAYvR,IAAY,WAEtBlD,GAAIsD,IAAIpxB,KAAKkxB,GAAGrJ,GAAK,eAEvB,IAEA2a,QAASxR,IAAY,SAASvwB,GAG5B,IAAIgC,EAAIzC,KAAKkxB,GAEbpD,GAAIsD,IAAIpxB,KAAKkxB,GAAGrJ,GAAK,aACrB4F,GAAayU,SAAS7/B,KAAKrC,KAAMS,GACjCgC,EAAEk7B,YAEJ,IAEA8E,QAASzR,IAAY,WAEnBlD,GAAIsD,IAAIpxB,KAAKkxB,GAAGrJ,GAAK,YAEvB,IAEA6a,WAAY1R,IAAY,WAEtBhxB,KAAKkxB,GAAG0J,UAEV,IAEA+H,QAAS3R,IAAY,WAEnB,IAAIvuB,EAAIzC,KAAKkxB,GAGbpD,GAAIsD,IAAIpxB,KAAKkxB,GAAGrJ,GAAK,aAGrBplB,EAAEi4B,gBAAgB,EAEpB,KAIF7N,EAAU,SAAS+V,GAuBjB,SAjBKA,KAAQA,EAAGzgC,MAASygC,EAAG76B,KAAQ66B,EAAG1b,eAK5B0b,EAAG1b,WAAc0b,EAAGzgC,MAAQ2uB,GAAiB8R,EAAGzgC,SAQ9CygC,EAAGzgC,KAAO2qB,EAAa,CAAE3qB,KAAMygC,EAAGzgC,OAAU2qB,EAAa,CAAE/kB,IAAK66B,EAAG76B,OAAU+lB,GAAIhE,WAAa8Y,EAAG76B,IAAIyL,MAAM,UAM1H,EAEAyZ,GAAc,SAAS4V,GAUrB,IAAI96B,EAwBJ,OAtBI86B,IAIF96B,EAAO6nB,GAAWU,GAAYxC,GAAInE,MAAMsI,YAAY,aA5zH7C,2FA4zHuE3B,GAE9EuS,EAAOztB,IAAMrN,EAGT86B,EAAOC,iBAAmBlf,IAC5Bif,EAAO/J,cAAe,IAKtBxJ,KAGFjC,GAAqB,MAIhBtlB,CAET,EAEA+kB,EAAe,SAAS/rB,GAUtB,IAAK+sB,GAAIza,gBAAkBya,GAAIkE,SAAU,OAAO,EAEhD,IAGI/Y,EACAiiB,EACA6H,EACAlH,EANA9zB,EAAOhH,EAAEgH,KAAO,KAChBi7B,EAAQjiC,EAAEoB,MAAQ,KAClB8gC,EAAKnV,GAAIzG,aAQb,GAAI2b,GAAQlV,GAAInE,MAAMqZ,KAAUpf,EAAY,OAAQkK,GAAInE,MAAMqZ,KAAUlS,GAAiBkS,GAEzF,IAAKhW,GAAU,CAIb,IAAK6O,KAFL7O,GAAW,GAEEiW,EAEPA,EAAGniC,eAAe+6B,KAEpB7O,GAAS/nB,KAAK42B,GAEVoH,EAAGpH,GAAMrU,UACXwF,GAAWA,GAAShe,OAAOi0B,EAAGpH,GAAMrU,WAO1CwF,GAAW,IAAI6D,OAAO,OAAS7D,GAASpR,KAAK,KAAO,aAAc,IAEpE,CA4CA,OAzCAmnB,EAAWh7B,EAAMA,EAAIiF,cAAcwG,MAAMwZ,IAAY,OAEpC+V,EAAQz9B,OAmBvBy9B,EAAUA,EAAQ,GAjBbC,EAUHD,IAAuB,KAHvB7H,EAAS8H,EAAK/1B,QAAQ,MAGK+1B,EAAKjJ,OAAO,EAAGmB,GAAU8H,GAAMjJ,OAAO,GARjE9gB,GAAS,EAmBT8pB,GAAWjV,GAAInE,MAAMoZ,KAAanf,EAGpC3K,EAAU6U,GAAInE,MAAMoZ,KAAajS,GAAiBiS,IAIlDC,EAAO,SAAWD,EAClB9pB,EAAS6U,GAAInE,MAAMsI,YAAY,CAAE9vB,KAAM6gC,IAEvClV,GAAInE,MAAMoZ,GAAW9pB,EAGrBA,EAAUA,GAAU6U,GAAInE,MAAMqZ,KAAUlS,GAAiBkS,IAGpD/pB,CAET,EAEAkU,GAAY,WAOV,IAAKW,GAAIza,gBAAkBya,GAAIkE,SAM7B,OAHAlE,GAAInE,MAAMC,YAAa,EACvByF,IAAa,GAEN,EAKT,IACIwM,EAAMqH,EAAsBD,EAAIhiC,EADhCE,EAAK8T,QAAU2O,EAAciM,IAAWpM,MAAM5B,UAAY,GAAK,IAAI5M,MAAM,MAAQ,IAAIA,MAAW,KAClFkuB,EAAU,CAAC,EAE7B,SAASC,EAAGztB,GAEV,IAAI0tB,EAASxO,EACT5b,GAAS,EACTqqB,GAAO,EAEX,IAAKniC,GAA8B,mBAAlBA,EAAE8wB,YAA4B,OAAOhZ,EAEtD,GAAItD,aAAakE,MAAO,CAItB,IAAK5Y,EAAI,EAAG4zB,EAAIlf,EAAErQ,OAAQrE,EAAI4zB,EAAG5zB,KAE3B6sB,GAAInE,MAAMhU,EAAE1U,KAAOE,EAAE8wB,YAAYtc,EAAE1U,IAAIuS,MAAMsa,GAAI9I,cAEnDse,GAAO,EACPxV,GAAInE,MAAMhU,EAAE1U,KAAM,EAGlB6sB,GAAIjE,MAAMlU,EAAE1U,MAAS0U,EAAE1U,GAAGuS,MAAM6c,KAMpCpX,EAASqqB,CAEX,MAGErqB,MADAoqB,KAAWliC,GAA8B,mBAAlBA,EAAE8wB,cAA6B9wB,EAAE8wB,YAAYtc,MAC5C0tB,EAAQ7vB,MAAMsa,GAAI9I,YAI5C,OAAO/L,CAET,CAMA,IAAK4iB,KAFLoH,EAAKnV,GAAIzG,aAIP,GAAI4b,EAAGniC,eAAe+6B,KAEpBqH,EAAS,SAAWrH,EAEpBsH,EAAQtH,GAAQuH,EAAGH,EAAGpH,GAAM15B,MAG5BghC,EAAQD,GAAUC,EAAQtH,GAGtBA,EAAKroB,MAAM6c,KAEbvC,GAAIjE,MAAMgS,IAAQ,EAClB/N,GAAIjE,MAAMqZ,IAAU,IAIpBpV,GAAIjE,MAAMgS,IAAQ,EAClB/N,GAAIjE,MAAMqZ,IAAU,GAMlBD,EAAGpH,IAASoH,EAAGpH,GAAMrU,SAEvB,IAAKvmB,EAAIgiC,EAAGpH,GAAMrU,QAAQliB,OAAS,EAAGrE,GAAK,EAAGA,IAG5CkiC,EAAQ,SAAWF,EAAGpH,GAAMrU,QAAQvmB,IAAMkiC,EAAQtH,GAClD/N,GAAInE,MAAMsZ,EAAGpH,GAAMrU,QAAQvmB,IAAMkiC,EAAQtH,GACzC/N,GAAIjE,MAAMoZ,EAAGpH,GAAMrU,QAAQvmB,IAAMkiC,EAAQtH,GAgBjD,OANAsH,EAAQlR,YAAe9wB,EAAIiiC,EAAK,KAChCtV,GAAInE,MAAQY,EAAMuD,GAAInE,MAAOwZ,GAE7BrV,GAAInE,MAAMC,WAAagD,IACvByC,GAAavB,GAAInE,MAAMC,YAEhB,CAET,EAEAqB,EAAU,CAGRsY,SAAU,gDACVC,MAAO,kCACPC,SAAUzV,GAAK,+CACf0V,SAAU,wDACVC,OAAQ1V,GAAM,kCACd2V,SAAU,OAAS5V,GAAK,qEACxB6V,SAAU,sCACVC,UAAW7V,GAAM,kBAAoBG,GAAIvX,SAAS2Z,SAAW,8NAC7DuT,UAAW9V,GAAM,6DACjB+V,YAAa/V,GAAM,gEACnBgW,QAAShW,GAAM,+BACfiW,aAAcjW,GAAM,kCACpBkW,MAAO,0EACPC,WAAYnW,GAAM,kCAClBoW,WAAYpW,GAAM,8BAClBqW,UAAWrW,GAAM,0BACjB7Z,OAAQ6Z,GAAM,gDACdsW,SAAUvW,GAAK,qBACfS,QAASR,GAAM,0BACfuW,QAAS,8PACTC,UAAWxW,GAAM,+BACjByW,SAAU1W,GAAK,4BACf2W,MAAO1W,GAAM,sBACb2W,QAAS,yEACTC,UAAW,gCAAkC5Y,EAAO0F,YAAc,UAClEmT,SAAU,eACVC,UAAW9W,GAAM,sBACjB+W,OAAQ,8CACRC,MAAOjX,GAAK,yCACZkX,MAAOlX,GAAK,kEACZmX,QAAS,sEACTC,SAAU,sDACVC,QAAS,wDACTC,UAAW,4EACXC,UAAWtX,GAAM,oFACjBuX,SAAUvX,GAAM,oBAChBwX,OAAQ,yCACRvyB,MAAO8a,GAAK,mCACZ0X,WAAY1X,GAAK,sDACjB2X,WAAY3X,GAAK,uCACjB4X,UAAW5X,GAAK,kGAChBkE,MAAOjE,GAAM,yEACb4X,UAAW,0BAA4B3+B,OAAO+6B,aAAa,OAC3D78B,MAAO4oB,GAAK,qCACZsE,SAAU,mDACVF,YAAa,yDACbC,aAAc,iDAKhBvG,EAAM,WAMJ,IAAIlS,EACA3Y,EAAG4zB,EAAG9zB,EACN+kC,EAUJ,GAJA/kC,GAHA6Y,EAAOtT,GAAMjE,KAAKoG,YAGT44B,SAETyE,EAAQ7a,GAAWA,EAAQlqB,GAAKkqB,EAAQlqB,GAAK,KAEjC6Y,GAAQA,EAAKtU,OACvB,IAAKrE,EAAI,EAAG4zB,EAAIjb,EAAKtU,OAAQrE,EAAI4zB,EAAG5zB,IAClC6kC,EAAOA,EAAK77B,QAAQ,KAAM2P,EAAK3Y,IAInC,OAAO6kC,CAGT,EAEA3Z,EAAU,SAAS4Z,GAQjB,OALW,IAAP5b,GAAY4b,EAAKxgB,MAAQ,GAAKwgB,EAAK3f,SACrCiE,EAAK,WACL0b,EAAK3f,QAAS,GAGT2f,CAET,EAEA3Z,EAAY,SAAS2Z,EAAMC,GAOzB,OALID,IAASA,EAAKzf,gBAAkByf,EAAKvgB,OAASugB,EAAKpf,aAAeof,EAAKnf,iBAAmBmf,EAAKlf,aACjGiH,GAAIsD,KAAK4U,GAAQ,IAAMla,EAAI,WAC3Bia,EAAKzf,eAAgB,GAGhByf,CAET,EAEA1Z,EAAW,SAAS4Z,GAGdjW,IAAcjZ,QAAQmvB,OAAStiB,EACjC7M,QAAQmvB,KAAKD,GAEbnY,GAAIsD,IAAI6U,EAIZ,EAEAhc,EAAY,WAEV,OAAO,CAET,EAEA0B,EAAgB,SAAS5qB,GAEvB,IAAIolC,EAEJ,IAAKA,KAASplC,EACRA,EAAED,eAAeqlC,IAA8B,mBAAbplC,EAAEolC,KACtCplC,EAAEolC,GAASlc,GAIfkc,EAAQ,IAEV,EAEAva,EAAa,SAAS2J,GAIhBA,IAAe3R,IACjB2R,GAAa,IAGX7G,IAAY6G,IACdzH,GAAIwH,QAAQC,EAGhB,EAEA1J,EAAoB,SAAS7D,GAE3B,IAAsBjgB,EAEtB,GAAIigB,EAEF,GAAIA,EAASxU,MAAM,mBAKjB,GAHYwU,EAAS+R,OAAO/R,EAAShb,cAAcgtB,YAAY,SAAW,GAG3D,OAAOhS,OAEbA,EAASgS,YAAY,OAAShS,EAAS1iB,OAAS,IAGzD0iB,GAAY,KAYhB,OANAjgB,GAAOigB,IAA2C,IAA/BA,EAASgS,YAAY,KAAchS,EAAS+R,OAAO,EAAG/R,EAASgS,YAAY,KAAO,GAAK,MAAQlM,GAAI9F,SAElH8F,GAAI7I,aACNld,GAAQ,QAAS,IAAIq+B,MAAOC,WAGvBt+B,CAET,EAEAgjB,EAAiB,WAMJ,KAFXZ,EAAKnI,SAAS8L,GAAIxa,aAAc,MAET,IAAP6W,IACd2D,GAAIsD,IAAItF,EAAI,QAAS3B,EAhvI0sB,IAivI/tB2D,GAAIxa,aAAe6W,EAjvI4sB,GAsvIjuB,IAAImc,EAAWxY,GAAI3a,WAAa2a,GAAI5J,WAAa,aAAe,OAE5D4J,GAAIza,gBAAkBya,GAAIhE,WAAagE,GAAIzG,aAAaE,IAAID,UAAY6C,EAAK,IAC/E2D,GAAIsD,IAAItF,EAAI,YACZgC,GAAIxa,aAAe6W,EAAK,GAG1B2D,GAAIjM,QAAUiM,GAAIhM,eAAiBgM,GAAIhE,UAAY,qBAA+B,IAAPK,EAAW,iBAAmB,kBAGrGA,EAAK,GAGP2D,GAAI3I,eAAiBoF,EAAMuD,GAAI3I,eAAgB2I,GAAItH,eACnDsH,GAAIlF,SAASC,WAAY,EAGzBiF,GAAI3I,eAAiBoF,EAAMuD,GAAI3I,eAAgB2I,GAAI9G,kBACnD8G,GAAIrF,aAAaE,OAAS,IAAIkI,OAAO,WAAaF,GAAe/U,KAAK,KAAO,aAAc,KAC3FkS,GAAIlF,SAASK,WAAY,GAIzB6E,GAAIlF,SAASK,WAAY,EAK3B6E,GAAItF,YAAcsF,GAAIrF,aAAqB,IAAP0B,EAAW,SAAW,UAG1D2D,GAAI9F,UAAmB,IAAPmC,EAAW,oBAAsB,4BAA4BlgB,QAAQ,OAAQq8B,GAE7FxY,GAAIlF,SAASE,SAAWgF,GAAIlF,SAASG,aAAe+E,GAAIlF,SAASI,OAAUmB,EAAK,CAElF,EAEAsB,EAAa,SAAS8a,EAAUC,GAEzB3c,IAILA,GAAM4c,YAAYF,EAAUC,EAE9B,EAEA9a,EAAY,WAUV,GAJIoC,GAAI/F,cAAczb,KAAK4hB,MACzBJ,GAAI7J,aAAa9Q,UAAY2a,GAAI3a,WAAY,IAG3C0U,EAAGiG,GAAIhG,SAAX,CAIA,IAAI4e,EAAIC,EAAQC,EAASC,EAASC,EAElC,GAAIhZ,GAAI3a,YAAc0U,EAAGiG,GAAIhG,YAAckI,KAAelC,GAAI3J,aAAe2J,GAAI1J,aAAc,CA8B7F,IAAK0iB,KA5BLJ,EAAKtY,GAAImI,cAAc,QACpB1O,GAAKiG,GAAIhG,QAAU,UAEtB+e,EAAU,CACR3gB,SAAU,QACVtc,OAAQ,MACRyyB,MAAO,MACPxyB,MAAO,QACPk9B,OAAQ,QACRC,WAAY,QACZC,OAAQ,MACRC,UAAW,SACXC,OAAQ,iBACRC,OAAQ,UACRC,WAAY,OACZxQ,MAAO,OACPyQ,OAAQ,OAGVZ,EAAGjQ,YAAYrI,GAAIsI,eAAe,MAClCgQ,EAAGa,QAAUrb,EACbwa,EAAGlxB,MAAQ,2BAEPiM,GAAGjO,MAAM,aACXkzB,EAAG/P,MAAMzQ,SAAW,WACpBwgB,EAAG/P,MAAMyQ,OAAS,QAGRP,EACNA,EAAQ/lC,eAAegmC,KACzBJ,EAAG/P,MAAMmQ,GAAOD,EAAQC,IAQ5B,IAJAH,EAASvY,GAAImI,cAAc,QACpB1O,GAAKiG,GAAIhG,QAChB6e,EAAOhQ,MAAM6Q,QAAW1Z,GAAI3a,UAAY,QAAU,OAE9C2a,GAAI3a,YAAc0U,EAAG6e,EAAG7e,IAAK,CAC/B,KACE+e,EAAUtb,KACFmL,YAAYiQ,EACtB,CAAE,MAAMe,GACN,MAAM,IAAI5jC,MAAMioB,EAAI,YAAc,MAAQ2b,EAAG3wB,WAC/C,CACA8vB,EAAQnQ,YAAYkQ,EACtB,CAEF,CAEAC,EAAU,IAxDV,CA2DF,EAEAta,EAAUtsB,KAAK81B,aAGfzL,EAAO,SAAStpB,EAAG2mC,GAEjB,OAAS3mC,EAAS+sB,GAAIsD,IAAItF,EAAI/qB,GAAI2mC,GAArB,EAEf,EAEAxb,EAAc,WAEZ,IAAInrB,EAAI8mB,EAAGiG,GAAIhG,SACf6f,EAAK9f,EAAGiG,GAAIhG,QAAU,WAEjB/mB,IAIDutB,IAEFqZ,EAAGtQ,UAAY,IACft2B,EAAE41B,MAAM6Q,QAAU,SAElBG,EAAGtQ,UAAY,IACft2B,EAAE41B,MAAM6Q,QAAU,SAGpBlZ,IAAaA,GAEf,EAEAlE,EAAU,SAASwd,EAAY5H,EAAU6H,GAIvC,GAAIx/B,EAAOy/B,cAAgBlkB,EACzB,IACEkkB,YAAYC,YAAYH,EAAY5H,EAAU6H,EAChD,CAAE,MAAMpnC,GAEN,OAAO,CACT,CAGF,OAAO,CAET,EAGAurB,EAAY,WAEV,IAAIgc,EAAM,GAcV,OAZIla,GAAI3a,WACN60B,EAAI/iC,KAAKgnB,EAAO4F,UAGd/D,GAAI5J,YACN8jB,EAAI/iC,KAAKgnB,EAAO8F,YAGdjE,GAAIvJ,oBACNyjB,EAAI/iC,KAAKgnB,EAAO6F,UAGXkW,EAAIpsB,KAAK,IAElB,EAEAmQ,EAAoB,WAIlB,IAAIrmB,EAAOomB,EAAI,aACXjpB,EAAIirB,GAAI2J,kBACRuQ,EAAM/b,EACN2V,EAAQ,CACNz/B,KAAM,cAGR2rB,GAAIhE,YAKHgE,GAAIqE,MAwBHrE,GAAIvF,eACNuF,GAAIsD,IAAI1rB,EAAO,eAIbooB,GAAI3F,MACN2F,GAAI3F,IAAIqO,UAAY,CAACxK,IAAagc,EAAIvW,WAAYuW,EAAI9f,WAAa4F,GAAIvF,cAAgB,IAAMyf,EAAIpW,aAAe,KAAKhW,KAAK,QA5BxHyT,KAEFvB,GAAI3F,IAAIqO,UAAYxK,IAAc,IAAMgc,EAAIvW,WAAa,KAAa,OAAN5uB,EAAamlC,EAAIrW,YAAcqW,EAAItW,UACnG5D,GAAIsD,IAAI1rB,EAAO,KAAOomB,EAAI,cAAgBjpB,EAAI,KAAOipB,EAAI,YAAc,IAAM,MAG/EgC,GAAIvF,eAAgB,EAGpBmC,EAAgB,CACdvoB,KAAM,YACN8lC,YAAY,EACZrG,MAAOA,IAGTpW,EAAWoW,IAkBf,EAEAnX,EAAa,SAASwL,EAAOnC,EAASC,GAEhC1F,GAAS4H,KAAWrS,IACtByK,GAAS4H,GAAS,IAGpB5H,GAAS4H,GAAOhxB,KAAK,CACnBlB,OAAQ+vB,EACR6H,MAAQ5H,GAAU,KAClByD,OAAO,GAGX,EAEA9M,EAAkB,SAASkI,GAWzB,GAPKA,IACHA,EAAW,CACTzwB,KAAO2rB,GAAIqE,KAAO,UAAY,eAK7B1D,IAAWmE,IAAaA,EAASqV,WAAY,OAAO,EAGzD,GAAsB,cAAlBrV,EAASzwB,OAAyB2rB,GAAIqE,MAASzD,KAAakE,EAASqV,YAAc,OAAO,EAE9F,IAOgBhnC,EAAG4zB,EAPfqT,EAAS,CACPC,QAAUvV,GAAYA,EAASqV,WAAana,GAAIqE,MAAQzD,IAI1D0Z,EAAYxV,GAAYA,EAASzwB,MAAOksB,GAASuE,EAASzwB,OAAc,GAExEwiC,EAAQ,GACR/qB,EAAO,CAACsuB,GACRG,EAAYhZ,KAAevB,GAAIqE,KAMnC,IAJIS,EAASgP,QACXhoB,EAAK,GAAGgoB,MAAQhP,EAASgP,OAGtB3gC,EAAI,EAAG4zB,EAAIuT,EAAS9iC,OAAQrE,EAAI4zB,EAAG5zB,KACZ,IAAtBmnC,EAASnnC,GAAGu2B,OACdmN,EAAM1/B,KAAKmjC,EAASnnC,IAIxB,GAAI0jC,EAAMr/B,OAGR,IAAKrE,EAAI,EAAG4zB,EAAI8P,EAAMr/B,OAAQrE,EAAI4zB,EAAG5zB,IAE/B0jC,EAAM1jC,GAAG06B,MACXgJ,EAAM1jC,GAAG8C,OAAO2E,MAAMi8B,EAAM1jC,GAAG06B,MAAO/hB,GAEtC+qB,EAAM1jC,GAAG8C,OAAO2E,MAAM1I,KAAM4Z,GAGzByuB,IAEH1D,EAAM1jC,GAAGu2B,OAAQ,GAQvB,OAAO,CAET,EAEA7M,EAAiB,WAEftiB,EAAOoqB,YAAW,WAEZ3E,GAAIjJ,eACNkH,IAGFrB,IAI0B,mBAAfoD,GAAI1Z,SACbiW,EAAK,SAAU,GACfyD,GAAI1Z,OAAO1L,MAAML,GACjBgiB,EAAK,WAAY,IAGfyD,GAAIzJ,mBACN+I,GAAMiN,IAAIhyB,EAAQ,OAAQsiB,EAG9B,GAAG,EAEL,EAEA4C,GAAc,WAQZ,GAAID,KAAa1J,EAAY,OAAO0J,GAEpC,IAAsCgb,EAAKnmC,EAAMgnB,EAG7Cof,EAHAC,GAAY,EAAO3nC,EAAIwL,UAA6Bo8B,EAAKpgC,EAAOqgC,cAKpE,IACEH,EAAK1nC,EAAE8nC,OACT,CAAE,MAAMloC,GACN8nC,OAAKn8B,CACP,CAEA,GAAIm8B,GAAMA,EAAGjjC,OAEXnD,EAAO,iCACPgnB,EAAQtoB,EAAE+nC,YAEGzf,EAAMhnB,IAASgnB,EAAMhnB,GAAM0mC,eAAiB1f,EAAMhnB,GAAM0mC,cAAcrf,cACjFgf,GAAY,QAGT,GAAIC,IAAO7kB,IAAenC,GAAGjO,MAAM,cAAe,CAGvD,IACE80B,EAAM,IAAIG,EAAG,gCACf,CAAE,MAAMhoC,GAEN6nC,EAAM,IACR,CAEAE,IAAeF,EAGfA,EAAM,IAER,CAIA,OAFAhb,GAAWkb,EAEJA,CAET,EAEA5b,EAAe,WAEb,IAAIkc,EACAjN,EACAkN,EAAUjb,GAAIzG,aAgClB,GA9BiBoI,IAAiBhO,GAAGjO,MAAM,wBAKzCsa,GAAIkE,UAAW,EAGflE,GAAIhE,WAAY,EAGZgE,GAAI3F,MACN2F,GAAI3F,IAAIwO,MAAM6Q,QAAU,SAGjB1Z,GAAIza,gBAENya,GAAInE,OAAUmE,GAAInE,MAAMsI,cAC3BnE,GAAIsD,IAAI,oDACRtD,GAAIkE,UAAW,GAIbjC,IACFjC,GAAIsD,IAAInD,GAAM,gHAAmHX,GAAyE,oDAA9D,6DAAoH,IAMlQQ,GAAIza,eAAiBya,GAAIkE,SAO3B,IAAK6J,KAFLlP,GAAiB,EAEJoc,EAEPA,EAAQjoC,eAAe+6B,IAErBkN,EAAQlN,GAAMvU,WAEXwG,GAAInE,MAAMsI,YAAY8W,EAAQlN,GAAM15B,MAM9B2rB,GAAI1a,cAAgB0a,GAAIjE,MAAMgS,IAAS/N,GAAIjE,MAAMkf,EAAQlN,GAAM15B,SAGxE2mC,GAAc,IANdnc,GAAiB,EACjBmc,GAAc,IAyBxB,OAPIhb,GAAI/D,cACN+e,GAAc,EACdnc,GAAiB,GAGnBmB,GAAIhE,UAAagE,GAAIkE,UAAYlE,GAAIza,gBAAkBy1B,GAE9Chb,GAAIhE,SAEf,EAEA4C,EAAW,SAAS3kB,GAOlB,IAAI9G,EAAG4zB,EAAkB5b,EAAf+vB,EAAY,EAEtB,GAAIjhC,aAAe8R,MAAO,CAGxB,IAAK5Y,EAAI,EAAG4zB,EAAI9sB,EAAIzC,OAAQrE,EAAI4zB,EAAG5zB,IAEjC,GAAI8G,EAAI9G,aAAcb,QAGpB,GAAI0tB,GAAI0H,YAAYztB,EAAI9G,GAAGkB,MAAO,CAChC6mC,EAAY/nC,EACZ,KACF,OAEK,GAAI6sB,GAAI4H,WAAW3tB,EAAI9G,IAAK,CAGjC+nC,EAAY/nC,EACZ,KAEF,CAKE8G,EAAIihC,GAAWjhC,MACjBA,EAAIihC,GAAajhC,EAAIihC,GAAWjhC,KAGlCkR,EAASlR,EAAIihC,EAEf,MAGE/vB,EAASlR,EAIX,OAAOkR,CAET,EAGAsT,EAAa,SAASyG,GAMfA,EAAOgJ,YAEVhJ,EAAOgJ,WAAY,GAEdlM,IAAehC,GAAIrJ,uBAEE,OAApB0K,IAA6C,IAAjBD,KAE9BC,GAAkB8Z,YAAYxc,EAAcqB,GAAIrJ,uBAIlDyK,MAMN,EAEA1C,EAAY,SAASwG,GAMfA,EAAOgJ,YAEThJ,EAAOgJ,WAAY,GAEdlM,IAAehC,GAAIrJ,sBAItByK,KAMN,EAEAzC,EAAe,WAOb,IAAIxrB,EAEJ,GAAwB,OAApBkuB,KAA6BD,GAQ/B,OAJAga,cAAc/Z,SAEdA,GAAkB,MAQpB,IAAKluB,EAAI6sB,GAAIzF,SAAS/iB,OAAS,EAAGrE,GAAK,EAAGA,IAEpC6sB,GAAI1F,OAAO0F,GAAIzF,SAASpnB,IAAI03B,SAAW7K,GAAI1F,OAAO0F,GAAIzF,SAASpnB,IAAI+6B,WACrElO,GAAI1F,OAAO0F,GAAIzF,SAASpnB,IAAI25B,UAKlC,EAEApP,EAAa,SAASvrB,GAEpBA,EAAWA,IAAY2jB,EAAa3jB,EAAU,CAAC,EAEpB,mBAAhB6tB,GAAIrI,SACbqI,GAAIrI,QAAQ/c,MAAML,EAAQ,CAAC,CACzBlG,KAAOlC,EAAQkC,OAASyhB,EAAa3jB,EAAQkC,KAAO,QAIpDlC,EAAQk5B,QAAUvV,GAAc3jB,EAAQk5B,OAC1CrL,GAAIwH,SAGR,EAEA9H,GAAe,WAGb,GAAKuC,IAAgBxC,KAArB,CAKA,IAA2BtsB,EAAG46B,EAA1BoH,EAAKnV,GAAIzG,aAEb,IAAKwU,KAAQoH,EAEX,GAAIA,EAAGniC,eAAe+6B,KAEP,QAATA,GAA2B,QAATA,KAEpB/N,GAAIsD,IAAIpD,GAAK,8BAAgC6N,EAAO,WACpD/N,GAAInE,MAAMkS,IAAQ,EAGdoH,EAAGpH,IAASoH,EAAGpH,GAAMrU,SACvB,IAAKvmB,EAAIgiC,EAAGpH,GAAMrU,QAAQliB,OAAS,EAAGrE,GAAK,EAAGA,IAC5C6sB,GAAInE,MAAMsZ,EAAGpH,GAAMrU,QAAQvmB,KAAM,CAhB3C,CA0BF,EAOAjB,KAAKmpC,gBAAkB,SAASC,GAI9B,IAAIC,EAAKvb,GAAI5E,QAEbmgB,EAAGlnC,KAAOinC,EACVC,EAAG7f,YAAc6f,EAAGlgB,MAAOkgB,EAAGlgB,MAAMigB,KAAiBxlB,EAAawlB,EAAc,WAEhE,kBAAZC,EAAGlnC,MAELknC,EAAG5f,UAAW,EACd4f,EAAG3f,SAAU,EACbW,EAAK,UAAW,IAEK,qBAAZgf,EAAGlnC,MAEZknC,EAAG5f,UAAW,EACd4f,EAAG3f,SAAU,GAEQ,iBAAZ2f,EAAGlnC,OAEZknC,EAAG5f,UAAW,EACd4f,EAAG3f,SAAU,EAKjB,EAEA1pB,KAAKspC,qBAAuB,SAASC,GAKnC,IAAIzb,GAAI5F,UAAR,CAIA,IAAIznB,EAaJ,GAXA2pB,EAAQ,OAAO,GACfA,EAAQ,aAAa,GACrB0D,GAAI5F,WAAY,EAChBiI,IAAiB,EAEbJ,IACFvC,MAKG+b,GAAcA,EAAWt/B,QAAQ,SAAU,MAAQ6jB,GAAIhM,cAAc7X,QAAQ,SAAU,IAU1F,OARAxJ,EAAIutB,GAAK,mCAAqCF,GAAIhM,cAAgB,qCAAuCynB,EAAa,QAAUzb,GAAI/lB,IAAM,qCAG1I0qB,YAAW,WACT,MAAM,IAAI5uB,MAAMpD,EAClB,GAAG,GASLgyB,WAAWpX,EAAMqU,GAAO,IAAM,EA/B9B,CAiCF,EAOAnE,EAAc,SAAS3D,EAASI,GAG9B,GAAIuG,IAAaC,GAAe,OAAO,EAEvC,SAASgb,IAIP,IACIh0B,EADAvV,EAAU,GAEV69B,EAAM,GAGVtoB,EAAQ,gBAAkBsY,GAAIjM,UAAYiM,GAAIhE,WAAagE,GAAIza,cAAiBya,GAAIkE,SAAW,iBAAmB,2BAA8B,IAE3IlE,GAAIhE,UA8BEgE,GAAIrJ,sBACXxkB,EAAQgF,KAAK,yBAA2B6oB,GAAIrJ,qBAAuB,QA7BjEqJ,GAAI1a,aACNnT,EAAQgF,KAAK,eAGX6oB,GAAIvJ,oBACNtkB,EAAQgF,KAAK,sBAGX6oB,GAAItJ,sBACNvkB,EAAQgF,KAAK,yBAA2B6oB,GAAItJ,qBAAuB,OAGjEsJ,GAAIrJ,sBACNxkB,EAAQgF,KAAK,yBAA2B6oB,GAAIrJ,qBAAuB,OAGjEqJ,GAAInJ,OACN1kB,EAAQgF,KAAK,UAAY6oB,GAAInJ,MAAQ,KAGnCmJ,GAAI5J,YACNjkB,EAAQgF,KAAK,cAGX6oB,GAAIjJ,eACN5kB,EAAQgF,KAAK,eAObhF,EAAQqF,SACVw4B,EAAMA,EAAI9uB,OAAO,CAAC/O,EAAQ2b,KAvCZ,UA0ChBkS,GAAIsD,IAAI5b,GAASsoB,EAAIx4B,OA1CL,MA0C0Bw4B,EAAIliB,KAAK,MAAQ,IAAK,GAEhE8R,IAIF,CAEA,GAAII,GAAIhE,UAcN,OAXAiB,IAEAye,IACA1b,GAAI3F,IAAMN,EAAGiG,GAAIlG,SACjBvM,IAGAkT,IAAY,EAEZC,IAAgB,GAET,EAKT,IAKAib,EAEAC,EAAQC,EAAQ7C,EAAK8C,EAAWC,EAAKpnC,EAAGsK,EAAG+8B,EAPvCC,EAAa/hB,GAAY8F,GAAI/lB,IACjCiiC,EAAYlc,GAAI7F,QAAU8hB,EAE1BnD,EAAUtb,IACV2e,EAAaje,IAEbke,EAAO9b,GAAIgS,qBAAqB,QAAQ,GAMxC,SAAS+J,EAAMzkC,EAAMvF,GACnB,MAAO,gBAAkBuF,EAAO,YAAcvF,EAAQ,MACxD,CA2CA,GAhDAspC,EAASS,GAAQA,EAAKE,KAAOF,EAAKE,IAAI52B,MAAM,QAC5CoU,EAAWA,IAAYhE,EAAakK,GAAIjG,GAAKD,EAO7CmD,IACA+C,GAAI/lB,IAAM8jB,EAAkB0E,GAAWwZ,EAAYC,GACnDhiB,EAAW8F,GAAI/lB,IAEf+lB,GAAInJ,OAAUmJ,GAAInJ,OAASmJ,GAAIvJ,mBAAqB,cAAgBuJ,GAAInJ,MAEtD,OAAdmJ,GAAInJ,QAAmBlD,GAAGjO,MAAM,aAAgBkc,KAAS5B,GAAIvJ,qBAAwBlY,UAAU0V,SAASvO,MAAM,kBAMhH4b,GAASnqB,KAAKgmB,EAAQyY,UACtB5V,GAAInJ,MAAQ,MAGd+kB,EAAS,CACPhkC,KAAMkiB,EACNC,GAAID,EACJxS,IAAK4S,EACLqiB,QAAS,OACTzlB,kBAAmBkJ,GAAIlJ,kBACvB0lB,QAASxc,GAAIxJ,QACbimB,YAAa9Z,GAAO,uCACpBjb,MAvCS,4CAwCTrT,KAAM,gCACNwiB,MAAOmJ,GAAInJ,MAEX6lB,YAAa,QAGX1c,GAAI5J,aACNwlB,EAAOe,UAAY,WAGhB3c,GAAInJ,cAEA+kB,EAAO/kB,MAGZ+K,GAGFia,EAASvb,GAAImI,cAAc,OAC3BqT,EAAY,CACV,eAAiBhiB,EAAU,WAAaI,EAAW,WAAa0hB,EAAOvnC,KAAO,YAAcunC,EAAOl0B,MAAQ,0JAC3G20B,EAAM,QAASniB,GACfmiB,EAAM,oBAAqBrc,GAAIlJ,mBAC/BulB,EAAM,UAAWT,EAAOW,SACvBvc,GAAInJ,MAAQwlB,EAAM,QAASrc,GAAInJ,OAAS,GACzCwlB,EAAM,UAAWrc,GAAIxJ,SACrB6lB,EAAM,cAAe,QACpBrc,GAAI5J,WAAaimB,EAAM,YAAaT,EAAOe,WAAa,GACzD,aACA7uB,KAAK,SAKP,IAAKkrB,KADL6C,EAASvb,GAAImI,cAAc,SACfmT,EACNA,EAAO5oC,eAAegmC,IACxB6C,EAAOe,aAAa5D,EAAK4C,EAAO5C,IAUtC,GAJApb,IACAue,EAAaje,IACb4a,EAAUtb,IAMR,GAFAwC,GAAI3F,IAAON,EAAGiG,GAAIlG,UAAYwG,GAAImI,cAAc,OAE3CzI,GAAI3F,IAAIN,GAwEXiiB,EAAShc,GAAI3F,IAAIqO,UACjB1I,GAAI3F,IAAIqO,WAAasT,EAASA,EAAS,IAAM7d,EAAOwF,aAAewY,EAAa,IAAMA,EAAa,IACnGnc,GAAI3F,IAAIsO,YAAYkT,GAEhBja,MACFma,EAAM/b,GAAI3F,IAAIsO,YAAYrI,GAAImI,cAAc,SACxCC,UAAYvK,EAAOuF,OACvBqY,EAAIxS,UAAYuS,GAGlBpb,IAAgB,MAlFD,CAuCf,GArCAV,GAAI3F,IAAIN,GAAKiG,GAAIlG,QACjBkG,GAAI3F,IAAIqO,UAAYvK,EAAOwF,WAAa,IAAMwY,EAC9CxnC,EAAI,KACJonC,EAAM,KAED/b,GAAIjJ,gBACHiJ,GAAIvJ,mBAEN9hB,EAAI,CACFyjB,SAAU,QACVrc,MAAO,MACPk9B,OAAQ,MAERn9B,OAAQ,MACRD,KAAM,MACNghC,SAAU,WAIZloC,EAAI,CACFyjB,SAAU,WACVrc,MAAO,MACPk9B,OAAQ,MACR6D,IAAK,UACLjhC,KAAM,WAEJ8/B,IACFhnC,EAAEkH,KAAO8B,KAAKo/B,IAAI7oB,SAASvf,EAAEkH,KAAM,KAAO,QAK5CgmB,KAEF7B,GAAI3F,IAAIwO,MAAM2Q,OAAS,MAGpBxZ,GAAI5J,WACP,IAAKnX,KAAKtK,EACJA,EAAE3B,eAAeiM,KACnB+gB,GAAI3F,IAAIwO,MAAM5pB,GAAKtK,EAAEsK,IAK3B,IAEO2iB,IACH5B,GAAI3F,IAAIsO,YAAYkT,GAGtB/C,EAAQnQ,YAAY3I,GAAI3F,KAEpBuH,MACFma,EAAM/b,GAAI3F,IAAIsO,YAAYrI,GAAImI,cAAc,SACxCC,UAAYvK,EAAOuF,OACvBqY,EAAIxS,UAAYuS,GAGlBpb,IAAgB,CAElB,CAAE,MAAM/tB,GAEN,MAAM,IAAIoD,MAAMioB,EAAI,YAAc,MAAQrrB,EAAEqW,WAE9C,CAEF,CAyBF,OANAyX,IAAY,EAEZib,KAIO,CAET,EAEAte,EAAY,WAEV,OAAI4C,GAAIhE,WACNyB,KACO,IAIL1B,KAECiE,GAAI/lB,MAcT8hB,GAAQiE,GAAI4E,SAAS5E,GAAIjG,OAIlBiH,IAQEY,GAGH5B,GAAI3F,IAAIkP,UAAYtI,GAFpBjB,GAAI3F,IAAIsO,YAAY3H,IAKtBA,GAAW,KACXP,IAAY,GAZZhD,EAAYuC,GAAIjG,GAAIiG,GAAI/lB,KAgB1B8hB,GAAQiE,GAAI4E,SAAS5E,GAAIjG,KAII,mBAApBiG,GAAIgd,aACbrY,WAAW3E,GAAIgd,YAAa,GAI9Bnd,MAGO,IAzCJtD,EAAK,UACE,GA0CZ,EAEAO,EAAiB,WAEf6H,WAAW5H,EAAW,IAExB,EAEAC,EAAkB,WAIhBziB,EAAOoqB,YAAW,WAEhBpG,EAAS4B,GAAM,6FAEfH,GAAI5a,MAAM,CACRE,aAAa,IACZ6jB,SAGHnJ,GAAIvF,eAAgB,EAEpBuF,GAAIyE,kBAEN,GAAG,EAEL,EAEA1H,EAAY,WAEV,IAAIhoB,EACAkoC,GAAiB,EAEhBjd,GAAI/lB,MAKLinB,KAIJA,IAAe,EACf5B,GAAMpN,OAAO3X,EAAQ,OAAQuiB,GAEzB0C,IAAY6C,KAAmBF,GAEjC5F,EAAK,cAIFoE,KACH5rB,EAAIirB,GAAI2J,mBACA,GAAK50B,EAAI,MACfkoC,GAAiB,GAIrBtY,YAAW,WAIT,GAFA5vB,EAAIirB,GAAI2J,kBAEJsT,EAKF,OAHA/b,IAAe,EACflB,GAAIsD,IAAItF,EAAI,iBACZzjB,EAAOoqB,WAAW7H,EAAgB,GAK/B6D,KAEHX,GAAIsD,IAAIpD,GAAK,6DAAqE,IAANnrB,EAAU,oBAAsB,IAAM,6CAA+CirB,GAAI5J,WAAa,IAAM4H,EAAI,YAAc,IAAK,IAE1MyE,IAAY1tB,IAEfwnB,EAAK,YAAa,GAEbyD,GAAI5J,YACPmG,EAAK,WAAY,IAKX,IAANxnB,GAGFirB,GAAIsD,IAAItF,EAAI,SAAUgC,GAAI/lB,KAAM,GAIlCqiB,EAAQ,aAAa,EAAO,eAAiBmG,GAAW,4CAA8C,gCAOnG9B,IAAW2B,KAEJ,OAANvtB,EAIEirB,GAAIjJ,eAA0C,IAAzBiJ,GAAIpJ,kBAEvBoJ,GAAIjJ,eAENkH,IAIF1B,EAAK,iBAEKyD,GAAIjJ,eAAiB8H,EAG/B7B,KAIAT,EAAK,eAGLK,EAAgB,CACdvoB,KAAM,YACN8lC,YAAY,EACZrG,MAAO,CACLz/B,KAAM,sBAMsB,IAAzB2rB,GAAIpJ,iBAIb2F,EAAK,gBAEKyD,GAAIjJ,eAAiB8H,EAE/B7B,IAIAc,GAAW,GAMjB,GAAGkC,GAAIpJ,oBAET,EAEAsG,EAAc,WAEZ,SAASggB,IACP5d,GAAMpN,OAAO3X,EAAQ,QAAS2iB,EAChC,CAEA,OAAIiF,KAAcE,IAEhB6a,KACO,IAGT5a,IAAc,EACdH,IAAY,EACZ5F,EAAK,YAGL2E,IAAe,EAGfpE,IAEAogB,KACO,EAET,EAEArd,GAAgB,WAKVyB,GAAS9pB,SACXwoB,GAAIsD,IAAI,mBAAqBhC,GAASxT,KAAK,KAAM,GACjDwT,GAAW,GAKf,EAEA1B,GAAc,WAIZC,KAEA,IAAIkO,EAAMoP,EAAQ,GAElB,GAAInd,GAAIza,eAAiBya,GAAIkE,SAAU,CACrC,IAAK6J,KAAQ/N,GAAIzG,aACXyG,GAAIzG,aAAavmB,eAAe+6B,IAClCoP,EAAMhmC,KAAK42B,EAAO,MAAQ/N,GAAInE,MAAMkS,KAAU/N,GAAInE,MAAMkS,IAASxM,IAAcvB,GAAIjE,MAAMgS,GAAQ,iBAAoB/N,GAAI1a,aAAe0a,GAAIjE,MAAMgS,IAASxM,GAAa,sBAA0BvB,GAAInE,MAAMkS,GAAiG,GAAzF,MAAQ/N,GAAIzG,aAAawU,GAAMvU,SAAW,aAAe,IAAM,0BAGvRwG,GAAIsD,IAAI,iCAAmC6Z,EAAMrvB,KAAK,MAAO,EAC/D,CAIF,EAEA0O,EAAe,SAASiL,GAEtB,GAAI9G,GAAS,OAAO,EAEpB,GAAIX,GAAIhE,UAMN,OAJAO,EAAK,YAAa,GAClBoE,IAAU,EACV9D,IACAP,EAAQ,UAAU,IACX,EAGT,IAEIwX,EADA3oB,GAAS,EAyDb,OA1DkB6U,GAAIjJ,eAAiBiJ,GAAIpJ,mBAAqBoJ,GAAI2J,oBAKlEhJ,IAAU,GAGZmT,EAAQ,CACNz/B,MAAQmrB,IAAY+B,GAAa,WAAa,gBAGhDvB,GAAIsD,IAAI,mBAAqB1C,GAAW,iBAAmB,UAAY,MAAQA,GAAW,4BAA8B,MAAQ,KAAOxnB,OAAO+6B,aAAavT,GAAW,MAAQ,OAAQA,GAAW,EAAI,GAEjMA,IAAY6G,GAEVzH,GAAIjJ,eAAiBiJ,GAAI3F,MAC3B2F,GAAI3F,IAAIqO,UAAYxK,IAAc,KAAiC,OAA1B8B,GAAI2J,kBAA6BxL,EAAO0F,YAAc1F,EAAOyF,WAGxGhH,EAAgB,CACdvoB,KAAM,YACNy/B,MAAOA,EACPqG,YAAY,IAGd7d,EAAQ,UAAU,GAClBoB,EAAWoW,GAEX3oB,GAAS,GAITmR,EAAQ,UAAU,GAIfsE,KAECZ,GAAIzJ,oBAAsBsK,IAE5BtE,EAAK,cACL+C,GAAMiN,IAAIhyB,EAAQ,OAAQsiB,KAKtBmD,GAAIzJ,mBAAqBsK,IAC3BtE,EAAK,aAIPM,MAMG1R,CAET,EAOAiR,EAAgB,WAEd,IAAIjpB,EACAF,EAAI+sB,GAAI7J,aAEZ,IAAKhjB,KAAKF,EAEJA,EAAED,eAAeG,KAIf6sB,GAAI7sB,KAAO2iB,EAEbkK,GAAI7sB,GAAKF,EAAEE,GAEF6sB,GAAI7sB,KAAOF,EAAEE,KAGtB6sB,GAAI7J,aAAahjB,GAAK6sB,GAAI7sB,IAQlC,EAGAoa,EAAO,WAIL,GAAIoT,GAEF,OADApE,EAAK,YACE,EAGT,SAAS2gB,IACP5d,GAAMpN,OAAO3X,EAAQ,OAAQylB,GAAIyE,iBACnC,CAEA,GAAIzE,GAAIhE,UASN,OAPK2E,KAEHuc,IACAld,GAAI/T,SAAU,EACduQ,MAGK,EAKTY,IAEA,IAGErB,GAAMqhB,wBAAuB,GAM7Bzf,GAAW,EAAOqC,GAAItJ,uBAAyBsJ,GAAIvJ,mBAAqB,GAAK,KAExEuJ,GAAI3a,WAEP0W,GAAMshB,gBAGRrd,GAAI/T,SAAU,EACdqQ,EAAQ,aAAa,GAEhB0D,GAAIhE,WAGPsD,GAAMiN,IAAIhyB,EAAQ,SAAU4hB,EAGhC,CAAE,MAAMxpB,GAgBN,OAdAqtB,GAAIsD,IAAI,uBAAyB3wB,EAAEqW,YAEnCsT,EAAQ,aAAa,GAErBoB,EAAW,CACTrpB,KAAM,wBACNg3B,OAAO,IAITvN,GAAW,GAEXtB,KAEO,CAET,CAOA,OALAA,IAGA0gB,KAEO,CAET,EAEA7f,EAAmB,WAEjB,OAAIE,IAEJA,GAAc,EAGdnB,IAEAwB,KAEK4B,IAAYQ,GAAIkE,WAEnBlE,GAAIsD,IAAI,qCAAwCtD,GAAIza,cAAsC,4BAAtB,qBAAoD,GAExHya,GAAI5a,MAAM,CACRG,eAAe,EAGfD,aAAa,KAKjB+Z,MAEKG,IAAY+B,KAEfD,GAASnqB,KAAKgmB,EAAQsa,WAItBzX,GAAI5a,MAAM,CACRwR,iBAAkB,KAKlB0J,GAAIgP,qBACNhP,GAAIgP,oBAAoB,mBAAoBjS,GAAkB,GAGhED,KAEO,EAET,EAEAgC,GAAqB,WAOnB,MALuB,aAAnBkB,GAAIoE,aACNrH,IACAiD,GAAIgd,YAAY,qBAAsBle,MAGjC,CAET,EAEA9B,EAAY,WAGVuD,IAAe,EAGfxD,IAEAiC,GAAMpN,OAAO3X,EAAQ,OAAQ+iB,EAE/B,EAGAmC,KAGAH,GAAMiN,IAAIhyB,EAAQ,QAAS2iB,GAC3BoC,GAAMiN,IAAIhyB,EAAQ,OAAQuiB,GAC1BwC,GAAMiN,IAAIhyB,EAAQ,OAAQ+iB,GAEtBgD,GAAIrZ,iBAENqZ,GAAIrZ,iBAAiB,mBAAoBoW,GAAkB,GAElDiD,GAAIid,YAEbjd,GAAIid,YAAY,qBAAsBne,KAKtC9C,EAAQ,UAAU,GAClBoB,EAAW,CACTrpB,KAAM,iBACNg3B,OAAO,IAKb,CAII9wB,EAAOijC,YAAc1nB,GAAe0nB,YACtCr4B,EAAe,IAAI6Q,GAQaynB,GAAoC,iBAAnBA,EAAOjqB,SAMxDiqB,EAAOjqB,QAAQwC,aAAeA,EAC9BynB,EAAOjqB,QAAQrO,aAAeA,QAmD7B,KArBD,aAiBE,MAAO,CACLxN,YAAaqe,EACb0nB,YAXF,SAAqBC,GACnB,IAAKpjC,EAAO4K,cAAgBw4B,aAAqB3K,SAAU,CACzD,IAAI4K,EAAWD,EAAU3nB,GACrB4nB,aAAoB5nB,IACtBzb,EAAO4K,aAAey4B,EAE1B,CACA,OAAOrjC,EAAO4K,YAChB,EAKD,gCAOH5K,EAAOyb,aAAeA,EAQtBzb,EAAO4K,aAAeA,CAEtB,CAxnMA,CAwnME5K,0CCppMF,IAAIsjC,EAAuB,cACvBC,EAAQ,EAAQ,MAChBC,EAAc,EAAQ,MAM1BN,EAAOjqB,QAAU,SAAUwqB,GACzB,OAAOF,GAAM,WACX,QAASC,EAAYC,MANf,cAOGA,MACHH,GAAwBE,EAAYC,GAAapmC,OAASomC,CAClE,GACF,qCCdA,IAAIjkC,EAAI,EAAQ,MACZkkC,EAAQ,aAKZlkC,EAAE,CAAE0P,OAAQ,SAAUy0B,OAAO,EAAMC,OAJN,EAAQ,IAIMC,CAAuB,SAAW,CAC3EprB,KAAM,WACJ,OAAOirB,EAAM/rC,KACf","sources":["webpack://@internetarchive/bookreader/./src/BookReaderPlugin.js","webpack://@internetarchive/bookreader/./src/plugins/tts/PageChunk.js","webpack://@internetarchive/bookreader/./src/plugins/tts/PageChunkIterator.js","webpack://@internetarchive/bookreader/./src/plugins/tts/utils.js","webpack://@internetarchive/bookreader/./src/plugins/tts/AbstractTTSEngine.js","webpack://@internetarchive/bookreader/./src/plugins/tts/FestivalTTSEngine.js","webpack://@internetarchive/bookreader/./src/plugins/tts/WebTTSEngine.js","webpack://@internetarchive/bookreader/./src/plugins/tts/tooltip_dict.js","webpack://@internetarchive/bookreader/./src/plugins/tts/plugin.tts.js","webpack://@internetarchive/bookreader/./src/util/strings.js","webpack://@internetarchive/bookreader/./node_modules/iso-language-codes/js/data.js","webpack://@internetarchive/bookreader/./node_modules/jquery.browser/dist/jquery.browser.js","webpack://@internetarchive/bookreader/./node_modules/soundmanager2/script/soundmanager2.js","webpack://@internetarchive/bookreader/./node_modules/core-js/internals/string-trim-forced.js","webpack://@internetarchive/bookreader/./node_modules/core-js/modules/es.string.trim.js"],"sourcesContent":["// @ts-check\n/** @typedef {import(\"./BookReader.js\").default} BookReader */\n\n/**\n * @template TOptions\n */\nexport class BookReaderPlugin {\n  /**\n   * @param {BookReader} br\n   */\n  constructor(br) {\n    /** @type {BookReader} */\n    this.br = br;\n    /** @type {TOptions} */\n    this.options;\n  }\n\n  /**\n   * @abstract\n   * @param {TOptions} options\n   **/\n  setup(options) {\n    this.options = Object.assign({}, this.options, options);\n  }\n\n  /** @abstract */\n  init() {}\n\n  /**\n   * @abstract\n   * @protected\n   * @param {import (\"./BookReader/PageContainer.js\").PageContainer} pageContainer\n   */\n  _configurePageContainer(pageContainer) {\n  }\n\n  /** @abstract @protected */\n  _bindNavigationHandlers() {}\n\n  /**\n   * @param {JQuery<HTMLElement>} $navBar\n   */\n  extendNavBar($navBar) {}\n}\n","import { applyVariables } from \"../../util/strings.js\";\n\n/**\n * Class to manage a 'chunk' (approximately a paragraph) of text on a page.\n */\nexport default class PageChunk {\n  /**\n   * @param {number} leafIndex\n   * @param {number} chunkIndex\n   * @param {string} text\n   * @param {DJVURect[]} lineRects\n   */\n  constructor(leafIndex, chunkIndex, text, lineRects) {\n    this.leafIndex = leafIndex;\n    this.chunkIndex = chunkIndex;\n    this.text = text;\n    this.lineRects = lineRects;\n  }\n\n  /**\n   * @param {import('@/src/util/strings.js').StringWithVars} pageChunkUrl\n   * @param {number} leafIndex\n   * @return {Promise<PageChunk[]>}\n   */\n  static async fetch(pageChunkUrl, leafIndex) {\n    const chunks = await $.ajax({\n      type: 'GET',\n      url: applyVariables(pageChunkUrl, { pageIndex: leafIndex }),\n      cache: true,\n      xhrFields: {\n        withCredentials: window.br.protected,\n      },\n    });\n    return PageChunk._fromTextWrapperResponse(leafIndex, chunks);\n  }\n\n  /**\n   * Convert the response from BookReaderGetTextWrapper.php into a {@link PageChunk} instance\n   * @param {number} leafIndex\n   * @param {Array<[String, ...DJVURect[]]>} chunksResponse\n   * @return {PageChunk[]}\n   */\n  static _fromTextWrapperResponse(leafIndex, chunksResponse) {\n    return chunksResponse.map((c, i) => {\n      const correctedLineRects = PageChunk._fixChunkRects(c.slice(1));\n      const correctedText = PageChunk._removeDanglingHyphens(c[0]);\n      return new PageChunk(leafIndex, i, correctedText, correctedLineRects);\n    });\n  }\n\n  /**\n   * @private\n   * Sometimes the first rectangle will be ridiculously wide/tall. Find those and fix them\n   * *NOTE*: Modifies the original array and returns it.\n   * *NOTE*: This should probably be fixed on the petabox side, and then removed here\n   * Has 2 problems:\n   *  - If the rect is the last rect on the page (and hence the only rect in the array),\n   *    the rect's size isn't fixed\n   * - Because this relies on the second rect, there's a chance it won't be the right\n   *   width\n   * @param {DJVURect[]} rects\n   * @return {DJVURect[]}\n   */\n  static _fixChunkRects(rects) {\n    if (rects.length < 2) return rects;\n\n    const [firstRect, secondRect] = rects;\n    const [left, bottom, right] = firstRect;\n    const width = right - left;\n    const secondHeight = secondRect[1] - secondRect[3];\n    const secondWidth = secondRect[2] - secondRect[0];\n    const secondRight = secondRect[2];\n\n    if (width > secondWidth * 30) {\n      // Set the end to be the same\n      firstRect[2] = secondRight;\n      // And the top to be the same height\n      firstRect[3] = bottom - secondHeight;\n    }\n\n    return rects;\n  }\n\n  /**\n   * Remove \"dangling\" hyphens from read aloud text to avoid TTS stuttering\n   * @param {string} text\n   * @return {string}\n   */\n  static _removeDanglingHyphens(text) {\n    // Some books mis-OCR a dangling hyphen as a ¬ (mathematical not sign) . Since in math\n    // the not sign should not appear followed by a space, we think we can safely assume\n    // this should be replaced.\n    return text.replace(/[-¬]\\s+/g, '');\n  }\n}\n\n/**\n * @typedef {[number, number, number, number]} DJVURect\n * coords are in l,b,r,t order\n */\n","import PageChunk from './PageChunk.js';\n\n/**\n * Class that iterates over the page chunks of a book; caching/buffering\n * as much as possible to try to ensure a smooth experience.\n */\nexport default class PageChunkIterator {\n  /**\n   * @param {number} pageCount total number of pages\n   * @param {number} start page to start on\n   * @param {PageChunkIteratorOptions} opts\n   */\n  constructor(pageCount, start, opts) {\n    this.pageCount = pageCount;\n    this.opts = Object.assign({}, DEFAULT_OPTS, opts);\n    /** Position in the chunk sequence */\n    this._cursor = { page: start, chunk: 0 };\n    /** @type {Object<number, PageChunk[]>} leaf index -> chunks*/\n    this._bufferedPages = {};\n    /** @type {Object<number, PromiseLike<PageChunk[]>} leaf index -> chunks*/\n    this._bufferingPages = {};\n    /**\n     * @type {Promise} promise that manages cursor modifications so that they\n     * happen in order triggered as opposed to order the server responds\n     **/\n    this._cursorLock = Promise.resolve();\n  }\n\n  /**\n   * Get the next chunk\n   * @return {PromiseLike<\"__PageChunkIterator.AT_END__\" | PageChunk>}\n   */\n  next() {\n    return this._cursorLock = this._cursorLock\n      .then(() => this._nextUncontrolled());\n  }\n\n  /**\n   * Sends the cursor back 1\n   * @return {Promise}\n   **/\n  decrement() {\n    return this._cursorLock = this._cursorLock\n      .then(() => this._decrementUncontrolled());\n  }\n\n  /**\n   * Gets without ensuring synchronization. Since this iterator has a lot of async\n   * code, calling e.g. \"next\" twice (before the first call to next has finished)\n   * would cause the system to be in a weird state. To avoid that, we make sure calls\n   * to next and decrement (functions that modify the cursor) are synchronized,\n   * so that regardless how long it takes for one to respond, they'll always be executed\n   * in the correct order.\n   * @return {PromiseLike<\"__PageChunkIterator.AT_END__\" | PageChunk>}\n   */\n  async  _nextUncontrolled() {\n    if (this._cursor.page == this.pageCount) {\n      return Promise.resolve(PageChunkIterator.AT_END);\n    }\n    this._recenterBuffer(this._cursor.page);\n    const chunks = await this._fetchPageChunks(this._cursor.page);\n    if (this._cursor.chunk == chunks.length) {\n      this._cursor.page++;\n      this._cursor.chunk = 0;\n      return this._nextUncontrolled();\n    }\n    return chunks[this._cursor.chunk++];\n  }\n\n  /**\n   * Decrements without ensuring synchronization. (See {@link PageChunkIterator._nextUncontrolled});\n   * @return {Promise}\n   */\n  _decrementUncontrolled() {\n    let cursorChangePromise = Promise.resolve();\n\n    if (this._cursor.chunk > 0) {\n      this._cursor.chunk--;\n    } else if (this._cursor.page > 0) {\n      this._cursor.page--;\n      // Go back possibly multiple pages, because pages can be blank\n      cursorChangePromise = this._fetchPageChunks(this._cursor.page)\n        .then(prevPageChunks => {\n          if (prevPageChunks.length == 0) return this._decrementUncontrolled();\n          else this._cursor.chunk = prevPageChunks.length - 1;\n        });\n    }\n\n    return cursorChangePromise\n      .then(() => this._fetchPageChunks(this._cursor.page));\n  }\n\n  /**\n   * Recenter the buffer around the provided page index\n   * @param {number} index\n   */\n  _recenterBuffer(index) {\n    const start = Math.max(0, index - this.opts.pageBufferSize);\n    const end = Math.min(this.pageCount, index + this.opts.pageBufferSize + 1);\n    for (let i = start; i < end; i++) {\n      this._fetchPageChunks(i);\n    }\n\n    this._removePageFromBuffer(start - 1);\n    this._removePageFromBuffer(end + 1);\n  }\n\n  /**\n   * @param {number} index\n   */\n  _removePageFromBuffer(index) {\n    delete this._bufferingPages[index];\n    delete this._bufferedPages[index];\n  }\n\n  /**\n   * Fetches the chunks on a page; checks the buffer, so it won't make unnecessary\n   * requests if it's called multiple times for the same index.\n   * @param {number} index\n   * @return {Promise<PageChunk[]>}\n   */\n  _fetchPageChunks(index) {\n    if (index in this._bufferingPages) return this._bufferingPages[index];\n    if (index in this._bufferedPages) return Promise.resolve(this._bufferedPages[index]);\n\n    this._bufferingPages[index] = this._fetchPageChunksDirect(index)\n      .then(chunks => {\n        delete this._bufferingPages[index];\n        this._bufferedPages[index] = chunks;\n        return chunks;\n      });\n\n    return this._bufferingPages[index];\n  }\n\n  /**\n   * Fetches a page without checking buffer\n   * @param {number} index\n   */\n  _fetchPageChunksDirect(index) {\n    return PageChunk.fetch(this.opts.pageChunkUrl, index);\n  }\n}\n\nPageChunkIterator.AT_END = \"__PageChunkIterator.AT_END__\";\n\n/** @type {PageChunkIteratorOptions} */\nconst DEFAULT_OPTS = {\n  pageChunkUrl: null,\n  pageBufferSize: 2,\n};\n\n/**\n * @typedef {Object} PageChunkIteratorOptions\n * @property {import('@/src/util/strings.js').StringWithVars} pageChunkUrl\n * @property {number} [pageBufferSize] number of pages to buffer before/after the current page\n */\n","import langs from 'iso-language-codes/js/data.js';\n\n/**\n * Use regex to approximate word count in a string\n * @param {string} text\n * @return {number}\n */\nexport function approximateWordCount(text) {\n  const m = text.match(/\\S+/g);\n  return m ? m.length : 0;\n}\n\n/**\n * Checks whether the current browser is on android\n * @param {string} [userAgent]\n * @return {boolean}\n */\nexport function isAndroid(userAgent = navigator.userAgent) {\n  return /android/i.test(userAgent);\n}\n\n/**\n * @typedef {string} ISO6391\n * Language code in ISO 639-1 format. e.g. en, fr, zh\n **/\n\n/** Each lang is an array, with each index mapping to a different property */\nconst COLUMN_TO_LANG_INDEX = {\n  'Name': 0,\n  'Endonym': 1,\n  'ISO 639-1': 2,\n  'ISO 639-2/T': 3,\n  'ISO 639-2/B': 4,\n};\n\n/**\n * @param {string} language in some format\n * @return {ISO6391?}\n */\nexport function toISO6391(language) {\n  if (!language) return null;\n  language = language.toLowerCase();\n\n  return searchForISO6391(language, ['ISO 639-1']) ||\n    searchForISO6391(language, ['ISO 639-2/B']) ||\n    searchForISO6391(language, ['ISO 639-2/T', 'Endonym', 'Name']);\n}\n\n/**\n * Searches for the given long in the given columns.\n * @param {string} language\n * @param {Array<keyof COLUMN_TO_LANG_INDEX>} columnsToSearch\n * @return {ISO6391?}\n */\nfunction searchForISO6391(language, columnsToSearch) {\n  for (let i = 0; i < langs.length; i++) {\n    for (let colI = 0; colI < columnsToSearch.length; colI++) {\n      const column = columnsToSearch[colI];\n      const columnValue = langs[i][COLUMN_TO_LANG_INDEX[column]];\n      if (columnValue.split(', ').map(x => x.toLowerCase()).indexOf(language) != -1) {\n        return langs[i][COLUMN_TO_LANG_INDEX['ISO 639-1']];\n      }\n    }\n  }\n  return null;\n}\n\n/**\n * Checks whether the current browser supports localStorage or\n * if the current context has access to it.\n * @return {boolean}\n */\nexport function hasLocalStorage() {\n  try {\n    return !!window.localStorage;\n  } catch (e) {\n    // Will throw in sandboxed iframe\n    // DOMException: Window.localStorage getter: Forbidden in a sandboxed document without the 'allow-same-origin' flag.\n    return false;\n  }\n}\n","import PageChunkIterator from './PageChunkIterator.js';\nimport { hasLocalStorage } from './utils.js';\n/** @typedef {import('./utils.js').ISO6391} ISO6391 */\n/** @typedef {import('./PageChunk.js')} PageChunk */\n\n/**\n * @export\n * @typedef {Object} TTSEngineOptions\n * @property {import('@/src/util/strings.js').StringWithVars} pageChunkUrl\n * @property {ISO6391} bookLanguage\n * @property {Function} onLoadingStart\n * @property {Function} onLoadingComplete\n * @property {Function} onDone called when the entire book is done\n * @property {function(PageChunk): PromiseLike} beforeChunkPlay will delay the playing of the chunk\n * @property {function(PageChunk): void} afterChunkPlay fires once a chunk has fully finished\n */\n\n/**\n * @typedef {Object} AbstractTTSSound\n * @property {PageChunk} chunk\n * @property {boolean} loaded\n * @property {number} rate\n * @property {SpeechSynthesisVoice} voice\n * @property {(callback: Function) => void} load\n * @property {() => PromiseLike} play\n * @property {() => Promise} stop\n * @property {() => void} pause\n * @property {() => void} resume\n * @property {() => void} finish force the sound to 'finish'\n * @property {number => void} setPlaybackRate\n * @property {SpeechSynthesisVoice => void} setVoice\n **/\n\n/** Handling bookreader's text-to-speech */\nexport default class AbstractTTSEngine {\n  /**\n   * @protected\n   * @param {TTSEngineOptions} options\n   */\n  constructor(options) {\n    this.playing = false;\n    this.paused = false;\n    /** @type {TTSEngineOptions} */\n    this.opts = options;\n    /** @type {PageChunkIterator} */\n    this._chunkIterator = null;\n    /** @type {AbstractTTSSound} */\n    this.activeSound = null;\n    this.playbackRate = 1;\n    /** Events we can bind to */\n    this.events = $({});\n    /** @type {SpeechSynthesisVoice} */\n    this.voice = null;\n    // Listen for voice changes (fired by subclasses)\n    this.events.on('voiceschanged', this.updateBestVoice);\n    this.events.trigger('voiceschanged');\n  }\n\n  /**\n   * @abstract\n   * @return {boolean}\n   */\n  static isSupported() { throw new Error(\"Unimplemented abstract class\"); }\n\n  /**\n   * @abstract\n   * @return {SpeechSynthesisVoice[]}\n   */\n  getVoices() { throw new Error(\"Unimplemented abstract class\"); }\n\n  /** @abstract */\n  init() { return null; }\n\n  updateBestVoice = () => {\n    this.voice = AbstractTTSEngine.getBestBookVoice(this.getVoices(), this.opts.bookLanguage);\n  }\n\n  /**\n   * @param {number} leafIndex\n   * @param {number} numLeafs total number of leafs in the current book\n   */\n  start(leafIndex, numLeafs) {\n    this.playing = true;\n    this.paused = false;\n    this.opts.onLoadingStart();\n\n    this._chunkIterator = new PageChunkIterator(numLeafs, leafIndex, {\n      pageChunkUrl: this.opts.pageChunkUrl,\n      pageBufferSize: 5,\n    });\n\n    this.step();\n    this.events.trigger('start');\n  }\n\n  stop() {\n    if (this.activeSound) this.activeSound.stop();\n    this.playing = false;\n    this.paused = true;\n    this._chunkIterator = null;\n    this.activeSound = null;\n    this.events.trigger('stop');\n  }\n\n  /** @public */\n  pause() {\n    const fireEvent = !this.paused && this.activeSound;\n    this.paused = true;\n    if (this.activeSound) this.activeSound.pause();\n    if (fireEvent) this.events.trigger('pause');\n  }\n\n  /** @public */\n  resume() {\n    const fireEvent = this.paused && this.activeSound;\n    this.paused = false;\n    if (this.activeSound) this.activeSound.resume();\n    if (fireEvent) this.events.trigger('resume');\n  }\n\n  togglePlayPause() {\n    if (this.paused) this.resume();\n    else this.pause();\n  }\n\n  /** @public */\n  jumpForward() {\n    if (this.activeSound) this.activeSound.finish();\n  }\n\n  /** @public */\n  async jumpBackward() {\n    await Promise.all([\n      this.activeSound.stop(),\n      this._chunkIterator.decrement()\n        .then(() => this._chunkIterator.decrement()),\n    ]);\n    this.step();\n  }\n\n  /** @param {string} voiceURI */\n  setVoice(voiceURI) {\n    // if the user actively selects a voice, don't re-choose best voice anymore\n    // MS Edge fires voices changed randomly very often\n    this.events.off('voiceschanged', this.updateBestVoice);\n    this.voice = this.getVoices().find(voice => voice.voiceURI === voiceURI);\n    // if the current book has a language set, store the selected voice with the book language as a suffix\n    if (this.opts.bookLanguage && hasLocalStorage()) {\n      localStorage.setItem(`BRtts-voice-${this.opts.bookLanguage}`, this.voice.voiceURI);\n    }\n    if (this.activeSound) this.activeSound.setVoice(this.voice);\n  }\n\n  /** @param {number} newRate */\n  setPlaybackRate(newRate) {\n    this.playbackRate = newRate;\n    if (this.activeSound) this.activeSound.setPlaybackRate(newRate);\n  }\n\n  /** @private */\n  async step() {\n    const chunk = await  this._chunkIterator.next();\n    if (chunk == PageChunkIterator.AT_END) {\n      this.stop();\n      this.opts.onDone();\n      return;\n    }\n    this.opts.onLoadingStart();\n    const sound = this.createSound(chunk);\n    sound.chunk = chunk;\n    sound.rate = this.playbackRate;\n    sound.voice = this.voice;\n    sound.load(() => this.opts.onLoadingComplete());\n\n    this.opts.onLoadingComplete();\n\n    await this.opts.beforeChunkPlay(chunk);\n\n    if (!this.playing) return;\n\n    const playPromise = await this.playSound(sound)\n      .then(()=> this.opts.afterChunkPlay(sound.chunk));\n\n    if (this.paused) this.pause();\n    await playPromise;\n\n    if (this.playing) return this.step();\n  }\n\n  /**\n   * @abstract\n   * @param {PageChunk} chunk\n   * @return {AbstractTTSSound}\n   */\n  createSound(chunk) { throw new Error(\"Unimplemented abstract class\"); }\n\n  /**\n   * @param {AbstractTTSSound} sound\n   * @return {PromiseLike} promise called once playing finished\n   */\n  playSound(sound) {\n    this.activeSound = sound;\n    if (!this.activeSound.loaded) this.opts.onLoadingStart();\n    return this.activeSound.play();\n  }\n\n  /** Convenience wrapper for {@see AbstractTTSEngine.getBestVoice} */\n  getBestVoice() {\n    return AbstractTTSEngine.getBestBookVoice(this.getVoices(), this.opts.bookLanguage);\n  }\n\n  /**\n   * @private\n   * Find the best voice to use given the available voices, the book language, and the user's\n   * languages.\n   * @param {SpeechSynthesisVoice[]} voices\n   * @param {ISO6391} bookLanguage\n   * @param {string[]} userLanguages languages in BCP47 format (e.g. en-US). Ordered by preference.\n   * @return {SpeechSynthesisVoice | undefined}\n   */\n  static getBestBookVoice(voices, bookLanguage, userLanguages = navigator.languages) {\n    const bookLangVoices = voices.filter(v => v.lang.startsWith(bookLanguage));\n    // navigator.languages browser support isn't great yet, so get just 1 language otherwise\n    // Sample navigator.languages: [\"en-CA\", \"fr-CA\", \"fr\", \"en-US\", \"en\", \"de-DE\", \"de\"]\n    userLanguages = userLanguages || (navigator.language ? [navigator.language] : []);\n\n    // user languages that match the book language\n    const matchingUserLangs = userLanguages.filter(lang => lang.startsWith(bookLanguage));\n\n    // First try to find the last chosen voice from localStorage for the current book language\n    return AbstractTTSEngine.getMatchingStoredVoice(bookLangVoices, bookLanguage)\n        // Try to find voices that intersect these two sets\n        || AbstractTTSEngine.getMatchingVoice(matchingUserLangs, bookLangVoices)\n        // no user languages match the books; let's return the best voice for the book language\n        || (bookLangVoices.find(v => v.default) || bookLangVoices[0])\n        // No voices match the book language? let's find a voice in the user's language\n        // and ignore book lang\n        || AbstractTTSEngine.getMatchingVoice(userLanguages, voices)\n        // C'mon! Ok, just read with whatever we got!\n        || (voices.find(v => v.default) || voices[0]);\n  }\n\n  /**\n   * @private\n   * Get the voice last selected by the user for the book language from localStorage.\n   * Returns undefined if no voice is stored or found.\n   * @param {SpeechSynthesisVoice[]} voices  browser voices to choose from\n   * @param {ISO6391} bookLanguage  book language to look for\n   * @return {SpeechSynthesisVoice | undefined}\n   */\n  static getMatchingStoredVoice(voices, bookLanguage) {\n    const storedVoice = hasLocalStorage() && localStorage.getItem(`BRtts-voice-${bookLanguage}`);\n    return (storedVoice ? voices.find(v => v.voiceURI === storedVoice) : undefined);\n  }\n\n  /**\n     * @private\n     * Get the best voice that matches one of the BCP47 languages (order by preference)\n     * @param {string[]} languages in BCP 47 format (e.g. 'en-US', or 'en'); ordered by preference\n     * @param {SpeechSynthesisVoice[]} voices voices to choose from\n     * @return {SpeechSynthesisVoice | undefined}\n     */\n  static getMatchingVoice(languages, voices) {\n    for (const lang of languages) {\n      // Chrome Android was returning voice languages like `en_US` instead of `en-US`\n      const matchingVoices = voices.filter(v => v.lang.replace('_', '-').startsWith(lang));\n      if (matchingVoices.length) {\n        return matchingVoices.find(v => v.default) || matchingVoices[0];\n      }\n    }\n  }\n}\n","import AbstractTTSEngine from './AbstractTTSEngine.js';\nimport { sleep } from '../../BookReader/utils.js';\nimport { applyVariables } from '../../util/strings.js';\n/* global soundManager */\nimport 'soundmanager2';\nimport 'jquery.browser';\n\n/** @typedef {import(\"./AbstractTTSEngine.js\").TTSEngineOptions} TTSEngineOptions */\n/** @typedef {import(\"./AbstractTTSEngine.js\").AbstractTTSSound} AbstractTTSSound */\n\n/**\n * @extends AbstractTTSEngine\n * TTS using Festival endpoint\n **/\nexport default class FestivalTTSEngine extends AbstractTTSEngine {\n  /** @override */\n  static isSupported() {\n    return typeof(soundManager) !== 'undefined' && soundManager.supported();\n  }\n\n  /** @param {TTSEngineOptions | { festivalUrl: import('@/src/util/strings.js').StringWithVars }} options */\n  constructor(options) {\n    super(options);\n    // $.browsers is sometimes undefined on some Android browsers :/\n    // Likely related to when $.browser was moved to npm\n    /** @type {'mp3' | 'ogg'} format of audio to get */\n    this.audioFormat = $.browser?.mozilla ? 'ogg' : 'mp3'; //eslint-disable-line no-jquery/no-browser\n    /** @type {import('@/src/util/strings.js').StringWithVars} */\n    this.festivalUrl = options.festivalUrl;\n  }\n\n  /** @override */\n  getVoices() {\n    return [\n      { default: true, lang: \"en-US\", localService: false, name: \"Festival - English (US)\", voiceURI: null },\n    ];\n  }\n\n  /** @override */\n  init() {\n    // setup sound manager\n    soundManager.setup({\n      debugMode: false,\n      // Note, there's a bug in Chrome regarding range requests.\n      // Flash is used as a workaround.\n      // See https://bugs.chromium.org/p/chromium/issues/detail?id=505707\n      preferFlash: true,\n      url: '/bookreader/BookReader/soundmanager/swf',\n      useHTML5Audio: true,\n      //flash 8 version of swf is buggy when calling play() on a sound that is still loading\n      flashVersion: 9,\n    });\n  }\n\n  /**\n   * @override\n   * @param {number} leafIndex\n   * @param {number} numLeafs total number of leafs in the current book\n   */\n  start(leafIndex, numLeafs) {\n    let promise = null;\n\n    // Hack for iOS\n    if (navigator.userAgent.match(/mobile/i)) {\n      promise = this.iOSCaptureUserIntentHack();\n    }\n\n    promise = promise || Promise.resolve();\n    promise.then(() => super.start(leafIndex, numLeafs));\n  }\n\n  /** @override */\n  createSound(chunk) {\n    return new FestivalTTSSound(applyVariables(this.festivalUrl, { text: chunk.text, format: this.audioFormat }));\n  }\n\n  /**\n   * @private\n   * Security restrictions require playback to be triggered\n   * by a user click/touch. This intention gets lost in the async calls\n   * on iOS, but, for some reason, if we start the audio here, it works.\n   * See https://stackoverflow.com/questions/12206631/html5-audio-cant-play-through-javascript-unless-triggered-manually-once\n   * @return {PromiseLike}\n   */\n  async iOSCaptureUserIntentHack() {\n    const sound = soundManager.createSound({ url: SILENCE_1MS[this.audioFormat] });\n    await new Promise(res => sound.play({onfinish: res}));\n    sound.destruct();\n  }\n}\n\n/** @extends AbstractTTSSound */\nclass FestivalTTSSound {\n  /** @param {string} soundUrl **/\n  constructor(soundUrl) {\n    this.soundUrl = soundUrl;\n    /** @type {SMSound} */\n    this.sound = null;\n    this.rate = 1;\n    /** @type {function} calling this resolves the \"play\" promise */\n    this._finishResolver = null;\n  }\n\n  get loaded() {\n    return this.sound && this.sound.loaded;\n  }\n\n  load(onload) {\n    this.sound = soundManager.createSound({\n      url: this.soundUrl,\n      // API recommended, but only fires once play started on safari\n      onload: () => {\n        if (this.rate != 1) this.sound.setPlaybackRate(this.rate);\n        onload();\n      },\n      onresume: async () => {\n        await sleep(25);\n        if (this.rate != 1) this.sound.setPlaybackRate(this.rate);\n      },\n    });\n    return this.sound.load();\n  }\n\n  async play() {\n    await new Promise(res => {\n      this._finishResolver = res;\n      this.sound.play({ onfinish: res });\n    });\n    this.sound.destruct();\n  }\n\n  /** @override */\n  stop() {\n    this.sound.stop();\n    return Promise.resolve();\n  }\n\n  /** @override */\n  pause() { this.sound.pause(); }\n  /** @override */\n  resume() { this.sound.resume(); }\n  /** @override */\n  setPlaybackRate(rate) {\n    this.rate = rate;\n    this.sound.setPlaybackRate(rate);\n  }\n\n  /** @override */\n  finish() {\n    this.sound.stop();\n    this._finishResolver();\n  }\n}\n\n/** Needed to capture the audio context for iOS hack. Generated using Audacity. */\nconst SILENCE_1MS = {\n  mp3: 'data:audio/mp3;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAACcQCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA//////////////////////////////////////////////////////////////////8AAAAeTEFNRTMuOTlyBJwAAAAAAAAAADUgJAaUQQABrgAAAnHIf8sZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//sQxAADwlwBKGAAACAAAD/AAAAEAAAAH///////////////+UBAMExBTUUzLjk5LjOqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr/+xDEIAPAAAGkAAAAIAAANIAAAASqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqg==',\n  ogg: 'data:audio/ogg;base64,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',\n};\n","/* global br */\nimport { isChrome, isFirefox } from '../../util/browserSniffing.js';\nimport { isAndroid } from './utils.js';\nimport { promisifyEvent, sleep } from '../../BookReader/utils.js';\nimport AbstractTTSEngine from './AbstractTTSEngine.js';\n/** @typedef {import(\"./AbstractTTSEngine.js\").PageChunk} PageChunk */\n/** @typedef {import(\"./AbstractTTSEngine.js\").AbstractTTSSound} AbstractTTSSound */\n/** @typedef {import(\"./AbstractTTSEngine.js\").TTSEngineOptions} TTSEngineOptions */\n\n/**\n * @extends AbstractTTSEngine\n * TTS using Web Speech APIs\n **/\nexport default class WebTTSEngine extends AbstractTTSEngine {\n  static isSupported() {\n    return typeof(window.speechSynthesis) !== 'undefined' && !/samsungbrowser/i.test(navigator.userAgent);\n  }\n\n  /** @param {TTSEngineOptions} options */\n  constructor(options) {\n    super(options);\n\n    // SAFARI doesn't have addEventListener on speechSynthesis\n    if (speechSynthesis.addEventListener) {\n      speechSynthesis.addEventListener('voiceschanged', () => this.events.trigger('voiceschanged'));\n    }\n  }\n\n  /** @override */\n  start(leafIndex, numLeafs) {\n    // Need to run in this function to capture user intent to start playing audio\n    if ('mediaSession' in navigator) {\n      const audio = new Audio(SILENCE_6S_MP3);\n      audio.loop = true;\n\n      this.events.on('pause', () => audio.pause());\n      this.events.on('resume', () => audio.play());\n      // apparently this is what you need to do to make the media session notification go away\n      // See https://developers.google.com/web/updates/2017/02/media-session#implementation_notes\n      this.events.on('stop', () => audio.src = '');\n      audio.play().then(() => {\n        navigator.mediaSession.metadata = new MediaMetadata({\n          title: br.bookTitle,\n          artist: br.options.metadata.filter(m => m.label == 'Author').map(m => m.value)[0],\n          // album: 'The Ultimate Collection (Remastered)',\n          artwork: [\n            { src: br.options.thumbnail, type: 'image/jpg' },\n          ],\n        });\n\n        navigator.mediaSession.setActionHandler('play', () => {\n          audio.play();\n          this.resume();\n        });\n        navigator.mediaSession.setActionHandler('pause', () => {\n          audio.pause();\n          this.pause();\n        });\n\n        // navigator.mediaSession.setActionHandler('seekbackward', () => this.jumpBackward());\n        // navigator.mediaSession.setActionHandler('seekforward', () => this.jumpForward());\n        // Some devices only support the previoustrack/nexttrack (e.g. Win10), so show those.\n        // Android devices do support the seek actions, but we don't want to show both buttons\n        // and have them do the same thing.\n        navigator.mediaSession.setActionHandler('previoustrack', () => this.jumpBackward());\n        navigator.mediaSession.setActionHandler('nexttrack', () => this.jumpForward());\n      });\n    }\n\n    return super.start(leafIndex, numLeafs);\n  }\n\n  /** @override */\n  getVoices() {\n    const voices = speechSynthesis.getVoices();\n    if (voices.filter(v => v.default).length != 1) {\n      // iOS bug where the default system voice is sometimes\n      // missing from the list\n      voices.unshift({\n        voiceURI: 'bookreader.SystemDefault',\n        name: 'System Default',\n        // Not necessarily true, but very likely\n        lang: navigator.language,\n        default: true,\n        localService: true,\n      });\n    }\n    return voices;\n  }\n\n  /** @override */\n  createSound(chunk) {\n    return new WebTTSSound(chunk.text);\n  }\n}\n\n/** @extends AbstractTTSSound */\nexport class WebTTSSound {\n  /** @param {string} text **/\n  constructor(text) {\n    this.text = text;\n    this.loaded = false;\n    this.paused = false;\n    this.started = false;\n    /** Whether the audio was stopped with a .stop() call */\n    this.stopped = false;\n    this.rate = 1;\n\n    /** @type {SpeechSynthesisUtterance} */\n    this.utterance = null;\n\n    /** @type {SpeechSynthesisVoice} */\n    this.voice = null;\n\n    this._lastEvents = {\n      /** @type {SpeechSynthesisEvent} */\n      pause: null,\n      /** @type {SpeechSynthesisEvent} */\n      boundary: null,\n      /** @type {SpeechSynthesisEvent} */\n      start: null,\n    };\n\n    /** Store where we are in the text. Only works on some browsers. */\n    this._charIndex = 0;\n\n    /** @type {Function} resolve function called when playback finished */\n    this._finishResolver = null;\n\n    /** @type {Promise} promise resolved by _finishResolver */\n    this._finishPromise = null;\n  }\n\n  /** @override **/\n  load(onload) {\n    this.loaded = false;\n    this.started = false;\n\n    this.utterance = new SpeechSynthesisUtterance(this.text.slice(this._charIndex));\n    // iOS bug where the default system voice is sometimes\n    // missing from the list\n    if (this.voice?.voiceURI !== 'bookreader.SystemDefault') {\n      this.utterance.voice = this.voice;\n    }\n    // Need to also set lang (for some reason); won't set voice on Chrome@Android otherwise\n    if (this.voice) this.utterance.lang = this.voice.lang;\n    this.utterance.rate = this.rate;\n\n    // Useful for debugging things\n    if (location.toString().indexOf('_debugReadAloud=true') != -1) {\n      this.utterance.addEventListener('pause', () => console.log('pause'));\n      this.utterance.addEventListener('resume', () => console.log('resume'));\n      this.utterance.addEventListener('start', () => console.log('start'));\n      this.utterance.addEventListener('end', () => console.log('end'));\n      this.utterance.addEventListener('error', () => console.log('error'));\n      this.utterance.addEventListener('boundary', () => console.log('boundary'));\n      this.utterance.addEventListener('mark', () => console.log('mark'));\n      this.utterance.addEventListener('finish', () => console.log('finish'));\n    }\n\n    // Keep track of the speech synthesis events that come in; they have useful info\n    // about progress (like charIndex)\n    this.utterance.addEventListener('start', ev => this._lastEvents.start = ev);\n    this.utterance.addEventListener('boundary', ev => this._lastEvents.boundary = ev);\n    this.utterance.addEventListener('pause', ev => this._lastEvents.pause = ev);\n\n    // Update our state\n    this.utterance.addEventListener('start', () => {\n      this.started = true;\n      this.stopped = false;\n      this.paused = false;\n    });\n    this.utterance.addEventListener('pause', () => this.paused = true);\n    this.utterance.addEventListener('resume', () => this.paused = false);\n    this.utterance.addEventListener('end', ev => {\n      if (!this.paused && !this.stopped) {\n        // Trigger a new event, finish, which only fires when audio fully completed\n        this.utterance.dispatchEvent(new CustomEvent('finish', ev));\n      }\n    });\n    this.loaded = true;\n    onload && onload();\n  }\n\n  /**\n   * Run whenever properties have changed. Tries to restart in the same spot it\n   * left off.\n   * @return {Promise<void>}\n   */\n  async reload() {\n    // We'll restore the pause state, so copy it here\n    const wasPaused = this.paused;\n    // Use recent event to determine where we'll restart from\n    // Browser support for this is mixed, but it degrades to restarting the chunk\n    // and that's ok\n    const recentEvent = this._lastEvents.boundary || this._lastEvents.pause;\n    if (recentEvent) {\n      this._charIndex = this.text.indexOf(recentEvent.target.text) + recentEvent.charIndex;\n    }\n\n    // We can't modify the utterance object, so we have to make a new one\n    await this.stop();\n    this.load();\n    // Instead of playing and immediately pausing, we don't start playing. Note\n    // this is a requirement because pause doesn't work consistently across\n    // browsers.\n    if (!wasPaused) this.play();\n  }\n\n  play() {\n    this._finishPromise = this._finishPromise || new Promise(res => this._finishResolver = res);\n    this.utterance.addEventListener('finish', this._finishResolver);\n\n    // clear the queue\n    speechSynthesis.cancel();\n    // reset pause state\n    speechSynthesis.resume();\n    // Speak\n    speechSynthesis.speak(this.utterance);\n\n    const isLocalVoice = this.utterance.voice && this.utterance.voice.localService;\n    if (isChrome() && !isLocalVoice) this._chromePausingBugFix();\n\n    return this._finishPromise;\n  }\n\n  /** @return {Promise} */\n  stop() {\n    // 'end' won't fire if already stopped\n    let endPromise = Promise.resolve();\n    if (!this.stopped) {\n      endPromise = Promise.race([\n        promisifyEvent(this.utterance, 'end'),\n        // Safari triggers an error when you call cancel mid-sound\n        promisifyEvent(this.utterance, 'error'),\n      ]);\n    }\n    this.stopped = true;\n    speechSynthesis.cancel();\n    return endPromise;\n  }\n\n  async finish() {\n    await this.stop();\n    this.utterance.dispatchEvent(new Event('finish'));\n  }\n\n  /**\n   * @override\n   * Will fire a pause event unless already paused\n   **/\n  async pause() {\n    if (this.paused) return;\n\n    const pausePromise = promisifyEvent(this.utterance, 'pause');\n    speechSynthesis.pause();\n\n    // There are a few awful browser cases:\n    // 1. Pause works and fires\n    // 2. Pause doesn't work and doesn't fire\n    // 3. Pause works but doesn't fire\n    const pauseMightNotWork = (isFirefox() && isAndroid());\n    const pauseMightNotFire = isChrome() || pauseMightNotWork;\n\n    if (pauseMightNotFire) {\n      // wait for it just in case\n      const timeoutPromise = sleep(100).then(() => 'timeout');\n      const result = await Promise.race([pausePromise, timeoutPromise]);\n      // We got our pause event; nothing to do!\n      if (result != 'timeout') return;\n\n      this.utterance.dispatchEvent(new CustomEvent('pause', this._lastEvents.start));\n\n      // if pause might not work, then we'll stop entirely and restart later\n      if (pauseMightNotWork) this.stop();\n    }\n  }\n\n  async resume() {\n    if (!this.started) {\n      this.play();\n      return;\n    }\n\n    if (!this.paused) return;\n\n    // Browser cases:\n    // 1. Resume works + fires\n    // 2. Resume works + doesn't fire (Chrome Desktop)\n    // 3. Resume doesn't work + doesn't fire (Chrome/FF Android)\n    const resumeMightNotWork = (isChrome() && isAndroid()) || (isFirefox() && isAndroid());\n    const resumeMightNotFire = isChrome() || resumeMightNotWork;\n\n    // Try resume\n    const resumePromise = promisifyEvent(this.utterance, 'resume');\n    speechSynthesis.resume();\n\n    if (resumeMightNotFire) {\n      const result = await Promise.race([resumePromise, sleep(100).then(() => 'timeout')]);\n\n      if (result != 'timeout') return;\n\n      this.utterance.dispatchEvent(new CustomEvent('resume', {}));\n      if (resumeMightNotWork) {\n        await this.reload();\n        this.play();\n      }\n    }\n  }\n\n  setPlaybackRate(rate) {\n    this.rate = rate;\n    this.reload();\n  }\n\n  /** @param {SpeechSynthesisVoice} voice */\n  setVoice(voice) {\n    this.voice = voice;\n    this.reload();\n  }\n  /**\n   * @private\n   * Chrome has a bug where it only plays 15 seconds of TTS and then\n   * suddenly stops (see https://bugs.chromium.org/p/chromium/issues/detail?id=679437 )\n   * We avoid this (as described here: https://bugs.chromium.org/p/chromium/issues/detail?id=679437#c15 )\n   * by pausing after 14 seconds and ~instantly resuming.\n   */\n  async _chromePausingBugFix() {\n    const timeoutPromise = sleep(14000).then(() => 'timeout');\n    const pausePromise = promisifyEvent(this.utterance, 'pause').then(() => 'paused');\n    const endPromise = promisifyEvent(this.utterance, 'end').then(() => 'ended');\n    const result = await Promise.race([timeoutPromise, pausePromise, endPromise]);\n    if (location.toString().indexOf('_debugReadAloud=true') != -1) {\n      console.log(`CHROME-PAUSE-HACK: ${result}`);\n    }\n    switch (result) {\n    case 'ended':\n      // audio was stopped/finished; nothing to do\n      break;\n    case 'paused':\n      // audio was paused; wait for resume\n      // Chrome won't let you resume the audio if 14s have passed 🤷‍\n      // We could do the same as before (but resume+pause instead of pause+resume),\n      // but that means we'd _constantly_ be running in the background. So in that\n      // case, let's just restart the chunk\n      await Promise.race([\n        promisifyEvent(this.utterance, 'resume'),\n        sleep(14000).then(() => 'timeout'),\n      ]);\n      result == 'timeout' ? this.reload() : this._chromePausingBugFix();\n      break;\n    case 'timeout':\n      // We hit Chrome's secret cut off time. Pause/resume\n      // to be able to keep TTS-ing\n      speechSynthesis.pause();\n      await sleep(25);\n      speechSynthesis.resume();\n      this._chromePausingBugFix();\n      break;\n    }\n  }\n}\n\n/**\n * According to https://developers.google.com/web/updates/2017/02/media-session#implementation_notes , it needs to be at least 5 seconds\n * long to allow usage of the media sessions api\n */\nconst SILENCE_6S_MP3 = 'data:audio/mp3;base64,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';\n","export const en = {\n  advance: 'Advance 10 seconds',\n  play: 'Play',\n  playbackSpeed: 'Playback speed',\n  readAloud: 'Read this book aloud',\n  review: 'Review 10 seconds',\n};\n\nexport const es = {\n  advance: 'Avance 10 segundos',\n  play: 'Jugar',\n  playbackSpeed: 'Velocidad de reproducción',\n  readAloud: 'Lee este libro en voz alta',\n  review: 'Revisar 10 segundos',\n};\n","// @ts-check\n\nimport FestivalTTSEngine from './FestivalTTSEngine.js';\nimport WebTTSEngine from './WebTTSEngine.js';\nimport { toISO6391, approximateWordCount } from './utils.js';\nimport { en as tooltips } from './tooltip_dict.js';\nimport { renderBoxesInPageContainerLayer } from '../../BookReader/PageContainer.js';\nimport { BookReaderPlugin } from '../../BookReaderPlugin.js';\nimport { applyVariables } from '../../util/strings.js';\n/** @typedef {import('./PageChunk.js').default} PageChunk */\n/** @typedef {import(\"./AbstractTTSEngine.js\").default} AbstractTTSEngine */\n\nconst BookReader = /** @type {typeof import('../../BookReader').default} */(window.BookReader);\n\n/**\n * Plugin for Text to Speech in BookReader\n */\nexport class TtsPlugin extends BookReaderPlugin {\n  options = {\n    enabled: true,\n    /**\n     * @type {import('@/src/util/strings.js').StringWithVars}\n     * The URL where to get PageChunk objects for a given page. Expects a var `pageIndex`\n     **/\n    pageChunkUrl: 'https://{{server}}/BookReader/BookReaderGetTextWrapper.php?path={{bookPath|urlencode}}_djvu.xml&page={{pageIndex}}&callback=false',\n    /**\n     * @type {import('@/src/util/strings.js').StringWithVars}\n     * The URL for converting text to audio if the web SpeechSynthesis API is not supported.\n     * Provided variables:\n     *  - `text` -- the text to convert to audio\n     *  - `format` -- the format of the audio, 'mp3' or 'ogg';\n     */\n    remoteTtsUrl: 'https://{{server}}/BookReader/BookReaderGetTTS.php?string={{text|urlencode}}&format={{format}}',\n  }\n\n  /**\n   * @override\n   * @param {Partial<TtsPlugin['options']>} options\n   **/\n  setup(options) {\n    super.setup(Object.assign({\n      // @deprecated support options specified in global options\n      server: this.br.options.server,\n      bookPath: this.br.options.bookPath,\n    }, options));\n\n    if (!this.options.enabled) return;\n\n    /** @type { {[pageIndex: number]: Array<{ l: number, r: number, t: number, b: number }>} } */\n    this._ttsBoxesByIndex = {};\n\n    let TTSEngine = WebTTSEngine.isSupported() ? WebTTSEngine :\n      FestivalTTSEngine.isSupported() ? FestivalTTSEngine :\n        null;\n\n    if (/_forceTTSEngine=(festival|web)/.test(location.toString())) {\n      const engineName = location.toString().match(/_forceTTSEngine=(festival|web)/)[1];\n      TTSEngine = { festival: FestivalTTSEngine, web: WebTTSEngine }[engineName];\n    }\n\n    if (TTSEngine) {\n      /** @type {AbstractTTSEngine} */\n      this.ttsEngine = new TTSEngine({\n        pageChunkUrl: applyVariables(this.options.pageChunkUrl, this.br.options.vars),\n        bookLanguage: toISO6391(this.br.options.bookLanguage),\n        onLoadingStart: this.br.showProgressPopup.bind(this.br, 'Loading audio...'),\n        onLoadingComplete: this.br.removeProgressPopup.bind(this.br),\n        onDone: this.stop.bind(this),\n        beforeChunkPlay: this.beforeChunkPlay.bind(this),\n        afterChunkPlay: this.sendChunkFinishedAnalyticsEvent.bind(this),\n        ...(TTSEngine === FestivalTTSEngine ? {\n          festivalUrl: applyVariables(this.options.remoteTtsUrl, this.br.options.vars),\n        } : {}),\n      });\n    }\n  }\n\n  /** @override */\n  init() {\n    if (!this.options.enabled) return;\n\n    this.br.bind(BookReader.eventNames.PostInit, () => {\n      this.br.$('.BRicon.read').click(() => {\n        this.toggle();\n        return false;\n      });\n      if (this.ttsEngine) {\n        this.ttsEngine.init();\n        if (/[?&]_autoReadAloud=show/.test(location.toString())) {\n          this.start(false); // false flag is to initiate read aloud controls\n        }\n      }\n    });\n\n    // This is fired when the hash changes by one of the other plugins!\n    // i.e. it will fire every time the page changes -_-\n    // this.br.bind(BookReader.eventNames.stop, function(e, br) {\n    //     this.ttsStop();\n    // }.bind(this));\n  }\n\n  /**\n   * @override\n   * @param {import (\"@/src/BookReader/PageContainer.js\").PageContainer} pageContainer\n   */\n  _configurePageContainer(pageContainer) {\n    if (this.options.enabled && pageContainer.page && pageContainer.page.index in this._ttsBoxesByIndex) {\n      const pageIndex = pageContainer.page.index;\n      renderBoxesInPageContainerLayer('ttsHiliteLayer', this._ttsBoxesByIndex[pageIndex], pageContainer.page, pageContainer.$container[0]);\n    }\n  }\n\n  /**\n   * @override\n   * @param {JQuery<HTMLElement>} $navBar\n   */\n  extendNavBar($navBar) {\n    if (!this.options.enabled || !this.ttsEngine) return;\n\n    this.br.refs.$BRReadAloudToolbar = $(`\n      <ul class=\"read-aloud\">\n        <li>\n          <select class=\"playback-speed\" name=\"playback-speed\" title=\"${tooltips.playbackSpeed}\">\n            <option value=\"0.25\">0.25x</option>\n            <option value=\"0.5\">0.5x</option>\n            <option value=\"0.75\">0.75x</option>\n            <option value=\"1.0\" selected>1.0x</option>\n            <option value=\"1.25\">1.25x</option>\n            <option value=\"1.5\">1.5x</option>\n            <option value=\"1.75\">1.75x</option>\n            <option value=\"2\">2x</option>\n          </select>\n        </li>\n        <li>\n          <button type=\"button\" name=\"review\" title=\"${tooltips.review}\">\n            <div class=\"icon icon-review\"></div>\n          </button>\n        </li>\n        <li>\n          <button type=\"button\" name=\"play\" title=\"${tooltips.play}\">\n            <div class=\"icon icon-play\"></div>\n            <div class=\"icon icon-pause\"></div>\n          </button>\n        </li>\n        <li>\n          <button type=\"button\" name=\"advance\" title=\"${tooltips.advance}\">\n            <div class=\"icon icon-advance\"></div>\n          </button>\n        </li>\n        <li>\n          <select class=\"playback-voices\" name=\"playback-voice\" style=\"display: none\" title=\"Change read aloud voices\">\n          </select>\n        </li>\n      </ul>\n    `);\n\n    $navBar.find('.BRcontrols').prepend(this.br.refs.$BRReadAloudToolbar);\n\n    const renderVoiceOption = (voices) => {\n      return voices.map(voice =>\n        `<option value=\"${voice.voiceURI}\">${voice.lang} - ${voice.name}</option>`).join('');\n    };\n\n    const voiceSortOrder = (a,b) => `${a.lang} - ${a.name}`.localeCompare(`${b.lang} - ${b.name}`);\n\n    const renderVoicesMenu = (voicesMenu) => {\n      voicesMenu.empty();\n      const bookLanguage = this.ttsEngine.opts.bookLanguage;\n      const bookLanguages = this.ttsEngine.getVoices().filter(v => v.lang.startsWith(bookLanguage)).sort(voiceSortOrder);\n      const otherLanguages = this.ttsEngine.getVoices().filter(v => !v.lang.startsWith(bookLanguage)).sort(voiceSortOrder);\n\n      if (this.ttsEngine.getVoices().length > 1) {\n        voicesMenu.append($(`<optgroup label=\"Book Language (${bookLanguage})\"> ${renderVoiceOption(bookLanguages)} </optgroup>`));\n        voicesMenu.append($(`<optgroup label=\"Other Languages\"> ${renderVoiceOption(otherLanguages)} </optgroup>`));\n\n        voicesMenu.val(this.ttsEngine.voice.voiceURI);\n        voicesMenu.show();\n      } else {\n        voicesMenu.hide();\n      }\n    };\n\n    const voicesMenu = this.br.refs.$BRReadAloudToolbar.find('[name=playback-voice]');\n    renderVoicesMenu(voicesMenu);\n    voicesMenu.on(\"change\", ev => this.ttsEngine.setVoice(voicesMenu.val()));\n    this.ttsEngine.events.on('pause resume start', () => this.updateState());\n    this.ttsEngine.events.on('voiceschanged', () => renderVoicesMenu(voicesMenu));\n    this.br.refs.$BRReadAloudToolbar.find('[name=play]').on(\"click\", this.playPause.bind(this));\n    this.br.refs.$BRReadAloudToolbar.find('[name=advance]').on(\"click\", this.jumpForward.bind(this));\n    this.br.refs.$BRReadAloudToolbar.find('[name=review]').on(\"click\", this.jumpBackward.bind(this));\n    const $rateSelector = this.br.refs.$BRReadAloudToolbar.find('select[name=\"playback-speed\"]');\n    $rateSelector.on(\"change\", ev => this.ttsEngine.setPlaybackRate(parseFloat($rateSelector.val())));\n    $(`<li>\n        <button class=\"BRicon read js-tooltip\" title=\"${tooltips.readAloud}\">\n          <div class=\"icon icon-read-aloud\"></div>\n          <span class=\"BRtooltip\">${tooltips.readAloud}</span>\n        </button>\n      </li>`).insertBefore($navBar.find('.BRcontrols .BRicon.zoom_out').closest('li'));\n  }\n\n  toggle() {\n    this.br._plugins.autoplay?.stop();\n    if (this.ttsEngine.playing) {\n      this.stop();\n    } else {\n      this.start();\n    }\n  }\n\n  start(startTTSEngine = true) {\n    if (this.br.constModeThumb == this.br.mode)\n      this.br.switchMode(this.br.constMode1up);\n\n    this.br.refs.$BRReadAloudToolbar.addClass('visible');\n    this.br.$('.BRicon.read').addClass('unread active');\n    this.sendAnalyticsEvent('Start');\n    if (startTTSEngine)\n      this.ttsEngine.start(this.br.currentIndex(), this.br.book.getNumLeafs());\n  }\n\n  jumpForward() {\n    if (this.ttsEngine.paused) {\n      this.ttsEngine.resume();\n    }\n    this.ttsEngine.jumpForward();\n  }\n\n  jumpBackward() {\n    if (this.ttsEngine.paused) {\n      this.ttsEngine.resume();\n    }\n    this.ttsEngine.jumpBackward();\n  }\n\n  updateState() {\n    const isPlaying = !(this.ttsEngine.paused || !this.ttsEngine.playing);\n    this.br.$('.read-aloud [name=play]').toggleClass('playing', isPlaying);\n  }\n\n  playPause() {\n    if (!this.ttsEngine.playing) {\n      this.toggle();\n    } else {\n      this.ttsEngine.togglePlayPause();\n      this.updateState();\n    }\n  }\n\n\n  stop() {\n    this.br.refs.$BRReadAloudToolbar.removeClass('visible');\n    this.br.$('.BRicon.read').removeClass('unread active');\n    this.sendAnalyticsEvent('Stop');\n    this.ttsEngine.stop();\n    this.removeHilites();\n    this.br.removeProgressPopup();\n  }\n\n  /**\n   * @param {PageChunk} chunk\n   * Returns once the flip is done\n   */\n  async beforeChunkPlay(chunk) {\n    await this.maybeFlipToIndex(chunk.leafIndex);\n    this.highlightChunk(chunk);\n    this.scrollToChunk(chunk);\n  }\n\n  /**\n   * @param {PageChunk} chunk\n   */\n  sendChunkFinishedAnalyticsEvent(chunk) {\n    this.sendAnalyticsEvent('ChunkFinished-Words', approximateWordCount(chunk.text));\n  }\n\n  /**\n   * Flip the page if the provided leaf index is not visible\n   * @param {Number} leafIndex\n   */\n  async maybeFlipToIndex(leafIndex) {\n    if (this.br.constMode2up != this.br.mode) {\n      this.br.jumpToIndex(leafIndex);\n    } else {\n      await this.br._modes.mode2Up.mode2UpLit.jumpToIndex(leafIndex);\n    }\n  }\n\n  /**\n   * @param {PageChunk} chunk\n   */\n  highlightChunk(chunk) {\n    // The poorly-named variable leafIndex\n    const pageIndex = chunk.leafIndex;\n\n    this.removeHilites();\n\n    // group by index; currently only possible to have chunks on one page :/\n    this._ttsBoxesByIndex = {\n      [pageIndex]: chunk.lineRects.map(([l, b, r, t]) => ({l, r, b, t})),\n    };\n\n    // update any already created pages\n    for (const [pageIndexString, boxes] of Object.entries(this._ttsBoxesByIndex)) {\n      const pageIndex = parseFloat(pageIndexString);\n      const page = this.br.book.getPage(pageIndex);\n      const pageContainers = this.br.getActivePageContainerElementsForIndex(pageIndex);\n      pageContainers.forEach(container => renderBoxesInPageContainerLayer('ttsHiliteLayer', boxes, page, container));\n    }\n  }\n\n  /**\n   * @param {PageChunk} chunk\n   */\n  scrollToChunk(chunk) {\n    // It behaves weird if used in thumb mode\n    if (this.br.constModeThumb == this.br.mode) return;\n\n    $(`.pagediv${chunk.leafIndex} .ttsHiliteLayer rect`).last()?.[0]?.scrollIntoView({\n      // Only vertically center the highlight if we're in 1up or in full screen. In\n      // 2up, if we're not fullscreen, the whole body gets scrolled around to try to\n      // center the highlight 🙄 See:\n      // https://stackoverflow.com/questions/11039885/scrollintoview-causing-the-whole-page-to-move/11041376\n      // Note: nearest doesn't quite work great, because the ReadAloud toolbar is now\n      // full-width, and covers up the last line of the highlight.\n      block: this.br.constMode1up == this.br.mode || this.br.isFullscreenActive ? 'center' : 'nearest',\n      inline: 'center',\n      behavior: 'smooth',\n    });\n  }\n\n  removeHilites() {\n    $(this.br.getActivePageContainerElements()).find('.ttsHiliteLayer').remove();\n    this._ttsBoxesByIndex = {};\n  }\n\n  /**\n   * @private\n   * Send an analytics event with an optional value. Also attaches the book's language.\n   * @param {string} action\n   * @param {number} [value]\n   */\n  sendAnalyticsEvent(action, value) {\n    if (this.br._plugins.archiveAnalytics) {\n      const extraValues = {};\n      const mediaLanguage = this.ttsEngine.opts.bookLanguage;\n      if (mediaLanguage) extraValues.mediaLanguage = mediaLanguage;\n      this.br._plugins.archiveAnalytics.sendEvent('BRReadAloud', action, value, extraValues);\n    }\n  }\n}\n\nBookReader?.registerPlugin('tts', TtsPlugin);\n","/**\n * @typedef {String} StringWithVars\n * A template string with {{foo}} style variables\n * Also supports filters, like {{bookPath|urlencode}} (See APPLY_FILTERS for the\n * supported list of filters)\n **/\n\n/**\n * @param {StringWithVars|String} template\n * @param { {[varName: string]: { toString: () => string} } } vars\n * @param { {[varName: string]: { toString: () => string} } } [overrides]\n * @returns {StringWithVars|string}\n */\nexport function applyVariables(template, vars, overrides = {}, possibleFilters = APPLY_FILTERS) {\n  return template?.replace(/\\{\\{([^}]*?)\\}\\}/g, ($0, $1) => {\n    if (!$1) return $0;\n    /** @type {string} */\n    const expression = $1;\n    const [varName, ...filterNames] = expression.split('|').map(x => x.trim());\n    const defined = varName in overrides || varName in vars;\n\n    // If it's not defined, don't expand it at all\n    if (!defined) return $0;\n\n    const value = varName in overrides ? overrides[varName]\n      : varName in vars ? vars[varName] : null;\n    const filters = filterNames.map(n => possibleFilters[n]);\n    return filters.reduce((acc, cur) => cur(acc), value && value.toString());\n  });\n}\n\n/** @type { {[filterName: String]:( string => string)} } */\nexport const APPLY_FILTERS = {\n  urlencode: encodeURIComponent,\n};\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _default = [['Serbian', 'српски језик', 'sr', 'srp', 'srp'], ['Romanian, Moldavian, Moldovan', 'Română', 'ro', 'ron', 'rum'], ['Sichuan Yi, Nuosu', 'ꆈꌠ꒿ Nuosuhxop', 'ii', 'iii', 'iii'], ['Tahitian', 'Reo Tahiti', 'ty', 'tah', 'tah'], ['Tagalog', 'Wikang Tagalog', 'tl', 'tgl', 'tgl'], ['Yiddish', 'ייִדיש', 'yi', 'yid', 'yid'], ['Akan', 'Akan', 'ak', 'aka', 'aka'], ['Malay', 'Bahasa Melayu, بهاس ملايو‎', 'ms', 'msa', 'may'], ['Arabic', 'العربية', 'ar', 'ara', 'ara'], ['Norwegian', 'Norsk', 'no', 'nor', 'nor'], ['Ojibwa', 'ᐊᓂᔑᓈᐯᒧᐎᓐ', 'oj', 'oji', 'oji'], ['Fulah', 'Fulfulde, Pulaar, Pular', 'ff', 'ful', 'ful'], ['Persian', 'فارسی', 'fa', 'fas', 'per'], ['Albanian', 'Shqip', 'sq', 'sqi', 'alb'], ['Aymara', 'aymar aru', 'ay', 'aym', 'aym'], ['Azerbaijani', 'azərbaycan dili', 'az', 'aze', 'aze'], ['Chinese', '中文 (Zhōngwén), 汉语, 漢語', 'zh', 'zho', 'chi'], ['Cree', 'ᓀᐦᐃᔭᐍᐏᐣ', 'cr', 'cre', 'cre'], ['Estonian', 'eesti, eesti keel', 'et', 'est', 'est'], ['Guaraní', 'Avañe\\'ẽ', 'gn', 'grn', 'grn'], ['Inupiaq', 'Iñupiaq, Iñupiatun', 'ik', 'ipk', 'ipk'], ['Inuktitut', 'ᐃᓄᒃᑎᑐᑦ', 'iu', 'iku', 'iku'], ['Kanuri', 'Kanuri', 'kr', 'kau', 'kau'], ['Komi', 'коми кыв', 'kv', 'kom', 'kom'], ['Kongo', 'Kikongo', 'kg', 'kon', 'kon'], ['Kurdish', 'Kurdî, کوردی‎', 'ku', 'kur', 'kur'], ['Latvian', 'latviešu valoda', 'lv', 'lav', 'lav'], ['Malagasy', 'fiteny malagasy', 'mg', 'mlg', 'mlg'], ['Mongolian', 'Монгол хэл', 'mn', 'mon', 'mon'], ['Oromo', 'Afaan Oromoo', 'om', 'orm', 'orm'], ['Pashto, Pushto', 'پښتو', 'ps', 'pus', 'pus'], ['Quechua', 'Runa Simi, Kichwa', 'qu', 'que', 'que'], ['Sardinian', 'sardu', 'sc', 'srd', 'srd'], ['Swahili', 'Kiswahili', 'sw', 'swa', 'swa'], ['Uzbek', 'Oʻzbek, Ўзбек, أۇزبېك‎', 'uz', 'uzb', 'uzb'], ['Zhuang, Chuang', 'Saɯ cueŋƅ, Saw cuengh', 'za', 'zha', 'zha'], ['Bislama', 'Bislama', 'bi', 'bis', 'bis'], ['Norwegian Bokmål', 'Norsk Bokmål', 'nb', 'nob', 'nob'], ['Norwegian Nynorsk', 'Norsk Nynorsk', 'nn', 'nno', 'nno'], ['Indonesian', 'Bahasa Indonesia', 'id', 'ind', 'ind'], ['Twi', 'Twi', 'tw', 'twi', 'twi'], ['Esperanto', 'Esperanto', 'eo', 'epo', 'epo'], ['Interlingua', 'Interlingua', 'ia', 'ina', 'ina'], ['Interlingue', 'Originally called Occidental; then Interlingue after WWII', 'ie', 'ile', 'ile'], ['Ido', 'Ido', 'io', 'ido', 'ido'], ['Volapük', 'Volapük', 'vo', 'vol', 'vol'], ['Bihari languages', 'भोजपुरी', 'bh', 'bih', 'bih'], ['Hebrew (modern)', 'עברית', 'he', 'heb', 'heb'], ['Sanskrit', 'संस्कृतम्', 'sa', 'san', 'san'], ['Church Slavic, Church Slavonic, Old Church Slavonic, Old Slavonic, Old Bulgarian', 'ѩзыкъ словѣньскъ', 'cu', 'chu', 'chu'], ['Pali', 'पाऴि', 'pi', 'pli', 'pli'], ['Avestan', 'avesta', 'ae', 'ave', 'ave'], ['Latin', 'latine, lingua latina', 'la', 'lat', 'lat'], ['Armenian', 'Հայերեն', 'hy', 'hye', 'arm'], ['Swati', 'SiSwati', 'ss', 'ssw', 'ssw'], ['Tibetan', 'བོད་ཡིག', 'bo', 'bod', 'tib'], ['South Ndebele', 'isiNdebele', 'nr', 'nbl', 'nbl'], ['Slovene', 'Slovenski Jezik, Slovenščina', 'sl', 'slv', 'slv'], ['Oriya', 'ଓଡ଼ିଆ', 'or', 'ori', 'ori'], ['North Ndebele', 'isiNdebele', 'nd', 'nde', 'nde'], ['Nauru', 'Dorerin Naoero', 'na', 'nau', 'nau'], ['Maori', 'te reo Māori', 'mi', 'mri', 'mao'], ['Marathi', 'मराठी', 'mr', 'mar', 'mar'], ['Luba-Katanga', 'Kiluba', 'lu', 'lub', 'lub'], ['Rundi', 'Ikirundi', 'rn', 'run', 'run'], ['Central Khmer', 'ខ្មែរ, ខេមរភាសា, ភាសាខ្មែរ', 'km', 'khm', 'khm'], ['Western Frisian', 'Frysk', 'fy', 'fry', 'fry'], ['Bengali', 'বাংলা', 'bn', 'ben', 'ben'], ['Avaric', 'авар мацӀ, магӀарул мацӀ', 'av', 'ava', 'ava'], ['Abkhazian', 'аҧсуа бызшәа, аҧсшәа', 'ab', 'abk', 'abk'], ['Afar', 'Afaraf', 'aa', 'aar', 'aar'], ['Afrikaans', 'Afrikaans', 'af', 'afr', 'afr'], ['Amharic', 'አማርኛ', 'am', 'amh', 'amh'], ['Aragonese', 'aragonés', 'an', 'arg', 'arg'], ['Assamese', 'অসমীয়া', 'as', 'asm', 'asm'], ['Bambara', 'bamanankan', 'bm', 'bam', 'bam'], ['Bashkir', 'башҡорт теле', 'ba', 'bak', 'bak'], ['Basque', 'euskara, euskera', 'eu', 'eus', 'baq'], ['Belarusian', 'беларуская мова', 'be', 'bel', 'bel'], ['Bosnian', 'bosanski jezik', 'bs', 'bos', 'bos'], ['Breton', 'brezhoneg', 'br', 'bre', 'bre'], ['Bulgarian', 'български език', 'bg', 'bul', 'bul'], ['Burmese', 'ဗမာစာ', 'my', 'mya', 'bur'], ['Catalan, Valencian', 'català, valencià', 'ca', 'cat', 'cat'], ['Chamorro', 'Chamoru', 'ch', 'cha', 'cha'], ['Chechen', 'нохчийн мотт', 'ce', 'che', 'che'], ['Chichewa, Chewa, Nyanja', 'chiCheŵa, chinyanja', 'ny', 'nya', 'nya'], ['Chuvash', 'чӑваш чӗлхи', 'cv', 'chv', 'chv'], ['Cornish', 'Kernewek', 'kw', 'cor', 'cor'], ['Corsican', 'corsu, lingua corsa', 'co', 'cos', 'cos'], ['Croatian', 'hrvatski jezik', 'hr', 'hrv', 'hrv'], ['Czech', 'čeština, český jazyk', 'cs', 'ces', 'cze'], ['Danish', 'dansk', 'da', 'dan', 'dan'], ['Divehi, Dhivehi, Maldivian', 'ދިވެހި', 'dv', 'div', 'div'], ['Dutch, Flemish', 'Nederlands, Vlaams', 'nl', 'nld', 'dut'], ['Dzongkha', 'རྫོང་ཁ', 'dz', 'dzo', 'dzo'], ['English', 'English', 'en', 'eng', 'eng'], ['Ewe', 'Eʋegbe', 'ee', 'ewe', 'ewe'], ['Faroese', 'føroyskt', 'fo', 'fao', 'fao'], ['Fijian', 'vosa Vakaviti', 'fj', 'fij', 'fij'], ['Finnish', 'suomi, suomen kieli', 'fi', 'fin', 'fin'], ['French', 'français, langue française', 'fr', 'fra', 'fre'], ['Galician', 'Galego', 'gl', 'glg', 'glg'], ['Georgian', 'ქართული', 'ka', 'kat', 'geo'], ['German', 'Deutsch', 'de', 'deu', 'ger'], ['Greek (modern)', 'ελληνικά', 'el', 'ell', 'gre'], ['Gujarati', 'ગુજરાતી', 'gu', 'guj', 'guj'], ['Haitian, Haitian Creole', 'Kreyòl ayisyen', 'ht', 'hat', 'hat'], ['Hausa', '(Hausa) هَوُسَ', 'ha', 'hau', 'hau'], ['Herero', 'Otjiherero', 'hz', 'her', 'her'], ['Hindi', 'हिन्दी, हिंदी', 'hi', 'hin', 'hin'], ['Hiri Motu', 'Hiri Motu', 'ho', 'hmo', 'hmo'], ['Hungarian', 'magyar', 'hu', 'hun', 'hun'], ['Irish', 'Gaeilge', 'ga', 'gle', 'gle'], ['Igbo', 'Asụsụ Igbo', 'ig', 'ibo', 'ibo'], ['Icelandic', 'Íslenska', 'is', 'isl', 'ice'], ['Italian', 'Italiano', 'it', 'ita', 'ita'], ['Japanese', '日本語 (にほんご)', 'ja', 'jpn', 'jpn'], ['Javanese', 'ꦧꦱꦗꦮ, Basa Jawa', 'jv', 'jav', 'jav'], ['Kalaallisut, Greenlandic', 'kalaallisut, kalaallit oqaasii', 'kl', 'kal', 'kal'], ['Kannada', 'ಕನ್ನಡ', 'kn', 'kan', 'kan'], ['Kashmiri', 'कश्मीरी, كشميري‎', 'ks', 'kas', 'kas'], ['Kazakh', 'қазақ тілі', 'kk', 'kaz', 'kaz'], ['Kikuyu, Gikuyu', 'Gĩkũyũ', 'ki', 'kik', 'kik'], ['Kinyarwanda', 'Ikinyarwanda', 'rw', 'kin', 'kin'], ['Kirghiz, Kyrgyz', 'Кыргызча, Кыргыз тили', 'ky', 'kir', 'kir'], ['Korean', '한국어', 'ko', 'kor', 'kor'], ['Kuanyama, Kwanyama', 'Kuanyama', 'kj', 'kua', 'kua'], ['Luxembourgish, Letzeburgesch', 'Lëtzebuergesch', 'lb', 'ltz', 'ltz'], ['Ganda', 'Luganda', 'lg', 'lug', 'lug'], ['Limburgan, Limburger, Limburgish', 'Limburgs', 'li', 'lim', 'lim'], ['Lingala', 'Lingála', 'ln', 'lin', 'lin'], ['Lao', 'ພາສາລາວ', 'lo', 'lao', 'lao'], ['Lithuanian', 'lietuvių kalba', 'lt', 'lit', 'lit'], ['Manx', 'Gaelg, Gailck', 'gv', 'glv', 'glv'], ['Macedonian', 'македонски јазик', 'mk', 'mkd', 'mac'], ['Malayalam', 'മലയാളം', 'ml', 'mal', 'mal'], ['Maltese', 'Malti', 'mt', 'mlt', 'mlt'], ['Marshallese', 'Kajin M̧ajeļ', 'mh', 'mah', 'mah'], ['Navajo, Navaho', 'Diné bizaad', 'nv', 'nav', 'nav'], ['Nepali', 'नेपाली', 'ne', 'nep', 'nep'], ['Ndonga', 'Owambo', 'ng', 'ndo', 'ndo'], ['Occitan', 'occitan, lenga d\\'òc', 'oc', 'oci', 'oci'], ['Ossetian, Ossetic', 'ирон æвзаг', 'os', 'oss', 'oss'], ['Panjabi, Punjabi', 'ਪੰਜਾਬੀ', 'pa', 'pan', 'pan'], ['Polish', 'język polski, polszczyzna', 'pl', 'pol', 'pol'], ['Portuguese', 'Português', 'pt', 'por', 'por'], ['Romansh', 'Rumantsch Grischun', 'rm', 'roh', 'roh'], ['Russian', 'русский', 'ru', 'rus', 'rus'], ['Sindhi', 'सिन्धी, سنڌي، سندھی‎', 'sd', 'snd', 'snd'], ['Northern Sami', 'Davvisámegiella', 'se', 'sme', 'sme'], ['Samoan', 'gagana fa\\'a Samoa', 'sm', 'smo', 'smo'], ['Sango', 'yângâ tî sängö', 'sg', 'sag', 'sag'], ['Gaelic, Scottish Gaelic', 'Gàidhlig', 'gd', 'gla', 'gla'], ['Shona', 'chiShona', 'sn', 'sna', 'sna'], ['Sinhala, Sinhalese', 'සිංහල', 'si', 'sin', 'sin'], ['Slovak', 'Slovenčina, Slovenský Jazyk', 'sk', 'slk', 'slo'], ['Somali', 'Soomaaliga, af Soomaali', 'so', 'som', 'som'], ['Southern Sotho', 'Sesotho', 'st', 'sot', 'sot'], ['Spanish, Castilian', 'Español', 'es', 'spa', 'spa'], ['Sundanese', 'Basa Sunda', 'su', 'sun', 'sun'], ['Swedish', 'Svenska', 'sv', 'swe', 'swe'], ['Tamil', 'தமிழ்', 'ta', 'tam', 'tam'], ['Telugu', 'తెలుగు', 'te', 'tel', 'tel'], ['Tajik', 'тоҷикӣ, toçikī, تاجیکی‎', 'tg', 'tgk', 'tgk'], ['Thai', 'ไทย', 'th', 'tha', 'tha'], ['Tigrinya', 'ትግርኛ', 'ti', 'tir', 'tir'], ['Turkmen', 'Türkmen, Түркмен', 'tk', 'tuk', 'tuk'], ['Tswana', 'Setswana', 'tn', 'tsn', 'tsn'], ['Tongan (Tonga Islands)', 'Faka Tonga', 'to', 'ton', 'ton'], ['Turkish', 'Türkçe', 'tr', 'tur', 'tur'], ['Tsonga', 'Xitsonga', 'ts', 'tso', 'tso'], ['Tatar', 'татар теле, tatar tele', 'tt', 'tat', 'tat'], ['Uighur, Uyghur', 'ئۇيغۇرچە‎, Uyghurche', 'ug', 'uig', 'uig'], ['Ukrainian', 'Українська', 'uk', 'ukr', 'ukr'], ['Urdu', 'اردو', 'ur', 'urd', 'urd'], ['Venda', 'Tshivenḓa', 've', 'ven', 'ven'], ['Vietnamese', 'Tiếng Việt', 'vi', 'vie', 'vie'], ['Walloon', 'Walon', 'wa', 'wln', 'wln'], ['Welsh', 'Cymraeg', 'cy', 'cym', 'wel'], ['Wolof', 'Wollof', 'wo', 'wol', 'wol'], ['Xhosa', 'isiXhosa', 'xh', 'xho', 'xho'], ['Yoruba', 'Yorùbá', 'yo', 'yor', 'yor'], ['Zulu', 'isiZulu', 'zu', 'zul', 'zul']];\nexports[\"default\"] = _default;","/*!\n * jQuery Browser Plugin 0.1.0\n * https://github.com/gabceb/jquery-browser-plugin\n *\n * Original jquery-browser code Copyright 2005, 2015 jQuery Foundation, Inc. and other contributors\n * http://jquery.org/license\n *\n * Modifications Copyright 2015 Gabriel Cebrian\n * https://github.com/gabceb\n *\n * Released under the MIT license\n *\n * Date: 05-07-2015\n */\n/*global window: false */\n\n(function (factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define(['jquery'], function ($) {\n      return factory($);\n    });\n  } else if (typeof module === 'object' && typeof module.exports === 'object') {\n    // Node-like environment\n    module.exports = factory(require('jquery'));\n  } else {\n    // Browser globals\n    factory(window.jQuery);\n  }\n}(function(jQuery) {\n  \"use strict\";\n\n  function uaMatch( ua ) {\n    // If an UA is not provided, default to the current browser UA.\n    if ( ua === undefined ) {\n      ua = window.navigator.userAgent;\n    }\n    ua = ua.toLowerCase();\n\n    var match = /(edge)\\/([\\w.]+)/.exec( ua ) ||\n        /(opr)[\\/]([\\w.]+)/.exec( ua ) ||\n        /(chrome)[ \\/]([\\w.]+)/.exec( ua ) ||\n        /(iemobile)[\\/]([\\w.]+)/.exec( ua ) ||\n        /(version)(applewebkit)[ \\/]([\\w.]+).*(safari)[ \\/]([\\w.]+)/.exec( ua ) ||\n        /(webkit)[ \\/]([\\w.]+).*(version)[ \\/]([\\w.]+).*(safari)[ \\/]([\\w.]+)/.exec( ua ) ||\n        /(webkit)[ \\/]([\\w.]+)/.exec( ua ) ||\n        /(opera)(?:.*version|)[ \\/]([\\w.]+)/.exec( ua ) ||\n        /(msie) ([\\w.]+)/.exec( ua ) ||\n        ua.indexOf(\"trident\") >= 0 && /(rv)(?::| )([\\w.]+)/.exec( ua ) ||\n        ua.indexOf(\"compatible\") < 0 && /(mozilla)(?:.*? rv:([\\w.]+)|)/.exec( ua ) ||\n        [];\n\n    var platform_match = /(ipad)/.exec( ua ) ||\n        /(ipod)/.exec( ua ) ||\n        /(windows phone)/.exec( ua ) ||\n        /(iphone)/.exec( ua ) ||\n        /(kindle)/.exec( ua ) ||\n        /(silk)/.exec( ua ) ||\n        /(android)/.exec( ua ) ||\n        /(win)/.exec( ua ) ||\n        /(mac)/.exec( ua ) ||\n        /(linux)/.exec( ua ) ||\n        /(cros)/.exec( ua ) ||\n        /(playbook)/.exec( ua ) ||\n        /(bb)/.exec( ua ) ||\n        /(blackberry)/.exec( ua ) ||\n        [];\n\n    var browser = {},\n        matched = {\n          browser: match[ 5 ] || match[ 3 ] || match[ 1 ] || \"\",\n          version: match[ 2 ] || match[ 4 ] || \"0\",\n          versionNumber: match[ 4 ] || match[ 2 ] || \"0\",\n          platform: platform_match[ 0 ] || \"\"\n        };\n\n    if ( matched.browser ) {\n      browser[ matched.browser ] = true;\n      browser.version = matched.version;\n      browser.versionNumber = parseInt(matched.versionNumber, 10);\n    }\n\n    if ( matched.platform ) {\n      browser[ matched.platform ] = true;\n    }\n\n    // These are all considered mobile platforms, meaning they run a mobile browser\n    if ( browser.android || browser.bb || browser.blackberry || browser.ipad || browser.iphone ||\n      browser.ipod || browser.kindle || browser.playbook || browser.silk || browser[ \"windows phone\" ]) {\n      browser.mobile = true;\n    }\n\n    // These are all considered desktop platforms, meaning they run a desktop browser\n    if ( browser.cros || browser.mac || browser.linux || browser.win ) {\n      browser.desktop = true;\n    }\n\n    // Chrome, Opera 15+ and Safari are webkit based browsers\n    if ( browser.chrome || browser.opr || browser.safari ) {\n      browser.webkit = true;\n    }\n\n    // IE11 has a new token so we will assign it msie to avoid breaking changes\n    if ( browser.rv || browser.iemobile) {\n      var ie = \"msie\";\n\n      matched.browser = ie;\n      browser[ie] = true;\n    }\n\n    // Edge is officially known as Microsoft Edge, so rewrite the key to match\n    if ( browser.edge ) {\n      delete browser.edge;\n      var msedge = \"msedge\";\n\n      matched.browser = msedge;\n      browser[msedge] = true;\n    }\n\n    // Blackberry browsers are marked as Safari on BlackBerry\n    if ( browser.safari && browser.blackberry ) {\n      var blackberry = \"blackberry\";\n\n      matched.browser = blackberry;\n      browser[blackberry] = true;\n    }\n\n    // Playbook browsers are marked as Safari on Playbook\n    if ( browser.safari && browser.playbook ) {\n      var playbook = \"playbook\";\n\n      matched.browser = playbook;\n      browser[playbook] = true;\n    }\n\n    // BB10 is a newer OS version of BlackBerry\n    if ( browser.bb ) {\n      var bb = \"blackberry\";\n\n      matched.browser = bb;\n      browser[bb] = true;\n    }\n\n    // Opera 15+ are identified as opr\n    if ( browser.opr ) {\n      var opera = \"opera\";\n\n      matched.browser = opera;\n      browser[opera] = true;\n    }\n\n    // Stock Android browsers are marked as Safari on Android.\n    if ( browser.safari && browser.android ) {\n      var android = \"android\";\n\n      matched.browser = android;\n      browser[android] = true;\n    }\n\n    // Kindle browsers are marked as Safari on Kindle\n    if ( browser.safari && browser.kindle ) {\n      var kindle = \"kindle\";\n\n      matched.browser = kindle;\n      browser[kindle] = true;\n    }\n\n     // Kindle Silk browsers are marked as Safari on Kindle\n    if ( browser.safari && browser.silk ) {\n      var silk = \"silk\";\n\n      matched.browser = silk;\n      browser[silk] = true;\n    }\n\n    // Assign the name and platform variable\n    browser.name = matched.browser;\n    browser.platform = matched.platform;\n    return browser;\n  }\n\n  // Run the matching process, also assign the function to the returned object\n  // for manual, jQuery-free use if desired\n  window.jQBrowser = uaMatch( window.navigator.userAgent );\n  window.jQBrowser.uaMatch = uaMatch;\n\n  // Only assign to jQuery.browser if jQuery is loaded\n  if ( jQuery ) {\n    jQuery.browser = window.jQBrowser;\n  }\n\n  return window.jQBrowser;\n}));\n","/** @license\r\n *\r\n * SoundManager 2: JavaScript Sound for the Web\r\n * ----------------------------------------------\r\n * http://schillmania.com/projects/soundmanager2/\r\n *\r\n * Copyright (c) 2007, Scott Schiller. All rights reserved.\r\n * Code provided under the BSD License:\r\n * http://schillmania.com/projects/soundmanager2/license.txt\r\n *\r\n * V2.97a.20170601\r\n */\r\n\r\n/**\r\n * About this file\r\n * -------------------------------------------------------------------------------------\r\n * This is the fully-commented source version of the SoundManager 2 API,\r\n * recommended for use during development and testing.\r\n *\r\n * See soundmanager2-nodebug-jsmin.js for an optimized build (~11KB with gzip.)\r\n * http://schillmania.com/projects/soundmanager2/doc/getstarted/#basic-inclusion\r\n * Alternately, serve this file with gzip for 75% compression savings (~30KB over HTTP.)\r\n *\r\n * You may notice <d> and </d> comments in this source; these are delimiters for\r\n * debug blocks which are removed in the -nodebug builds, further optimizing code size.\r\n *\r\n * Also, as you may note: Whoa, reliable cross-platform/device audio support is hard! ;)\r\n */\r\n\r\n(function SM2(window, _undefined) {\r\n\r\n/* global Audio, document, window, navigator, define, module, SM2_DEFER, opera, setTimeout, setInterval, clearTimeout, sm2Debugger */\r\n\r\n'use strict';\r\n\r\nif (!window || !window.document) {\r\n\r\n  // Don't cross the [environment] streams. SM2 expects to be running in a browser, not under node.js etc.\r\n  // Additionally, if a browser somehow manages to fail this test, as Egon said: \"It would be bad.\"\r\n\r\n  throw new Error('SoundManager requires a browser with window and document objects.');\r\n\r\n}\r\n\r\nvar soundManager = null;\r\n\r\n/**\r\n * The SoundManager constructor.\r\n *\r\n * @constructor\r\n * @param {string} smURL Optional: Path to SWF files\r\n * @param {string} smID Optional: The ID to use for the SWF container element\r\n * @this {SoundManager}\r\n * @return {SoundManager} The new SoundManager instance\r\n */\r\n\r\nfunction SoundManager(smURL, smID) {\r\n\r\n  /**\r\n   * soundManager configuration options list\r\n   * defines top-level configuration properties to be applied to the soundManager instance (eg. soundManager.flashVersion)\r\n   * to set these properties, use the setup() method - eg., soundManager.setup({url: '/swf/', flashVersion: 9})\r\n   */\r\n\r\n  this.setupOptions = {\r\n\r\n    url: (smURL || null),             // path (directory) where SoundManager 2 SWFs exist, eg., /path/to/swfs/\r\n    flashVersion: 8,                  // flash build to use (8 or 9.) Some API features require 9.\r\n    debugMode: true,                  // enable debugging output (console.log() with HTML fallback)\r\n    debugFlash: false,                // enable debugging output inside SWF, troubleshoot Flash/browser issues\r\n    useConsole: true,                 // use console.log() if available (otherwise, writes to #soundmanager-debug element)\r\n    consoleOnly: true,                // if console is being used, do not create/write to #soundmanager-debug\r\n    waitForWindowLoad: false,         // force SM2 to wait for window.onload() before trying to call soundManager.onload()\r\n    bgColor: '#ffffff',               // SWF background color. N/A when wmode = 'transparent'\r\n    useHighPerformance: false,        // position:fixed flash movie can help increase js/flash speed, minimize lag\r\n    flashPollingInterval: null,       // msec affecting whileplaying/loading callback frequency. If null, default of 50 msec is used.\r\n    html5PollingInterval: null,       // msec affecting whileplaying() for HTML5 audio, excluding mobile devices. If null, native HTML5 update events are used.\r\n    flashLoadTimeout: 1000,           // msec to wait for flash movie to load before failing (0 = infinity)\r\n    wmode: null,                      // flash rendering mode - null, 'transparent', or 'opaque' (last two allow z-index to work)\r\n    allowScriptAccess: 'always',      // for scripting the SWF (object/embed property), 'always' or 'sameDomain'\r\n    useFlashBlock: false,             // *requires flashblock.css, see demos* - allow recovery from flash blockers. Wait indefinitely and apply timeout CSS to SWF, if applicable.\r\n    useHTML5Audio: true,              // use HTML5 Audio() where API is supported (most Safari, Chrome versions), Firefox (MP3/MP4 support varies.) Ideally, transparent vs. Flash API where possible.\r\n    forceUseGlobalHTML5Audio: false,  // if true, a single Audio() object is used for all sounds - and only one can play at a time.\r\n    ignoreMobileRestrictions: false,  // if true, SM2 will not apply global HTML5 audio rules to mobile UAs. iOS > 7 and WebViews may allow multiple Audio() instances.\r\n    html5Test: /^(probably|maybe)$/i, // HTML5 Audio() format support test. Use /^probably$/i; if you want to be more conservative.\r\n    preferFlash: false,               // overrides useHTML5audio, will use Flash for MP3/MP4/AAC if present. Potential option if HTML5 playback with these formats is quirky.\r\n    noSWFCache: false,                // if true, appends ?ts={date} to break aggressive SWF caching.\r\n    idPrefix: 'sound'                 // if an id is not provided to createSound(), this prefix is used for generated IDs - 'sound0', 'sound1' etc.\r\n\r\n  };\r\n\r\n  this.defaultOptions = {\r\n\r\n    /**\r\n     * the default configuration for sound objects made with createSound() and related methods\r\n     * eg., volume, auto-load behaviour and so forth\r\n     */\r\n\r\n    autoLoad: false,        // enable automatic loading (otherwise .load() will be called on demand with .play(), the latter being nicer on bandwidth - if you want to .load yourself, you also can)\r\n    autoPlay: false,        // enable playing of file as soon as possible (much faster if \"stream\" is true)\r\n    from: null,             // position to start playback within a sound (msec), default = beginning\r\n    loops: 1,               // how many times to repeat the sound (position will wrap around to 0, setPosition() will break out of loop when >0)\r\n    onid3: null,            // callback function for \"ID3 data is added/available\"\r\n    onerror: null,          // callback function for \"load failed\" (or, playback/network/decode error under HTML5.)\r\n    onload: null,           // callback function for \"load finished\"\r\n    whileloading: null,     // callback function for \"download progress update\" (X of Y bytes received)\r\n    onplay: null,           // callback for \"play\" start\r\n    onpause: null,          // callback for \"pause\"\r\n    onresume: null,         // callback for \"resume\" (pause toggle)\r\n    whileplaying: null,     // callback during play (position update)\r\n    onposition: null,       // object containing times and function callbacks for positions of interest\r\n    onstop: null,           // callback for \"user stop\"\r\n    onfinish: null,         // callback function for \"sound finished playing\"\r\n    multiShot: true,        // let sounds \"restart\" or layer on top of each other when played multiple times, rather than one-shot/one at a time\r\n    multiShotEvents: false, // fire multiple sound events (currently onfinish() only) when multiShot is enabled\r\n    position: null,         // offset (milliseconds) to seek to within loaded sound data.\r\n    pan: 0,                 // \"pan\" settings, left-to-right, -100 to 100\r\n    playbackRate: 1,        // rate at which to play the sound (HTML5-only)\r\n    stream: true,           // allows playing before entire file has loaded (recommended)\r\n    to: null,               // position to end playback within a sound (msec), default = end\r\n    type: null,             // MIME-like hint for file pattern / canPlay() tests, eg. audio/mp3\r\n    usePolicyFile: false,   // enable crossdomain.xml request for audio on remote domains (for ID3/waveform access)\r\n    volume: 100             // self-explanatory. 0-100, the latter being the max.\r\n\r\n  };\r\n\r\n  this.flash9Options = {\r\n\r\n    /**\r\n     * flash 9-only options,\r\n     * merged into defaultOptions if flash 9 is being used\r\n     */\r\n\r\n    onfailure: null,        // callback function for when playing fails (Flash 9, MovieStar + RTMP-only)\r\n    isMovieStar: null,      // \"MovieStar\" MPEG4 audio mode. Null (default) = auto detect MP4, AAC etc. based on URL. true = force on, ignore URL\r\n    usePeakData: false,     // enable left/right channel peak (level) data\r\n    useWaveformData: false, // enable sound spectrum (raw waveform data) - NOTE: May increase CPU load.\r\n    useEQData: false,       // enable sound EQ (frequency spectrum data) - NOTE: May increase CPU load.\r\n    onbufferchange: null,   // callback for \"isBuffering\" property change\r\n    ondataerror: null       // callback for waveform/eq data access error (flash playing audio in other tabs/domains)\r\n\r\n  };\r\n\r\n  this.movieStarOptions = {\r\n\r\n    /**\r\n     * flash 9.0r115+ MPEG4 audio options,\r\n     * merged into defaultOptions if flash 9+movieStar mode is enabled\r\n     */\r\n\r\n    bufferTime: 3,          // seconds of data to buffer before playback begins (null = flash default of 0.1 seconds - if AAC playback is gappy, try increasing.)\r\n    serverURL: null,        // rtmp: FMS or FMIS server to connect to, required when requesting media via RTMP or one of its variants\r\n    onconnect: null,        // rtmp: callback for connection to flash media server\r\n    duration: null          // rtmp: song duration (msec)\r\n\r\n  };\r\n\r\n  this.audioFormats = {\r\n\r\n    /**\r\n     * determines HTML5 support + flash requirements.\r\n     * if no support (via flash and/or HTML5) for a \"required\" format, SM2 will fail to start.\r\n     * flash fallback is used for MP3 or MP4 if HTML5 can't play it (or if preferFlash = true)\r\n     */\r\n\r\n    mp3: {\r\n      type: ['audio/mpeg; codecs=\"mp3\"', 'audio/mpeg', 'audio/mp3', 'audio/MPA', 'audio/mpa-robust'],\r\n      required: true\r\n    },\r\n\r\n    mp4: {\r\n      related: ['aac', 'm4a', 'm4b'], // additional formats under the MP4 container\r\n      type: ['audio/mp4; codecs=\"mp4a.40.2\"', 'audio/aac', 'audio/x-m4a', 'audio/MP4A-LATM', 'audio/mpeg4-generic'],\r\n      required: false\r\n    },\r\n\r\n    ogg: {\r\n      type: ['audio/ogg; codecs=vorbis'],\r\n      required: false\r\n    },\r\n\r\n    opus: {\r\n      type: ['audio/ogg; codecs=opus', 'audio/opus'],\r\n      required: false\r\n    },\r\n\r\n    wav: {\r\n      type: ['audio/wav; codecs=\"1\"', 'audio/wav', 'audio/wave', 'audio/x-wav'],\r\n      required: false\r\n    },\r\n\r\n    flac: {\r\n      type: ['audio/flac'],\r\n      required: false\r\n    }\r\n\r\n  };\r\n\r\n  // HTML attributes (id + class names) for the SWF container\r\n\r\n  this.movieID = 'sm2-container';\r\n  this.id = (smID || 'sm2movie');\r\n\r\n  this.debugID = 'soundmanager-debug';\r\n  this.debugURLParam = /([#?&])debug=1/i;\r\n\r\n  // dynamic attributes\r\n\r\n  this.versionNumber = 'V2.97a.20170601';\r\n  this.version = null;\r\n  this.movieURL = null;\r\n  this.altURL = null;\r\n  this.swfLoaded = false;\r\n  this.enabled = false;\r\n  this.oMC = null;\r\n  this.sounds = {};\r\n  this.soundIDs = [];\r\n  this.muted = false;\r\n  this.didFlashBlock = false;\r\n  this.filePattern = null;\r\n\r\n  this.filePatterns = {\r\n    flash8: /\\.mp3(\\?.*)?$/i,\r\n    flash9: /\\.mp3(\\?.*)?$/i\r\n  };\r\n\r\n  // support indicators, set at init\r\n\r\n  this.features = {\r\n    buffering: false,\r\n    peakData: false,\r\n    waveformData: false,\r\n    eqData: false,\r\n    movieStar: false\r\n  };\r\n\r\n  // flash sandbox info, used primarily in troubleshooting\r\n\r\n  this.sandbox = {\r\n    // <d>\r\n    type: null,\r\n    types: {\r\n      remote: 'remote (domain-based) rules',\r\n      localWithFile: 'local with file access (no internet access)',\r\n      localWithNetwork: 'local with network (internet access only, no local access)',\r\n      localTrusted: 'local, trusted (local+internet access)'\r\n    },\r\n    description: null,\r\n    noRemote: null,\r\n    noLocal: null\r\n    // </d>\r\n  };\r\n\r\n  /**\r\n   * format support (html5/flash)\r\n   * stores canPlayType() results based on audioFormats.\r\n   * eg. { mp3: boolean, mp4: boolean }\r\n   * treat as read-only.\r\n   */\r\n\r\n  this.html5 = {\r\n    usingFlash: null // set if/when flash fallback is needed\r\n  };\r\n\r\n  // file type support hash\r\n  this.flash = {};\r\n\r\n  // determined at init time\r\n  this.html5Only = false;\r\n\r\n  // used for special cases (eg. iPad/iPhone/palm OS?)\r\n  this.ignoreFlash = false;\r\n\r\n  /**\r\n   * a few private internals (OK, a lot. :D)\r\n   */\r\n\r\n  var SMSound,\r\n  sm2 = this, globalHTML5Audio = null, flash = null, sm = 'soundManager', smc = sm + ': ', h5 = 'HTML5::', id, ua = navigator.userAgent, wl = window.location.href.toString(), doc = document, doNothing, setProperties, init, fV, on_queue = [], debugOpen = true, debugTS, didAppend = false, appendSuccess = false, didInit = false, disabled = false, windowLoaded = false, _wDS, wdCount = 0, initComplete, mixin, assign, extraOptions, addOnEvent, processOnEvents, initUserOnload, delayWaitForEI, waitForEI, rebootIntoHTML5, setVersionInfo, handleFocus, strings, initMovie, domContentLoaded, winOnLoad, didDCLoaded, getDocument, createMovie, catchError, setPolling, initDebug, debugLevels = ['log', 'info', 'warn', 'error'], defaultFlashVersion = 8, disableObject, failSafely, normalizeMovieURL, oRemoved = null, oRemovedHTML = null, str, flashBlockHandler, getSWFCSS, swfCSS, toggleDebug, loopFix, policyFix, complain, idCheck, waitingForEI = false, initPending = false, startTimer, stopTimer, timerExecute, h5TimerCount = 0, h5IntervalTimer = null, parseURL, messages = [],\r\n  canIgnoreFlash, needsFlash = null, featureCheck, html5OK, html5CanPlay, html5ErrorCodes, html5Ext, html5Unload, domContentLoadedIE, testHTML5, event, slice = Array.prototype.slice, useGlobalHTML5Audio = false, lastGlobalHTML5URL, hasFlash, detectFlash, badSafariFix, html5_events, showSupport, flushMessages, wrapCallback, idCounter = 0, didSetup, msecScale = 1000,\r\n  is_iDevice = ua.match(/(ipad|iphone|ipod)/i), isAndroid = ua.match(/android/i), isIE = ua.match(/msie|trident/i),\r\n  isWebkit = ua.match(/webkit/i),\r\n  isSafari = (ua.match(/safari/i) && !ua.match(/chrome/i)),\r\n  isOpera = (ua.match(/opera/i)),\r\n  mobileHTML5 = (ua.match(/(mobile|pre\\/|xoom)/i) || is_iDevice || isAndroid),\r\n  isBadSafari = (!wl.match(/usehtml5audio/i) && !wl.match(/sm2-ignorebadua/i) && isSafari && !ua.match(/silk/i) && ua.match(/OS\\sX\\s10_6_([3-7])/i)), // Safari 4 and 5 (excluding Kindle Fire, \"Silk\") occasionally fail to load/play HTML5 audio on Snow Leopard 10.6.3 through 10.6.7 due to bug(s) in QuickTime X and/or other underlying frameworks. :/ Confirmed bug. https://bugs.webkit.org/show_bug.cgi?id=32159\r\n  hasConsole = (window.console !== _undefined && console.log !== _undefined),\r\n  isFocused = (doc.hasFocus !== _undefined ? doc.hasFocus() : null),\r\n  tryInitOnFocus = (isSafari && (doc.hasFocus === _undefined || !doc.hasFocus())),\r\n  okToDisable = !tryInitOnFocus,\r\n  flashMIME = /(mp3|mp4|mpa|m4a|m4b)/i,\r\n  emptyURL = 'about:blank', // safe URL to unload, or load nothing from (flash 8 + most HTML5 UAs)\r\n  emptyWAV = 'data:audio/wave;base64,/UklGRiYAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQIAAAD//w==', // tiny WAV for HTML5 unloading\r\n  overHTTP = (doc.location ? doc.location.protocol.match(/http/i) : null),\r\n  http = (!overHTTP ? '//' : ''),\r\n  // mp3, mp4, aac etc.\r\n  netStreamMimeTypes = /^\\s*audio\\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4|m4v|m4a|m4b|mp4v|3gp|3g2)\\s*(?:$|;)/i,\r\n  // Flash v9.0r115+ \"moviestar\" formats\r\n  netStreamTypes = ['mpeg4', 'aac', 'flv', 'mov', 'mp4', 'm4v', 'f4v', 'm4a', 'm4b', 'mp4v', '3gp', '3g2'],\r\n  netStreamPattern = new RegExp('\\\\.(' + netStreamTypes.join('|') + ')(\\\\?.*)?$', 'i');\r\n\r\n  this.mimePattern = /^\\s*audio\\/(?:x-)?(?:mp(?:eg|3))\\s*(?:$|;)/i; // default mp3 set\r\n\r\n  // use altURL if not \"online\"\r\n  this.useAltURL = !overHTTP;\r\n\r\n  swfCSS = {\r\n    swfBox: 'sm2-object-box',\r\n    swfDefault: 'movieContainer',\r\n    swfError: 'swf_error', // SWF loaded, but SM2 couldn't start (other error)\r\n    swfTimedout: 'swf_timedout',\r\n    swfLoaded: 'swf_loaded',\r\n    swfUnblocked: 'swf_unblocked', // or loaded OK\r\n    sm2Debug: 'sm2_debug',\r\n    highPerf: 'high_performance',\r\n    flashDebug: 'flash_debug'\r\n  };\r\n\r\n  /**\r\n   * HTML5 error codes, per W3C\r\n   * Error code 1, MEDIA_ERR_ABORTED: Client aborted download at user's request.\r\n   * Error code 2, MEDIA_ERR_NETWORK: A network error of some description caused the user agent to stop fetching the media resource, after the resource was established to be usable.\r\n   * Error code 3, MEDIA_ERR_DECODE: An error of some description occurred while decoding the media resource, after the resource was established to be usable.\r\n   * Error code 4, MEDIA_ERR_SRC_NOT_SUPPORTED: Media (audio file) not supported (\"not usable.\")\r\n   * Reference: https://html.spec.whatwg.org/multipage/embedded-content.html#error-codes\r\n   */\r\n  html5ErrorCodes = [\r\n    null,\r\n    'MEDIA_ERR_ABORTED',\r\n    'MEDIA_ERR_NETWORK',\r\n    'MEDIA_ERR_DECODE',\r\n    'MEDIA_ERR_SRC_NOT_SUPPORTED'\r\n  ];\r\n\r\n  /**\r\n   * basic HTML5 Audio() support test\r\n   * try...catch because of IE 9 \"not implemented\" nonsense\r\n   * https://github.com/Modernizr/Modernizr/issues/224\r\n   */\r\n\r\n  this.hasHTML5 = (function() {\r\n    try {\r\n      // new Audio(null) for stupid Opera 9.64 case, which throws not_enough_arguments exception otherwise.\r\n      return (Audio !== _undefined && (isOpera && opera !== _undefined && opera.version() < 10 ? new Audio(null) : new Audio()).canPlayType !== _undefined);\r\n    } catch(e) {\r\n      return false;\r\n    }\r\n  }());\r\n\r\n  /**\r\n   * Public SoundManager API\r\n   * -----------------------\r\n   */\r\n\r\n  /**\r\n   * Configures top-level soundManager properties.\r\n   *\r\n   * @param {object} options Option parameters, eg. { flashVersion: 9, url: '/path/to/swfs/' }\r\n   * onready and ontimeout are also accepted parameters. call soundManager.setup() to see the full list.\r\n   */\r\n\r\n  this.setup = function(options) {\r\n\r\n    var noURL = (!sm2.url);\r\n\r\n    // warn if flash options have already been applied\r\n\r\n    if (options !== _undefined && didInit && needsFlash && sm2.ok() && (options.flashVersion !== _undefined || options.url !== _undefined || options.html5Test !== _undefined)) {\r\n      complain(str('setupLate'));\r\n    }\r\n\r\n    // TODO: defer: true?\r\n\r\n    assign(options);\r\n\r\n    if (!useGlobalHTML5Audio) {\r\n\r\n      if (mobileHTML5) {\r\n\r\n        // force the singleton HTML5 pattern on mobile, by default.\r\n        if (!sm2.setupOptions.ignoreMobileRestrictions || sm2.setupOptions.forceUseGlobalHTML5Audio) {\r\n          messages.push(strings.globalHTML5);\r\n          useGlobalHTML5Audio = true;\r\n        }\r\n\r\n      } else if (sm2.setupOptions.forceUseGlobalHTML5Audio) {\r\n\r\n        // only apply singleton HTML5 on desktop if forced.\r\n        messages.push(strings.globalHTML5);\r\n        useGlobalHTML5Audio = true;\r\n\r\n      }\r\n\r\n    }\r\n\r\n    if (!didSetup && mobileHTML5) {\r\n\r\n      if (sm2.setupOptions.ignoreMobileRestrictions) {\r\n\r\n        messages.push(strings.ignoreMobile);\r\n\r\n      } else {\r\n\r\n        // prefer HTML5 for mobile + tablet-like devices, probably more reliable vs. flash at this point.\r\n\r\n        // <d>\r\n        if (!sm2.setupOptions.useHTML5Audio || sm2.setupOptions.preferFlash) {\r\n          // notify that defaults are being changed.\r\n          sm2._wD(strings.mobileUA);\r\n        }\r\n        // </d>\r\n\r\n        sm2.setupOptions.useHTML5Audio = true;\r\n        sm2.setupOptions.preferFlash = false;\r\n\r\n        if (is_iDevice) {\r\n\r\n          // no flash here.\r\n          sm2.ignoreFlash = true;\r\n\r\n        } else if ((isAndroid && !ua.match(/android\\s2\\.3/i)) || !isAndroid) {\r\n\r\n          /**\r\n           * Android devices tend to work better with a single audio instance, specifically for chained playback of sounds in sequence.\r\n           * Common use case: exiting sound onfinish() -> createSound() -> play()\r\n           * Presuming similar restrictions for other mobile, non-Android, non-iOS devices.\r\n           */\r\n\r\n          // <d>\r\n          sm2._wD(strings.globalHTML5);\r\n          // </d>\r\n\r\n          useGlobalHTML5Audio = true;\r\n\r\n        }\r\n\r\n      }\r\n\r\n    }\r\n\r\n    // special case 1: \"Late setup\". SM2 loaded normally, but user didn't assign flash URL eg., setup({url:...}) before SM2 init. Treat as delayed init.\r\n\r\n    if (options) {\r\n\r\n      if (noURL && didDCLoaded && options.url !== _undefined) {\r\n        sm2.beginDelayedInit();\r\n      }\r\n\r\n      // special case 2: If lazy-loading SM2 (DOMContentLoaded has already happened) and user calls setup() with url: parameter, try to init ASAP.\r\n\r\n      if (!didDCLoaded && options.url !== _undefined && doc.readyState === 'complete') {\r\n        setTimeout(domContentLoaded, 1);\r\n      }\r\n\r\n    }\r\n\r\n    didSetup = true;\r\n\r\n    return sm2;\r\n\r\n  };\r\n\r\n  this.ok = function() {\r\n\r\n    return (needsFlash ? (didInit && !disabled) : (sm2.useHTML5Audio && sm2.hasHTML5));\r\n\r\n  };\r\n\r\n  this.supported = this.ok; // legacy\r\n\r\n  this.getMovie = function(movie_id) {\r\n\r\n    // safety net: some old browsers differ on SWF references, possibly related to ExternalInterface / flash version\r\n    return id(movie_id) || doc[movie_id] || window[movie_id];\r\n\r\n  };\r\n\r\n  /**\r\n   * Creates a SMSound sound object instance. Can also be overloaded, e.g., createSound('mySound', '/some.mp3');\r\n   *\r\n   * @param {object} oOptions Sound options (at minimum, url parameter is required.)\r\n   * @return {object} SMSound The new SMSound object.\r\n   */\r\n\r\n  this.createSound = function(oOptions, _url) {\r\n\r\n    var cs, cs_string, options, oSound = null;\r\n\r\n    // <d>\r\n    cs = sm + '.createSound(): ';\r\n    cs_string = cs + str(!didInit ? 'notReady' : 'notOK');\r\n    // </d>\r\n\r\n    if (!didInit || !sm2.ok()) {\r\n      complain(cs_string);\r\n      return false;\r\n    }\r\n\r\n    if (_url !== _undefined) {\r\n      // function overloading in JS! :) ... assume simple createSound(id, url) use case.\r\n      oOptions = {\r\n        id: oOptions,\r\n        url: _url\r\n      };\r\n    }\r\n\r\n    // inherit from defaultOptions\r\n    options = mixin(oOptions);\r\n\r\n    options.url = parseURL(options.url);\r\n\r\n    // generate an id, if needed.\r\n    if (options.id === _undefined) {\r\n      options.id = sm2.setupOptions.idPrefix + (idCounter++);\r\n    }\r\n\r\n    // <d>\r\n    if (options.id.toString().charAt(0).match(/^[0-9]$/)) {\r\n      sm2._wD(cs + str('badID', options.id), 2);\r\n    }\r\n\r\n    sm2._wD(cs + options.id + (options.url ? ' (' + options.url + ')' : ''), 1);\r\n    // </d>\r\n\r\n    if (idCheck(options.id, true)) {\r\n      sm2._wD(cs + options.id + ' exists', 1);\r\n      return sm2.sounds[options.id];\r\n    }\r\n\r\n    function make() {\r\n\r\n      options = loopFix(options);\r\n      sm2.sounds[options.id] = new SMSound(options);\r\n      sm2.soundIDs.push(options.id);\r\n      return sm2.sounds[options.id];\r\n\r\n    }\r\n\r\n    if (html5OK(options)) {\r\n\r\n      oSound = make();\r\n      // <d>\r\n      if (!sm2.html5Only) {\r\n        sm2._wD(options.id + ': Using HTML5');\r\n      }\r\n      // </d>\r\n      oSound._setup_html5(options);\r\n\r\n    } else {\r\n\r\n      if (sm2.html5Only) {\r\n        sm2._wD(options.id + ': No HTML5 support for this sound, and no Flash. Exiting.');\r\n        return make();\r\n      }\r\n\r\n      // TODO: Move HTML5/flash checks into generic URL parsing/handling function.\r\n\r\n      if (sm2.html5.usingFlash && options.url && options.url.match(/data:/i)) {\r\n        // data: URIs not supported by Flash, either.\r\n        sm2._wD(options.id + ': data: URIs not supported via Flash. Exiting.');\r\n        return make();\r\n      }\r\n\r\n      if (fV > 8) {\r\n        if (options.isMovieStar === null) {\r\n          // attempt to detect MPEG-4 formats\r\n          options.isMovieStar = !!(options.serverURL || (options.type ? options.type.match(netStreamMimeTypes) : false) || (options.url && options.url.match(netStreamPattern)));\r\n        }\r\n        // <d>\r\n        if (options.isMovieStar) {\r\n          sm2._wD(cs + 'using MovieStar handling');\r\n          if (options.loops > 1) {\r\n            _wDS('noNSLoop');\r\n          }\r\n        }\r\n        // </d>\r\n      }\r\n\r\n      options = policyFix(options, cs);\r\n      oSound = make();\r\n\r\n      if (fV === 8) {\r\n        flash._createSound(options.id, options.loops || 1, options.usePolicyFile);\r\n      } else {\r\n        flash._createSound(options.id, options.url, options.usePeakData, options.useWaveformData, options.useEQData, options.isMovieStar, (options.isMovieStar ? options.bufferTime : false), options.loops || 1, options.serverURL, options.duration || null, options.autoPlay, true, options.autoLoad, options.usePolicyFile);\r\n        if (!options.serverURL) {\r\n          // We are connected immediately\r\n          oSound.connected = true;\r\n          if (options.onconnect) {\r\n            options.onconnect.apply(oSound);\r\n          }\r\n        }\r\n      }\r\n\r\n      if (!options.serverURL && (options.autoLoad || options.autoPlay)) {\r\n        // call load for non-rtmp streams\r\n        oSound.load(options);\r\n      }\r\n\r\n    }\r\n\r\n    // rtmp will play in onconnect\r\n    if (!options.serverURL && options.autoPlay) {\r\n      oSound.play();\r\n    }\r\n\r\n    return oSound;\r\n\r\n  };\r\n\r\n  /**\r\n   * Destroys a SMSound sound object instance.\r\n   *\r\n   * @param {string} sID The ID of the sound to destroy\r\n   */\r\n\r\n  this.destroySound = function(sID, _bFromSound) {\r\n\r\n    // explicitly destroy a sound before normal page unload, etc.\r\n\r\n    if (!idCheck(sID)) return false;\r\n\r\n    var oS = sm2.sounds[sID], i;\r\n\r\n    oS.stop();\r\n\r\n    // Disable all callbacks after stop(), when the sound is being destroyed\r\n    oS._iO = {};\r\n\r\n    oS.unload();\r\n\r\n    for (i = 0; i < sm2.soundIDs.length; i++) {\r\n      if (sm2.soundIDs[i] === sID) {\r\n        sm2.soundIDs.splice(i, 1);\r\n        break;\r\n      }\r\n    }\r\n\r\n    if (!_bFromSound) {\r\n      // ignore if being called from SMSound instance\r\n      oS.destruct(true);\r\n    }\r\n\r\n    oS = null;\r\n    delete sm2.sounds[sID];\r\n\r\n    return true;\r\n\r\n  };\r\n\r\n  /**\r\n   * Calls the load() method of a SMSound object by ID.\r\n   *\r\n   * @param {string} sID The ID of the sound\r\n   * @param {object} oOptions Optional: Sound options\r\n   */\r\n\r\n  this.load = function(sID, oOptions) {\r\n\r\n    if (!idCheck(sID)) return false;\r\n\r\n    return sm2.sounds[sID].load(oOptions);\r\n\r\n  };\r\n\r\n  /**\r\n   * Calls the unload() method of a SMSound object by ID.\r\n   *\r\n   * @param {string} sID The ID of the sound\r\n   */\r\n\r\n  this.unload = function(sID) {\r\n\r\n    if (!idCheck(sID)) return false;\r\n\r\n    return sm2.sounds[sID].unload();\r\n\r\n  };\r\n\r\n  /**\r\n   * Calls the onPosition() method of a SMSound object by ID.\r\n   *\r\n   * @param {string} sID The ID of the sound\r\n   * @param {number} nPosition The position to watch for\r\n   * @param {function} oMethod The relevant callback to fire\r\n   * @param {object} oScope Optional: The scope to apply the callback to\r\n   * @return {SMSound} The SMSound object\r\n   */\r\n\r\n  this.onPosition = function(sID, nPosition, oMethod, oScope) {\r\n\r\n    if (!idCheck(sID)) return false;\r\n\r\n    return sm2.sounds[sID].onposition(nPosition, oMethod, oScope);\r\n\r\n  };\r\n\r\n  // legacy/backwards-compability: lower-case method name\r\n  this.onposition = this.onPosition;\r\n\r\n  /**\r\n   * Calls the clearOnPosition() method of a SMSound object by ID.\r\n   *\r\n   * @param {string} sID The ID of the sound\r\n   * @param {number} nPosition The position to watch for\r\n   * @param {function} oMethod Optional: The relevant callback to fire\r\n   * @return {SMSound} The SMSound object\r\n   */\r\n\r\n  this.clearOnPosition = function(sID, nPosition, oMethod) {\r\n\r\n    if (!idCheck(sID)) return false;\r\n\r\n    return sm2.sounds[sID].clearOnPosition(nPosition, oMethod);\r\n\r\n  };\r\n\r\n  /**\r\n   * Calls the play() method of a SMSound object by ID.\r\n   *\r\n   * @param {string} sID The ID of the sound\r\n   * @param {object} oOptions Optional: Sound options\r\n   * @return {SMSound} The SMSound object\r\n   */\r\n\r\n  this.play = function(sID, oOptions) {\r\n\r\n    var result = null,\r\n        // legacy function-overloading use case: play('mySound', '/path/to/some.mp3');\r\n        overloaded = (oOptions && !(oOptions instanceof Object));\r\n\r\n    if (!didInit || !sm2.ok()) {\r\n      complain(sm + '.play(): ' + str(!didInit ? 'notReady' : 'notOK'));\r\n      return false;\r\n    }\r\n\r\n    if (!idCheck(sID, overloaded)) {\r\n\r\n      // no sound found for the given ID. Bail.\r\n      if (!overloaded) return false;\r\n\r\n      if (overloaded) {\r\n        oOptions = {\r\n          url: oOptions\r\n        };\r\n      }\r\n\r\n      if (oOptions && oOptions.url) {\r\n        // overloading use case, create+play: .play('someID', {url:'/path/to.mp3'});\r\n        sm2._wD(sm + '.play(): Attempting to create \"' + sID + '\"', 1);\r\n        oOptions.id = sID;\r\n        result = sm2.createSound(oOptions).play();\r\n      }\r\n\r\n    } else if (overloaded) {\r\n\r\n      // existing sound object case\r\n      oOptions = {\r\n        url: oOptions\r\n      };\r\n\r\n    }\r\n\r\n    if (result === null) {\r\n      // default case\r\n      result = sm2.sounds[sID].play(oOptions);\r\n    }\r\n\r\n    return result;\r\n\r\n  };\r\n\r\n  // just for convenience\r\n  this.start = this.play;\r\n\r\n  /**\r\n   * Calls the setPlaybackRate() method of a SMSound object by ID.\r\n   *\r\n   * @param {string} sID The ID of the sound\r\n   * @return {SMSound} The SMSound object\r\n   */\r\n\r\n  this.setPlaybackRate = function(sID, rate, allowOverride) {\r\n\r\n    if (!idCheck(sID)) return false;\r\n\r\n    return sm2.sounds[sID].setPlaybackRate(rate, allowOverride);\r\n\r\n  };\r\n\r\n  /**\r\n   * Calls the setPosition() method of a SMSound object by ID.\r\n   *\r\n   * @param {string} sID The ID of the sound\r\n   * @param {number} nMsecOffset Position (milliseconds)\r\n   * @return {SMSound} The SMSound object\r\n   */\r\n\r\n  this.setPosition = function(sID, nMsecOffset) {\r\n\r\n    if (!idCheck(sID)) return false;\r\n\r\n    return sm2.sounds[sID].setPosition(nMsecOffset);\r\n\r\n  };\r\n\r\n  /**\r\n   * Calls the stop() method of a SMSound object by ID.\r\n   *\r\n   * @param {string} sID The ID of the sound\r\n   * @return {SMSound} The SMSound object\r\n   */\r\n\r\n  this.stop = function(sID) {\r\n\r\n    if (!idCheck(sID)) return false;\r\n\r\n    sm2._wD(sm + '.stop(' + sID + ')', 1);\r\n\r\n    return sm2.sounds[sID].stop();\r\n\r\n  };\r\n\r\n  /**\r\n   * Stops all currently-playing sounds.\r\n   */\r\n\r\n  this.stopAll = function() {\r\n\r\n    var oSound;\r\n    sm2._wD(sm + '.stopAll()', 1);\r\n\r\n    for (oSound in sm2.sounds) {\r\n      if (sm2.sounds.hasOwnProperty(oSound)) {\r\n        // apply only to sound objects\r\n        sm2.sounds[oSound].stop();\r\n      }\r\n    }\r\n\r\n  };\r\n\r\n  /**\r\n   * Calls the pause() method of a SMSound object by ID.\r\n   *\r\n   * @param {string} sID The ID of the sound\r\n   * @return {SMSound} The SMSound object\r\n   */\r\n\r\n  this.pause = function(sID) {\r\n\r\n    if (!idCheck(sID)) return false;\r\n\r\n    return sm2.sounds[sID].pause();\r\n\r\n  };\r\n\r\n  /**\r\n   * Pauses all currently-playing sounds.\r\n   */\r\n\r\n  this.pauseAll = function() {\r\n\r\n    var i;\r\n    for (i = sm2.soundIDs.length - 1; i >= 0; i--) {\r\n      sm2.sounds[sm2.soundIDs[i]].pause();\r\n    }\r\n\r\n  };\r\n\r\n  /**\r\n   * Calls the resume() method of a SMSound object by ID.\r\n   *\r\n   * @param {string} sID The ID of the sound\r\n   * @return {SMSound} The SMSound object\r\n   */\r\n\r\n  this.resume = function(sID) {\r\n\r\n    if (!idCheck(sID)) return false;\r\n\r\n    return sm2.sounds[sID].resume();\r\n\r\n  };\r\n\r\n  /**\r\n   * Resumes all currently-paused sounds.\r\n   */\r\n\r\n  this.resumeAll = function() {\r\n\r\n    var i;\r\n    for (i = sm2.soundIDs.length - 1; i >= 0; i--) {\r\n      sm2.sounds[sm2.soundIDs[i]].resume();\r\n    }\r\n\r\n  };\r\n\r\n  /**\r\n   * Calls the togglePause() method of a SMSound object by ID.\r\n   *\r\n   * @param {string} sID The ID of the sound\r\n   * @return {SMSound} The SMSound object\r\n   */\r\n\r\n  this.togglePause = function(sID) {\r\n\r\n    if (!idCheck(sID)) return false;\r\n\r\n    return sm2.sounds[sID].togglePause();\r\n\r\n  };\r\n\r\n  /**\r\n   * Calls the setPan() method of a SMSound object by ID.\r\n   *\r\n   * @param {string} sID The ID of the sound\r\n   * @param {number} nPan The pan value (-100 to 100)\r\n   * @return {SMSound} The SMSound object\r\n   */\r\n\r\n  this.setPan = function(sID, nPan) {\r\n\r\n    if (!idCheck(sID)) return false;\r\n\r\n    return sm2.sounds[sID].setPan(nPan);\r\n\r\n  };\r\n\r\n  /**\r\n   * Calls the setVolume() method of a SMSound object by ID\r\n   * Overloaded case: pass only volume argument eg., setVolume(50) to apply to all sounds.\r\n   *\r\n   * @param {string} sID The ID of the sound\r\n   * @param {number} nVol The volume value (0 to 100)\r\n   * @return {SMSound} The SMSound object\r\n   */\r\n\r\n  this.setVolume = function(sID, nVol) {\r\n\r\n    // setVolume(50) function overloading case - apply to all sounds\r\n\r\n    var i, j;\r\n\r\n    if (sID !== _undefined && !isNaN(sID) && nVol === _undefined) {\r\n      for (i = 0, j = sm2.soundIDs.length; i < j; i++) {\r\n        sm2.sounds[sm2.soundIDs[i]].setVolume(sID);\r\n      }\r\n      return false;\r\n    }\r\n\r\n    // setVolume('mySound', 50) case\r\n\r\n    if (!idCheck(sID)) return false;\r\n\r\n    return sm2.sounds[sID].setVolume(nVol);\r\n\r\n  };\r\n\r\n  /**\r\n   * Calls the mute() method of either a single SMSound object by ID, or all sound objects.\r\n   *\r\n   * @param {string} sID Optional: The ID of the sound (if omitted, all sounds will be used.)\r\n   */\r\n\r\n  this.mute = function(sID) {\r\n\r\n    var i = 0;\r\n\r\n    if (sID instanceof String) {\r\n      sID = null;\r\n    }\r\n\r\n    if (!sID) {\r\n\r\n      sm2._wD(sm + '.mute(): Muting all sounds');\r\n      for (i = sm2.soundIDs.length - 1; i >= 0; i--) {\r\n        sm2.sounds[sm2.soundIDs[i]].mute();\r\n      }\r\n      sm2.muted = true;\r\n\r\n    } else {\r\n\r\n      if (!idCheck(sID)) return false;\r\n\r\n      sm2._wD(sm + '.mute(): Muting \"' + sID + '\"');\r\n      return sm2.sounds[sID].mute();\r\n\r\n    }\r\n\r\n    return true;\r\n\r\n  };\r\n\r\n  /**\r\n   * Mutes all sounds.\r\n   */\r\n\r\n  this.muteAll = function() {\r\n\r\n    sm2.mute();\r\n\r\n  };\r\n\r\n  /**\r\n   * Calls the unmute() method of either a single SMSound object by ID, or all sound objects.\r\n   *\r\n   * @param {string} sID Optional: The ID of the sound (if omitted, all sounds will be used.)\r\n   */\r\n\r\n  this.unmute = function(sID) {\r\n\r\n    var i;\r\n\r\n    if (sID instanceof String) {\r\n      sID = null;\r\n    }\r\n\r\n    if (!sID) {\r\n\r\n      sm2._wD(sm + '.unmute(): Unmuting all sounds');\r\n      for (i = sm2.soundIDs.length - 1; i >= 0; i--) {\r\n        sm2.sounds[sm2.soundIDs[i]].unmute();\r\n      }\r\n      sm2.muted = false;\r\n\r\n    } else {\r\n\r\n      if (!idCheck(sID)) return false;\r\n\r\n      sm2._wD(sm + '.unmute(): Unmuting \"' + sID + '\"');\r\n\r\n      return sm2.sounds[sID].unmute();\r\n\r\n    }\r\n\r\n    return true;\r\n\r\n  };\r\n\r\n  /**\r\n   * Unmutes all sounds.\r\n   */\r\n\r\n  this.unmuteAll = function() {\r\n\r\n    sm2.unmute();\r\n\r\n  };\r\n\r\n  /**\r\n   * Calls the toggleMute() method of a SMSound object by ID.\r\n   *\r\n   * @param {string} sID The ID of the sound\r\n   * @return {SMSound} The SMSound object\r\n   */\r\n\r\n  this.toggleMute = function(sID) {\r\n\r\n    if (!idCheck(sID)) return false;\r\n\r\n    return sm2.sounds[sID].toggleMute();\r\n\r\n  };\r\n\r\n  /**\r\n   * Retrieves the memory used by the flash plugin.\r\n   *\r\n   * @return {number} The amount of memory in use\r\n   */\r\n\r\n  this.getMemoryUse = function() {\r\n\r\n    // flash-only\r\n    var ram = 0;\r\n\r\n    if (flash && fV !== 8) {\r\n      ram = parseInt(flash._getMemoryUse(), 10);\r\n    }\r\n\r\n    return ram;\r\n\r\n  };\r\n\r\n  /**\r\n   * Undocumented: NOPs soundManager and all SMSound objects.\r\n   */\r\n\r\n  this.disable = function(bNoDisable) {\r\n\r\n    // destroy all functions\r\n    var i;\r\n\r\n    if (bNoDisable === _undefined) {\r\n      bNoDisable = false;\r\n    }\r\n\r\n    // already disabled?\r\n    if (disabled) return false;\r\n\r\n    disabled = true;\r\n\r\n    _wDS('shutdown', 1);\r\n\r\n    for (i = sm2.soundIDs.length - 1; i >= 0; i--) {\r\n      disableObject(sm2.sounds[sm2.soundIDs[i]]);\r\n    }\r\n\r\n    disableObject(sm2);\r\n\r\n    // fire \"complete\", despite fail\r\n    initComplete(bNoDisable);\r\n\r\n    event.remove(window, 'load', initUserOnload);\r\n\r\n    return true;\r\n\r\n  };\r\n\r\n  /**\r\n   * Determines playability of a MIME type, eg. 'audio/mp3'.\r\n   */\r\n\r\n  this.canPlayMIME = function(sMIME) {\r\n\r\n    var result;\r\n\r\n    if (sm2.hasHTML5) {\r\n      result = html5CanPlay({\r\n        type: sMIME\r\n      });\r\n    }\r\n\r\n    if (!result && needsFlash) {\r\n      // if flash 9, test netStream (movieStar) types as well.\r\n      result = (sMIME && sm2.ok() ? !!((fV > 8 ? sMIME.match(netStreamMimeTypes) : null) || sMIME.match(sm2.mimePattern)) : null); // TODO: make less \"weird\" (per JSLint)\r\n    }\r\n\r\n    return result;\r\n\r\n  };\r\n\r\n  /**\r\n   * Determines playability of a URL based on audio support.\r\n   *\r\n   * @param {string} sURL The URL to test\r\n   * @return {boolean} URL playability\r\n   */\r\n\r\n  this.canPlayURL = function(sURL) {\r\n\r\n    var result;\r\n\r\n    if (sm2.hasHTML5) {\r\n      result = html5CanPlay({\r\n        url: sURL\r\n      });\r\n    }\r\n\r\n    if (!result && needsFlash) {\r\n      result = (sURL && sm2.ok() ? !!(sURL.match(sm2.filePattern)) : null);\r\n    }\r\n\r\n    return result;\r\n\r\n  };\r\n\r\n  /**\r\n   * Determines playability of an HTML DOM &lt;a&gt; object (or similar object literal) based on audio support.\r\n   *\r\n   * @param {object} oLink an HTML DOM &lt;a&gt; object or object literal including href and/or type attributes\r\n   * @return {boolean} URL playability\r\n   */\r\n\r\n  this.canPlayLink = function(oLink) {\r\n\r\n    if (oLink.type !== _undefined && oLink.type && sm2.canPlayMIME(oLink.type)) return true;\r\n\r\n    return sm2.canPlayURL(oLink.href);\r\n\r\n  };\r\n\r\n  /**\r\n   * Retrieves a SMSound object by ID.\r\n   *\r\n   * @param {string} sID The ID of the sound\r\n   * @return {SMSound} The SMSound object\r\n   */\r\n\r\n  this.getSoundById = function(sID, _suppressDebug) {\r\n\r\n    if (!sID) return null;\r\n\r\n    var result = sm2.sounds[sID];\r\n\r\n    // <d>\r\n    if (!result && !_suppressDebug) {\r\n      sm2._wD(sm + '.getSoundById(): Sound \"' + sID + '\" not found.', 2);\r\n    }\r\n    // </d>\r\n\r\n    return result;\r\n\r\n  };\r\n\r\n  /**\r\n   * Queues a callback for execution when SoundManager has successfully initialized.\r\n   *\r\n   * @param {function} oMethod The callback method to fire\r\n   * @param {object} oScope Optional: The scope to apply to the callback\r\n   */\r\n\r\n  this.onready = function(oMethod, oScope) {\r\n\r\n    var sType = 'onready',\r\n        result = false;\r\n\r\n    if (typeof oMethod === 'function') {\r\n\r\n      // <d>\r\n      if (didInit) {\r\n        sm2._wD(str('queue', sType));\r\n      }\r\n      // </d>\r\n\r\n      if (!oScope) {\r\n        oScope = window;\r\n      }\r\n\r\n      addOnEvent(sType, oMethod, oScope);\r\n      processOnEvents();\r\n\r\n      result = true;\r\n\r\n    } else {\r\n\r\n      throw str('needFunction', sType);\r\n\r\n    }\r\n\r\n    return result;\r\n\r\n  };\r\n\r\n  /**\r\n   * Queues a callback for execution when SoundManager has failed to initialize.\r\n   *\r\n   * @param {function} oMethod The callback method to fire\r\n   * @param {object} oScope Optional: The scope to apply to the callback\r\n   */\r\n\r\n  this.ontimeout = function(oMethod, oScope) {\r\n\r\n    var sType = 'ontimeout',\r\n        result = false;\r\n\r\n    if (typeof oMethod === 'function') {\r\n\r\n      // <d>\r\n      if (didInit) {\r\n        sm2._wD(str('queue', sType));\r\n      }\r\n      // </d>\r\n\r\n      if (!oScope) {\r\n        oScope = window;\r\n      }\r\n\r\n      addOnEvent(sType, oMethod, oScope);\r\n      processOnEvents({ type: sType });\r\n\r\n      result = true;\r\n\r\n    } else {\r\n\r\n      throw str('needFunction', sType);\r\n\r\n    }\r\n\r\n    return result;\r\n\r\n  };\r\n\r\n  /**\r\n   * Writes console.log()-style debug output to a console or in-browser element.\r\n   * Applies when debugMode = true\r\n   *\r\n   * @param {string} sText The console message\r\n   * @param {object} nType Optional log level (number), or object. Number case: Log type/style where 0 = 'info', 1 = 'warn', 2 = 'error'. Object case: Object to be dumped.\r\n   */\r\n\r\n  this._writeDebug = function(sText, sTypeOrObject) {\r\n\r\n    // pseudo-private console.log()-style output\r\n    // <d>\r\n\r\n    var sDID = 'soundmanager-debug', o, oItem;\r\n\r\n    if (!sm2.setupOptions.debugMode) return false;\r\n\r\n    if (hasConsole && sm2.useConsole) {\r\n      if (sTypeOrObject && typeof sTypeOrObject === 'object') {\r\n        // object passed; dump to console.\r\n        console.log(sText, sTypeOrObject);\r\n      } else if (debugLevels[sTypeOrObject] !== _undefined) {\r\n        console[debugLevels[sTypeOrObject]](sText);\r\n      } else {\r\n        console.log(sText);\r\n      }\r\n      if (sm2.consoleOnly) return true;\r\n    }\r\n\r\n    o = id(sDID);\r\n\r\n    if (!o) return false;\r\n\r\n    oItem = doc.createElement('div');\r\n\r\n    if (++wdCount % 2 === 0) {\r\n      oItem.className = 'sm2-alt';\r\n    }\r\n\r\n    if (sTypeOrObject === _undefined) {\r\n      sTypeOrObject = 0;\r\n    } else {\r\n      sTypeOrObject = parseInt(sTypeOrObject, 10);\r\n    }\r\n\r\n    oItem.appendChild(doc.createTextNode(sText));\r\n\r\n    if (sTypeOrObject) {\r\n      if (sTypeOrObject >= 2) {\r\n        oItem.style.fontWeight = 'bold';\r\n      }\r\n      if (sTypeOrObject === 3) {\r\n        oItem.style.color = '#ff3333';\r\n      }\r\n    }\r\n\r\n    // top-to-bottom\r\n    // o.appendChild(oItem);\r\n\r\n    // bottom-to-top\r\n    o.insertBefore(oItem, o.firstChild);\r\n\r\n    o = null;\r\n    // </d>\r\n\r\n    return true;\r\n\r\n  };\r\n\r\n  // <d>\r\n  // last-resort debugging option\r\n  if (wl.indexOf('sm2-debug=alert') !== -1) {\r\n    this._writeDebug = function(sText) {\r\n      window.alert(sText);\r\n    };\r\n  }\r\n  // </d>\r\n\r\n  // alias\r\n  this._wD = this._writeDebug;\r\n\r\n  /**\r\n   * Provides debug / state information on all SMSound objects.\r\n   */\r\n\r\n  this._debug = function() {\r\n\r\n    // <d>\r\n    var i, j;\r\n    _wDS('currentObj', 1);\r\n\r\n    for (i = 0, j = sm2.soundIDs.length; i < j; i++) {\r\n      sm2.sounds[sm2.soundIDs[i]]._debug();\r\n    }\r\n    // </d>\r\n\r\n  };\r\n\r\n  /**\r\n   * Restarts and re-initializes the SoundManager instance.\r\n   *\r\n   * @param {boolean} resetEvents Optional: When true, removes all registered onready and ontimeout event callbacks.\r\n   * @param {boolean} excludeInit Options: When true, does not call beginDelayedInit() (which would restart SM2).\r\n   * @return {object} soundManager The soundManager instance.\r\n   */\r\n\r\n  this.reboot = function(resetEvents, excludeInit) {\r\n\r\n    // reset some (or all) state, and re-init unless otherwise specified.\r\n\r\n    // <d>\r\n    if (sm2.soundIDs.length) {\r\n      sm2._wD('Destroying ' + sm2.soundIDs.length + ' SMSound object' + (sm2.soundIDs.length !== 1 ? 's' : '') + '...');\r\n    }\r\n    // </d>\r\n\r\n    var i, j, k;\r\n\r\n    for (i = sm2.soundIDs.length - 1; i >= 0; i--) {\r\n      sm2.sounds[sm2.soundIDs[i]].destruct();\r\n    }\r\n\r\n    // trash ze flash (remove from the DOM)\r\n\r\n    if (flash) {\r\n\r\n      try {\r\n\r\n        if (isIE) {\r\n          oRemovedHTML = flash.innerHTML;\r\n        }\r\n\r\n        oRemoved = flash.parentNode.removeChild(flash);\r\n\r\n      } catch(e) {\r\n\r\n        // Remove failed? May be due to flash blockers silently removing the SWF object/embed node from the DOM. Warn and continue.\r\n\r\n        _wDS('badRemove', 2);\r\n\r\n      }\r\n\r\n    }\r\n\r\n    // actually, force recreate of movie.\r\n\r\n    oRemovedHTML = oRemoved = needsFlash = flash = null;\r\n\r\n    sm2.enabled = didDCLoaded = didInit = waitingForEI = initPending = didAppend = appendSuccess = disabled = useGlobalHTML5Audio = sm2.swfLoaded = false;\r\n\r\n    sm2.soundIDs = [];\r\n    sm2.sounds = {};\r\n\r\n    idCounter = 0;\r\n    didSetup = false;\r\n\r\n    if (!resetEvents) {\r\n      // reset callbacks for onready, ontimeout etc. so that they will fire again on re-init\r\n      for (i in on_queue) {\r\n        if (on_queue.hasOwnProperty(i)) {\r\n          for (j = 0, k = on_queue[i].length; j < k; j++) {\r\n            on_queue[i][j].fired = false;\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      // remove all callbacks entirely\r\n      on_queue = [];\r\n    }\r\n\r\n    // <d>\r\n    if (!excludeInit) {\r\n      sm2._wD(sm + ': Rebooting...');\r\n    }\r\n    // </d>\r\n\r\n    // reset HTML5 and flash canPlay test results\r\n\r\n    sm2.html5 = {\r\n      usingFlash: null\r\n    };\r\n\r\n    sm2.flash = {};\r\n\r\n    // reset device-specific HTML/flash mode switches\r\n\r\n    sm2.html5Only = false;\r\n    sm2.ignoreFlash = false;\r\n\r\n    window.setTimeout(function() {\r\n\r\n      // by default, re-init\r\n\r\n      if (!excludeInit) {\r\n        sm2.beginDelayedInit();\r\n      }\r\n\r\n    }, 20);\r\n\r\n    return sm2;\r\n\r\n  };\r\n\r\n  this.reset = function() {\r\n\r\n    /**\r\n     * Shuts down and restores the SoundManager instance to its original loaded state, without an explicit reboot. All onready/ontimeout handlers are removed.\r\n     * After this call, SM2 may be re-initialized via soundManager.beginDelayedInit().\r\n     * @return {object} soundManager The soundManager instance.\r\n     */\r\n\r\n    _wDS('reset');\r\n\r\n    return sm2.reboot(true, true);\r\n\r\n  };\r\n\r\n  /**\r\n   * Undocumented: Determines the SM2 flash movie's load progress.\r\n   *\r\n   * @return {number or null} Percent loaded, or if invalid/unsupported, null.\r\n   */\r\n\r\n  this.getMoviePercent = function() {\r\n\r\n    /**\r\n     * Interesting syntax notes...\r\n     * Flash/ExternalInterface (ActiveX/NPAPI) bridge methods are not typeof \"function\" nor instanceof Function, but are still valid.\r\n     * Furthermore, using (flash && flash.PercentLoaded) causes IE to throw \"object doesn't support this property or method\".\r\n     * Thus, 'in' syntax must be used.\r\n     */\r\n\r\n    return (flash && 'PercentLoaded' in flash ? flash.PercentLoaded() : null);\r\n\r\n  };\r\n\r\n  /**\r\n   * Additional helper for manually invoking SM2's init process after DOM Ready / window.onload().\r\n   */\r\n\r\n  this.beginDelayedInit = function() {\r\n\r\n    windowLoaded = true;\r\n    domContentLoaded();\r\n\r\n    setTimeout(function() {\r\n\r\n      if (initPending) return false;\r\n\r\n      createMovie();\r\n      initMovie();\r\n      initPending = true;\r\n\r\n      return true;\r\n\r\n    }, 20);\r\n\r\n    delayWaitForEI();\r\n\r\n  };\r\n\r\n  /**\r\n   * Destroys the SoundManager instance and all SMSound instances.\r\n   */\r\n\r\n  this.destruct = function() {\r\n\r\n    sm2._wD(sm + '.destruct()');\r\n    sm2.disable(true);\r\n\r\n  };\r\n\r\n  /**\r\n   * SMSound() (sound object) constructor\r\n   * ------------------------------------\r\n   *\r\n   * @param {object} oOptions Sound options (id and url are required attributes)\r\n   * @return {SMSound} The new SMSound object\r\n   */\r\n\r\n  SMSound = function(oOptions) {\r\n\r\n    var s = this, resetProperties, add_html5_events, remove_html5_events, stop_html5_timer, start_html5_timer, attachOnPosition, onplay_called = false, onPositionItems = [], onPositionFired = 0, detachOnPosition, applyFromTo, lastURL = null, lastHTML5State, urlOmitted;\r\n\r\n    lastHTML5State = {\r\n      // tracks duration + position (time)\r\n      duration: null,\r\n      time: null\r\n    };\r\n\r\n    this.id = oOptions.id;\r\n\r\n    // legacy\r\n    this.sID = this.id;\r\n\r\n    this.url = oOptions.url;\r\n    this.options = mixin(oOptions);\r\n\r\n    // per-play-instance-specific options\r\n    this.instanceOptions = this.options;\r\n\r\n    // short alias\r\n    this._iO = this.instanceOptions;\r\n\r\n    // assign property defaults\r\n    this.pan = this.options.pan;\r\n    this.volume = this.options.volume;\r\n\r\n    // whether or not this object is using HTML5\r\n    this.isHTML5 = false;\r\n\r\n    // internal HTML5 Audio() object reference\r\n    this._a = null;\r\n\r\n    // for flash 8 special-case createSound() without url, followed by load/play with url case\r\n    urlOmitted = (!this.url);\r\n\r\n    /**\r\n     * SMSound() public methods\r\n     * ------------------------\r\n     */\r\n\r\n    this.id3 = {};\r\n\r\n    /**\r\n     * Writes SMSound object parameters to debug console\r\n     */\r\n\r\n    this._debug = function() {\r\n\r\n      // <d>\r\n      sm2._wD(s.id + ': Merged options:', s.options);\r\n      // </d>\r\n\r\n    };\r\n\r\n    /**\r\n     * Begins loading a sound per its *url*.\r\n     *\r\n     * @param {object} options Optional: Sound options\r\n     * @return {SMSound} The SMSound object\r\n     */\r\n\r\n    this.load = function(options) {\r\n\r\n      var oSound = null, instanceOptions;\r\n\r\n      if (options !== _undefined) {\r\n        s._iO = mixin(options, s.options);\r\n      } else {\r\n        options = s.options;\r\n        s._iO = options;\r\n        if (lastURL && lastURL !== s.url) {\r\n          _wDS('manURL');\r\n          s._iO.url = s.url;\r\n          s.url = null;\r\n        }\r\n      }\r\n\r\n      if (!s._iO.url) {\r\n        s._iO.url = s.url;\r\n      }\r\n\r\n      s._iO.url = parseURL(s._iO.url);\r\n\r\n      // ensure we're in sync\r\n      s.instanceOptions = s._iO;\r\n\r\n      // local shortcut\r\n      instanceOptions = s._iO;\r\n\r\n      sm2._wD(s.id + ': load (' + instanceOptions.url + ')');\r\n\r\n      if (!instanceOptions.url && !s.url) {\r\n        sm2._wD(s.id + ': load(): url is unassigned. Exiting.', 2);\r\n        return s;\r\n      }\r\n\r\n      // <d>\r\n      if (!s.isHTML5 && fV === 8 && !s.url && !instanceOptions.autoPlay) {\r\n        // flash 8 load() -> play() won't work before onload has fired.\r\n        sm2._wD(s.id + ': Flash 8 load() limitation: Wait for onload() before calling play().', 1);\r\n      }\r\n      // </d>\r\n\r\n      if (instanceOptions.url === s.url && s.readyState !== 0 && s.readyState !== 2) {\r\n        _wDS('onURL', 1);\r\n        // if loaded and an onload() exists, fire immediately.\r\n        if (s.readyState === 3 && instanceOptions.onload) {\r\n          // assume success based on truthy duration.\r\n          wrapCallback(s, function() {\r\n            instanceOptions.onload.apply(s, [(!!s.duration)]);\r\n          });\r\n        }\r\n        return s;\r\n      }\r\n\r\n      // reset a few state properties\r\n\r\n      s.loaded = false;\r\n      s.readyState = 1;\r\n      s.playState = 0;\r\n      s.id3 = {};\r\n\r\n      // TODO: If switching from HTML5 -> flash (or vice versa), stop currently-playing audio.\r\n\r\n      if (html5OK(instanceOptions)) {\r\n\r\n        oSound = s._setup_html5(instanceOptions);\r\n\r\n        if (!oSound._called_load) {\r\n\r\n          s._html5_canplay = false;\r\n\r\n          // TODO: review called_load / html5_canplay logic\r\n\r\n          // if url provided directly to load(), assign it here.\r\n\r\n          if (s.url !== instanceOptions.url) {\r\n\r\n            sm2._wD(_wDS('manURL') + ': ' + instanceOptions.url);\r\n\r\n            s._a.src = instanceOptions.url;\r\n\r\n            // TODO: review / re-apply all relevant options (volume, loop, onposition etc.)\r\n\r\n            // reset position for new URL\r\n            s.setPosition(0);\r\n\r\n          }\r\n\r\n          // given explicit load call, try to preload.\r\n\r\n          // early HTML5 implementation (non-standard)\r\n          s._a.autobuffer = 'auto';\r\n\r\n          // standard property, values: none / metadata / auto\r\n          // reference: http://msdn.microsoft.com/en-us/library/ie/ff974759%28v=vs.85%29.aspx\r\n          s._a.preload = 'auto';\r\n\r\n          s._a._called_load = true;\r\n\r\n        } else {\r\n\r\n          sm2._wD(s.id + ': Ignoring request to load again');\r\n\r\n        }\r\n\r\n      } else {\r\n\r\n        if (sm2.html5Only) {\r\n          sm2._wD(s.id + ': No flash support. Exiting.');\r\n          return s;\r\n        }\r\n\r\n        if (s._iO.url && s._iO.url.match(/data:/i)) {\r\n          // data: URIs not supported by Flash, either.\r\n          sm2._wD(s.id + ': data: URIs not supported via Flash. Exiting.');\r\n          return s;\r\n        }\r\n\r\n        try {\r\n          s.isHTML5 = false;\r\n          s._iO = policyFix(loopFix(instanceOptions));\r\n          // if we have \"position\", disable auto-play as we'll be seeking to that position at onload().\r\n          if (s._iO.autoPlay && (s._iO.position || s._iO.from)) {\r\n            sm2._wD(s.id + ': Disabling autoPlay because of non-zero offset case');\r\n            s._iO.autoPlay = false;\r\n          }\r\n          // re-assign local shortcut\r\n          instanceOptions = s._iO;\r\n          if (fV === 8) {\r\n            flash._load(s.id, instanceOptions.url, instanceOptions.stream, instanceOptions.autoPlay, instanceOptions.usePolicyFile);\r\n          } else {\r\n            flash._load(s.id, instanceOptions.url, !!(instanceOptions.stream), !!(instanceOptions.autoPlay), instanceOptions.loops || 1, !!(instanceOptions.autoLoad), instanceOptions.usePolicyFile);\r\n          }\r\n        } catch(e) {\r\n          _wDS('smError', 2);\r\n          debugTS('onload', false);\r\n          catchError({\r\n            type: 'SMSOUND_LOAD_JS_EXCEPTION',\r\n            fatal: true\r\n          });\r\n        }\r\n\r\n      }\r\n\r\n      // after all of this, ensure sound url is up to date.\r\n      s.url = instanceOptions.url;\r\n\r\n      return s;\r\n\r\n    };\r\n\r\n    /**\r\n     * Unloads a sound, canceling any open HTTP requests.\r\n     *\r\n     * @return {SMSound} The SMSound object\r\n     */\r\n\r\n    this.unload = function() {\r\n\r\n      // Flash 8/AS2 can't \"close\" a stream - fake it by loading an empty URL\r\n      // Flash 9/AS3: Close stream, preventing further load\r\n      // HTML5: Most UAs will use empty URL\r\n\r\n      if (s.readyState !== 0) {\r\n\r\n        sm2._wD(s.id + ': unload()');\r\n\r\n        if (!s.isHTML5) {\r\n\r\n          if (fV === 8) {\r\n            flash._unload(s.id, emptyURL);\r\n          } else {\r\n            flash._unload(s.id);\r\n          }\r\n\r\n        } else {\r\n\r\n          stop_html5_timer();\r\n\r\n          if (s._a) {\r\n\r\n            s._a.pause();\r\n\r\n            // update empty URL, too\r\n            lastURL = html5Unload(s._a);\r\n\r\n          }\r\n\r\n        }\r\n\r\n        // reset load/status flags\r\n        resetProperties();\r\n\r\n      }\r\n\r\n      return s;\r\n\r\n    };\r\n\r\n    /**\r\n     * Unloads and destroys a sound.\r\n     */\r\n\r\n    this.destruct = function(_bFromSM) {\r\n\r\n      sm2._wD(s.id + ': Destruct');\r\n\r\n      if (!s.isHTML5) {\r\n\r\n        // kill sound within Flash\r\n        // Disable the onfailure handler\r\n        s._iO.onfailure = null;\r\n        flash._destroySound(s.id);\r\n\r\n      } else {\r\n\r\n        stop_html5_timer();\r\n\r\n        if (s._a) {\r\n          s._a.pause();\r\n          html5Unload(s._a);\r\n          if (!useGlobalHTML5Audio) {\r\n            remove_html5_events();\r\n          }\r\n          // break obvious circular reference\r\n          s._a._s = null;\r\n          s._a = null;\r\n        }\r\n\r\n      }\r\n\r\n      if (!_bFromSM) {\r\n        // ensure deletion from controller\r\n        sm2.destroySound(s.id, true);\r\n      }\r\n\r\n    };\r\n\r\n    /**\r\n     * Begins playing a sound.\r\n     *\r\n     * @param {object} options Optional: Sound options\r\n     * @return {SMSound} The SMSound object\r\n     */\r\n\r\n    this.play = function(options, _updatePlayState) {\r\n\r\n      var fN, allowMulti, a, onready,\r\n          audioClone, onended, oncanplay,\r\n          startOK = true;\r\n\r\n      // <d>\r\n      fN = s.id + ': play(): ';\r\n      // </d>\r\n\r\n      // default to true\r\n      _updatePlayState = (_updatePlayState === _undefined ? true : _updatePlayState);\r\n\r\n      if (!options) {\r\n        options = {};\r\n      }\r\n\r\n      // first, use local URL (if specified)\r\n      if (s.url) {\r\n        s._iO.url = s.url;\r\n      }\r\n\r\n      // mix in any options defined at createSound()\r\n      s._iO = mixin(s._iO, s.options);\r\n\r\n      // mix in any options specific to this method\r\n      s._iO = mixin(options, s._iO);\r\n\r\n      s._iO.url = parseURL(s._iO.url);\r\n\r\n      s.instanceOptions = s._iO;\r\n\r\n      // RTMP-only\r\n      if (!s.isHTML5 && s._iO.serverURL && !s.connected) {\r\n        if (!s.getAutoPlay()) {\r\n          sm2._wD(fN + ' Netstream not connected yet - setting autoPlay');\r\n          s.setAutoPlay(true);\r\n        }\r\n        // play will be called in onconnect()\r\n        return s;\r\n      }\r\n\r\n      if (html5OK(s._iO)) {\r\n        s._setup_html5(s._iO);\r\n        start_html5_timer();\r\n      }\r\n\r\n      if (s.playState === 1 && !s.paused) {\r\n\r\n        allowMulti = s._iO.multiShot;\r\n\r\n        if (!allowMulti) {\r\n\r\n          sm2._wD(fN + 'Already playing (one-shot)', 1);\r\n\r\n          if (s.isHTML5) {\r\n            // go back to original position.\r\n            s.setPosition(s._iO.position);\r\n          }\r\n\r\n          return s;\r\n\r\n        }\r\n\r\n        sm2._wD(fN + 'Already playing (multi-shot)', 1);\r\n\r\n      }\r\n\r\n      // edge case: play() with explicit URL parameter\r\n      if (options.url && options.url !== s.url) {\r\n\r\n        // special case for createSound() followed by load() / play() with url; avoid double-load case.\r\n        if (!s.readyState && !s.isHTML5 && fV === 8 && urlOmitted) {\r\n\r\n          urlOmitted = false;\r\n\r\n        } else {\r\n\r\n          // load using merged options\r\n          s.load(s._iO);\r\n\r\n        }\r\n\r\n      }\r\n\r\n      if (!s.loaded) {\r\n\r\n        if (s.readyState === 0) {\r\n\r\n          sm2._wD(fN + 'Attempting to load');\r\n\r\n          // try to get this sound playing ASAP\r\n          if (!s.isHTML5 && !sm2.html5Only) {\r\n\r\n            // flash: assign directly because setAutoPlay() increments the instanceCount\r\n            s._iO.autoPlay = true;\r\n            s.load(s._iO);\r\n\r\n          } else if (s.isHTML5) {\r\n\r\n            // iOS needs this when recycling sounds, loading a new URL on an existing object.\r\n            s.load(s._iO);\r\n\r\n          } else {\r\n\r\n            sm2._wD(fN + 'Unsupported type. Exiting.');\r\n\r\n            return s;\r\n\r\n          }\r\n\r\n          // HTML5 hack - re-set instanceOptions?\r\n          s.instanceOptions = s._iO;\r\n\r\n        } else if (s.readyState === 2) {\r\n\r\n          sm2._wD(fN + 'Could not load - exiting', 2);\r\n\r\n          return s;\r\n\r\n        } else {\r\n\r\n          sm2._wD(fN + 'Loading - attempting to play...');\r\n\r\n        }\r\n\r\n      } else {\r\n\r\n        // \"play()\"\r\n        sm2._wD(fN.substr(0, fN.lastIndexOf(':')));\r\n\r\n      }\r\n\r\n      if (!s.isHTML5 && fV === 9 && s.position > 0 && s.position === s.duration) {\r\n        // flash 9 needs a position reset if play() is called while at the end of a sound.\r\n        sm2._wD(fN + 'Sound at end, resetting to position: 0');\r\n        options.position = 0;\r\n      }\r\n\r\n      /**\r\n       * Streams will pause when their buffer is full if they are being loaded.\r\n       * In this case paused is true, but the song hasn't started playing yet.\r\n       * If we just call resume() the onplay() callback will never be called.\r\n       * So only call resume() if the position is > 0.\r\n       * Another reason is because options like volume won't have been applied yet.\r\n       * For normal sounds, just resume.\r\n       */\r\n\r\n      if (s.paused && s.position >= 0 && (!s._iO.serverURL || s.position > 0)) {\r\n\r\n        // https://gist.github.com/37b17df75cc4d7a90bf6\r\n        sm2._wD(fN + 'Resuming from paused state', 1);\r\n        s.resume();\r\n\r\n      } else {\r\n\r\n        s._iO = mixin(options, s._iO);\r\n\r\n        /**\r\n         * Preload in the event of play() with position under Flash,\r\n         * or from/to parameters and non-RTMP case\r\n         */\r\n        if (((!s.isHTML5 && s._iO.position !== null && s._iO.position > 0) || (s._iO.from !== null && s._iO.from > 0) || s._iO.to !== null) && s.instanceCount === 0 && s.playState === 0 && !s._iO.serverURL) {\r\n\r\n          onready = function() {\r\n            // sound \"canplay\" or onload()\r\n            // re-apply position/from/to to instance options, and start playback\r\n            s._iO = mixin(options, s._iO);\r\n            s.play(s._iO);\r\n          };\r\n\r\n          // HTML5 needs to at least have \"canplay\" fired before seeking.\r\n          if (s.isHTML5 && !s._html5_canplay) {\r\n\r\n            // this hasn't been loaded yet. load it first, and then do this again.\r\n            sm2._wD(fN + 'Beginning load for non-zero offset case');\r\n\r\n            s.load({\r\n              // note: custom HTML5-only event added for from/to implementation.\r\n              _oncanplay: onready\r\n            });\r\n\r\n          } else if (!s.isHTML5 && !s.loaded && (!s.readyState || s.readyState !== 2)) {\r\n\r\n            // to be safe, preload the whole thing in Flash.\r\n\r\n            sm2._wD(fN + 'Preloading for non-zero offset case');\r\n\r\n            s.load({\r\n              onload: onready\r\n            });\r\n\r\n          }\r\n\r\n          // otherwise, we're ready to go. re-apply local options, and continue\r\n\r\n          s._iO = applyFromTo();\r\n\r\n        }\r\n\r\n        // sm2._wD(fN + 'Starting to play');\r\n\r\n        // increment instance counter, where enabled + supported\r\n        if (!s.instanceCount || s._iO.multiShotEvents || (s.isHTML5 && s._iO.multiShot && !useGlobalHTML5Audio) || (!s.isHTML5 && fV > 8 && !s.getAutoPlay())) {\r\n          s.instanceCount++;\r\n        }\r\n\r\n        // if first play and onposition parameters exist, apply them now\r\n        if (s._iO.onposition && s.playState === 0) {\r\n          attachOnPosition(s);\r\n        }\r\n\r\n        s.playState = 1;\r\n        s.paused = false;\r\n\r\n        s.position = (s._iO.position !== _undefined && !isNaN(s._iO.position) ? s._iO.position : 0);\r\n\r\n        if (!s.isHTML5) {\r\n          s._iO = policyFix(loopFix(s._iO));\r\n        }\r\n\r\n        if (s._iO.onplay && _updatePlayState) {\r\n          s._iO.onplay.apply(s);\r\n          onplay_called = true;\r\n        }\r\n\r\n        s.setVolume(s._iO.volume, true);\r\n        s.setPan(s._iO.pan, true);\r\n\r\n        if (s._iO.playbackRate !== 1) {\r\n          s.setPlaybackRate(s._iO.playbackRate);\r\n        }\r\n\r\n        if (!s.isHTML5) {\r\n\r\n          startOK = flash._start(s.id, s._iO.loops || 1, (fV === 9 ? s.position : s.position / msecScale), s._iO.multiShot || false);\r\n\r\n          if (fV === 9 && !startOK) {\r\n            // edge case: no sound hardware, or 32-channel flash ceiling hit.\r\n            // applies only to Flash 9, non-NetStream/MovieStar sounds.\r\n            // http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Sound.html#play%28%29\r\n            sm2._wD(fN + 'No sound hardware, or 32-sound ceiling hit', 2);\r\n            if (s._iO.onplayerror) {\r\n              s._iO.onplayerror.apply(s);\r\n            }\r\n\r\n          }\r\n\r\n        } else if (s.instanceCount < 2) {\r\n\r\n            // HTML5 single-instance case\r\n\r\n            start_html5_timer();\r\n\r\n            a = s._setup_html5();\r\n\r\n            s.setPosition(s._iO.position);\r\n\r\n            a.play();\r\n\r\n          } else {\r\n\r\n            // HTML5 multi-shot case\r\n\r\n            sm2._wD(s.id + ': Cloning Audio() for instance #' + s.instanceCount + '...');\r\n\r\n            audioClone = new Audio(s._iO.url);\r\n\r\n            onended = function() {\r\n              event.remove(audioClone, 'ended', onended);\r\n              s._onfinish(s);\r\n              // cleanup\r\n              html5Unload(audioClone);\r\n              audioClone = null;\r\n            };\r\n\r\n            oncanplay = function() {\r\n              event.remove(audioClone, 'canplay', oncanplay);\r\n              try {\r\n                audioClone.currentTime = s._iO.position / msecScale;\r\n              } catch(err) {\r\n                complain(s.id + ': multiShot play() failed to apply position of ' + (s._iO.position / msecScale));\r\n              }\r\n              audioClone.play();\r\n            };\r\n\r\n            event.add(audioClone, 'ended', onended);\r\n\r\n            // apply volume to clones, too\r\n            if (s._iO.volume !== _undefined) {\r\n              audioClone.volume = Math.max(0, Math.min(1, s._iO.volume / 100));\r\n            }\r\n\r\n            // playing multiple muted sounds? if you do this, you're weird ;) - but let's cover it.\r\n            if (s.muted) {\r\n              audioClone.muted = true;\r\n            }\r\n\r\n            if (s._iO.position) {\r\n              // HTML5 audio can't seek before onplay() event has fired.\r\n              // wait for canplay, then seek to position and start playback.\r\n              event.add(audioClone, 'canplay', oncanplay);\r\n            } else {\r\n              // begin playback at currentTime: 0\r\n              audioClone.play();\r\n            }\r\n\r\n          }\r\n\r\n      }\r\n\r\n      return s;\r\n\r\n    };\r\n\r\n    // just for convenience\r\n    this.start = this.play;\r\n\r\n    /**\r\n     * Stops playing a sound (and optionally, all sounds)\r\n     *\r\n     * @param {boolean} bAll Optional: Whether to stop all sounds\r\n     * @return {SMSound} The SMSound object\r\n     */\r\n\r\n    this.stop = function(bAll) {\r\n\r\n      var instanceOptions = s._iO,\r\n          originalPosition;\r\n\r\n      if (s.playState === 1) {\r\n\r\n        sm2._wD(s.id + ': stop()');\r\n\r\n        s._onbufferchange(0);\r\n        s._resetOnPosition(0);\r\n        s.paused = false;\r\n\r\n        if (!s.isHTML5) {\r\n          s.playState = 0;\r\n        }\r\n\r\n        // remove onPosition listeners, if any\r\n        detachOnPosition();\r\n\r\n        // and \"to\" position, if set\r\n        if (instanceOptions.to) {\r\n          s.clearOnPosition(instanceOptions.to);\r\n        }\r\n\r\n        if (!s.isHTML5) {\r\n\r\n          flash._stop(s.id, bAll);\r\n\r\n          // hack for netStream: just unload\r\n          if (instanceOptions.serverURL) {\r\n            s.unload();\r\n          }\r\n\r\n        } else if (s._a) {\r\n\r\n            originalPosition = s.position;\r\n\r\n            // act like Flash, though\r\n            s.setPosition(0);\r\n\r\n            // hack: reflect old position for onstop() (also like Flash)\r\n            s.position = originalPosition;\r\n\r\n            // html5 has no stop()\r\n            // NOTE: pausing means iOS requires interaction to resume.\r\n            s._a.pause();\r\n\r\n            s.playState = 0;\r\n\r\n            // and update UI\r\n            s._onTimer();\r\n\r\n            stop_html5_timer();\r\n\r\n          }\r\n\r\n        s.instanceCount = 0;\r\n        s._iO = {};\r\n\r\n        if (instanceOptions.onstop) {\r\n          instanceOptions.onstop.apply(s);\r\n        }\r\n\r\n      }\r\n\r\n      return s;\r\n\r\n    };\r\n\r\n    /**\r\n     * Undocumented/internal: Sets autoPlay for RTMP.\r\n     *\r\n     * @param {boolean} autoPlay state\r\n     */\r\n\r\n    this.setAutoPlay = function(autoPlay) {\r\n\r\n      sm2._wD(s.id + ': Autoplay turned ' + (autoPlay ? 'on' : 'off'));\r\n      s._iO.autoPlay = autoPlay;\r\n\r\n      if (!s.isHTML5) {\r\n        flash._setAutoPlay(s.id, autoPlay);\r\n        if (autoPlay) {\r\n          // only increment the instanceCount if the sound isn't loaded (TODO: verify RTMP)\r\n          if (!s.instanceCount && s.readyState === 1) {\r\n            s.instanceCount++;\r\n            sm2._wD(s.id + ': Incremented instance count to ' + s.instanceCount);\r\n          }\r\n        }\r\n      }\r\n\r\n    };\r\n\r\n    /**\r\n     * Undocumented/internal: Returns the autoPlay boolean.\r\n     *\r\n     * @return {boolean} The current autoPlay value\r\n     */\r\n\r\n    this.getAutoPlay = function() {\r\n\r\n      return s._iO.autoPlay;\r\n\r\n    };\r\n\r\n    /**\r\n     * Sets the playback rate of a sound (HTML5-only.)\r\n     *\r\n     * @param {number} playbackRate (+/-)\r\n     * @return {SMSound} The SMSound object\r\n     */\r\n\r\n    this.setPlaybackRate = function(playbackRate) {\r\n\r\n      // Per Mozilla, limit acceptable values to prevent playback from stopping (unless allowOverride is truthy.)\r\n      // https://developer.mozilla.org/en-US/Apps/Build/Audio_and_video_delivery/WebAudio_playbackRate_explained\r\n      var normalizedRate = Math.max(0.5, Math.min(4, playbackRate));\r\n\r\n      // <d>\r\n      if (normalizedRate !== playbackRate) {\r\n        sm2._wD(s.id + ': setPlaybackRate(' + playbackRate + '): limiting rate to ' + normalizedRate, 2);\r\n      }\r\n      // </d>\r\n\r\n      if (s.isHTML5) {\r\n        try {\r\n          s._iO.playbackRate = normalizedRate;\r\n          s._a.playbackRate = normalizedRate;\r\n        } catch(e) {\r\n          sm2._wD(s.id + ': setPlaybackRate(' + normalizedRate + ') failed: ' + e.message, 2);\r\n        }\r\n      }\r\n\r\n      return s;\r\n\r\n    };\r\n\r\n    /**\r\n     * Sets the position of a sound.\r\n     *\r\n     * @param {number} nMsecOffset Position (milliseconds)\r\n     * @return {SMSound} The SMSound object\r\n     */\r\n\r\n    this.setPosition = function(nMsecOffset) {\r\n\r\n      if (nMsecOffset === _undefined) {\r\n        nMsecOffset = 0;\r\n      }\r\n\r\n      var position, position1K,\r\n          // Use the duration from the instance options, if we don't have a track duration yet.\r\n          // position >= 0 and <= current available (loaded) duration\r\n          offset = (s.isHTML5 ? Math.max(nMsecOffset, 0) : Math.min(s.duration || s._iO.duration, Math.max(nMsecOffset, 0)));\r\n\r\n      s.position = offset;\r\n      position1K = s.position / msecScale;\r\n      s._resetOnPosition(s.position);\r\n      s._iO.position = offset;\r\n\r\n      if (!s.isHTML5) {\r\n\r\n        position = (fV === 9 ? s.position : position1K);\r\n\r\n        if (s.readyState && s.readyState !== 2) {\r\n          // if paused or not playing, will not resume (by playing)\r\n          flash._setPosition(s.id, position, (s.paused || !s.playState), s._iO.multiShot);\r\n        }\r\n\r\n      } else if (s._a) {\r\n\r\n        // Set the position in the canplay handler if the sound is not ready yet\r\n        if (s._html5_canplay) {\r\n\r\n          if (s._a.currentTime.toFixed(3) !== position1K.toFixed(3)) {\r\n\r\n            /**\r\n             * DOM/JS errors/exceptions to watch out for:\r\n             * if seek is beyond (loaded?) position, \"DOM exception 11\"\r\n             * \"INDEX_SIZE_ERR\": DOM exception 1\r\n             */\r\n            sm2._wD(s.id + ': setPosition(' + position1K + ')');\r\n\r\n            try {\r\n              s._a.currentTime = position1K;\r\n              if (s.playState === 0 || s.paused) {\r\n                // allow seek without auto-play/resume\r\n                s._a.pause();\r\n              }\r\n            } catch(e) {\r\n              sm2._wD(s.id + ': setPosition(' + position1K + ') failed: ' + e.message, 2);\r\n            }\r\n\r\n          }\r\n\r\n        } else if (position1K) {\r\n\r\n          // warn on non-zero seek attempts\r\n          sm2._wD(s.id + ': setPosition(' + position1K + '): Cannot seek yet, sound not ready', 2);\r\n          return s;\r\n\r\n        }\r\n\r\n        if (s.paused) {\r\n\r\n          // if paused, refresh UI right away by forcing update\r\n          s._onTimer(true);\r\n\r\n        }\r\n\r\n      }\r\n\r\n      return s;\r\n\r\n    };\r\n\r\n    /**\r\n     * Pauses sound playback.\r\n     *\r\n     * @return {SMSound} The SMSound object\r\n     */\r\n\r\n    this.pause = function(_bCallFlash) {\r\n\r\n      if (s.paused || (s.playState === 0 && s.readyState !== 1)) return s;\r\n\r\n      sm2._wD(s.id + ': pause()');\r\n      s.paused = true;\r\n\r\n      if (!s.isHTML5) {\r\n        if (_bCallFlash || _bCallFlash === _undefined) {\r\n          flash._pause(s.id, s._iO.multiShot);\r\n        }\r\n      } else {\r\n        s._setup_html5().pause();\r\n        stop_html5_timer();\r\n      }\r\n\r\n      if (s._iO.onpause) {\r\n        s._iO.onpause.apply(s);\r\n      }\r\n\r\n      return s;\r\n\r\n    };\r\n\r\n    /**\r\n     * Resumes sound playback.\r\n     *\r\n     * @return {SMSound} The SMSound object\r\n     */\r\n\r\n    /**\r\n     * When auto-loaded streams pause on buffer full they have a playState of 0.\r\n     * We need to make sure that the playState is set to 1 when these streams \"resume\".\r\n     * When a paused stream is resumed, we need to trigger the onplay() callback if it\r\n     * hasn't been called already. In this case since the sound is being played for the\r\n     * first time, I think it's more appropriate to call onplay() rather than onresume().\r\n     */\r\n\r\n    this.resume = function() {\r\n\r\n      var instanceOptions = s._iO;\r\n\r\n      if (!s.paused) return s;\r\n\r\n      sm2._wD(s.id + ': resume()');\r\n      s.paused = false;\r\n      s.playState = 1;\r\n\r\n      if (!s.isHTML5) {\r\n\r\n        if (instanceOptions.isMovieStar && !instanceOptions.serverURL) {\r\n          // Bizarre Webkit bug (Chrome reported via 8tracks.com dudes): AAC content paused for 30+ seconds(?) will not resume without a reposition.\r\n          s.setPosition(s.position);\r\n        }\r\n\r\n        // flash method is toggle-based (pause/resume)\r\n        flash._pause(s.id, instanceOptions.multiShot);\r\n\r\n      } else {\r\n\r\n        s._setup_html5().play();\r\n        start_html5_timer();\r\n\r\n      }\r\n\r\n      if (!onplay_called && instanceOptions.onplay) {\r\n\r\n        instanceOptions.onplay.apply(s);\r\n        onplay_called = true;\r\n\r\n      } else if (instanceOptions.onresume) {\r\n\r\n        instanceOptions.onresume.apply(s);\r\n\r\n      }\r\n\r\n      return s;\r\n\r\n    };\r\n\r\n    /**\r\n     * Toggles sound playback.\r\n     *\r\n     * @return {SMSound} The SMSound object\r\n     */\r\n\r\n    this.togglePause = function() {\r\n\r\n      sm2._wD(s.id + ': togglePause()');\r\n\r\n      if (s.playState === 0) {\r\n        s.play({\r\n          position: (fV === 9 && !s.isHTML5 ? s.position : s.position / msecScale)\r\n        });\r\n        return s;\r\n      }\r\n\r\n      if (s.paused) {\r\n        s.resume();\r\n      } else {\r\n        s.pause();\r\n      }\r\n\r\n      return s;\r\n\r\n    };\r\n\r\n    /**\r\n     * Sets the panning (L-R) effect.\r\n     *\r\n     * @param {number} nPan The pan value (-100 to 100)\r\n     * @return {SMSound} The SMSound object\r\n     */\r\n\r\n    this.setPan = function(nPan, bInstanceOnly) {\r\n\r\n      if (nPan === _undefined) {\r\n        nPan = 0;\r\n      }\r\n\r\n      if (bInstanceOnly === _undefined) {\r\n        bInstanceOnly = false;\r\n      }\r\n\r\n      if (!s.isHTML5) {\r\n        flash._setPan(s.id, nPan);\r\n      } // else { no HTML5 pan? }\r\n\r\n      s._iO.pan = nPan;\r\n\r\n      if (!bInstanceOnly) {\r\n        s.pan = nPan;\r\n        s.options.pan = nPan;\r\n      }\r\n\r\n      return s;\r\n\r\n    };\r\n\r\n    /**\r\n     * Sets the volume.\r\n     *\r\n     * @param {number} nVol The volume value (0 to 100)\r\n     * @return {SMSound} The SMSound object\r\n     */\r\n\r\n    this.setVolume = function(nVol, _bInstanceOnly) {\r\n\r\n      /**\r\n       * Note: Setting volume has no effect on iOS \"special snowflake\" devices.\r\n       * Hardware volume control overrides software, and volume\r\n       * will always return 1 per Apple docs. (iOS 4 + 5.)\r\n       * http://developer.apple.com/library/safari/documentation/AudioVideo/Conceptual/HTML-canvas-guide/AddingSoundtoCanvasAnimations/AddingSoundtoCanvasAnimations.html\r\n       */\r\n\r\n      if (nVol === _undefined) {\r\n        nVol = 100;\r\n      }\r\n\r\n      if (_bInstanceOnly === _undefined) {\r\n        _bInstanceOnly = false;\r\n      }\r\n\r\n      if (!s.isHTML5) {\r\n\r\n        flash._setVolume(s.id, (sm2.muted && !s.muted) || s.muted ? 0 : nVol);\r\n\r\n      } else if (s._a) {\r\n\r\n        if (sm2.muted && !s.muted) {\r\n          s.muted = true;\r\n          s._a.muted = true;\r\n        }\r\n\r\n        // valid range for native HTML5 Audio(): 0-1\r\n        s._a.volume = Math.max(0, Math.min(1, nVol / 100));\r\n\r\n      }\r\n\r\n      s._iO.volume = nVol;\r\n\r\n      if (!_bInstanceOnly) {\r\n        s.volume = nVol;\r\n        s.options.volume = nVol;\r\n      }\r\n\r\n      return s;\r\n\r\n    };\r\n\r\n    /**\r\n     * Mutes the sound.\r\n     *\r\n     * @return {SMSound} The SMSound object\r\n     */\r\n\r\n    this.mute = function() {\r\n\r\n      s.muted = true;\r\n\r\n      if (!s.isHTML5) {\r\n        flash._setVolume(s.id, 0);\r\n      } else if (s._a) {\r\n        s._a.muted = true;\r\n      }\r\n\r\n      return s;\r\n\r\n    };\r\n\r\n    /**\r\n     * Unmutes the sound.\r\n     *\r\n     * @return {SMSound} The SMSound object\r\n     */\r\n\r\n    this.unmute = function() {\r\n\r\n      s.muted = false;\r\n      var hasIO = (s._iO.volume !== _undefined);\r\n\r\n      if (!s.isHTML5) {\r\n        flash._setVolume(s.id, hasIO ? s._iO.volume : s.options.volume);\r\n      } else if (s._a) {\r\n        s._a.muted = false;\r\n      }\r\n\r\n      return s;\r\n\r\n    };\r\n\r\n    /**\r\n     * Toggles the muted state of a sound.\r\n     *\r\n     * @return {SMSound} The SMSound object\r\n     */\r\n\r\n    this.toggleMute = function() {\r\n\r\n      return (s.muted ? s.unmute() : s.mute());\r\n\r\n    };\r\n\r\n    /**\r\n     * Registers a callback to be fired when a sound reaches a given position during playback.\r\n     *\r\n     * @param {number} nPosition The position to watch for\r\n     * @param {function} oMethod The relevant callback to fire\r\n     * @param {object} oScope Optional: The scope to apply the callback to\r\n     * @return {SMSound} The SMSound object\r\n     */\r\n\r\n    this.onPosition = function(nPosition, oMethod, oScope) {\r\n\r\n      // TODO: basic dupe checking?\r\n\r\n      onPositionItems.push({\r\n        position: parseInt(nPosition, 10),\r\n        method: oMethod,\r\n        scope: (oScope !== _undefined ? oScope : s),\r\n        fired: false\r\n      });\r\n\r\n      return s;\r\n\r\n    };\r\n\r\n    // legacy/backwards-compability: lower-case method name\r\n    this.onposition = this.onPosition;\r\n\r\n    /**\r\n     * Removes registered callback(s) from a sound, by position and/or callback.\r\n     *\r\n     * @param {number} nPosition The position to clear callback(s) for\r\n     * @param {function} oMethod Optional: Identify one callback to be removed when multiple listeners exist for one position\r\n     * @return {SMSound} The SMSound object\r\n     */\r\n\r\n    this.clearOnPosition = function(nPosition, oMethod) {\r\n\r\n      var i;\r\n\r\n      nPosition = parseInt(nPosition, 10);\r\n\r\n      if (isNaN(nPosition)) {\r\n        // safety check\r\n        return;\r\n      }\r\n\r\n      for (i = 0; i < onPositionItems.length; i++) {\r\n\r\n        if (nPosition === onPositionItems[i].position) {\r\n          // remove this item if no method was specified, or, if the method matches\r\n\r\n          if (!oMethod || (oMethod === onPositionItems[i].method)) {\r\n\r\n            if (onPositionItems[i].fired) {\r\n              // decrement \"fired\" counter, too\r\n              onPositionFired--;\r\n            }\r\n\r\n            onPositionItems.splice(i, 1);\r\n\r\n          }\r\n\r\n        }\r\n\r\n      }\r\n\r\n    };\r\n\r\n    this._processOnPosition = function() {\r\n\r\n      var i, item, j = onPositionItems.length;\r\n\r\n      if (!j || !s.playState || onPositionFired >= j) return false;\r\n\r\n      for (i = j - 1; i >= 0; i--) {\r\n\r\n        item = onPositionItems[i];\r\n\r\n        if (!item.fired && s.position >= item.position) {\r\n\r\n          item.fired = true;\r\n          onPositionFired++;\r\n          item.method.apply(item.scope, [item.position]);\r\n\r\n          //  reset j -- onPositionItems.length can be changed in the item callback above... occasionally breaking the loop.\r\n          j = onPositionItems.length;\r\n\r\n        }\r\n\r\n      }\r\n\r\n      return true;\r\n\r\n    };\r\n\r\n    this._resetOnPosition = function(nPosition) {\r\n\r\n      // reset \"fired\" for items interested in this position\r\n      var i, item, j = onPositionItems.length;\r\n\r\n      if (!j) return false;\r\n\r\n      for (i = j - 1; i >= 0; i--) {\r\n\r\n        item = onPositionItems[i];\r\n\r\n        if (item.fired && nPosition <= item.position) {\r\n          item.fired = false;\r\n          onPositionFired--;\r\n        }\r\n\r\n      }\r\n\r\n      return true;\r\n\r\n    };\r\n\r\n    /**\r\n     * SMSound() private internals\r\n     * --------------------------------\r\n     */\r\n\r\n    applyFromTo = function() {\r\n\r\n      var instanceOptions = s._iO,\r\n          f = instanceOptions.from,\r\n          t = instanceOptions.to,\r\n          start, end;\r\n\r\n      end = function() {\r\n\r\n        // end has been reached.\r\n        sm2._wD(s.id + ': \"To\" time of ' + t + ' reached.');\r\n\r\n        // detach listener\r\n        s.clearOnPosition(t, end);\r\n\r\n        // stop should clear this, too\r\n        s.stop();\r\n\r\n      };\r\n\r\n      start = function() {\r\n\r\n        sm2._wD(s.id + ': Playing \"from\" ' + f);\r\n\r\n        // add listener for end\r\n        if (t !== null && !isNaN(t)) {\r\n          s.onPosition(t, end);\r\n        }\r\n\r\n      };\r\n\r\n      if (f !== null && !isNaN(f)) {\r\n\r\n        // apply to instance options, guaranteeing correct start position.\r\n        instanceOptions.position = f;\r\n\r\n        // multiShot timing can't be tracked, so prevent that.\r\n        instanceOptions.multiShot = false;\r\n\r\n        start();\r\n\r\n      }\r\n\r\n      // return updated instanceOptions including starting position\r\n      return instanceOptions;\r\n\r\n    };\r\n\r\n    attachOnPosition = function() {\r\n\r\n      var item,\r\n          op = s._iO.onposition;\r\n\r\n      // attach onposition things, if any, now.\r\n\r\n      if (op) {\r\n\r\n        for (item in op) {\r\n          if (op.hasOwnProperty(item)) {\r\n            s.onPosition(parseInt(item, 10), op[item]);\r\n          }\r\n        }\r\n\r\n      }\r\n\r\n    };\r\n\r\n    detachOnPosition = function() {\r\n\r\n      var item,\r\n          op = s._iO.onposition;\r\n\r\n      // detach any onposition()-style listeners.\r\n\r\n      if (op) {\r\n\r\n        for (item in op) {\r\n          if (op.hasOwnProperty(item)) {\r\n            s.clearOnPosition(parseInt(item, 10));\r\n          }\r\n        }\r\n\r\n      }\r\n\r\n    };\r\n\r\n    start_html5_timer = function() {\r\n\r\n      if (s.isHTML5) {\r\n        startTimer(s);\r\n      }\r\n\r\n    };\r\n\r\n    stop_html5_timer = function() {\r\n\r\n      if (s.isHTML5) {\r\n        stopTimer(s);\r\n      }\r\n\r\n    };\r\n\r\n    resetProperties = function(retainPosition) {\r\n\r\n      if (!retainPosition) {\r\n        onPositionItems = [];\r\n        onPositionFired = 0;\r\n      }\r\n\r\n      onplay_called = false;\r\n\r\n      s._hasTimer = null;\r\n      s._a = null;\r\n      s._html5_canplay = false;\r\n      s.bytesLoaded = null;\r\n      s.bytesTotal = null;\r\n      s.duration = (s._iO && s._iO.duration ? s._iO.duration : null);\r\n      s.durationEstimate = null;\r\n      s.buffered = [];\r\n\r\n      // legacy: 1D array\r\n      s.eqData = [];\r\n\r\n      s.eqData.left = [];\r\n      s.eqData.right = [];\r\n\r\n      s.failures = 0;\r\n      s.isBuffering = false;\r\n      s.instanceOptions = {};\r\n      s.instanceCount = 0;\r\n      s.loaded = false;\r\n      s.metadata = {};\r\n\r\n      // 0 = uninitialised, 1 = loading, 2 = failed/error, 3 = loaded/success\r\n      s.readyState = 0;\r\n\r\n      s.muted = false;\r\n      s.paused = false;\r\n\r\n      s.peakData = {\r\n        left: 0,\r\n        right: 0\r\n      };\r\n\r\n      s.waveformData = {\r\n        left: [],\r\n        right: []\r\n      };\r\n\r\n      s.playState = 0;\r\n      s.position = null;\r\n\r\n      s.id3 = {};\r\n\r\n    };\r\n\r\n    resetProperties();\r\n\r\n    /**\r\n     * Pseudo-private SMSound internals\r\n     * --------------------------------\r\n     */\r\n\r\n    this._onTimer = function(bForce) {\r\n\r\n      /**\r\n       * HTML5-only _whileplaying() etc.\r\n       * called from both HTML5 native events, and polling/interval-based timers\r\n       * mimics flash and fires only when time/duration change, so as to be polling-friendly\r\n       */\r\n\r\n      var duration, isNew = false, time, x = {};\r\n\r\n      if (s._hasTimer || bForce) {\r\n\r\n        // TODO: May not need to track readyState (1 = loading)\r\n\r\n        if (s._a && (bForce || ((s.playState > 0 || s.readyState === 1) && !s.paused))) {\r\n\r\n          duration = s._get_html5_duration();\r\n\r\n          if (duration !== lastHTML5State.duration) {\r\n\r\n            lastHTML5State.duration = duration;\r\n            s.duration = duration;\r\n            isNew = true;\r\n\r\n          }\r\n\r\n          // TODO: investigate why this goes wack if not set/re-set each time.\r\n          s.durationEstimate = s.duration;\r\n\r\n          time = (s._a.currentTime * msecScale || 0);\r\n\r\n          if (time !== lastHTML5State.time) {\r\n\r\n            lastHTML5State.time = time;\r\n            isNew = true;\r\n\r\n          }\r\n\r\n          if (isNew || bForce) {\r\n\r\n            s._whileplaying(time, x, x, x, x);\r\n\r\n          }\r\n\r\n        }/* else {\r\n\r\n          // sm2._wD('_onTimer: Warn for \"'+s.id+'\": '+(!s._a?'Could not find element. ':'')+(s.playState === 0?'playState bad, 0?':'playState = '+s.playState+', OK'));\r\n\r\n          return false;\r\n\r\n        }*/\r\n\r\n      }\r\n\r\n      return isNew;\r\n\r\n    };\r\n\r\n    this._get_html5_duration = function() {\r\n\r\n      var instanceOptions = s._iO,\r\n          // if audio object exists, use its duration - else, instance option duration (if provided - it's a hack, really, and should be retired) OR null\r\n          d = (s._a && s._a.duration ? s._a.duration * msecScale : (instanceOptions && instanceOptions.duration ? instanceOptions.duration : null)),\r\n          result = (d && !isNaN(d) && d !== Infinity ? d : null);\r\n\r\n      return result;\r\n\r\n    };\r\n\r\n    this._apply_loop = function(a, nLoops) {\r\n\r\n      /**\r\n       * boolean instead of \"loop\", for webkit? - spec says string. http://www.w3.org/TR/html-markup/audio.html#audio.attrs.loop\r\n       * note that loop is either off or infinite under HTML5, unlike Flash which allows arbitrary loop counts to be specified.\r\n       */\r\n\r\n      // <d>\r\n      if (!a.loop && nLoops > 1) {\r\n        sm2._wD('Note: Native HTML5 looping is infinite.', 1);\r\n      }\r\n      // </d>\r\n\r\n      a.loop = (nLoops > 1 ? 'loop' : '');\r\n\r\n    };\r\n\r\n    this._setup_html5 = function(options) {\r\n\r\n      var instanceOptions = mixin(s._iO, options),\r\n          a = useGlobalHTML5Audio ? globalHTML5Audio : s._a,\r\n          dURL = decodeURI(instanceOptions.url),\r\n          sameURL;\r\n\r\n      /**\r\n       * \"First things first, I, Poppa...\" (reset the previous state of the old sound, if playing)\r\n       * Fixes case with devices that can only play one sound at a time\r\n       * Otherwise, other sounds in mid-play will be terminated without warning and in a stuck state\r\n       */\r\n\r\n      if (useGlobalHTML5Audio) {\r\n\r\n        if (dURL === decodeURI(lastGlobalHTML5URL)) {\r\n          // global HTML5 audio: re-use of URL\r\n          sameURL = true;\r\n        }\r\n\r\n      } else if (dURL === decodeURI(lastURL)) {\r\n\r\n        // options URL is the same as the \"last\" URL, and we used (loaded) it\r\n        sameURL = true;\r\n\r\n      }\r\n\r\n      if (a) {\r\n\r\n        if (a._s) {\r\n\r\n          if (useGlobalHTML5Audio) {\r\n\r\n            if (a._s && a._s.playState && !sameURL) {\r\n\r\n              // global HTML5 audio case, and loading a new URL. stop the currently-playing one.\r\n              a._s.stop();\r\n\r\n            }\r\n\r\n          } else if (!useGlobalHTML5Audio && dURL === decodeURI(lastURL)) {\r\n\r\n            // non-global HTML5 reuse case: same url, ignore request\r\n            s._apply_loop(a, instanceOptions.loops);\r\n\r\n            return a;\r\n\r\n          }\r\n\r\n        }\r\n\r\n        if (!sameURL) {\r\n\r\n          // don't retain onPosition() stuff with new URLs.\r\n\r\n          if (lastURL) {\r\n            resetProperties(false);\r\n          }\r\n\r\n          // assign new HTML5 URL\r\n\r\n          a.src = instanceOptions.url;\r\n\r\n          s.url = instanceOptions.url;\r\n\r\n          lastURL = instanceOptions.url;\r\n\r\n          lastGlobalHTML5URL = instanceOptions.url;\r\n\r\n          a._called_load = false;\r\n\r\n        }\r\n\r\n      } else {\r\n\r\n        if (instanceOptions.autoLoad || instanceOptions.autoPlay) {\r\n\r\n          s._a = new Audio(instanceOptions.url);\r\n          s._a.load();\r\n\r\n        } else {\r\n\r\n          // null for stupid Opera 9.64 case\r\n          s._a = (isOpera && opera.version() < 10 ? new Audio(null) : new Audio());\r\n\r\n        }\r\n\r\n        // assign local reference\r\n        a = s._a;\r\n\r\n        a._called_load = false;\r\n\r\n        if (useGlobalHTML5Audio) {\r\n\r\n          globalHTML5Audio = a;\r\n\r\n        }\r\n\r\n      }\r\n\r\n      s.isHTML5 = true;\r\n\r\n      // store a ref on the track\r\n      s._a = a;\r\n\r\n      // store a ref on the audio\r\n      a._s = s;\r\n\r\n      add_html5_events();\r\n\r\n      s._apply_loop(a, instanceOptions.loops);\r\n\r\n      if (instanceOptions.autoLoad || instanceOptions.autoPlay) {\r\n\r\n        s.load();\r\n\r\n      } else {\r\n\r\n        // early HTML5 implementation (non-standard)\r\n        a.autobuffer = false;\r\n\r\n        // standard ('none' is also an option.)\r\n        a.preload = 'auto';\r\n\r\n      }\r\n\r\n      return a;\r\n\r\n    };\r\n\r\n    add_html5_events = function() {\r\n\r\n      if (s._a._added_events) return false;\r\n\r\n      var f;\r\n\r\n      function add(oEvt, oFn, bCapture) {\r\n        return s._a ? s._a.addEventListener(oEvt, oFn, bCapture || false) : null;\r\n      }\r\n\r\n      s._a._added_events = true;\r\n\r\n      for (f in html5_events) {\r\n        if (html5_events.hasOwnProperty(f)) {\r\n          add(f, html5_events[f]);\r\n        }\r\n      }\r\n\r\n      return true;\r\n\r\n    };\r\n\r\n    remove_html5_events = function() {\r\n\r\n      // Remove event listeners\r\n\r\n      var f;\r\n\r\n      function remove(oEvt, oFn, bCapture) {\r\n        return (s._a ? s._a.removeEventListener(oEvt, oFn, bCapture || false) : null);\r\n      }\r\n\r\n      sm2._wD(s.id + ': Removing event listeners');\r\n      s._a._added_events = false;\r\n\r\n      for (f in html5_events) {\r\n        if (html5_events.hasOwnProperty(f)) {\r\n          remove(f, html5_events[f]);\r\n        }\r\n      }\r\n\r\n    };\r\n\r\n    /**\r\n     * Pseudo-private event internals\r\n     * ------------------------------\r\n     */\r\n\r\n    this._onload = function(nSuccess) {\r\n\r\n      var fN,\r\n          // check for duration to prevent false positives from flash 8 when loading from cache.\r\n          loadOK = !!nSuccess || (!s.isHTML5 && fV === 8 && s.duration);\r\n\r\n      // <d>\r\n      fN = s.id + ': ';\r\n      sm2._wD(fN + (loadOK ? 'onload()' : 'Failed to load / invalid sound?' + (!s.duration ? ' Zero-length duration reported.' : ' -') + ' (' + s.url + ')'), (loadOK ? 1 : 2));\r\n\r\n      if (!loadOK && !s.isHTML5) {\r\n        if (sm2.sandbox.noRemote === true) {\r\n          sm2._wD(fN + str('noNet'), 1);\r\n        }\r\n        if (sm2.sandbox.noLocal === true) {\r\n          sm2._wD(fN + str('noLocal'), 1);\r\n        }\r\n      }\r\n      // </d>\r\n\r\n      s.loaded = loadOK;\r\n      s.readyState = (loadOK ? 3 : 2);\r\n      s._onbufferchange(0);\r\n\r\n      if (!loadOK && !s.isHTML5) {\r\n        // note: no error code from Flash.\r\n        s._onerror();\r\n      }\r\n\r\n      if (s._iO.onload) {\r\n        wrapCallback(s, function() {\r\n          s._iO.onload.apply(s, [loadOK]);\r\n        });\r\n      }\r\n\r\n      return true;\r\n\r\n    };\r\n\r\n    this._onerror = function(errorCode, description) {\r\n\r\n      // https://html.spec.whatwg.org/multipage/embedded-content.html#error-codes\r\n      if (s._iO.onerror) {\r\n        wrapCallback(s, function() {\r\n          s._iO.onerror.apply(s, [errorCode, description]);\r\n        });\r\n      }\r\n\r\n    };\r\n\r\n    this._onbufferchange = function(nIsBuffering) {\r\n\r\n      // ignore if not playing\r\n      if (s.playState === 0) return false;\r\n\r\n      if ((nIsBuffering && s.isBuffering) || (!nIsBuffering && !s.isBuffering)) return false;\r\n\r\n      s.isBuffering = (nIsBuffering === 1);\r\n\r\n      if (s._iO.onbufferchange) {\r\n        sm2._wD(s.id + ': Buffer state change: ' + nIsBuffering);\r\n        s._iO.onbufferchange.apply(s, [nIsBuffering]);\r\n      }\r\n\r\n      return true;\r\n\r\n    };\r\n\r\n    /**\r\n     * Playback may have stopped due to buffering, or related reason.\r\n     * This state can be encountered on iOS < 6 when auto-play is blocked.\r\n     */\r\n\r\n    this._onsuspend = function() {\r\n\r\n      if (s._iO.onsuspend) {\r\n        sm2._wD(s.id + ': Playback suspended');\r\n        s._iO.onsuspend.apply(s);\r\n      }\r\n\r\n      return true;\r\n\r\n    };\r\n\r\n    /**\r\n     * flash 9/movieStar + RTMP-only method, should fire only once at most\r\n     * at this point we just recreate failed sounds rather than trying to reconnect\r\n     */\r\n\r\n    this._onfailure = function(msg, level, code) {\r\n\r\n      s.failures++;\r\n      sm2._wD(s.id + ': Failure (' + s.failures + '): ' + msg);\r\n\r\n      if (s._iO.onfailure && s.failures === 1) {\r\n        s._iO.onfailure(msg, level, code);\r\n      } else {\r\n        sm2._wD(s.id + ': Ignoring failure');\r\n      }\r\n\r\n    };\r\n\r\n    /**\r\n     * flash 9/movieStar + RTMP-only method for unhandled warnings/exceptions from Flash\r\n     * e.g., RTMP \"method missing\" warning (non-fatal) for getStreamLength on server\r\n     */\r\n\r\n    this._onwarning = function(msg, level, code) {\r\n\r\n      if (s._iO.onwarning) {\r\n        s._iO.onwarning(msg, level, code);\r\n      }\r\n\r\n    };\r\n\r\n    this._onfinish = function() {\r\n\r\n      // store local copy before it gets trashed...\r\n      var io_onfinish = s._iO.onfinish;\r\n\r\n      s._onbufferchange(0);\r\n      s._resetOnPosition(0);\r\n\r\n      // reset some state items\r\n      if (s.instanceCount) {\r\n\r\n        s.instanceCount--;\r\n\r\n        if (!s.instanceCount) {\r\n\r\n          // remove onPosition listeners, if any\r\n          detachOnPosition();\r\n\r\n          // reset instance options\r\n          s.playState = 0;\r\n          s.paused = false;\r\n          s.instanceCount = 0;\r\n          s.instanceOptions = {};\r\n          s._iO = {};\r\n          stop_html5_timer();\r\n\r\n          // reset position, too\r\n          if (s.isHTML5) {\r\n            s.position = 0;\r\n          }\r\n\r\n        }\r\n\r\n        if (!s.instanceCount || s._iO.multiShotEvents) {\r\n          // fire onfinish for last, or every instance\r\n          if (io_onfinish) {\r\n            sm2._wD(s.id + ': onfinish()');\r\n            wrapCallback(s, function() {\r\n              io_onfinish.apply(s);\r\n            });\r\n          }\r\n        }\r\n\r\n      }\r\n\r\n    };\r\n\r\n    this._whileloading = function(nBytesLoaded, nBytesTotal, nDuration, nBufferLength) {\r\n\r\n      var instanceOptions = s._iO;\r\n\r\n      s.bytesLoaded = nBytesLoaded;\r\n      s.bytesTotal = nBytesTotal;\r\n      s.duration = Math.floor(nDuration);\r\n      s.bufferLength = nBufferLength;\r\n\r\n      if (!s.isHTML5 && !instanceOptions.isMovieStar) {\r\n\r\n        if (instanceOptions.duration) {\r\n          // use duration from options, if specified and larger. nobody should be specifying duration in options, actually, and it should be retired.\r\n          s.durationEstimate = (s.duration > instanceOptions.duration) ? s.duration : instanceOptions.duration;\r\n        } else {\r\n          s.durationEstimate = parseInt((s.bytesTotal / s.bytesLoaded) * s.duration, 10);\r\n        }\r\n\r\n      } else {\r\n\r\n        s.durationEstimate = s.duration;\r\n\r\n      }\r\n\r\n      // for flash, reflect sequential-load-style buffering\r\n      if (!s.isHTML5) {\r\n        s.buffered = [{\r\n          start: 0,\r\n          end: s.duration\r\n        }];\r\n      }\r\n\r\n      // allow whileloading to fire even if \"load\" fired under HTML5, due to HTTP range/partials\r\n      if ((s.readyState !== 3 || s.isHTML5) && instanceOptions.whileloading) {\r\n        instanceOptions.whileloading.apply(s);\r\n      }\r\n\r\n    };\r\n\r\n    this._whileplaying = function(nPosition, oPeakData, oWaveformDataLeft, oWaveformDataRight, oEQData) {\r\n\r\n      var instanceOptions = s._iO,\r\n          eqLeft;\r\n\r\n      // flash safety net\r\n      if (isNaN(nPosition) || nPosition === null) return false;\r\n\r\n      // Safari HTML5 play() may return small -ve values when starting from position: 0, eg. -50.120396875. Unexpected/invalid per W3, I think. Normalize to 0.\r\n      s.position = Math.max(0, nPosition);\r\n\r\n      s._processOnPosition();\r\n\r\n      if (!s.isHTML5 && fV > 8) {\r\n\r\n        if (instanceOptions.usePeakData && oPeakData !== _undefined && oPeakData) {\r\n          s.peakData = {\r\n            left: oPeakData.leftPeak,\r\n            right: oPeakData.rightPeak\r\n          };\r\n        }\r\n\r\n        if (instanceOptions.useWaveformData && oWaveformDataLeft !== _undefined && oWaveformDataLeft) {\r\n          s.waveformData = {\r\n            left: oWaveformDataLeft.split(','),\r\n            right: oWaveformDataRight.split(',')\r\n          };\r\n        }\r\n\r\n        if (instanceOptions.useEQData) {\r\n          if (oEQData !== _undefined && oEQData && oEQData.leftEQ) {\r\n            eqLeft = oEQData.leftEQ.split(',');\r\n            s.eqData = eqLeft;\r\n            s.eqData.left = eqLeft;\r\n            if (oEQData.rightEQ !== _undefined && oEQData.rightEQ) {\r\n              s.eqData.right = oEQData.rightEQ.split(',');\r\n            }\r\n          }\r\n        }\r\n\r\n      }\r\n\r\n      if (s.playState === 1) {\r\n\r\n        // special case/hack: ensure buffering is false if loading from cache (and not yet started)\r\n        if (!s.isHTML5 && fV === 8 && !s.position && s.isBuffering) {\r\n          s._onbufferchange(0);\r\n        }\r\n\r\n        if (instanceOptions.whileplaying) {\r\n          // flash may call after actual finish\r\n          instanceOptions.whileplaying.apply(s);\r\n        }\r\n\r\n      }\r\n\r\n      return true;\r\n\r\n    };\r\n\r\n    this._oncaptiondata = function(oData) {\r\n\r\n      /**\r\n       * internal: flash 9 + NetStream (MovieStar/RTMP-only) feature\r\n       *\r\n       * @param {object} oData\r\n       */\r\n\r\n      sm2._wD(s.id + ': Caption data received.');\r\n\r\n      s.captiondata = oData;\r\n\r\n      if (s._iO.oncaptiondata) {\r\n        s._iO.oncaptiondata.apply(s, [oData]);\r\n      }\r\n\r\n    };\r\n\r\n    this._onmetadata = function(oMDProps, oMDData) {\r\n\r\n      /**\r\n       * internal: flash 9 + NetStream (MovieStar/RTMP-only) feature\r\n       * RTMP may include song title, MovieStar content may include encoding info\r\n       *\r\n       * @param {array} oMDProps (names)\r\n       * @param {array} oMDData (values)\r\n       */\r\n\r\n      sm2._wD(s.id + ': Metadata received.');\r\n\r\n      var oData = {}, i, j;\r\n\r\n      for (i = 0, j = oMDProps.length; i < j; i++) {\r\n        oData[oMDProps[i]] = oMDData[i];\r\n      }\r\n\r\n      s.metadata = oData;\r\n\r\n      if (s._iO.onmetadata) {\r\n        s._iO.onmetadata.call(s, s.metadata);\r\n      }\r\n\r\n    };\r\n\r\n    this._onid3 = function(oID3Props, oID3Data) {\r\n\r\n      /**\r\n       * internal: flash 8 + flash 9 ID3 feature\r\n       * may include artist, song title etc.\r\n       *\r\n       * @param {array} oID3Props (names)\r\n       * @param {array} oID3Data (values)\r\n       */\r\n\r\n      sm2._wD(s.id + ': ID3 data received.');\r\n\r\n      var oData = [], i, j;\r\n\r\n      for (i = 0, j = oID3Props.length; i < j; i++) {\r\n        oData[oID3Props[i]] = oID3Data[i];\r\n      }\r\n\r\n      s.id3 = mixin(s.id3, oData);\r\n\r\n      if (s._iO.onid3) {\r\n        s._iO.onid3.apply(s);\r\n      }\r\n\r\n    };\r\n\r\n    // flash/RTMP-only\r\n\r\n    this._onconnect = function(bSuccess) {\r\n\r\n      bSuccess = (bSuccess === 1);\r\n      sm2._wD(s.id + ': ' + (bSuccess ? 'Connected.' : 'Failed to connect? - ' + s.url), (bSuccess ? 1 : 2));\r\n      s.connected = bSuccess;\r\n\r\n      if (bSuccess) {\r\n\r\n        s.failures = 0;\r\n\r\n        if (idCheck(s.id)) {\r\n          if (s.getAutoPlay()) {\r\n            // only update the play state if auto playing\r\n            s.play(_undefined, s.getAutoPlay());\r\n          } else if (s._iO.autoLoad) {\r\n            s.load();\r\n          }\r\n        }\r\n\r\n        if (s._iO.onconnect) {\r\n          s._iO.onconnect.apply(s, [bSuccess]);\r\n        }\r\n\r\n      }\r\n\r\n    };\r\n\r\n    this._ondataerror = function(sError) {\r\n\r\n      // flash 9 wave/eq data handler\r\n      // hack: called at start, and end from flash at/after onfinish()\r\n      if (s.playState > 0) {\r\n        sm2._wD(s.id + ': Data error: ' + sError);\r\n        if (s._iO.ondataerror) {\r\n          s._iO.ondataerror.apply(s);\r\n        }\r\n      }\r\n\r\n    };\r\n\r\n    // <d>\r\n    this._debug();\r\n    // </d>\r\n\r\n  }; // SMSound()\r\n\r\n  /**\r\n   * Private SoundManager internals\r\n   * ------------------------------\r\n   */\r\n\r\n  getDocument = function() {\r\n\r\n    return (doc.body || doc.getElementsByTagName('div')[0]);\r\n\r\n  };\r\n\r\n  id = function(sID) {\r\n\r\n    return doc.getElementById(sID);\r\n\r\n  };\r\n\r\n  mixin = function(oMain, oAdd) {\r\n\r\n    // non-destructive merge\r\n    var o1 = (oMain || {}), o2, o;\r\n\r\n    // if unspecified, o2 is the default options object\r\n    o2 = (oAdd === _undefined ? sm2.defaultOptions : oAdd);\r\n\r\n    for (o in o2) {\r\n\r\n      if (o2.hasOwnProperty(o) && o1[o] === _undefined) {\r\n\r\n        if (typeof o2[o] !== 'object' || o2[o] === null) {\r\n\r\n          // assign directly\r\n          o1[o] = o2[o];\r\n\r\n        } else {\r\n\r\n          // recurse through o2\r\n          o1[o] = mixin(o1[o], o2[o]);\r\n\r\n        }\r\n\r\n      }\r\n\r\n    }\r\n\r\n    return o1;\r\n\r\n  };\r\n\r\n  wrapCallback = function(oSound, callback) {\r\n\r\n    /**\r\n     * 03/03/2013: Fix for Flash Player 11.6.602.171 + Flash 8 (flashVersion = 8) SWF issue\r\n     * setTimeout() fix for certain SMSound callbacks like onload() and onfinish(), where subsequent calls like play() and load() fail when Flash Player 11.6.602.171 is installed, and using soundManager with flashVersion = 8 (which is the default).\r\n     * Not sure of exact cause. Suspect race condition and/or invalid (NaN-style) position argument trickling down to the next JS -> Flash _start() call, in the play() case.\r\n     * Fix: setTimeout() to yield, plus safer null / NaN checking on position argument provided to Flash.\r\n     * https://getsatisfaction.com/schillmania/topics/recent_chrome_update_seems_to_have_broken_my_sm2_audio_player\r\n     */\r\n    if (!oSound.isHTML5 && fV === 8) {\r\n      window.setTimeout(callback, 0);\r\n    } else {\r\n      callback();\r\n    }\r\n\r\n  };\r\n\r\n  // additional soundManager properties that soundManager.setup() will accept\r\n\r\n  extraOptions = {\r\n    onready: 1,\r\n    ontimeout: 1,\r\n    defaultOptions: 1,\r\n    flash9Options: 1,\r\n    movieStarOptions: 1\r\n  };\r\n\r\n  assign = function(o, oParent) {\r\n\r\n    /**\r\n     * recursive assignment of properties, soundManager.setup() helper\r\n     * allows property assignment based on whitelist\r\n     */\r\n\r\n    var i,\r\n        result = true,\r\n        hasParent = (oParent !== _undefined),\r\n        setupOptions = sm2.setupOptions,\r\n        bonusOptions = extraOptions;\r\n\r\n    // <d>\r\n\r\n    // if soundManager.setup() called, show accepted parameters.\r\n\r\n    if (o === _undefined) {\r\n\r\n      result = [];\r\n\r\n      for (i in setupOptions) {\r\n\r\n        if (setupOptions.hasOwnProperty(i)) {\r\n          result.push(i);\r\n        }\r\n\r\n      }\r\n\r\n      for (i in bonusOptions) {\r\n\r\n        if (bonusOptions.hasOwnProperty(i)) {\r\n\r\n          if (typeof sm2[i] === 'object') {\r\n            result.push(i + ': {...}');\r\n          } else if (sm2[i] instanceof Function) {\r\n            result.push(i + ': function() {...}');\r\n          } else {\r\n            result.push(i);\r\n          }\r\n\r\n        }\r\n\r\n      }\r\n\r\n      sm2._wD(str('setup', result.join(', ')));\r\n\r\n      return false;\r\n\r\n    }\r\n\r\n    // </d>\r\n\r\n    for (i in o) {\r\n\r\n      if (o.hasOwnProperty(i)) {\r\n\r\n        // if not an {object} we want to recurse through...\r\n\r\n        if (typeof o[i] !== 'object' || o[i] === null || o[i] instanceof Array || o[i] instanceof RegExp) {\r\n\r\n          // check \"allowed\" options\r\n\r\n          if (hasParent && bonusOptions[oParent] !== _undefined) {\r\n\r\n            // valid recursive / nested object option, eg., { defaultOptions: { volume: 50 } }\r\n            sm2[oParent][i] = o[i];\r\n\r\n          } else if (setupOptions[i] !== _undefined) {\r\n\r\n            // special case: assign to setupOptions object, which soundManager property references\r\n            sm2.setupOptions[i] = o[i];\r\n\r\n            // assign directly to soundManager, too\r\n            sm2[i] = o[i];\r\n\r\n          } else if (bonusOptions[i] === _undefined) {\r\n\r\n            // invalid or disallowed parameter. complain.\r\n            complain(str((sm2[i] === _undefined ? 'setupUndef' : 'setupError'), i), 2);\r\n\r\n            result = false;\r\n\r\n          } else if (sm2[i] instanceof Function) {\r\n\r\n            /**\r\n             * valid extraOptions (bonusOptions) parameter.\r\n             * is it a method, like onready/ontimeout? call it.\r\n             * multiple parameters should be in an array, eg. soundManager.setup({onready: [myHandler, myScope]});\r\n             */\r\n            sm2[i].apply(sm2, (o[i] instanceof Array ? o[i] : [o[i]]));\r\n\r\n          } else {\r\n\r\n            // good old-fashioned direct assignment\r\n            sm2[i] = o[i];\r\n\r\n          }\r\n\r\n        } else if (bonusOptions[i] === _undefined) {\r\n\r\n          // recursion case, eg., { defaultOptions: { ... } }\r\n\r\n          // invalid or disallowed parameter. complain.\r\n          complain(str((sm2[i] === _undefined ? 'setupUndef' : 'setupError'), i), 2);\r\n\r\n          result = false;\r\n\r\n        } else {\r\n\r\n          // recurse through object\r\n          return assign(o[i], i);\r\n\r\n        }\r\n\r\n      }\r\n\r\n    }\r\n\r\n    return result;\r\n\r\n  };\r\n\r\n  function preferFlashCheck(kind) {\r\n\r\n    // whether flash should play a given type\r\n    return (sm2.preferFlash && hasFlash && !sm2.ignoreFlash && (sm2.flash[kind] !== _undefined && sm2.flash[kind]));\r\n\r\n  }\r\n\r\n  /**\r\n   * Internal DOM2-level event helpers\r\n   * ---------------------------------\r\n   */\r\n\r\n  event = (function() {\r\n\r\n    // normalize event methods\r\n    var old = (window.attachEvent),\r\n    evt = {\r\n      add: (old ? 'attachEvent' : 'addEventListener'),\r\n      remove: (old ? 'detachEvent' : 'removeEventListener')\r\n    };\r\n\r\n    // normalize \"on\" event prefix, optional capture argument\r\n    function getArgs(oArgs) {\r\n\r\n      var args = slice.call(oArgs),\r\n          len = args.length;\r\n\r\n      if (old) {\r\n        // prefix\r\n        args[1] = 'on' + args[1];\r\n        if (len > 3) {\r\n          // no capture\r\n          args.pop();\r\n        }\r\n      } else if (len === 3) {\r\n        args.push(false);\r\n      }\r\n\r\n      return args;\r\n\r\n    }\r\n\r\n    function apply(args, sType) {\r\n\r\n      // normalize and call the event method, with the proper arguments\r\n      var element = args.shift(),\r\n          method = [evt[sType]];\r\n\r\n      if (old) {\r\n        // old IE can't do apply().\r\n        element[method](args[0], args[1]);\r\n      } else {\r\n        element[method].apply(element, args);\r\n      }\r\n\r\n    }\r\n\r\n    function add() {\r\n      apply(getArgs(arguments), 'add');\r\n    }\r\n\r\n    function remove() {\r\n      apply(getArgs(arguments), 'remove');\r\n    }\r\n\r\n    return {\r\n      add: add,\r\n      remove: remove\r\n    };\r\n\r\n  }());\r\n\r\n  /**\r\n   * Internal HTML5 event handling\r\n   * -----------------------------\r\n   */\r\n\r\n  function html5_event(oFn) {\r\n\r\n    // wrap html5 event handlers so we don't call them on destroyed and/or unloaded sounds\r\n\r\n    return function(e) {\r\n\r\n      var s = this._s,\r\n          result;\r\n\r\n      if (!s || !s._a) {\r\n        // <d>\r\n        if (s && s.id) {\r\n          sm2._wD(s.id + ': Ignoring ' + e.type);\r\n        } else {\r\n          sm2._wD(h5 + 'Ignoring ' + e.type);\r\n        }\r\n        // </d>\r\n        result = null;\r\n      } else {\r\n        result = oFn.call(this, e);\r\n      }\r\n\r\n      return result;\r\n\r\n    };\r\n\r\n  }\r\n\r\n  html5_events = {\r\n\r\n    // HTML5 event-name-to-handler map\r\n\r\n    abort: html5_event(function() {\r\n\r\n      sm2._wD(this._s.id + ': abort');\r\n\r\n    }),\r\n\r\n    // enough has loaded to play\r\n\r\n    canplay: html5_event(function() {\r\n\r\n      var s = this._s,\r\n          position1K;\r\n\r\n      if (s._html5_canplay) {\r\n        // this event has already fired. ignore.\r\n        return;\r\n      }\r\n\r\n      s._html5_canplay = true;\r\n      sm2._wD(s.id + ': canplay');\r\n      s._onbufferchange(0);\r\n\r\n      // position according to instance options\r\n      position1K = (s._iO.position !== _undefined && !isNaN(s._iO.position) ? s._iO.position / msecScale : null);\r\n\r\n      // set the position if position was provided before the sound loaded\r\n      if (this.currentTime !== position1K) {\r\n        sm2._wD(s.id + ': canplay: Setting position to ' + position1K);\r\n        try {\r\n          this.currentTime = position1K;\r\n        } catch(ee) {\r\n          sm2._wD(s.id + ': canplay: Setting position of ' + position1K + ' failed: ' + ee.message, 2);\r\n        }\r\n      }\r\n\r\n      // hack for HTML5 from/to case\r\n      if (s._iO._oncanplay) {\r\n        s._iO._oncanplay();\r\n      }\r\n\r\n    }),\r\n\r\n    canplaythrough: html5_event(function() {\r\n\r\n      var s = this._s;\r\n\r\n      if (!s.loaded) {\r\n        s._onbufferchange(0);\r\n        s._whileloading(s.bytesLoaded, s.bytesTotal, s._get_html5_duration());\r\n        s._onload(true);\r\n      }\r\n\r\n    }),\r\n\r\n    durationchange: html5_event(function() {\r\n\r\n      // durationchange may fire at various times, probably the safest way to capture accurate/final duration.\r\n\r\n      var s = this._s,\r\n          duration;\r\n\r\n      duration = s._get_html5_duration();\r\n\r\n      if (!isNaN(duration) && duration !== s.duration) {\r\n\r\n        sm2._wD(this._s.id + ': durationchange (' + duration + ')' + (s.duration ? ', previously ' + s.duration : ''));\r\n\r\n        s.durationEstimate = s.duration = duration;\r\n\r\n      }\r\n\r\n    }),\r\n\r\n    // TODO: Reserved for potential use\r\n    /*\r\n    emptied: html5_event(function() {\r\n\r\n      sm2._wD(this._s.id + ': emptied');\r\n\r\n    }),\r\n    */\r\n\r\n    ended: html5_event(function() {\r\n\r\n      var s = this._s;\r\n\r\n      sm2._wD(s.id + ': ended');\r\n\r\n      s._onfinish();\r\n\r\n    }),\r\n\r\n    error: html5_event(function() {\r\n\r\n      var description = (html5ErrorCodes[this.error.code] || null);\r\n      sm2._wD(this._s.id + ': HTML5 error, code ' + this.error.code + (description ? ' (' + description + ')' : ''));\r\n      this._s._onload(false);\r\n      this._s._onerror(this.error.code, description);\r\n\r\n    }),\r\n\r\n    loadeddata: html5_event(function() {\r\n\r\n      var s = this._s;\r\n\r\n      sm2._wD(s.id + ': loadeddata');\r\n\r\n      // safari seems to nicely report progress events, eventually totalling 100%\r\n      if (!s._loaded && !isSafari) {\r\n        s.duration = s._get_html5_duration();\r\n      }\r\n\r\n    }),\r\n\r\n    loadedmetadata: html5_event(function() {\r\n\r\n      sm2._wD(this._s.id + ': loadedmetadata');\r\n\r\n    }),\r\n\r\n    loadstart: html5_event(function() {\r\n\r\n      sm2._wD(this._s.id + ': loadstart');\r\n      // assume buffering at first\r\n      this._s._onbufferchange(1);\r\n\r\n    }),\r\n\r\n    play: html5_event(function() {\r\n\r\n      // sm2._wD(this._s.id + ': play()');\r\n      // once play starts, no buffering\r\n      this._s._onbufferchange(0);\r\n\r\n    }),\r\n\r\n    playing: html5_event(function() {\r\n\r\n      sm2._wD(this._s.id + ': playing ' + String.fromCharCode(9835));\r\n      // once play starts, no buffering\r\n      this._s._onbufferchange(0);\r\n\r\n    }),\r\n\r\n    progress: html5_event(function(e) {\r\n\r\n      // note: can fire repeatedly after \"loaded\" event, due to use of HTTP range/partials\r\n\r\n      var s = this._s,\r\n          i, j, progStr, buffered = 0,\r\n          isProgress = (e.type === 'progress'),\r\n          ranges = e.target.buffered,\r\n          // firefox 3.6 implements e.loaded/total (bytes)\r\n          loaded = (e.loaded || 0),\r\n          total = (e.total || 1);\r\n\r\n      // reset the \"buffered\" (loaded byte ranges) array\r\n      s.buffered = [];\r\n\r\n      if (ranges && ranges.length) {\r\n\r\n        // if loaded is 0, try TimeRanges implementation as % of load\r\n        // https://developer.mozilla.org/en/DOM/TimeRanges\r\n\r\n        // re-build \"buffered\" array\r\n        // HTML5 returns seconds. SM2 API uses msec for setPosition() etc., whether Flash or HTML5.\r\n        for (i = 0, j = ranges.length; i < j; i++) {\r\n          s.buffered.push({\r\n            start: ranges.start(i) * msecScale,\r\n            end: ranges.end(i) * msecScale\r\n          });\r\n        }\r\n\r\n        // use the last value locally\r\n        buffered = (ranges.end(0) - ranges.start(0)) * msecScale;\r\n\r\n        // linear case, buffer sum; does not account for seeking and HTTP partials / byte ranges\r\n        loaded = Math.min(1, buffered / (e.target.duration * msecScale));\r\n\r\n        // <d>\r\n        if (isProgress && ranges.length > 1) {\r\n          progStr = [];\r\n          j = ranges.length;\r\n          for (i = 0; i < j; i++) {\r\n            progStr.push((e.target.buffered.start(i) * msecScale) + '-' + (e.target.buffered.end(i) * msecScale));\r\n          }\r\n          sm2._wD(this._s.id + ': progress, timeRanges: ' + progStr.join(', '));\r\n        }\r\n\r\n        if (isProgress && !isNaN(loaded)) {\r\n          sm2._wD(this._s.id + ': progress, ' + Math.floor(loaded * 100) + '% loaded');\r\n        }\r\n        // </d>\r\n\r\n      }\r\n\r\n      if (!isNaN(loaded)) {\r\n\r\n        // TODO: prevent calls with duplicate values.\r\n        s._whileloading(loaded, total, s._get_html5_duration());\r\n        if (loaded && total && loaded === total) {\r\n          // in case \"onload\" doesn't fire (eg. gecko 1.9.2)\r\n          html5_events.canplaythrough.call(this, e);\r\n        }\r\n\r\n      }\r\n\r\n    }),\r\n\r\n    ratechange: html5_event(function() {\r\n\r\n      sm2._wD(this._s.id + ': ratechange');\r\n\r\n    }),\r\n\r\n    suspend: html5_event(function(e) {\r\n\r\n      // download paused/stopped, may have finished (eg. onload)\r\n      var s = this._s;\r\n\r\n      sm2._wD(this._s.id + ': suspend');\r\n      html5_events.progress.call(this, e);\r\n      s._onsuspend();\r\n\r\n    }),\r\n\r\n    stalled: html5_event(function() {\r\n\r\n      sm2._wD(this._s.id + ': stalled');\r\n\r\n    }),\r\n\r\n    timeupdate: html5_event(function() {\r\n\r\n      this._s._onTimer();\r\n\r\n    }),\r\n\r\n    waiting: html5_event(function() {\r\n\r\n      var s = this._s;\r\n\r\n      // see also: seeking\r\n      sm2._wD(this._s.id + ': waiting');\r\n\r\n      // playback faster than download rate, etc.\r\n      s._onbufferchange(1);\r\n\r\n    })\r\n\r\n  };\r\n\r\n  html5OK = function(iO) {\r\n\r\n    // playability test based on URL or MIME type\r\n\r\n    var result;\r\n\r\n    if (!iO || (!iO.type && !iO.url && !iO.serverURL)) {\r\n\r\n      // nothing to check\r\n      result = false;\r\n\r\n    } else if (iO.serverURL || (iO.type && preferFlashCheck(iO.type))) {\r\n\r\n      // RTMP, or preferring flash\r\n      result = false;\r\n\r\n    } else {\r\n\r\n      // Use type, if specified. Pass data: URIs to HTML5. If HTML5-only mode, no other options, so just give 'er\r\n      result = ((iO.type ? html5CanPlay({ type: iO.type }) : html5CanPlay({ url: iO.url }) || sm2.html5Only || iO.url.match(/data:/i)));\r\n\r\n    }\r\n\r\n    return result;\r\n\r\n  };\r\n\r\n  html5Unload = function(oAudio) {\r\n\r\n    /**\r\n     * Internal method: Unload media, and cancel any current/pending network requests.\r\n     * Firefox can load an empty URL, which allegedly destroys the decoder and stops the download.\r\n     * https://developer.mozilla.org/En/Using_audio_and_video_in_Firefox#Stopping_the_download_of_media\r\n     * However, Firefox has been seen loading a relative URL from '' and thus requesting the hosting page on unload.\r\n     * Other UA behaviour is unclear, so everyone else gets an about:blank-style URL.\r\n     */\r\n\r\n    var url;\r\n\r\n    if (oAudio) {\r\n\r\n      // Firefox and Chrome accept short WAVe data: URIs. Chome dislikes audio/wav, but accepts audio/wav for data: MIME.\r\n      // Desktop Safari complains / fails on data: URI, so it gets about:blank.\r\n      url = (isSafari ? emptyURL : (sm2.html5.canPlayType('audio/wav') ? emptyWAV : emptyURL));\r\n\r\n      oAudio.src = url;\r\n\r\n      // reset some state, too\r\n      if (oAudio._called_unload !== _undefined) {\r\n        oAudio._called_load = false;\r\n      }\r\n\r\n    }\r\n\r\n    if (useGlobalHTML5Audio) {\r\n\r\n      // ensure URL state is trashed, also\r\n      lastGlobalHTML5URL = null;\r\n\r\n    }\r\n\r\n    return url;\r\n\r\n  };\r\n\r\n  html5CanPlay = function(o) {\r\n\r\n    /**\r\n     * Try to find MIME, test and return truthiness\r\n     * o = {\r\n     *  url: '/path/to/an.mp3',\r\n     *  type: 'audio/mp3'\r\n     * }\r\n     */\r\n\r\n    if (!sm2.useHTML5Audio || !sm2.hasHTML5) return false;\r\n\r\n    var url = (o.url || null),\r\n        mime = (o.type || null),\r\n        aF = sm2.audioFormats,\r\n        result,\r\n        offset,\r\n        fileExt,\r\n        item;\r\n\r\n    // account for known cases like audio/mp3\r\n\r\n    if (mime && sm2.html5[mime] !== _undefined) return (sm2.html5[mime] && !preferFlashCheck(mime));\r\n\r\n    if (!html5Ext) {\r\n\r\n      html5Ext = [];\r\n\r\n      for (item in aF) {\r\n\r\n        if (aF.hasOwnProperty(item)) {\r\n\r\n          html5Ext.push(item);\r\n\r\n          if (aF[item].related) {\r\n            html5Ext = html5Ext.concat(aF[item].related);\r\n          }\r\n\r\n        }\r\n\r\n      }\r\n\r\n      html5Ext = new RegExp('\\\\.(' + html5Ext.join('|') + ')(\\\\?.*)?$', 'i');\r\n\r\n    }\r\n\r\n    // TODO: Strip URL queries, etc.\r\n    fileExt = (url ? url.toLowerCase().match(html5Ext) : null);\r\n\r\n    if (!fileExt || !fileExt.length) {\r\n\r\n      if (!mime) {\r\n\r\n        result = false;\r\n\r\n      } else {\r\n\r\n        // audio/mp3 -> mp3, result should be known\r\n        offset = mime.indexOf(';');\r\n\r\n        // strip \"audio/X; codecs...\"\r\n        fileExt = (offset !== -1 ? mime.substr(0, offset) : mime).substr(6);\r\n\r\n      }\r\n\r\n    } else {\r\n\r\n      // match the raw extension name - \"mp3\", for example\r\n      fileExt = fileExt[1];\r\n\r\n    }\r\n\r\n    if (fileExt && sm2.html5[fileExt] !== _undefined) {\r\n\r\n      // result known\r\n      result = (sm2.html5[fileExt] && !preferFlashCheck(fileExt));\r\n\r\n    } else {\r\n\r\n      mime = 'audio/' + fileExt;\r\n      result = sm2.html5.canPlayType({ type: mime });\r\n\r\n      sm2.html5[fileExt] = result;\r\n\r\n      // sm2._wD('canPlayType, found result: ' + result);\r\n      result = (result && sm2.html5[mime] && !preferFlashCheck(mime));\r\n    }\r\n\r\n    return result;\r\n\r\n  };\r\n\r\n  testHTML5 = function() {\r\n\r\n    /**\r\n     * Internal: Iterates over audioFormats, determining support eg. audio/mp3, audio/mpeg and so on\r\n     * assigns results to html5[] and flash[].\r\n     */\r\n\r\n    if (!sm2.useHTML5Audio || !sm2.hasHTML5) {\r\n\r\n      // without HTML5, we need Flash.\r\n      sm2.html5.usingFlash = true;\r\n      needsFlash = true;\r\n\r\n      return false;\r\n\r\n    }\r\n\r\n    // double-whammy: Opera 9.64 throws WRONG_ARGUMENTS_ERR if no parameter passed to Audio(), and Webkit + iOS happily tries to load \"null\" as a URL. :/\r\n    var a = (Audio !== _undefined ? (isOpera && opera.version() < 10 ? new Audio(null) : new Audio()) : null),\r\n        item, lookup, support = {}, aF, i;\r\n\r\n    function cp(m) {\r\n\r\n      var canPlay, j,\r\n          result = false,\r\n          isOK = false;\r\n\r\n      if (!a || typeof a.canPlayType !== 'function') return result;\r\n\r\n      if (m instanceof Array) {\r\n\r\n        // iterate through all mime types, return any successes\r\n\r\n        for (i = 0, j = m.length; i < j; i++) {\r\n\r\n          if (sm2.html5[m[i]] || a.canPlayType(m[i]).match(sm2.html5Test)) {\r\n\r\n            isOK = true;\r\n            sm2.html5[m[i]] = true;\r\n\r\n            // note flash support, too\r\n            sm2.flash[m[i]] = !!(m[i].match(flashMIME));\r\n\r\n          }\r\n\r\n        }\r\n\r\n        result = isOK;\r\n\r\n      } else {\r\n\r\n        canPlay = (a && typeof a.canPlayType === 'function' ? a.canPlayType(m) : false);\r\n        result = !!(canPlay && (canPlay.match(sm2.html5Test)));\r\n\r\n      }\r\n\r\n      return result;\r\n\r\n    }\r\n\r\n    // test all registered formats + codecs\r\n\r\n    aF = sm2.audioFormats;\r\n\r\n    for (item in aF) {\r\n\r\n      if (aF.hasOwnProperty(item)) {\r\n\r\n        lookup = 'audio/' + item;\r\n\r\n        support[item] = cp(aF[item].type);\r\n\r\n        // write back generic type too, eg. audio/mp3\r\n        support[lookup] = support[item];\r\n\r\n        // assign flash\r\n        if (item.match(flashMIME)) {\r\n\r\n          sm2.flash[item] = true;\r\n          sm2.flash[lookup] = true;\r\n\r\n        } else {\r\n\r\n          sm2.flash[item] = false;\r\n          sm2.flash[lookup] = false;\r\n\r\n        }\r\n\r\n        // assign result to related formats, too\r\n\r\n        if (aF[item] && aF[item].related) {\r\n\r\n          for (i = aF[item].related.length - 1; i >= 0; i--) {\r\n\r\n            // eg. audio/m4a\r\n            support['audio/' + aF[item].related[i]] = support[item];\r\n            sm2.html5[aF[item].related[i]] = support[item];\r\n            sm2.flash[aF[item].related[i]] = support[item];\r\n\r\n          }\r\n\r\n        }\r\n\r\n      }\r\n\r\n    }\r\n\r\n    support.canPlayType = (a ? cp : null);\r\n    sm2.html5 = mixin(sm2.html5, support);\r\n\r\n    sm2.html5.usingFlash = featureCheck();\r\n    needsFlash = sm2.html5.usingFlash;\r\n\r\n    return true;\r\n\r\n  };\r\n\r\n  strings = {\r\n\r\n    // <d>\r\n    notReady: 'Unavailable - wait until onready() has fired.',\r\n    notOK: 'Audio support is not available.',\r\n    domError: sm + 'exception caught while appending SWF to DOM.',\r\n    spcWmode: 'Removing wmode, preventing known SWF loading issue(s)',\r\n    swf404: smc + 'Verify that %s is a valid path.',\r\n    tryDebug: 'Try ' + sm + '.debugFlash = true for more security details (output goes to SWF.)',\r\n    checkSWF: 'See SWF output for more debug info.',\r\n    localFail: smc + 'Non-HTTP page (' + doc.location.protocol + ' URL?) Review Flash player security settings for this special case:\\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/',\r\n    waitFocus: smc + 'Special case: Waiting for SWF to load with window focus...',\r\n    waitForever: smc + 'Waiting indefinitely for Flash (will recover if unblocked)...',\r\n    waitSWF: smc + 'Waiting for 100% SWF load...',\r\n    needFunction: smc + 'Function object expected for %s',\r\n    badID: 'Sound ID \"%s\" should be a string, starting with a non-numeric character',\r\n    currentObj: smc + '_debug(): Current sound objects',\r\n    waitOnload: smc + 'Waiting for window.onload()',\r\n    docLoaded: smc + 'Document already loaded',\r\n    onload: smc + 'initComplete(): calling soundManager.onload()',\r\n    onloadOK: sm + '.onload() complete',\r\n    didInit: smc + 'init(): Already called?',\r\n    secNote: 'Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html',\r\n    badRemove: smc + 'Failed to remove Flash node.',\r\n    shutdown: sm + '.disable(): Shutting down',\r\n    queue: smc + 'Queueing %s handler',\r\n    smError: 'SMSound.load(): Exception: JS-Flash communication failed, or JS error.',\r\n    fbTimeout: 'No flash response, applying .' + swfCSS.swfTimedout + ' CSS...',\r\n    fbLoaded: 'Flash loaded',\r\n    fbHandler: smc + 'flashBlockHandler()',\r\n    manURL: 'SMSound.load(): Using manually-assigned URL',\r\n    onURL: sm + '.load(): current URL already assigned.',\r\n    badFV: sm + '.flashVersion must be 8 or 9. \"%s\" is invalid. Reverting to %s.',\r\n    as2loop: 'Note: Setting stream:false so looping can work (flash 8 limitation)',\r\n    noNSLoop: 'Note: Looping not implemented for MovieStar formats',\r\n    needfl9: 'Note: Switching to flash 9, required for MP4 formats.',\r\n    mfTimeout: 'Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case',\r\n    needFlash: smc + 'Fatal error: Flash is needed to play some required formats, but is not available.',\r\n    gotFocus: smc + 'Got window focus.',\r\n    policy: 'Enabling usePolicyFile for data access',\r\n    setup: sm + '.setup(): allowed parameters: %s',\r\n    setupError: sm + '.setup(): \"%s\" cannot be assigned with this method.',\r\n    setupUndef: sm + '.setup(): Could not find option \"%s\"',\r\n    setupLate: sm + '.setup(): url, flashVersion and html5Test property changes will not take effect until reboot().',\r\n    noURL: smc + 'Flash URL required. Call soundManager.setup({url:...}) to get started.',\r\n    sm2Loaded: 'SoundManager 2: Ready. ' + String.fromCharCode(10003),\r\n    reset: sm + '.reset(): Removing event callbacks',\r\n    mobileUA: 'Mobile UA detected, preferring HTML5 by default.',\r\n    globalHTML5: 'Using singleton HTML5 Audio() pattern for this device.',\r\n    ignoreMobile: 'Ignoring mobile restrictions for this device.'\r\n    // </d>\r\n\r\n  };\r\n\r\n  str = function() {\r\n\r\n    // internal string replace helper.\r\n    // arguments: o [,items to replace]\r\n    // <d>\r\n\r\n    var args,\r\n        i, j, o,\r\n        sstr;\r\n\r\n    // real array, please\r\n    args = slice.call(arguments);\r\n\r\n    // first argument\r\n    o = args.shift();\r\n\r\n    sstr = (strings && strings[o] ? strings[o] : '');\r\n\r\n    if (sstr && args && args.length) {\r\n      for (i = 0, j = args.length; i < j; i++) {\r\n        sstr = sstr.replace('%s', args[i]);\r\n      }\r\n    }\r\n\r\n    return sstr;\r\n    // </d>\r\n\r\n  };\r\n\r\n  loopFix = function(sOpt) {\r\n\r\n    // flash 8 requires stream = false for looping to work\r\n    if (fV === 8 && sOpt.loops > 1 && sOpt.stream) {\r\n      _wDS('as2loop');\r\n      sOpt.stream = false;\r\n    }\r\n\r\n    return sOpt;\r\n\r\n  };\r\n\r\n  policyFix = function(sOpt, sPre) {\r\n\r\n    if (sOpt && !sOpt.usePolicyFile && (sOpt.onid3 || sOpt.usePeakData || sOpt.useWaveformData || sOpt.useEQData)) {\r\n      sm2._wD((sPre || '') + str('policy'));\r\n      sOpt.usePolicyFile = true;\r\n    }\r\n\r\n    return sOpt;\r\n\r\n  };\r\n\r\n  complain = function(sMsg) {\r\n\r\n    // <d>\r\n    if (hasConsole && console.warn !== _undefined) {\r\n      console.warn(sMsg);\r\n    } else {\r\n      sm2._wD(sMsg);\r\n    }\r\n    // </d>\r\n\r\n  };\r\n\r\n  doNothing = function() {\r\n\r\n    return false;\r\n\r\n  };\r\n\r\n  disableObject = function(o) {\r\n\r\n    var oProp;\r\n\r\n    for (oProp in o) {\r\n      if (o.hasOwnProperty(oProp) && typeof o[oProp] === 'function') {\r\n        o[oProp] = doNothing;\r\n      }\r\n    }\r\n\r\n    oProp = null;\r\n\r\n  };\r\n\r\n  failSafely = function(bNoDisable) {\r\n\r\n    // general failure exception handler\r\n\r\n    if (bNoDisable === _undefined) {\r\n      bNoDisable = false;\r\n    }\r\n\r\n    if (disabled || bNoDisable) {\r\n      sm2.disable(bNoDisable);\r\n    }\r\n\r\n  };\r\n\r\n  normalizeMovieURL = function(movieURL) {\r\n\r\n    var urlParams = null, url;\r\n\r\n    if (movieURL) {\r\n\r\n      if (movieURL.match(/\\.swf(\\?.*)?$/i)) {\r\n\r\n        urlParams = movieURL.substr(movieURL.toLowerCase().lastIndexOf('.swf?') + 4);\r\n\r\n        // assume user knows what they're doing\r\n        if (urlParams) return movieURL;\r\n\r\n      } else if (movieURL.lastIndexOf('/') !== movieURL.length - 1) {\r\n\r\n        // append trailing slash, if needed\r\n        movieURL += '/';\r\n\r\n      }\r\n\r\n    }\r\n\r\n    url = (movieURL && movieURL.lastIndexOf('/') !== -1 ? movieURL.substr(0, movieURL.lastIndexOf('/') + 1) : './') + sm2.movieURL;\r\n\r\n    if (sm2.noSWFCache) {\r\n      url += ('?ts=' + new Date().getTime());\r\n    }\r\n\r\n    return url;\r\n\r\n  };\r\n\r\n  setVersionInfo = function() {\r\n\r\n    // short-hand for internal use\r\n\r\n    fV = parseInt(sm2.flashVersion, 10);\r\n\r\n    if (fV !== 8 && fV !== 9) {\r\n      sm2._wD(str('badFV', fV, defaultFlashVersion));\r\n      sm2.flashVersion = fV = defaultFlashVersion;\r\n    }\r\n\r\n    // debug flash movie, if applicable\r\n\r\n    var isDebug = (sm2.debugMode || sm2.debugFlash ? '_debug.swf' : '.swf');\r\n\r\n    if (sm2.useHTML5Audio && !sm2.html5Only && sm2.audioFormats.mp4.required && fV < 9) {\r\n      sm2._wD(str('needfl9'));\r\n      sm2.flashVersion = fV = 9;\r\n    }\r\n\r\n    sm2.version = sm2.versionNumber + (sm2.html5Only ? ' (HTML5-only mode)' : (fV === 9 ? ' (AS3/Flash 9)' : ' (AS2/Flash 8)'));\r\n\r\n    // set up default options\r\n    if (fV > 8) {\r\n\r\n      // +flash 9 base options\r\n      sm2.defaultOptions = mixin(sm2.defaultOptions, sm2.flash9Options);\r\n      sm2.features.buffering = true;\r\n\r\n      // +moviestar support\r\n      sm2.defaultOptions = mixin(sm2.defaultOptions, sm2.movieStarOptions);\r\n      sm2.filePatterns.flash9 = new RegExp('\\\\.(mp3|' + netStreamTypes.join('|') + ')(\\\\?.*)?$', 'i');\r\n      sm2.features.movieStar = true;\r\n\r\n    } else {\r\n\r\n      sm2.features.movieStar = false;\r\n\r\n    }\r\n\r\n    // regExp for flash canPlay(), etc.\r\n    sm2.filePattern = sm2.filePatterns[(fV !== 8 ? 'flash9' : 'flash8')];\r\n\r\n    // if applicable, use _debug versions of SWFs\r\n    sm2.movieURL = (fV === 8 ? 'soundmanager2.swf' : 'soundmanager2_flash9.swf').replace('.swf', isDebug);\r\n\r\n    sm2.features.peakData = sm2.features.waveformData = sm2.features.eqData = (fV > 8);\r\n\r\n  };\r\n\r\n  setPolling = function(bPolling, bHighPerformance) {\r\n\r\n    if (!flash) {\r\n      return;\r\n    }\r\n\r\n    flash._setPolling(bPolling, bHighPerformance);\r\n\r\n  };\r\n\r\n  initDebug = function() {\r\n\r\n    // starts debug mode, creating output <div> for UAs without console object\r\n\r\n    // allow force of debug mode via URL\r\n    // <d>\r\n    if (sm2.debugURLParam.test(wl)) {\r\n      sm2.setupOptions.debugMode = sm2.debugMode = true;\r\n    }\r\n\r\n    if (id(sm2.debugID)) {\r\n      return;\r\n    }\r\n\r\n    var oD, oDebug, oTarget, oToggle, tmp;\r\n\r\n    if (sm2.debugMode && !id(sm2.debugID) && (!hasConsole || !sm2.useConsole || !sm2.consoleOnly)) {\r\n\r\n      oD = doc.createElement('div');\r\n      oD.id = sm2.debugID + '-toggle';\r\n\r\n      oToggle = {\r\n        position: 'fixed',\r\n        bottom: '0px',\r\n        right: '0px',\r\n        width: '1.2em',\r\n        height: '1.2em',\r\n        lineHeight: '1.2em',\r\n        margin: '2px',\r\n        textAlign: 'center',\r\n        border: '1px solid #999',\r\n        cursor: 'pointer',\r\n        background: '#fff',\r\n        color: '#333',\r\n        zIndex: 10001\r\n      };\r\n\r\n      oD.appendChild(doc.createTextNode('-'));\r\n      oD.onclick = toggleDebug;\r\n      oD.title = 'Toggle SM2 debug console';\r\n\r\n      if (ua.match(/msie 6/i)) {\r\n        oD.style.position = 'absolute';\r\n        oD.style.cursor = 'hand';\r\n      }\r\n\r\n      for (tmp in oToggle) {\r\n        if (oToggle.hasOwnProperty(tmp)) {\r\n          oD.style[tmp] = oToggle[tmp];\r\n        }\r\n      }\r\n\r\n      oDebug = doc.createElement('div');\r\n      oDebug.id = sm2.debugID;\r\n      oDebug.style.display = (sm2.debugMode ? 'block' : 'none');\r\n\r\n      if (sm2.debugMode && !id(oD.id)) {\r\n        try {\r\n          oTarget = getDocument();\r\n          oTarget.appendChild(oD);\r\n        } catch(e2) {\r\n          throw new Error(str('domError') + ' \\n' + e2.toString());\r\n        }\r\n        oTarget.appendChild(oDebug);\r\n      }\r\n\r\n    }\r\n\r\n    oTarget = null;\r\n    // </d>\r\n\r\n  };\r\n\r\n  idCheck = this.getSoundById;\r\n\r\n  // <d>\r\n  _wDS = function(o, errorLevel) {\r\n\r\n    return (!o ? '' : sm2._wD(str(o), errorLevel));\r\n\r\n  };\r\n\r\n  toggleDebug = function() {\r\n\r\n    var o = id(sm2.debugID),\r\n    oT = id(sm2.debugID + '-toggle');\r\n\r\n    if (!o) {\r\n      return;\r\n    }\r\n\r\n    if (debugOpen) {\r\n      // minimize\r\n      oT.innerHTML = '+';\r\n      o.style.display = 'none';\r\n    } else {\r\n      oT.innerHTML = '-';\r\n      o.style.display = 'block';\r\n    }\r\n\r\n    debugOpen = !debugOpen;\r\n\r\n  };\r\n\r\n  debugTS = function(sEventType, bSuccess, sMessage) {\r\n\r\n    // troubleshooter debug hooks\r\n\r\n    if (window.sm2Debugger !== _undefined) {\r\n      try {\r\n        sm2Debugger.handleEvent(sEventType, bSuccess, sMessage);\r\n      } catch(e) {\r\n        // oh well\r\n        return false;\r\n      }\r\n    }\r\n\r\n    return true;\r\n\r\n  };\r\n  // </d>\r\n\r\n  getSWFCSS = function() {\r\n\r\n    var css = [];\r\n\r\n    if (sm2.debugMode) {\r\n      css.push(swfCSS.sm2Debug);\r\n    }\r\n\r\n    if (sm2.debugFlash) {\r\n      css.push(swfCSS.flashDebug);\r\n    }\r\n\r\n    if (sm2.useHighPerformance) {\r\n      css.push(swfCSS.highPerf);\r\n    }\r\n\r\n    return css.join(' ');\r\n\r\n  };\r\n\r\n  flashBlockHandler = function() {\r\n\r\n    // *possible* flash block situation.\r\n\r\n    var name = str('fbHandler'),\r\n        p = sm2.getMoviePercent(),\r\n        css = swfCSS,\r\n        error = {\r\n          type: 'FLASHBLOCK'\r\n        };\r\n\r\n    if (sm2.html5Only) {\r\n      // no flash, or unused\r\n      return;\r\n    }\r\n\r\n    if (!sm2.ok()) {\r\n\r\n      if (needsFlash) {\r\n        // make the movie more visible, so user can fix\r\n        sm2.oMC.className = getSWFCSS() + ' ' + css.swfDefault + ' ' + (p === null ? css.swfTimedout : css.swfError);\r\n        sm2._wD(name + ': ' + str('fbTimeout') + (p ? ' (' + str('fbLoaded') + ')' : ''));\r\n      }\r\n\r\n      sm2.didFlashBlock = true;\r\n\r\n      // fire onready(), complain lightly\r\n      processOnEvents({\r\n        type: 'ontimeout',\r\n        ignoreInit: true,\r\n        error: error\r\n      });\r\n\r\n      catchError(error);\r\n\r\n    } else {\r\n\r\n      // SM2 loaded OK (or recovered)\r\n\r\n      // <d>\r\n      if (sm2.didFlashBlock) {\r\n        sm2._wD(name + ': Unblocked');\r\n      }\r\n      // </d>\r\n\r\n      if (sm2.oMC) {\r\n        sm2.oMC.className = [getSWFCSS(), css.swfDefault, css.swfLoaded + (sm2.didFlashBlock ? ' ' + css.swfUnblocked : '')].join(' ');\r\n      }\r\n\r\n    }\r\n\r\n  };\r\n\r\n  addOnEvent = function(sType, oMethod, oScope) {\r\n\r\n    if (on_queue[sType] === _undefined) {\r\n      on_queue[sType] = [];\r\n    }\r\n\r\n    on_queue[sType].push({\r\n      method: oMethod,\r\n      scope: (oScope || null),\r\n      fired: false\r\n    });\r\n\r\n  };\r\n\r\n  processOnEvents = function(oOptions) {\r\n\r\n    // if unspecified, assume OK/error\r\n\r\n    if (!oOptions) {\r\n      oOptions = {\r\n        type: (sm2.ok() ? 'onready' : 'ontimeout')\r\n      };\r\n    }\r\n\r\n    // not ready yet.\r\n    if (!didInit && oOptions && !oOptions.ignoreInit) return false;\r\n\r\n    // invalid case\r\n    if (oOptions.type === 'ontimeout' && (sm2.ok() || (disabled && !oOptions.ignoreInit))) return false;\r\n\r\n    var status = {\r\n          success: (oOptions && oOptions.ignoreInit ? sm2.ok() : !disabled)\r\n        },\r\n\r\n        // queue specified by type, or none\r\n        srcQueue = (oOptions && oOptions.type ? on_queue[oOptions.type] || [] : []),\r\n\r\n        queue = [], i, j,\r\n        args = [status],\r\n        canRetry = (needsFlash && !sm2.ok());\r\n\r\n    if (oOptions.error) {\r\n      args[0].error = oOptions.error;\r\n    }\r\n\r\n    for (i = 0, j = srcQueue.length; i < j; i++) {\r\n      if (srcQueue[i].fired !== true) {\r\n        queue.push(srcQueue[i]);\r\n      }\r\n    }\r\n\r\n    if (queue.length) {\r\n\r\n      // sm2._wD(sm + ': Firing ' + queue.length + ' ' + oOptions.type + '() item' + (queue.length === 1 ? '' : 's'));\r\n      for (i = 0, j = queue.length; i < j; i++) {\r\n\r\n        if (queue[i].scope) {\r\n          queue[i].method.apply(queue[i].scope, args);\r\n        } else {\r\n          queue[i].method.apply(this, args);\r\n        }\r\n\r\n        if (!canRetry) {\r\n          // useFlashBlock and SWF timeout case doesn't count here.\r\n          queue[i].fired = true;\r\n\r\n        }\r\n\r\n      }\r\n\r\n    }\r\n\r\n    return true;\r\n\r\n  };\r\n\r\n  initUserOnload = function() {\r\n\r\n    window.setTimeout(function() {\r\n\r\n      if (sm2.useFlashBlock) {\r\n        flashBlockHandler();\r\n      }\r\n\r\n      processOnEvents();\r\n\r\n      // call user-defined \"onload\", scoped to window\r\n\r\n      if (typeof sm2.onload === 'function') {\r\n        _wDS('onload', 1);\r\n        sm2.onload.apply(window);\r\n        _wDS('onloadOK', 1);\r\n      }\r\n\r\n      if (sm2.waitForWindowLoad) {\r\n        event.add(window, 'load', initUserOnload);\r\n      }\r\n\r\n    }, 1);\r\n\r\n  };\r\n\r\n  detectFlash = function() {\r\n\r\n    /**\r\n     * Hat tip: Flash Detect library (BSD, (C) 2007) by Carl \"DocYes\" S. Yestrau\r\n     * http://featureblend.com/javascript-flash-detection-library.html / http://featureblend.com/license.txt\r\n     */\r\n\r\n    // this work has already been done.\r\n    if (hasFlash !== _undefined) return hasFlash;\r\n\r\n    var hasPlugin = false, n = navigator, obj, type, types, AX = window.ActiveXObject;\r\n\r\n    // MS Edge 14 throws an \"Unspecified Error\" because n.plugins is inaccessible due to permissions\r\n    var nP;\r\n\r\n    try {\r\n      nP = n.plugins;\r\n    } catch(e) {\r\n      nP = undefined;\r\n    }\r\n\r\n    if (nP && nP.length) {\r\n\r\n      type = 'application/x-shockwave-flash';\r\n      types = n.mimeTypes;\r\n\r\n      if (types && types[type] && types[type].enabledPlugin && types[type].enabledPlugin.description) {\r\n        hasPlugin = true;\r\n      }\r\n\r\n    } else if (AX !== _undefined && !ua.match(/MSAppHost/i)) {\r\n\r\n      // Windows 8 Store Apps (MSAppHost) are weird (compatibility?) and won't complain here, but will barf if Flash/ActiveX object is appended to the DOM.\r\n      try {\r\n        obj = new AX('ShockwaveFlash.ShockwaveFlash');\r\n      } catch(e) {\r\n        // oh well\r\n        obj = null;\r\n      }\r\n\r\n      hasPlugin = (!!obj);\r\n\r\n      // cleanup, because it is ActiveX after all\r\n      obj = null;\r\n\r\n    }\r\n\r\n    hasFlash = hasPlugin;\r\n\r\n    return hasPlugin;\r\n\r\n  };\r\n\r\n  featureCheck = function() {\r\n\r\n    var flashNeeded,\r\n        item,\r\n        formats = sm2.audioFormats,\r\n        // iPhone <= 3.1 has broken HTML5 audio(), but firmware 3.2 (original iPad) + iOS4 works.\r\n        isSpecial = (is_iDevice && !!(ua.match(/os (1|2|3_0|3_1)\\s/i)));\r\n\r\n    if (isSpecial) {\r\n\r\n      // has Audio(), but is broken; let it load links directly.\r\n      sm2.hasHTML5 = false;\r\n\r\n      // ignore flash case, however\r\n      sm2.html5Only = true;\r\n\r\n      // hide the SWF, if present\r\n      if (sm2.oMC) {\r\n        sm2.oMC.style.display = 'none';\r\n      }\r\n\r\n    } else if (sm2.useHTML5Audio) {\r\n\r\n        if (!sm2.html5 || !sm2.html5.canPlayType) {\r\n          sm2._wD('SoundManager: No HTML5 Audio() support detected.');\r\n          sm2.hasHTML5 = false;\r\n        }\r\n\r\n        // <d>\r\n        if (isBadSafari) {\r\n          sm2._wD(smc + 'Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id=32159 - ' + (!hasFlash ? ' would use flash fallback for MP3/MP4, but none detected.' : 'will use flash fallback for MP3/MP4, if available'), 1);\r\n        }\r\n        // </d>\r\n\r\n      }\r\n\r\n    if (sm2.useHTML5Audio && sm2.hasHTML5) {\r\n\r\n      // sort out whether flash is optional, required or can be ignored.\r\n\r\n      // innocent until proven guilty.\r\n      canIgnoreFlash = true;\r\n\r\n      for (item in formats) {\r\n\r\n        if (formats.hasOwnProperty(item)) {\r\n\r\n          if (formats[item].required) {\r\n\r\n            if (!sm2.html5.canPlayType(formats[item].type)) {\r\n\r\n              // 100% HTML5 mode is not possible.\r\n              canIgnoreFlash = false;\r\n              flashNeeded = true;\r\n\r\n            } else if (sm2.preferFlash && (sm2.flash[item] || sm2.flash[formats[item].type])) {\r\n\r\n              // flash may be required, or preferred for this format.\r\n              flashNeeded = true;\r\n\r\n            }\r\n\r\n          }\r\n\r\n        }\r\n\r\n      }\r\n\r\n    }\r\n\r\n    // sanity check...\r\n    if (sm2.ignoreFlash) {\r\n      flashNeeded = false;\r\n      canIgnoreFlash = true;\r\n    }\r\n\r\n    sm2.html5Only = (sm2.hasHTML5 && sm2.useHTML5Audio && !flashNeeded);\r\n\r\n    return (!sm2.html5Only);\r\n\r\n  };\r\n\r\n  parseURL = function(url) {\r\n\r\n    /**\r\n     * Internal: Finds and returns the first playable URL (or failing that, the first URL.)\r\n     * @param {string or array} url A single URL string, OR, an array of URL strings or {url:'/path/to/resource', type:'audio/mp3'} objects.\r\n     */\r\n\r\n    var i, j, urlResult = 0, result;\r\n\r\n    if (url instanceof Array) {\r\n\r\n      // find the first good one\r\n      for (i = 0, j = url.length; i < j; i++) {\r\n\r\n        if (url[i] instanceof Object) {\r\n\r\n          // MIME check\r\n          if (sm2.canPlayMIME(url[i].type)) {\r\n            urlResult = i;\r\n            break;\r\n          }\r\n\r\n        } else if (sm2.canPlayURL(url[i])) {\r\n\r\n          // URL string check\r\n          urlResult = i;\r\n          break;\r\n\r\n        }\r\n\r\n      }\r\n\r\n      // normalize to string\r\n      if (url[urlResult].url) {\r\n        url[urlResult] = url[urlResult].url;\r\n      }\r\n\r\n      result = url[urlResult];\r\n\r\n    } else {\r\n\r\n      // single URL case\r\n      result = url;\r\n\r\n    }\r\n\r\n    return result;\r\n\r\n  };\r\n\r\n\r\n  startTimer = function(oSound) {\r\n\r\n    /**\r\n     * attach a timer to this sound, and start an interval if needed\r\n     */\r\n\r\n    if (!oSound._hasTimer) {\r\n\r\n      oSound._hasTimer = true;\r\n\r\n      if (!mobileHTML5 && sm2.html5PollingInterval) {\r\n\r\n        if (h5IntervalTimer === null && h5TimerCount === 0) {\r\n\r\n          h5IntervalTimer = setInterval(timerExecute, sm2.html5PollingInterval);\r\n\r\n        }\r\n\r\n        h5TimerCount++;\r\n\r\n      }\r\n\r\n    }\r\n\r\n  };\r\n\r\n  stopTimer = function(oSound) {\r\n\r\n    /**\r\n     * detach a timer\r\n     */\r\n\r\n    if (oSound._hasTimer) {\r\n\r\n      oSound._hasTimer = false;\r\n\r\n      if (!mobileHTML5 && sm2.html5PollingInterval) {\r\n\r\n        // interval will stop itself at next execution.\r\n\r\n        h5TimerCount--;\r\n\r\n      }\r\n\r\n    }\r\n\r\n  };\r\n\r\n  timerExecute = function() {\r\n\r\n    /**\r\n     * manual polling for HTML5 progress events, ie., whileplaying()\r\n     * (can achieve greater precision than conservative default HTML5 interval)\r\n     */\r\n\r\n    var i;\r\n\r\n    if (h5IntervalTimer !== null && !h5TimerCount) {\r\n\r\n      // no active timers, stop polling interval.\r\n\r\n      clearInterval(h5IntervalTimer);\r\n\r\n      h5IntervalTimer = null;\r\n\r\n      return;\r\n\r\n    }\r\n\r\n    // check all HTML5 sounds with timers\r\n\r\n    for (i = sm2.soundIDs.length - 1; i >= 0; i--) {\r\n\r\n      if (sm2.sounds[sm2.soundIDs[i]].isHTML5 && sm2.sounds[sm2.soundIDs[i]]._hasTimer) {\r\n        sm2.sounds[sm2.soundIDs[i]]._onTimer();\r\n      }\r\n\r\n    }\r\n\r\n  };\r\n\r\n  catchError = function(options) {\r\n\r\n    options = (options !== _undefined ? options : {});\r\n\r\n    if (typeof sm2.onerror === 'function') {\r\n      sm2.onerror.apply(window, [{\r\n        type: (options.type !== _undefined ? options.type : null)\r\n      }]);\r\n    }\r\n\r\n    if (options.fatal !== _undefined && options.fatal) {\r\n      sm2.disable();\r\n    }\r\n\r\n  };\r\n\r\n  badSafariFix = function() {\r\n\r\n    // special case: \"bad\" Safari (OS X 10.3 - 10.7) must fall back to flash for MP3/MP4\r\n    if (!isBadSafari || !detectFlash()) {\r\n      // doesn't apply\r\n      return;\r\n    }\r\n\r\n    var aF = sm2.audioFormats, i, item;\r\n\r\n    for (item in aF) {\r\n\r\n      if (aF.hasOwnProperty(item)) {\r\n\r\n        if (item === 'mp3' || item === 'mp4') {\r\n\r\n          sm2._wD(sm + ': Using flash fallback for ' + item + ' format');\r\n          sm2.html5[item] = false;\r\n\r\n          // assign result to related formats, too\r\n          if (aF[item] && aF[item].related) {\r\n            for (i = aF[item].related.length - 1; i >= 0; i--) {\r\n              sm2.html5[aF[item].related[i]] = false;\r\n            }\r\n          }\r\n\r\n        }\r\n\r\n      }\r\n\r\n    }\r\n\r\n  };\r\n\r\n  /**\r\n   * Pseudo-private flash/ExternalInterface methods\r\n   * ----------------------------------------------\r\n   */\r\n\r\n  this._setSandboxType = function(sandboxType) {\r\n\r\n    // <d>\r\n    // Security sandbox according to Flash plugin\r\n    var sb = sm2.sandbox;\r\n\r\n    sb.type = sandboxType;\r\n    sb.description = sb.types[(sb.types[sandboxType] !== _undefined ? sandboxType : 'unknown')];\r\n\r\n    if (sb.type === 'localWithFile') {\r\n\r\n      sb.noRemote = true;\r\n      sb.noLocal = false;\r\n      _wDS('secNote', 2);\r\n\r\n    } else if (sb.type === 'localWithNetwork') {\r\n\r\n      sb.noRemote = false;\r\n      sb.noLocal = true;\r\n\r\n    } else if (sb.type === 'localTrusted') {\r\n\r\n      sb.noRemote = false;\r\n      sb.noLocal = false;\r\n\r\n    }\r\n    // </d>\r\n\r\n  };\r\n\r\n  this._externalInterfaceOK = function(swfVersion) {\r\n\r\n    // flash callback confirming flash loaded, EI working etc.\r\n    // swfVersion: SWF build string\r\n\r\n    if (sm2.swfLoaded) {\r\n      return;\r\n    }\r\n\r\n    var e;\r\n\r\n    debugTS('swf', true);\r\n    debugTS('flashtojs', true);\r\n    sm2.swfLoaded = true;\r\n    tryInitOnFocus = false;\r\n\r\n    if (isBadSafari) {\r\n      badSafariFix();\r\n    }\r\n\r\n    // complain if JS + SWF build/version strings don't match, excluding +DEV builds\r\n    // <d>\r\n    if (!swfVersion || swfVersion.replace(/\\+dev/i, '') !== sm2.versionNumber.replace(/\\+dev/i, '')) {\r\n\r\n      e = sm + ': Fatal: JavaScript file build \"' + sm2.versionNumber + '\" does not match Flash SWF build \"' + swfVersion + '\" at ' + sm2.url + '. Ensure both are up-to-date.';\r\n\r\n      // escape flash -> JS stack so this error fires in window.\r\n      setTimeout(function() {\r\n        throw new Error(e);\r\n      }, 0);\r\n\r\n      // exit, init will fail with timeout\r\n      return;\r\n\r\n    }\r\n    // </d>\r\n\r\n    // IE needs a larger timeout\r\n    setTimeout(init, isIE ? 100 : 1);\r\n\r\n  };\r\n\r\n  /**\r\n   * Private initialization helpers\r\n   * ------------------------------\r\n   */\r\n\r\n  createMovie = function(movieID, movieURL) {\r\n\r\n    // ignore if already connected\r\n    if (didAppend && appendSuccess) return false;\r\n\r\n    function initMsg() {\r\n\r\n      // <d>\r\n\r\n      var options = [],\r\n          title,\r\n          msg = [],\r\n          delimiter = ' + ';\r\n\r\n      title = 'SoundManager ' + sm2.version + (!sm2.html5Only && sm2.useHTML5Audio ? (sm2.hasHTML5 ? ' + HTML5 audio' : ', no HTML5 audio support') : '');\r\n\r\n      if (!sm2.html5Only) {\r\n\r\n        if (sm2.preferFlash) {\r\n          options.push('preferFlash');\r\n        }\r\n\r\n        if (sm2.useHighPerformance) {\r\n          options.push('useHighPerformance');\r\n        }\r\n\r\n        if (sm2.flashPollingInterval) {\r\n          options.push('flashPollingInterval (' + sm2.flashPollingInterval + 'ms)');\r\n        }\r\n\r\n        if (sm2.html5PollingInterval) {\r\n          options.push('html5PollingInterval (' + sm2.html5PollingInterval + 'ms)');\r\n        }\r\n\r\n        if (sm2.wmode) {\r\n          options.push('wmode (' + sm2.wmode + ')');\r\n        }\r\n\r\n        if (sm2.debugFlash) {\r\n          options.push('debugFlash');\r\n        }\r\n\r\n        if (sm2.useFlashBlock) {\r\n          options.push('flashBlock');\r\n        }\r\n\r\n      } else if (sm2.html5PollingInterval) {\r\n          options.push('html5PollingInterval (' + sm2.html5PollingInterval + 'ms)');\r\n        }\r\n\r\n      if (options.length) {\r\n        msg = msg.concat([options.join(delimiter)]);\r\n      }\r\n\r\n      sm2._wD(title + (msg.length ? delimiter + msg.join(', ') : ''), 1);\r\n\r\n      showSupport();\r\n\r\n      // </d>\r\n\r\n    }\r\n\r\n    if (sm2.html5Only) {\r\n\r\n      // 100% HTML5 mode\r\n      setVersionInfo();\r\n\r\n      initMsg();\r\n      sm2.oMC = id(sm2.movieID);\r\n      init();\r\n\r\n      // prevent multiple init attempts\r\n      didAppend = true;\r\n\r\n      appendSuccess = true;\r\n\r\n      return false;\r\n\r\n    }\r\n\r\n    // flash path\r\n    var remoteURL = (movieURL || sm2.url),\r\n    localURL = (sm2.altURL || remoteURL),\r\n    swfTitle = 'JS/Flash audio component (SoundManager 2)',\r\n    oTarget = getDocument(),\r\n    extraClass = getSWFCSS(),\r\n    isRTL = null,\r\n    html = doc.getElementsByTagName('html')[0],\r\n    oEmbed, oMovie, tmp, movieHTML, oEl, s, x, sClass;\r\n\r\n    isRTL = (html && html.dir && html.dir.match(/rtl/i));\r\n    movieID = (movieID === _undefined ? sm2.id : movieID);\r\n\r\n    function param(name, value) {\r\n      return '<param name=\"' + name + '\" value=\"' + value + '\" />';\r\n    }\r\n\r\n    // safety check for legacy (change to Flash 9 URL)\r\n    setVersionInfo();\r\n    sm2.url = normalizeMovieURL(overHTTP ? remoteURL : localURL);\r\n    movieURL = sm2.url;\r\n\r\n    sm2.wmode = (!sm2.wmode && sm2.useHighPerformance ? 'transparent' : sm2.wmode);\r\n\r\n    if (sm2.wmode !== null && (ua.match(/msie 8/i) || (!isIE && !sm2.useHighPerformance)) && navigator.platform.match(/win32|win64/i)) {\r\n      /**\r\n       * extra-special case: movie doesn't load until scrolled into view when using wmode = anything but 'window' here\r\n       * does not apply when using high performance (position:fixed means on-screen), OR infinite flash load timeout\r\n       * wmode breaks IE 8 on Vista + Win7 too in some cases, as of January 2011 (?)\r\n       */\r\n      messages.push(strings.spcWmode);\r\n      sm2.wmode = null;\r\n    }\r\n\r\n    oEmbed = {\r\n      name: movieID,\r\n      id: movieID,\r\n      src: movieURL,\r\n      quality: 'high',\r\n      allowScriptAccess: sm2.allowScriptAccess,\r\n      bgcolor: sm2.bgColor,\r\n      pluginspage: http + 'www.macromedia.com/go/getflashplayer',\r\n      title: swfTitle,\r\n      type: 'application/x-shockwave-flash',\r\n      wmode: sm2.wmode,\r\n      // http://help.adobe.com/en_US/as3/mobile/WS4bebcd66a74275c36cfb8137124318eebc6-7ffd.html\r\n      hasPriority: 'true'\r\n    };\r\n\r\n    if (sm2.debugFlash) {\r\n      oEmbed.FlashVars = 'debug=1';\r\n    }\r\n\r\n    if (!sm2.wmode) {\r\n      // don't write empty attribute\r\n      delete oEmbed.wmode;\r\n    }\r\n\r\n    if (isIE) {\r\n\r\n      // IE is \"special\".\r\n      oMovie = doc.createElement('div');\r\n      movieHTML = [\r\n        '<object id=\"' + movieID + '\" data=\"' + movieURL + '\" type=\"' + oEmbed.type + '\" title=\"' + oEmbed.title + '\" classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\" codebase=\"http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0\">',\r\n        param('movie', movieURL),\r\n        param('AllowScriptAccess', sm2.allowScriptAccess),\r\n        param('quality', oEmbed.quality),\r\n        (sm2.wmode ? param('wmode', sm2.wmode) : ''),\r\n        param('bgcolor', sm2.bgColor),\r\n        param('hasPriority', 'true'),\r\n        (sm2.debugFlash ? param('FlashVars', oEmbed.FlashVars) : ''),\r\n        '</object>'\r\n      ].join('');\r\n\r\n    } else {\r\n\r\n      oMovie = doc.createElement('embed');\r\n      for (tmp in oEmbed) {\r\n        if (oEmbed.hasOwnProperty(tmp)) {\r\n          oMovie.setAttribute(tmp, oEmbed[tmp]);\r\n        }\r\n      }\r\n\r\n    }\r\n\r\n    initDebug();\r\n    extraClass = getSWFCSS();\r\n    oTarget = getDocument();\r\n\r\n    if (oTarget) {\r\n\r\n      sm2.oMC = (id(sm2.movieID) || doc.createElement('div'));\r\n\r\n      if (!sm2.oMC.id) {\r\n\r\n        sm2.oMC.id = sm2.movieID;\r\n        sm2.oMC.className = swfCSS.swfDefault + ' ' + extraClass;\r\n        s = null;\r\n        oEl = null;\r\n\r\n        if (!sm2.useFlashBlock) {\r\n          if (sm2.useHighPerformance) {\r\n            // on-screen at all times\r\n            s = {\r\n              position: 'fixed',\r\n              width: '8px',\r\n              height: '8px',\r\n              // >= 6px for flash to run fast, >= 8px to start up under Firefox/win32 in some cases. odd? yes.\r\n              bottom: '0px',\r\n              left: '0px',\r\n              overflow: 'hidden'\r\n            };\r\n          } else {\r\n            // hide off-screen, lower priority\r\n            s = {\r\n              position: 'absolute',\r\n              width: '6px',\r\n              height: '6px',\r\n              top: '-9999px',\r\n              left: '-9999px'\r\n            };\r\n            if (isRTL) {\r\n              s.left = Math.abs(parseInt(s.left, 10)) + 'px';\r\n            }\r\n          }\r\n        }\r\n\r\n        if (isWebkit) {\r\n          // soundcloud-reported render/crash fix, safari 5\r\n          sm2.oMC.style.zIndex = 10000;\r\n        }\r\n\r\n        if (!sm2.debugFlash) {\r\n          for (x in s) {\r\n            if (s.hasOwnProperty(x)) {\r\n              sm2.oMC.style[x] = s[x];\r\n            }\r\n          }\r\n        }\r\n\r\n        try {\r\n\r\n          if (!isIE) {\r\n            sm2.oMC.appendChild(oMovie);\r\n          }\r\n\r\n          oTarget.appendChild(sm2.oMC);\r\n\r\n          if (isIE) {\r\n            oEl = sm2.oMC.appendChild(doc.createElement('div'));\r\n            oEl.className = swfCSS.swfBox;\r\n            oEl.innerHTML = movieHTML;\r\n          }\r\n\r\n          appendSuccess = true;\r\n\r\n        } catch(e) {\r\n\r\n          throw new Error(str('domError') + ' \\n' + e.toString());\r\n\r\n        }\r\n\r\n      } else {\r\n\r\n        // SM2 container is already in the document (eg. flashblock use case)\r\n        sClass = sm2.oMC.className;\r\n        sm2.oMC.className = (sClass ? sClass + ' ' : swfCSS.swfDefault) + (extraClass ? ' ' + extraClass : '');\r\n        sm2.oMC.appendChild(oMovie);\r\n\r\n        if (isIE) {\r\n          oEl = sm2.oMC.appendChild(doc.createElement('div'));\r\n          oEl.className = swfCSS.swfBox;\r\n          oEl.innerHTML = movieHTML;\r\n        }\r\n\r\n        appendSuccess = true;\r\n\r\n      }\r\n\r\n    }\r\n\r\n    didAppend = true;\r\n\r\n    initMsg();\r\n\r\n    // sm2._wD(sm + ': Trying to load ' + movieURL + (!overHTTP && sm2.altURL ? ' (alternate URL)' : ''), 1);\r\n\r\n    return true;\r\n\r\n  };\r\n\r\n  initMovie = function() {\r\n\r\n    if (sm2.html5Only) {\r\n      createMovie();\r\n      return false;\r\n    }\r\n\r\n    // attempt to get, or create, movie (may already exist)\r\n    if (flash) return false;\r\n\r\n    if (!sm2.url) {\r\n\r\n      /**\r\n       * Something isn't right - we've reached init, but the soundManager url property has not been set.\r\n       * User has not called setup({url: ...}), or has not set soundManager.url (legacy use case) directly before init time.\r\n       * Notify and exit. If user calls setup() with a url: property, init will be restarted as in the deferred loading case.\r\n       */\r\n\r\n       _wDS('noURL');\r\n       return false;\r\n\r\n    }\r\n\r\n    // inline markup case\r\n    flash = sm2.getMovie(sm2.id);\r\n\r\n    if (!flash) {\r\n\r\n      if (!oRemoved) {\r\n\r\n        // try to create\r\n        createMovie(sm2.id, sm2.url);\r\n\r\n      } else {\r\n\r\n        // try to re-append removed movie after reboot()\r\n        if (!isIE) {\r\n          sm2.oMC.appendChild(oRemoved);\r\n        } else {\r\n          sm2.oMC.innerHTML = oRemovedHTML;\r\n        }\r\n\r\n        oRemoved = null;\r\n        didAppend = true;\r\n\r\n      }\r\n\r\n      flash = sm2.getMovie(sm2.id);\r\n\r\n    }\r\n\r\n    if (typeof sm2.oninitmovie === 'function') {\r\n      setTimeout(sm2.oninitmovie, 1);\r\n    }\r\n\r\n    // <d>\r\n    flushMessages();\r\n    // </d>\r\n\r\n    return true;\r\n\r\n  };\r\n\r\n  delayWaitForEI = function() {\r\n\r\n    setTimeout(waitForEI, 1000);\r\n\r\n  };\r\n\r\n  rebootIntoHTML5 = function() {\r\n\r\n    // special case: try for a reboot with preferFlash: false, if 100% HTML5 mode is possible and useFlashBlock is not enabled.\r\n\r\n    window.setTimeout(function() {\r\n\r\n      complain(smc + 'useFlashBlock is false, 100% HTML5 mode is possible. Rebooting with preferFlash: false...');\r\n\r\n      sm2.setup({\r\n        preferFlash: false\r\n      }).reboot();\r\n\r\n      // if for some reason you want to detect this case, use an ontimeout() callback and look for html5Only and didFlashBlock == true.\r\n      sm2.didFlashBlock = true;\r\n\r\n      sm2.beginDelayedInit();\r\n\r\n    }, 1);\r\n\r\n  };\r\n\r\n  waitForEI = function() {\r\n\r\n    var p,\r\n        loadIncomplete = false;\r\n\r\n    if (!sm2.url) {\r\n      // No SWF url to load (noURL case) - exit for now. Will be retried when url is set.\r\n      return;\r\n    }\r\n\r\n    if (waitingForEI) {\r\n      return;\r\n    }\r\n\r\n    waitingForEI = true;\r\n    event.remove(window, 'load', delayWaitForEI);\r\n\r\n    if (hasFlash && tryInitOnFocus && !isFocused) {\r\n      // Safari won't load flash in background tabs, only when focused.\r\n      _wDS('waitFocus');\r\n      return;\r\n    }\r\n\r\n    if (!didInit) {\r\n      p = sm2.getMoviePercent();\r\n      if (p > 0 && p < 100) {\r\n        loadIncomplete = true;\r\n      }\r\n    }\r\n\r\n    setTimeout(function() {\r\n\r\n      p = sm2.getMoviePercent();\r\n\r\n      if (loadIncomplete) {\r\n        // special case: if movie *partially* loaded, retry until it's 100% before assuming failure.\r\n        waitingForEI = false;\r\n        sm2._wD(str('waitSWF'));\r\n        window.setTimeout(delayWaitForEI, 1);\r\n        return;\r\n      }\r\n\r\n      // <d>\r\n      if (!didInit) {\r\n\r\n        sm2._wD(sm + ': No Flash response within expected time. Likely causes: ' + (p === 0 ? 'SWF load failed, ' : '') + 'Flash blocked or JS-Flash security error.' + (sm2.debugFlash ? ' ' + str('checkSWF') : ''), 2);\r\n\r\n        if (!overHTTP && p) {\r\n\r\n          _wDS('localFail', 2);\r\n\r\n          if (!sm2.debugFlash) {\r\n            _wDS('tryDebug', 2);\r\n          }\r\n\r\n        }\r\n\r\n        if (p === 0) {\r\n\r\n          // if 0 (not null), probably a 404.\r\n          sm2._wD(str('swf404', sm2.url), 1);\r\n\r\n        }\r\n\r\n        debugTS('flashtojs', false, ': Timed out' + (overHTTP ? ' (Check flash security or flash blockers)' : ' (No plugin/missing SWF?)'));\r\n\r\n      }\r\n      // </d>\r\n\r\n      // give up / time-out, depending\r\n\r\n      if (!didInit && okToDisable) {\r\n\r\n        if (p === null) {\r\n\r\n          // SWF failed to report load progress. Possibly blocked.\r\n\r\n          if (sm2.useFlashBlock || sm2.flashLoadTimeout === 0) {\r\n\r\n            if (sm2.useFlashBlock) {\r\n\r\n              flashBlockHandler();\r\n\r\n            }\r\n\r\n            _wDS('waitForever');\r\n\r\n          } else if (!sm2.useFlashBlock && canIgnoreFlash) {\r\n\r\n            // no custom flash block handling, but SWF has timed out. Will recover if user unblocks / allows SWF load.\r\n            rebootIntoHTML5();\r\n\r\n          } else {\r\n\r\n            _wDS('waitForever');\r\n\r\n            // fire any regular registered ontimeout() listeners.\r\n            processOnEvents({\r\n              type: 'ontimeout',\r\n              ignoreInit: true,\r\n              error: {\r\n                type: 'INIT_FLASHBLOCK'\r\n              }\r\n            });\r\n\r\n          }\r\n\r\n        } else if (sm2.flashLoadTimeout === 0) {\r\n\r\n          // SWF loaded? Shouldn't be a blocking issue, then.\r\n\r\n          _wDS('waitForever');\r\n\r\n        } else if (!sm2.useFlashBlock && canIgnoreFlash) {\r\n\r\n          rebootIntoHTML5();\r\n\r\n        } else {\r\n\r\n          failSafely(true);\r\n\r\n        }\r\n\r\n      }\r\n\r\n    }, sm2.flashLoadTimeout);\r\n\r\n  };\r\n\r\n  handleFocus = function() {\r\n\r\n    function cleanup() {\r\n      event.remove(window, 'focus', handleFocus);\r\n    }\r\n\r\n    if (isFocused || !tryInitOnFocus) {\r\n      // already focused, or not special Safari background tab case\r\n      cleanup();\r\n      return true;\r\n    }\r\n\r\n    okToDisable = true;\r\n    isFocused = true;\r\n    _wDS('gotFocus');\r\n\r\n    // allow init to restart\r\n    waitingForEI = false;\r\n\r\n    // kick off ExternalInterface timeout, now that the SWF has started\r\n    delayWaitForEI();\r\n\r\n    cleanup();\r\n    return true;\r\n\r\n  };\r\n\r\n  flushMessages = function() {\r\n\r\n    // <d>\r\n\r\n    // SM2 pre-init debug messages\r\n    if (messages.length) {\r\n      sm2._wD('SoundManager 2: ' + messages.join(' '), 1);\r\n      messages = [];\r\n    }\r\n\r\n    // </d>\r\n\r\n  };\r\n\r\n  showSupport = function() {\r\n\r\n    // <d>\r\n\r\n    flushMessages();\r\n\r\n    var item, tests = [];\r\n\r\n    if (sm2.useHTML5Audio && sm2.hasHTML5) {\r\n      for (item in sm2.audioFormats) {\r\n        if (sm2.audioFormats.hasOwnProperty(item)) {\r\n          tests.push(item + ' = ' + sm2.html5[item] + (!sm2.html5[item] && needsFlash && sm2.flash[item] ? ' (using flash)' : (sm2.preferFlash && sm2.flash[item] && needsFlash ? ' (preferring flash)' : (!sm2.html5[item] ? ' (' + (sm2.audioFormats[item].required ? 'required, ' : '') + 'and no flash support)' : ''))));\r\n        }\r\n      }\r\n      sm2._wD('SoundManager 2 HTML5 support: ' + tests.join(', '), 1);\r\n    }\r\n\r\n    // </d>\r\n\r\n  };\r\n\r\n  initComplete = function(bNoDisable) {\r\n\r\n    if (didInit) return false;\r\n\r\n    if (sm2.html5Only) {\r\n      // all good.\r\n      _wDS('sm2Loaded', 1);\r\n      didInit = true;\r\n      initUserOnload();\r\n      debugTS('onload', true);\r\n      return true;\r\n    }\r\n\r\n    var wasTimeout = (sm2.useFlashBlock && sm2.flashLoadTimeout && !sm2.getMoviePercent()),\r\n        result = true,\r\n        error;\r\n\r\n    if (!wasTimeout) {\r\n      didInit = true;\r\n    }\r\n\r\n    error = {\r\n      type: (!hasFlash && needsFlash ? 'NO_FLASH' : 'INIT_TIMEOUT')\r\n    };\r\n\r\n    sm2._wD('SoundManager 2 ' + (disabled ? 'failed to load' : 'loaded') + ' (' + (disabled ? 'Flash security/load error' : 'OK') + ') ' + String.fromCharCode(disabled ? 10006 : 10003), disabled ? 2 : 1);\r\n\r\n    if (disabled || bNoDisable) {\r\n\r\n      if (sm2.useFlashBlock && sm2.oMC) {\r\n        sm2.oMC.className = getSWFCSS() + ' ' + (sm2.getMoviePercent() === null ? swfCSS.swfTimedout : swfCSS.swfError);\r\n      }\r\n\r\n      processOnEvents({\r\n        type: 'ontimeout',\r\n        error: error,\r\n        ignoreInit: true\r\n      });\r\n\r\n      debugTS('onload', false);\r\n      catchError(error);\r\n\r\n      result = false;\r\n\r\n    } else {\r\n\r\n      debugTS('onload', true);\r\n\r\n    }\r\n\r\n    if (!disabled) {\r\n\r\n      if (sm2.waitForWindowLoad && !windowLoaded) {\r\n\r\n        _wDS('waitOnload');\r\n        event.add(window, 'load', initUserOnload);\r\n\r\n      } else {\r\n\r\n        // <d>\r\n        if (sm2.waitForWindowLoad && windowLoaded) {\r\n          _wDS('docLoaded');\r\n        }\r\n        // </d>\r\n\r\n        initUserOnload();\r\n\r\n      }\r\n\r\n    }\r\n\r\n    return result;\r\n\r\n  };\r\n\r\n  /**\r\n   * apply top-level setupOptions object as local properties, eg., this.setupOptions.flashVersion -> this.flashVersion (soundManager.flashVersion)\r\n   * this maintains backward compatibility, and allows properties to be defined separately for use by soundManager.setup().\r\n   */\r\n\r\n  setProperties = function() {\r\n\r\n    var i,\r\n        o = sm2.setupOptions;\r\n\r\n    for (i in o) {\r\n\r\n      if (o.hasOwnProperty(i)) {\r\n\r\n        // assign local property if not already defined\r\n\r\n        if (sm2[i] === _undefined) {\r\n\r\n          sm2[i] = o[i];\r\n\r\n        } else if (sm2[i] !== o[i]) {\r\n\r\n          // legacy support: write manually-assigned property (eg., soundManager.url) back to setupOptions to keep things in sync\r\n          sm2.setupOptions[i] = sm2[i];\r\n\r\n        }\r\n\r\n      }\r\n\r\n    }\r\n\r\n  };\r\n\r\n\r\n  init = function() {\r\n\r\n    // called after onload()\r\n\r\n    if (didInit) {\r\n      _wDS('didInit');\r\n      return false;\r\n    }\r\n\r\n    function cleanup() {\r\n      event.remove(window, 'load', sm2.beginDelayedInit);\r\n    }\r\n\r\n    if (sm2.html5Only) {\r\n\r\n      if (!didInit) {\r\n        // we don't need no steenking flash!\r\n        cleanup();\r\n        sm2.enabled = true;\r\n        initComplete();\r\n      }\r\n\r\n      return true;\r\n\r\n    }\r\n\r\n    // flash path\r\n    initMovie();\r\n\r\n    try {\r\n\r\n      // attempt to talk to Flash\r\n      flash._externalInterfaceTest(false);\r\n\r\n      /**\r\n       * Apply user-specified polling interval, OR, if \"high performance\" set, faster vs. default polling\r\n       * (determines frequency of whileloading/whileplaying callbacks, effectively driving UI framerates)\r\n       */\r\n      setPolling(true, (sm2.flashPollingInterval || (sm2.useHighPerformance ? 10 : 50)));\r\n\r\n      if (!sm2.debugMode) {\r\n        // stop the SWF from making debug output calls to JS\r\n        flash._disableDebug();\r\n      }\r\n\r\n      sm2.enabled = true;\r\n      debugTS('jstoflash', true);\r\n\r\n      if (!sm2.html5Only) {\r\n        // prevent browser from showing cached page state (or rather, restoring \"suspended\" page state) via back button, because flash may be dead\r\n        // http://www.webkit.org/blog/516/webkit-page-cache-ii-the-unload-event/\r\n        event.add(window, 'unload', doNothing);\r\n      }\r\n\r\n    } catch(e) {\r\n\r\n      sm2._wD('js/flash exception: ' + e.toString());\r\n\r\n      debugTS('jstoflash', false);\r\n\r\n      catchError({\r\n        type: 'JS_TO_FLASH_EXCEPTION',\r\n        fatal: true\r\n      });\r\n\r\n      // don't disable, for reboot()\r\n      failSafely(true);\r\n\r\n      initComplete();\r\n\r\n      return false;\r\n\r\n    }\r\n\r\n    initComplete();\r\n\r\n    // disconnect events\r\n    cleanup();\r\n\r\n    return true;\r\n\r\n  };\r\n\r\n  domContentLoaded = function() {\r\n\r\n    if (didDCLoaded) return false;\r\n\r\n    didDCLoaded = true;\r\n\r\n    // assign top-level soundManager properties eg. soundManager.url\r\n    setProperties();\r\n\r\n    initDebug();\r\n\r\n    if (!hasFlash && sm2.hasHTML5) {\r\n\r\n      sm2._wD('SoundManager 2: No Flash detected' + (!sm2.useHTML5Audio ? ', enabling HTML5.' : '. Trying HTML5-only mode.'), 1);\r\n\r\n      sm2.setup({\r\n        useHTML5Audio: true,\r\n        // make sure we aren't preferring flash, either\r\n        // TODO: preferFlash should not matter if flash is not installed. Currently, stuff breaks without the below tweak.\r\n        preferFlash: false\r\n      });\r\n\r\n    }\r\n\r\n    testHTML5();\r\n\r\n    if (!hasFlash && needsFlash) {\r\n\r\n      messages.push(strings.needFlash);\r\n\r\n      // TODO: Fatal here vs. timeout approach, etc.\r\n      // hack: fail sooner.\r\n      sm2.setup({\r\n        flashLoadTimeout: 1\r\n      });\r\n\r\n    }\r\n\r\n    if (doc.removeEventListener) {\r\n      doc.removeEventListener('DOMContentLoaded', domContentLoaded, false);\r\n    }\r\n\r\n    initMovie();\r\n\r\n    return true;\r\n\r\n  };\r\n\r\n  domContentLoadedIE = function() {\r\n\r\n    if (doc.readyState === 'complete') {\r\n      domContentLoaded();\r\n      doc.detachEvent('onreadystatechange', domContentLoadedIE);\r\n    }\r\n\r\n    return true;\r\n\r\n  };\r\n\r\n  winOnLoad = function() {\r\n\r\n    // catch edge case of initComplete() firing after window.load()\r\n    windowLoaded = true;\r\n\r\n    // catch case where DOMContentLoaded has been sent, but we're still in doc.readyState = 'interactive'\r\n    domContentLoaded();\r\n\r\n    event.remove(window, 'load', winOnLoad);\r\n\r\n  };\r\n\r\n  // sniff up-front\r\n  detectFlash();\r\n\r\n  // focus and window load, init (primarily flash-driven)\r\n  event.add(window, 'focus', handleFocus);\r\n  event.add(window, 'load', delayWaitForEI);\r\n  event.add(window, 'load', winOnLoad);\r\n\r\n  if (doc.addEventListener) {\r\n\r\n    doc.addEventListener('DOMContentLoaded', domContentLoaded, false);\r\n\r\n  } else if (doc.attachEvent) {\r\n\r\n    doc.attachEvent('onreadystatechange', domContentLoadedIE);\r\n\r\n  } else {\r\n\r\n    // no add/attachevent support - safe to assume no JS -> Flash either\r\n    debugTS('onload', false);\r\n    catchError({\r\n      type: 'NO_DOM2_EVENTS',\r\n      fatal: true\r\n    });\r\n\r\n  }\r\n\r\n} // SoundManager()\r\n\r\n// SM2_DEFER details: http://www.schillmania.com/projects/soundmanager2/doc/getstarted/#lazy-loading\r\n\r\nif (window.SM2_DEFER === _undefined || !SM2_DEFER) {\r\n  soundManager = new SoundManager();\r\n}\r\n\r\n/**\r\n * SoundManager public interfaces\r\n * ------------------------------\r\n */\r\n\r\nif (typeof module === 'object' && module && typeof module.exports === 'object') {\r\n\r\n  /**\r\n   * commonJS module\r\n   */\r\n\r\n  module.exports.SoundManager = SoundManager;\r\n  module.exports.soundManager = soundManager;\r\n\r\n} else if (typeof define === 'function' && define.amd) {\r\n\r\n  /**\r\n   * AMD - requireJS\r\n   * basic usage:\r\n   * require([\"/path/to/soundmanager2.js\"], function(SoundManager) {\r\n   *   SoundManager.getInstance().setup({\r\n   *     url: '/swf/',\r\n   *     onready: function() { ... }\r\n   *   })\r\n   * });\r\n   *\r\n   * SM2_DEFER usage:\r\n   * window.SM2_DEFER = true;\r\n   * require([\"/path/to/soundmanager2.js\"], function(SoundManager) {\r\n   *   SoundManager.getInstance(function() {\r\n   *     var soundManager = new SoundManager.constructor();\r\n   *     soundManager.setup({\r\n   *       url: '/swf/',\r\n   *       ...\r\n   *     });\r\n   *     ...\r\n   *     soundManager.beginDelayedInit();\r\n   *     return soundManager;\r\n   *   })\r\n   * });\r\n   */\r\n\r\n  define(function() {\r\n    /**\r\n     * Retrieve the global instance of SoundManager.\r\n     * If a global instance does not exist it can be created using a callback.\r\n     *\r\n     * @param {Function} smBuilder Optional: Callback used to create a new SoundManager instance\r\n     * @return {SoundManager} The global SoundManager instance\r\n     */\r\n    function getInstance(smBuilder) {\r\n      if (!window.soundManager && smBuilder instanceof Function) {\r\n        var instance = smBuilder(SoundManager);\r\n        if (instance instanceof SoundManager) {\r\n          window.soundManager = instance;\r\n        }\r\n      }\r\n      return window.soundManager;\r\n    }\r\n    return {\r\n      constructor: SoundManager,\r\n      getInstance: getInstance\r\n    };\r\n  });\r\n\r\n}\r\n\r\n// standard browser case\r\n\r\n// constructor\r\nwindow.SoundManager = SoundManager;\r\n\r\n/**\r\n * note: SM2 requires a window global due to Flash, which makes calls to window.soundManager.\r\n * Flash may not always be needed, but this is not known until async init and SM2 may even \"reboot\" into Flash mode.\r\n */\r\n\r\n// public API, flash callbacks etc.\r\nwindow.soundManager = soundManager;\r\n\r\n}(window));\r\n","'use strict';\nvar PROPER_FUNCTION_NAME = require('../internals/function-name').PROPER;\nvar fails = require('../internals/fails');\nvar whitespaces = require('../internals/whitespaces');\n\nvar non = '\\u200B\\u0085\\u180E';\n\n// check that a method works with the correct list\n// of whitespaces and has a correct name\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    return !!whitespaces[METHOD_NAME]()\n      || non[METHOD_NAME]() !== non\n      || (PROPER_FUNCTION_NAME && whitespaces[METHOD_NAME].name !== METHOD_NAME);\n  });\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $trim = require('../internals/string-trim').trim;\nvar forcedStringTrimMethod = require('../internals/string-trim-forced');\n\n// `String.prototype.trim` method\n// https://tc39.es/ecma262/#sec-string.prototype.trim\n$({ target: 'String', proto: true, forced: forcedStringTrimMethod('trim') }, {\n  trim: function trim() {\n    return $trim(this);\n  }\n});\n"],"names":["BookReaderPlugin","br","_classCallCheck","this","options","key","value","Object","assign","pageContainer","$navBar","_regeneratorRuntime","e","t","r","prototype","n","hasOwnProperty","o","defineProperty","i","Symbol","a","iterator","c","asyncIterator","u","toStringTag","define","enumerable","configurable","writable","wrap","Generator","create","Context","makeInvokeMethod","tryCatch","type","arg","call","h","l","f","s","y","GeneratorFunction","GeneratorFunctionPrototype","p","d","getPrototypeOf","v","values","g","defineIteratorMethods","forEach","_invoke","AsyncIterator","invoke","_typeof","resolve","__await","then","callInvokeWithMethodAndArg","Error","done","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","return","TypeError","resultName","next","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","isNaN","length","displayName","isGeneratorFunction","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","keys","reverse","pop","prev","charAt","slice","stop","rval","handle","complete","finish","catch","delegateYield","asyncGeneratorStep","_defineProperties","_toPropertyKey","toPrimitive","String","_toPrimitive","PageChunk","leafIndex","chunkIndex","text","lineRects","_callee","pageChunkUrl","chunks","_context","$","ajax","url","applyVariables","pageIndex","cache","xhrFields","withCredentials","window","protected","_fromTextWrapperResponse","_fetch","arguments","apply","_next","_throw","_x","_x2","chunksResponse","map","correctedLineRects","_fixChunkRects","correctedText","_removeDanglingHyphens","rects","_rects","_slicedToArray","firstRect","secondRect","_firstRect","left","bottom","width","secondHeight","secondWidth","secondRight","replace","PageChunkIterator","pageCount","start","opts","DEFAULT_OPTS","_cursor","page","chunk","_bufferedPages","_bufferingPages","_cursorLock","_this","_nextUncontrolled","_this2","_decrementUncontrolled","AT_END","_recenterBuffer","_fetchPageChunks","_nextUncontrolled2","_this3","cursorChangePromise","prevPageChunks","index","Math","max","pageBufferSize","end","min","_removePageFromBuffer","_this4","_fetchPageChunksDirect","fetch","isAndroid","userAgent","undefined","navigator","test","COLUMN_TO_LANG_INDEX","searchForISO6391","language","columnsToSearch","langs","colI","column","split","x","toLowerCase","indexOf","hasLocalStorage","localStorage","_asyncToGenerator","AbstractTTSEngine","voice","getBestBookVoice","getVoices","bookLanguage","playing","paused","_chunkIterator","activeSound","playbackRate","events","on","updateBestVoice","trigger","numLeafs","onLoadingStart","step","fireEvent","pause","resume","_jumpBackward","all","decrement","voiceURI","off","find","setItem","concat","setVoice","newRate","setPlaybackRate","_step","_callee2","sound","playPromise","_context2","onDone","createSound","rate","load","onLoadingComplete","beforeChunkPlay","playSound","afterChunkPlay","loaded","play","voices","userLanguages","languages","bookLangVoices","filter","lang","startsWith","matchingUserLangs","getMatchingStoredVoice","getMatchingVoice","default","storedVoice","getItem","_step2","_iterator","_createForOfIteratorHelper","_ret","_loop","matchingVoices","err","_createClass","_callSuper","_getPrototypeOf","ReferenceError","_assertThisInitialized","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","Boolean","valueOf","_get","get","bind","_superPropBase","getOwnPropertyDescriptor","_setPrototypeOf","FestivalTTSEngine","_AbstractTTSEngine","_$$browser","audioFormat","browser","mozilla","festivalUrl","_inherits","localService","soundManager","setup","debugMode","preferFlash","useHTML5Audio","flashVersion","promise","match","iOSCaptureUserIntentHack","FestivalTTSSound","format","_iOSCaptureUserIntentHack","SILENCE_1MS","res","onfinish","destruct","supported","soundUrl","_finishResolver","onload","_onresume","onresume","sleep","_play","_callee3","_context3","mp3","ogg","WebTTSEngine","speechSynthesis","addEventListener","audio","Audio","SILENCE_6S_MP3","loop","src","mediaSession","metadata","MediaMetadata","title","bookTitle","artist","m","label","artwork","thumbnail","setActionHandler","jumpBackward","jumpForward","unshift","WebTTSSound","started","stopped","utterance","_lastEvents","boundary","_charIndex","_finishPromise","_this$voice","SpeechSynthesisUtterance","location","toString","console","log","ev","dispatchEvent","CustomEvent","_reload","wasPaused","recentEvent","target","charIndex","cancel","speak","isLocalVoice","isChrome","_chromePausingBugFix","endPromise","race","promisifyEvent","_finish","Event","_pause","pausePromise","pauseMightNotWork","timeoutPromise","isFirefox","_resume","_callee4","resumeMightNotWork","resumeMightNotFire","resumePromise","_context4","reload","_chromePausingBugFix2","_callee5","result","_context5","t0","en","ownKeys","getOwnPropertySymbols","_defineProperty","BookReader","TtsPlugin","_BookReaderPlugin","_len","args","Array","_key","enabled","remoteTtsUrl","server","bookPath","_ttsBoxesByIndex","TTSEngine","isSupported","engineName","festival","web","ttsEngine","getOwnPropertyDescriptors","defineProperties","_objectSpread","vars","showProgressPopup","removeProgressPopup","sendChunkFinishedAnalyticsEvent","eventNames","PostInit","click","toggle","init","renderBoxesInPageContainerLayer","$container","refs","$BRReadAloudToolbar","prepend","renderVoiceOption","join","voiceSortOrder","b","localeCompare","renderVoicesMenu","voicesMenu","empty","bookLanguages","sort","otherLanguages","append","val","show","hide","updateState","playPause","$rateSelector","parseFloat","tooltips","insertBefore","closest","_this$br$_plugins$aut","_plugins","autoplay","startTTSEngine","constModeThumb","mode","switchMode","constMode1up","addClass","sendAnalyticsEvent","currentIndex","book","getNumLeafs","isPlaying","toggleClass","togglePlayPause","removeClass","removeHilites","_beforeChunkPlay","maybeFlipToIndex","highlightChunk","scrollToChunk","_maybeFlipToIndex","constMode2up","jumpToIndex","_modes","mode2Up","mode2UpLit","_ref","_ref2","_Object$entries$_i","_Object$entries","_i","pageIndexString","boxes","getPage","getActivePageContainerElementsForIndex","container","entries","_$$last","last","scrollIntoView","block","isFullscreenActive","inline","behavior","getActivePageContainerElements","remove","action","archiveAnalytics","extraValues","mediaLanguage","sendEvent","registerPlugin","template","overrides","possibleFilters","APPLY_FILTERS","$0","$1","_expression$split$map2","trim","varName","filterNames","reduce","acc","cur","urlencode","encodeURIComponent","exports","jQuery","uaMatch","ua","exec","platform_match","matched","version","versionNumber","platform","parseInt","android","bb","blackberry","ipad","iphone","ipod","kindle","playbook","silk","mobile","cros","mac","linux","win","desktop","chrome","opr","safari","webkit","rv","iemobile","ie","edge","msedge","opera","jQBrowser","factory","_undefined","document","SoundManager","smURL","smID","setupOptions","debugFlash","useConsole","consoleOnly","waitForWindowLoad","bgColor","useHighPerformance","flashPollingInterval","html5PollingInterval","flashLoadTimeout","wmode","allowScriptAccess","useFlashBlock","forceUseGlobalHTML5Audio","ignoreMobileRestrictions","html5Test","noSWFCache","idPrefix","defaultOptions","autoLoad","autoPlay","from","loops","onid3","onerror","whileloading","onplay","onpause","whileplaying","onposition","onstop","multiShot","multiShotEvents","position","pan","stream","to","usePolicyFile","volume","flash9Options","onfailure","isMovieStar","usePeakData","useWaveformData","useEQData","onbufferchange","ondataerror","movieStarOptions","bufferTime","serverURL","onconnect","duration","audioFormats","required","mp4","related","opus","wav","flac","movieID","id","debugID","debugURLParam","movieURL","altURL","swfLoaded","oMC","sounds","soundIDs","muted","didFlashBlock","filePattern","filePatterns","flash8","flash9","features","buffering","peakData","waveformData","eqData","movieStar","sandbox","types","remote","localWithFile","localWithNetwork","localTrusted","description","noRemote","noLocal","html5","usingFlash","flash","html5Only","ignoreFlash","SMSound","doNothing","setProperties","fV","debugTS","_wDS","initComplete","mixin","extraOptions","addOnEvent","processOnEvents","initUserOnload","delayWaitForEI","waitForEI","rebootIntoHTML5","setVersionInfo","handleFocus","strings","initMovie","domContentLoaded","winOnLoad","didDCLoaded","getDocument","createMovie","catchError","setPolling","initDebug","disableObject","failSafely","normalizeMovieURL","str","flashBlockHandler","getSWFCSS","swfCSS","toggleDebug","loopFix","policyFix","complain","idCheck","startTimer","stopTimer","timerExecute","parseURL","canIgnoreFlash","featureCheck","html5OK","html5CanPlay","html5ErrorCodes","html5Ext","html5Unload","domContentLoadedIE","testHTML5","event","lastGlobalHTML5URL","hasFlash","detectFlash","badSafariFix","html5_events","showSupport","flushMessages","wrapCallback","didSetup","sm2","globalHTML5Audio","sm","smc","wl","href","doc","on_queue","debugOpen","didAppend","appendSuccess","didInit","disabled","windowLoaded","wdCount","debugLevels","oRemoved","oRemovedHTML","waitingForEI","initPending","h5TimerCount","h5IntervalTimer","messages","needsFlash","useGlobalHTML5Audio","idCounter","msecScale","is_iDevice","isIE","isWebkit","isSafari","isOpera","mobileHTML5","isBadSafari","hasConsole","isFocused","hasFocus","tryInitOnFocus","okToDisable","flashMIME","emptyURL","overHTTP","protocol","http","netStreamMimeTypes","netStreamTypes","netStreamPattern","RegExp","preferFlashCheck","kind","html5_event","oFn","_s","_a","_wD","h5","mimePattern","useAltURL","swfBox","swfDefault","swfError","swfTimedout","swfUnblocked","sm2Debug","highPerf","flashDebug","hasHTML5","canPlayType","noURL","ok","globalHTML5","ignoreMobile","mobileUA","beginDelayedInit","readyState","setTimeout","getMovie","movie_id","oOptions","_url","cs","cs_string","oSound","make","_setup_html5","_createSound","connected","destroySound","sID","_bFromSound","oS","_iO","unload","splice","onPosition","nPosition","oMethod","oScope","clearOnPosition","overloaded","allowOverride","setPosition","nMsecOffset","stopAll","pauseAll","resumeAll","togglePause","setPan","nPan","setVolume","nVol","j","mute","muteAll","unmute","unmuteAll","toggleMute","getMemoryUse","ram","_getMemoryUse","disable","bNoDisable","canPlayMIME","sMIME","canPlayURL","sURL","canPlayLink","oLink","getSoundById","_suppressDebug","onready","sType","ontimeout","_writeDebug","sText","sTypeOrObject","oItem","createElement","className","appendChild","createTextNode","style","fontWeight","color","firstChild","alert","_debug","reboot","resetEvents","excludeInit","k","innerHTML","parentNode","removeChild","fired","getMoviePercent","PercentLoaded","resetProperties","add_html5_events","remove_html5_events","stop_html5_timer","start_html5_timer","attachOnPosition","detachOnPosition","applyFromTo","lastHTML5State","urlOmitted","onplay_called","onPositionItems","onPositionFired","lastURL","time","instanceOptions","isHTML5","id3","playState","_called_load","_html5_canplay","autobuffer","preload","_load","fatal","_unload","_bFromSM","_destroySound","_updatePlayState","fN","audioClone","onended","oncanplay","startOK","getAutoPlay","setAutoPlay","substr","lastIndexOf","instanceCount","_oncanplay","_onfinish","currentTime","add","_start","onplayerror","bAll","originalPosition","_onbufferchange","_resetOnPosition","_onTimer","_stop","_setAutoPlay","normalizedRate","message","position1K","offset","toFixed","_setPosition","_bCallFlash","bInstanceOnly","_setPan","_bInstanceOnly","_setVolume","hasIO","scope","_processOnPosition","item","op","retainPosition","_hasTimer","bytesLoaded","bytesTotal","durationEstimate","buffered","right","failures","isBuffering","bForce","isNew","_get_html5_duration","_whileplaying","Infinity","_apply_loop","nLoops","sameURL","dURL","decodeURI","_added_events","oEvt","removeEventListener","_onload","nSuccess","loadOK","_onerror","errorCode","nIsBuffering","_onsuspend","onsuspend","_onfailure","msg","level","code","_onwarning","onwarning","io_onfinish","_whileloading","nBytesLoaded","nBytesTotal","nDuration","nBufferLength","floor","bufferLength","oPeakData","oWaveformDataLeft","oWaveformDataRight","oEQData","eqLeft","leftPeak","rightPeak","leftEQ","rightEQ","_oncaptiondata","oData","captiondata","oncaptiondata","_onmetadata","oMDProps","oMDData","onmetadata","_onid3","oID3Props","oID3Data","_onconnect","bSuccess","_ondataerror","sError","body","getElementsByTagName","getElementById","oMain","oAdd","o2","o1","callback","oParent","hasParent","bonusOptions","Function","old","evt","getArgs","oArgs","len","element","shift","abort","canplay","ee","canplaythrough","durationchange","ended","error","loadeddata","_loaded","loadedmetadata","loadstart","fromCharCode","progress","progStr","isProgress","ranges","total","ratechange","suspend","stalled","timeupdate","waiting","iO","oAudio","_called_unload","fileExt","mime","aF","lookup","support","cp","canPlay","isOK","notReady","notOK","domError","spcWmode","swf404","tryDebug","checkSWF","localFail","waitFocus","waitForever","waitSWF","needFunction","badID","currentObj","waitOnload","docLoaded","onloadOK","secNote","badRemove","shutdown","queue","smError","fbTimeout","fbLoaded","fbHandler","manURL","onURL","badFV","as2loop","noNSLoop","needfl9","mfTimeout","needFlash","gotFocus","policy","setupError","setupUndef","setupLate","sm2Loaded","sstr","sOpt","sPre","sMsg","warn","oProp","Date","getTime","isDebug","bPolling","bHighPerformance","_setPolling","oD","oDebug","oTarget","oToggle","tmp","height","lineHeight","margin","textAlign","border","cursor","background","zIndex","onclick","display","e2","errorLevel","oT","sEventType","sMessage","sm2Debugger","handleEvent","css","ignoreInit","status","success","srcQueue","canRetry","obj","nP","hasPlugin","AX","ActiveXObject","plugins","mimeTypes","enabledPlugin","flashNeeded","formats","urlResult","setInterval","clearInterval","_setSandboxType","sandboxType","sb","_externalInterfaceOK","swfVersion","initMsg","isRTL","oEmbed","oMovie","movieHTML","oEl","sClass","remoteURL","localURL","extraClass","html","param","dir","quality","bgcolor","pluginspage","hasPriority","FlashVars","setAttribute","overflow","top","abs","oninitmovie","loadIncomplete","cleanup","tests","_externalInterfaceTest","_disableDebug","detachEvent","attachEvent","SM2_DEFER","module","getInstance","smBuilder","instance","PROPER_FUNCTION_NAME","fails","whitespaces","METHOD_NAME","$trim","proto","forced","forcedStringTrimMethod"],"sourceRoot":""}