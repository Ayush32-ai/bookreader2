{"version":3,"file":"plugins/plugin.experiments.js","mappings":"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","sources":["webpack://@internetarchive/bookreader/./node_modules/core-js/modules/es.object.from-entries.js","webpack://@internetarchive/bookreader/./src/BookReaderPlugin.js","webpack://@internetarchive/bookreader/./src/plugins/plugin.experiments.js"],"sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar iterate = require('../internals/iterate');\nvar createProperty = require('../internals/create-property');\n\n// `Object.fromEntries` method\n// https://github.com/tc39/proposal-object-from-entries\n$({ target: 'Object', stat: true }, {\n  fromEntries: function fromEntries(iterable) {\n    var obj = {};\n    iterate(iterable, function (k, v) {\n      createProperty(obj, k, v);\n    }, { AS_ENTRIES: true });\n    return obj;\n  }\n});\n","// @ts-check\n/** @typedef {import(\"./BookReader.js\").default} BookReader */\n\n/**\n * @template TOptions\n */\nexport class BookReaderPlugin {\n  /**\n   * @param {BookReader} br\n   */\n  constructor(br) {\n    /** @type {BookReader} */\n    this.br = br;\n    /** @type {TOptions} */\n    this.options;\n  }\n\n  /**\n   * @abstract\n   * @param {TOptions} options\n   **/\n  setup(options) {\n    this.options = Object.assign({}, this.options, options);\n  }\n\n  /** @abstract */\n  init() {}\n\n  /**\n   * @abstract\n   * @protected\n   * @param {import (\"./BookReader/PageContainer.js\").PageContainer} pageContainer\n   */\n  _configurePageContainer(pageContainer) {\n  }\n\n  /**\n   * @abstract\n   * @protected\n   * @param {JQuery<HTMLElement>} $toolbarElement\n   */\n  _configureToolbar($toolbarElement) {\n  }\n\n  /** @abstract @protected */\n  _bindNavigationHandlers() {}\n\n  /**\n   * @param {JQuery<HTMLElement>} $navBar\n   */\n  extendNavBar($navBar) {}\n}\n","// @ts-check\nimport { css, html, LitElement } from 'lit';\nimport { BookReaderPlugin } from '../BookReaderPlugin.js';\nimport { customElement, property, state } from 'lit/decorators.js';\nimport { sleep } from '../BookReader/utils.js';\n\n// @ts-ignore\nconst BookReader = /** @type {typeof import('@/src/BookReader.js').default} */(window.BookReader);\n\nclass ExperimentModel {\n  /** @type {string} test */\n  name;\n  /** @type {string} */\n  title;\n  /** @type {string} */\n  description;\n  /** @type {string} */\n  icon;\n  /** @type {boolean} */\n  enabled;\n  /** @type {string} */\n  learnMore;\n\n  assetRoot = '/BookReader/';\n\n  enabledLoading = false;\n\n  /**\n   * @param {string} path\n   */\n  buildAssetPath(path) {\n    return `${this.assetRoot}${path}`;\n  }\n\n  /**\n   * @param {object} param0\n   * @param {boolean} param0.manual Whether the experiment was enabled manually\n   */\n  async enable({ manual }) { }\n  async disable() { }\n}\n\nexport class ExperimentsPlugin extends BookReaderPlugin {\n  options = {\n    enabled: true,\n\n    /** Where the state of this plugin is saved in localStorage */\n    localStorageKey: 'BrExperiments',\n  }\n\n  /** @type {ExperimentModel[]} */\n  experiments = [\n    new class extends ExperimentModel {\n      name = 'hypothesis';\n      title = 'Hypothes.is';\n      description = 'Create public, collaborative, or fully private annotations on books and the web.';\n      learnMore = 'https://web.hypothes.is/about/';\n      icon = 'images/hypothesis.ico';\n      enabled = false;\n\n      async enable({ manual = false }) {\n        // Hypothesis configs ; see https://h.readthedocs.io/projects/client/en/latest/publishers/config.html\n        const configScript = document.createElement('script');\n        configScript.type = 'application/json';\n        configScript.className = 'js-hypothesis-config';\n        configScript.textContent = JSON.stringify({\n          // Open the sidebar if this is the first time enabling\n          openSidebar: manual,\n          assetRoot: this.buildAssetPath('hypothesis/'),\n        });\n\n        document.head.appendChild(configScript);\n        return importAsScript(this.buildAssetPath('hypothesis/build/boot.js'));\n        // For testing\n        // return importAsScript('http://localhost:3001/hypothesis');\n      }\n\n      async disable() {\n        // need to reload to remove the Hypothesis script\n        // Sleep so that the event loop can finish processing before the reload\n        sleep(0).then(() => {\n          window.location.reload();\n        });\n      }\n    }(),\n  ]\n\n  /** @type {BrExperimentsPanel} */\n  _panel;\n\n  async init() {\n    if (!this.options.enabled) {\n      return;\n    }\n\n    for (const experiment of this.experiments) {\n      // TODO: imagesBaseURL should be replaced with assetRoot everywhere\n      experiment.assetRoot = this.br.options.imagesBaseURL.replace(/images\\/$/, '');\n      experiment.icon = experiment.buildAssetPath(experiment.icon);\n    }\n\n    this._loadExperimentStates();\n    await Promise.resolve();\n    this._render();\n  }\n\n  _loadExperimentStates() {\n    const savedStates = JSON.parse(localStorage.getItem(this.options.localStorageKey) || '{}');\n    this.experiments.forEach(experiment => {\n      if (savedStates[experiment.name] !== undefined) {\n        experiment.enabled = savedStates[experiment.name];\n        if (experiment.enabled) {\n          experiment.enable({ manual: false });\n        }\n      }\n    });\n  }\n\n  _saveExperimentStates() {\n    const states = Object.fromEntries(\n      this.experiments.map(experiment => [experiment.name, experiment.enabled]),\n    );\n    localStorage.setItem(this.options.localStorageKey, JSON.stringify(states));\n  }\n\n  /**\n   * @param {ExperimentModel} experiment\n   * @param {boolean} enabled\n   */\n  async _toggleExperiment(experiment, enabled) {\n    experiment.enabledLoading = true;\n    this.br.plugins.archiveAnalytics?.sendEvent(`BRExperiment-${experiment.name}`, enabled ? 'Enable' : 'Disable');\n    this._panel.requestUpdate();\n\n    if (enabled) {\n      await experiment.enable({ manual: true });\n    } else {\n      await experiment.disable();\n    }\n    experiment.enabledLoading = false;\n    experiment.enabled = enabled;\n    this._panel.requestUpdate();\n  }\n\n  _render() {\n    this.br.shell.menuProviders['experiments'] = {\n      id: 'experiments',\n      // https://icon-sets.iconify.design/hugeicons/?icon-filter=eco-lab-02&query=lab\n      icon: html`\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"34\" viewBox=\"0 0 24 24\"><path fill=\"currentColor\" d=\"M10 5.75h1.25v2.5H9.5c-.41 0-.75.34-.75.75s.34.75.75.75h.25v1.96A5.72 5.72 0 0 0 6.25 17c0 3.17 2.58 5.75 5.75 5.75s5.75-2.58 5.75-5.75c0-2.33-1.39-4.4-3.5-5.29V9.75h.25c.41 0 .75-.34.75-.75s-.34-.75-.75-.75h-1.75v-1.5H14c1.52 0 2.75-1.23 2.75-2.75V3c0-.41-.34-.75-.75-.75h-2c-.579 0-1.115.178-1.558.483A2.75 2.75 0 0 0 10 1.25H8c-.41 0-.75.34-.75.75v1c0 1.52 1.23 2.75 2.75 2.75m2.75-.5V5c0-.69.56-1.25 1.25-1.25h1.25V4c0 .69-.56 1.25-1.25 1.25zm-1.5 6.98V9.75h1.5v2.48c0 .33.22.62.53.72c1.77.56 2.97 2.19 2.97 4.06A4.26 4.26 0 0 1 12 21.26a4.26 4.26 0 0 1-4.25-4.25c0-1.87 1.19-3.5 2.97-4.06c.32-.1.53-.39.53-.72m-2.5-9.48H10c.69 0 1.25.56 1.25 1.25v.25H10c-.69 0-1.25-.56-1.25-1.25z\" color=\"currentColor\"/></svg>\n      `,\n      label: 'Experiments',\n      component: html`<br-experiments-panel\n        .experiments=\"${this.experiments}\"\n        @connected=\"${e => this._panel = e.target}\"\n        @toggle=\"${async e => {\n        await this._toggleExperiment(e.detail.experiment, e.detail.enabled);\n        this._saveExperimentStates();\n      }}\"\n      />`,\n    };\n    this.br.shell.updateMenuContents();\n  }\n}\nBookReader?.registerPlugin('experiments', ExperimentsPlugin);\n\n@customElement('br-experiments-panel')\nexport class BrExperimentsPanel extends LitElement {\n\n  /** @type {ExperimentModel[]} */\n  @property({ type: Array }) experiments = [];\n\n  render() {\n    return html`\n      <div style=\"padding: 10px\">\n        ${this.experiments.map(\n      experiment => html`\n        <br-experiment-toggle\n          .icon=\"${experiment.icon}\"\n          .title=\"${experiment.title}\"\n          .description=\"${experiment.description}\"\n          .enabled=\"${experiment.enabled}\"\n          .loading=\"${experiment.enabledLoading}\"\n          .learnMore=\"${experiment.learnMore}\"\n          @toggle=\"${e => this._dispatchToggle(experiment, e.detail.enabled)}\"\n        ></br-experiment-toggle>\n      `,\n    )}\n      </div>\n    `;\n  }\n\n  /**\n   * @param {ExperimentModel} experiment\n   * @param {boolean} enabled\n   */\n  async _dispatchToggle(experiment, enabled) {\n    this.dispatchEvent(new CustomEvent('toggle', {\n      detail: { experiment, enabled },\n    }));\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    this.dispatchEvent(new CustomEvent('connected'));\n  }\n}\n\n@customElement('br-experiment-toggle')\nexport class BrExperimentToggle extends LitElement {\n  @property({ type: String }) icon = '';\n  @property({ type: String }) title = '';\n  @property({ type: String }) description = '';\n  @property({ type: Boolean }) enabled = false;\n  @property({ type: Boolean }) loading = false;\n  @property({ type: String }) learnMore = '';\n\n  /**\n   * We want to disable the button immediately if loading, but only display\n   * the loading indicator after 200ms.\n   */\n  @state() _longLoading = false;\n\n  /** @override */\n  update(changedProperties) {\n    super.update(changedProperties);\n    if (changedProperties.has('loading')) {\n      if (this.loading) {\n        sleep(500).then(() => {\n          if (this.loading) {\n            this._longLoading = true;\n            this.requestUpdate();\n          }\n        });\n      } else {\n        this._longLoading = false;\n      }\n    }\n  }\n\n  render() {\n    return html`\n      <div class=\"experiment-card\">\n        <div style=\"display: flex; align-items: center; gap: 10px;\">\n          <img src=\"${this.icon}\" style=\"width: 20px; height: 20px;\" alt=\"\" />\n          <div style=\"flex-grow: 1; font-weight: bold;\">${this.title}</div>\n        </div>\n        <p style=\"opacity: 0.9\">\n          ${this.description}\n          <a href=\"${this.learnMore}\" target=\"_blank\">Learn more</a>.\n        </p>\n        <div style=\"display: flex\">\n          <div style=\"flex-grow: 1;\"></div>\n          <button @click=\"${this._dispatchToggle}\" .disabled=\"${this.loading}\">\n            ${this._longLoading ? 'Loading…' : this.enabled ? 'Disable' : 'Enable'}\n          </button>\n        </div>\n      </div>\n    `;\n  }\n\n  static get styles() {\n    return css`\n      .experiment-card {\n        border-radius: 8px;\n        background-color: #fff2;\n        padding: 10px;\n        display: flex;\n        flex-direction: column;\n      }\n\n      .experiment-card p {\n        margin: 6px 0;\n      }\n    `;\n  }\n\n  _dispatchToggle() {\n    this.dispatchEvent(new CustomEvent('toggle', { detail: { enabled: !this.enabled } }));\n  }\n}\n\n/**\n * @param {string} url\n */\nasync function importAsScript(url) {\n  return new Promise((resolve, reject) => {\n    const script = document.createElement('script');\n    script.src = url;\n    script.onload = () => resolve();\n    script.onerror = () => reject(new Error(`Failed to load script: ${url}`));\n    document.head.appendChild(script);\n  });\n}\n"],"names":["$","iterate","createProperty","target","stat","fromEntries","iterable","obj","k","v","AS_ENTRIES","BookReaderPlugin","br","_classCallCheck","this","options","key","value","Object","assign","pageContainer","$toolbarElement","$navBar","_regeneratorRuntime","e","t","r","prototype","n","hasOwnProperty","o","defineProperty","i","Symbol","a","iterator","c","asyncIterator","u","toStringTag","define","enumerable","configurable","writable","wrap","Generator","create","Context","makeInvokeMethod","tryCatch","type","arg","call","h","l","f","s","y","GeneratorFunction","GeneratorFunctionPrototype","p","d","getPrototypeOf","values","g","defineIteratorMethods","forEach","_invoke","AsyncIterator","invoke","_typeof","resolve","__await","then","callInvokeWithMethodAndArg","Error","done","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","return","TypeError","resultName","next","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","isNaN","length","displayName","isGeneratorFunction","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","keys","reverse","pop","prev","charAt","slice","stop","rval","handle","complete","finish","catch","delegateYield","asyncGeneratorStep","_asyncToGenerator","arguments","apply","_next","_throw","_defineProperties","_toPropertyKey","_createClass","_defineProperty","toPrimitive","String","_toPrimitive","BookReader","window","ExperimentModel","path","concat","assetRoot","_enable","_callee","_ref","_context","manual","_x","_disable","_callee2","_context2","ExperimentsPlugin","_BookReaderPlugin","_this","_len","args","Array","_key","_callSuper","enabled","localStorageKey","_ExperimentModel2","_class","_this2","_len2","_key2","_inherits","_enable2","_callee3","_ref2","_ref2$manual","configScript","_context3","document","createElement","className","textContent","JSON","stringify","openSidebar","buildAssetPath","head","appendChild","importAsScript","_x2","_disable2","_callee4","_context4","sleep","location","reload","_init","_callee5","_iterator","_step","experiment","_context5","_createForOfIteratorHelper","experiments","imagesBaseURL","replace","icon","err","_loadExperimentStates","_render","savedStates","parse","localStorage","getItem","undefined","enable","states","map","setItem","_toggleExperiment2","_callee6","_this$br$plugins$arch","_context6","enabledLoading","plugins","archiveAnalytics","sendEvent","_panel","requestUpdate","disable","_x3","_x4","_this3","shell","menuProviders","id","html","_templateObject","_taggedTemplateLiteral","label","component","_templateObject2","_ref3","_callee7","_context7","_toggleExperiment","detail","_saveExperimentStates","_x5","updateMenuContents","_x8","_importAsScript","_callee9","url","_context9","reject","script","src","onload","onerror","registerPlugin","_decorate","customElement","_initialize","_LitElement","_dispatchToggle2","BrExperimentsPanel","_LitElement2","_this4","_len3","_key3","F","kind","decorators","property","_this5","_templateObject3","_templateObject4","title","description","learnMore","_dispatchToggle","_callee8","_context8","dispatchEvent","CustomEvent","_x6","_x7","_superPropGet","LitElement","_initialize2","_LitElement3","BrExperimentToggle","_LitElement4","_this6","_len4","_key4","Boolean","state","changedProperties","_this7","has","loading","_longLoading","_templateObject5","static","css","_templateObject6"],"sourceRoot":""}